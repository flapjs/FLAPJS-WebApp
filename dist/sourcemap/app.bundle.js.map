{"version":3,"sources":["webpack:///./src/app/config.js","webpack:///./src/app/modules/abstract/exporter/AbstractGraphExporter.js","webpack:///./src/app/modules/abstract/exporter/GraphImporter.js","webpack:///./src/app/icons/flat/PNGIcon.js","webpack:///./src/app/icons/flat/JPGIcon.js","webpack:///./src/app/modules/abstract/exporter/GraphImageExporter.js","webpack:///./src/app/modules/abstract/panels/exporting/ExportingPanel.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/system/styleopt/StyleOptionRegistry.js","webpack:///./src/app/system/styleopt/components/StyleInput.js","webpack:///./src/app/modules/abstract/panels/options/OptionGroup.js","webpack:///./src/app/modules/abstract/panels/options/OptionHotkey.js","webpack:///./src/app/modules/abstract/panels/options/OptionsPanel.js","webpack:///./src/app/modules/abstract/AbstractModule.js","webpack:///./src/app/router.js","webpack:///./src/app/content/HotKeys.js","webpack:///./src/app/content/toolbar/UploadButton.js","webpack:///./src/app/content/toolbar/HelpButton.js","webpack:///./src/app/content/toolbar/MachineName.js","webpack:///./src/app/icons/PageNewIcon.js","webpack:///./src/app/icons/HelpIcon.js","webpack:///./src/app/icons/LanguageIcon.js","webpack:///./src/app/icons/OfflineIcon.js","webpack:///./src/app/icons/BugReportIcon.js","webpack:///./src/app/content/drawer/DrawerExpander.js","webpack:///./src/app/content/drawer/Drawer.js","webpack:///./src/app/content/toolbar/Toolbar.js","webpack:///./src/app/content/workspace/Subtitle.js","webpack:///./src/app/content/workspace/Workspace.js","webpack:///./src/app/tutorial/Tutorial.js","webpack:///./src/app/content/App.js","webpack:///./src/app/landing/components/Logo.js","webpack:///./src/app/landing/components/Quote.js","webpack:///./src/app/landing/components/LandingPage.js","webpack:///./src/app/index.js","webpack:///./src/app/icons/IconToggle.js","webpack:///./src/app/icons/DropDownIcon.js","webpack:///./src/app/icons/UploadIcon.js","webpack:///./src/app/icons/SaveIcon.js","webpack:///./src/app/icons/UndoIcon.js","webpack:///./src/app/icons/RedoIcon.js","webpack:///./src/app/system/undomanager/UndoManager.js","webpack:///./src/app/system/formattedinput/FormattedInput.js","webpack:///./src/app/modules/fsa/panels/overview/infoblock/InfoBlock.js","webpack:///./src/app/icons/BoxAddIcon.js","webpack:///./src/app/icons/TriangleIcon.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StateTag.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StatesList.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetTag.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetList.js","webpack:///./src/app/machine/FSA.js","webpack:///./src/app/machine/Symbols.js","webpack:///./src/app/machine/NFA.js","webpack:///./src/app/modules/fsa/panels/overview/transitiontable/TransitionTable.js","webpack:///./src/app/modules/fsa/panels/overview/transitionfunction/TransitionFunction.js","webpack:///./src/app/modules/fsa/panels/overview/formaldefinition/FormalDefinition.js","webpack:///./src/app/modules/fsa/panels/overview/OverviewPanel.js","webpack:///./src/app/machine/util/solveNFA.js","webpack:///./src/app/machine/DFA.js","webpack:///./src/app/modules/fsa/testing/TestMode.js","webpack:///./src/app/modules/fsa/testing/TestingInputList.js","webpack:///./src/app/modules/fsa/testing/TestingManager.js","webpack:///./src/app/icons/AddIcon.js","webpack:///./src/app/icons/RemoveIcon.js","webpack:///./src/app/icons/SuccessIcon.js","webpack:///./src/app/icons/FailureIcon.js","webpack:///./src/app/icons/RunningManIcon.js","webpack:///./src/app/modules/fsa/panels/testing/StatusButton.js","webpack:///./src/app/modules/fsa/panels/testing/TestingInput.js","webpack:///./src/app/modules/fsa/panels/testing/components/UploadTestButton.js","webpack:///./src/app/icons/PageNewContentIcon.js","webpack:///./src/app/icons/CloseIcon.js","webpack:///./src/app/modules/fsa/panels/testing/TestingPanel.js","webpack:///./src/app/modules/fsa/notifications/NFAToDFAConversionWarningMessage.js","webpack:///./src/app/modules/fsa/panels/analysis/AnalysisPanel.js","webpack:///./src/app/modules/fsa/panels/about/AboutPanel.js","webpack:///./src/app/modules/abstract/AbstractInputController.js","webpack:///./src/app/modules/fsa/controller/GraphPicker.js","webpack:///./src/app/graph/GraphElement.js","webpack:///./src/app/graph/GraphNode.js","webpack:///./src/app/modules/fsa/graph/FSANode.js","webpack:///./src/app/graph/GraphEdge.js","webpack:///./src/app/graph/QuadraticEdge.js","webpack:///./src/app/modules/fsa/graph/FSAEdge.js","webpack:///./src/app/modules/fsa/controller/InputController.js","webpack:///./src/app/modules/abstract/AbstractGraphController.js","webpack:///./src/app/util/Eventable.js","webpack:///./src/app/modules/fsa/graph/GraphLayout.js","webpack:///./src/app/graph/NodalGraph.js","webpack:///./src/app/modules/fsa/graph/FSAGraph.js","webpack:///./src/app/modules/fsa/controller/GraphController.js","webpack:///./src/app/machine/util/convertNFA.js","webpack:///./src/app/modules/fsa/controller/MachineController.js","webpack:///./src/app/modules/fsa/renderer/NodeRenderer.js","webpack:///./src/app/modules/fsa/renderer/EdgeRenderer.js","webpack:///./src/app/modules/fsa/renderer/InitialMarkerRenderer.js","webpack:///./src/app/modules/fsa/renderer/FSAGraphRenderer.js","webpack:///./src/app/content/workspace/renderer/SelectionBoxRenderer.js","webpack:///./src/app/content/workspace/renderer/HighlightRenderer.js","webpack:///./src/app/modules/fsa/renderer/FSAGraphOverlayRenderer.js","webpack:///./src/app/content/viewport/TrashCan.js","webpack:///./src/app/icons/PlayIcon.js","webpack:///./src/app/icons/PauseIcon.js","webpack:///./src/app/icons/StopIcon.js","webpack:///./src/app/modules/fsa/renderer/TestTray.js","webpack:///./src/app/icons/CreateIcon.js","webpack:///./src/app/icons/MoveIcon.js","webpack:///./src/app/content/viewport/CursorMode.js","webpack:///./src/app/modules/fsa/renderer/ViewportRenderer.js","webpack:///./src/app/modules/fsa/builder/MachineLabeler.js","webpack:///./src/app/modules/fsa/builder/MachineBuilder.js","webpack:///./src/app/modules/fsa/notifications/StateUnreachableWarningMessage.js","webpack:///./src/app/modules/fsa/notifications/StateMissingTransitionErrorMessage.js","webpack:///./src/app/modules/fsa/notifications/TransitionErrorMessage.js","webpack:///./src/app/modules/fsa/builder/DFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/NFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/FSABuilder.js","webpack:///./src/app/modules/fsa/controller/events/EventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeInitialEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveAllEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeDestinationEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeLabelEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserToggleNodeEventHandler.js","webpack:///./src/app/modules/fsa/graph/FSAGraphParser.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteNodesEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserImportGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/SafeGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserChangeMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserConvertMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameSymbolEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteSymbolEventHandler.js","webpack:///./src/app/modules/fsa/EventManager.js","webpack:///./src/app/modules/fsa/editor/LabelEditor.js","webpack:///./src/app/icons/flat/JSONIcon.js","webpack:///./src/app/modules/fsa/exporter/FSAGraphExporter.js","webpack:///./src/app/icons/flat/XMLIcon.js","webpack:///./src/app/modules/fsa/exporter/JFLAPGraphExporter.js","webpack:///./src/app/modules/fsa/FSAModule.js","webpack:///./src/app/system/inputadapter/InputPointer.js","webpack:///./src/app/system/inputadapter/ViewportAdapter.js","webpack:///./src/app/system/inputadapter/InputAdapter.js","webpack:///./src/app/system/notification/components/NotificationMessage.js","webpack:///./src/app/system/notification/components/NotificationView.js","webpack:///./src/app/icons/IconButton.js","webpack:///./src/app/system/notification/NotificationManager.js","webpack:///./src/app/system/notification/Notifications.js","webpack:///./src/app/system/localsave/LocalSave.js","webpack:///./src/app/system/localsave/LocalSaveManager.js","webpack:///./src/app/content/viewport/Viewport.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/util/Downloader.js"],"names":["__webpack_require__","d","__webpack_exports__","loadConfig","saveConfig","LOCAL_STORAGE_ID","cfg","jsonString","localStorage","getItem","console","log","jsonData","JSON","parse","clearConfig","Object","assign","e","arguments","length","undefined","_userDefined","_dirty","stringify","setItem","removeItem","_resetOnLoad","setValue","key","value","this","hasOwnProperty","Error","bind","MACHINE_ERRORS_MESSAGE_TAG","MACHINE_CONVERSION_MESSAGE_TAG","ERROR_CHECK_INTERVAL","GRAPH_IMMEDIATE_INTERVAL","SMOOTH_OFFSET_DAMPING","SCROLL_SENSITIVITY","MIN_SCALE","MAX_SCALE","INIT_WAITTIME","STR_TRANSITION_DEFAULT_LABEL","STR_STATE_LABEL","PARALLEL_EDGE_HEIGHT","SELF_LOOP_HEIGHT","SUBMIT_KEY","CLEAR_KEY","TAB_KEY","UP_KEY","DOWN_KEY","DELETE_KEY","DELETE_FORWARD_KEY","DEFAULT_GRAPH_SIZE","NODE_RADIUS","NODE_RADIUS_SQU","NODE_DIAMETER","NODE_RADIUS_INNER","INITIAL_MARKER_OFFSET_X","EDGE_RADIUS","EDGE_RADIUS_SQU","ARROW_WIDTH","PLACEHOLDER_LENGTH","ENDPOINT_RADIUS","ENDPOINT_RADIUS_SQU","HOVER_RADIUS_OFFSET","CURSOR_RADIUS","CURSOR_RADIUS_SQU","DOUBLE_TAP_TICKS","LONG_TAP_TICKS","SPAWN_RADIUS","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","DRAGGING_BUFFER","DRAGGING_BUFFER_SQU","PADDING_RADIUS_SQU","AbstractGraphExporter","_classCallCheck","data","module","getFileType","fileBlob","filename","getLabel","toUpperCase","GraphImporter","_module","File","result","Promise","reject","fileName","name","exporters","getGraphExporters","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","exporter","canImport","doesSupportFile","endsWith","catch","importFromFile","_iterator","Symbol","iterator","next","done","err","return","error","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop2","doesSupportData","importFromData","_iterator2","map","PNGIcon","props","PNGIcon_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","react_default","a","createElement","className","xmlns","viewBox","fill","points","cx","cy","r","JPGIcon","JPGIcon_classCallCheck","JPGIcon_possibleConstructorReturn","JPGIcon_getPrototypeOf","GraphImageExporter","_this","imageType","GraphImageExporter_classCallCheck","GraphImageExporter_possibleConstructorReturn","GraphImageExporter_getPrototypeOf","_imageType","workspace","_workspace","workspaceDim","ref","baseVal","width","height","svg","getSVGForExport","Downloader","downloadSVG","I18N","toString","_get","prototype","ExportingPanel","ExportingPanel_classCallCheck","ExportingPanel_possibleConstructorReturn","ExportingPanel_getPrototypeOf","container","_this2","IconButton","id","title","getTitle","onClick","currentModule","getMachineController","getMachineName","exportToFile","getIconClass","_this3","graphExporters","imageExporters","getImageExporters","style","renderExporterButton","defineProperty","get","UNLOCALIZED_NAME","RGB_WHITE","RGB_BLACK","blendRGB","percent","rgb1","rgb2","dst","blendAmount","Math","abs","round","invertRGB","rgb","blackwhite","HEXtoRGB","hex","indexOf","slice","red","substring","green","blue","parseInt","RGBtoHEX","StyleOption","elementSource","propName","inputType","groupName","callback","StyleOptionRegistry_classCallCheck","element","prop","type","group","_callback","_value","_defaultValue","computedStyle","shouldPropagateChange","window","getComputedStyle","newValue","getPropertyValue","trim","setStyle","val","setProperty","StyleOptionRegistry","_options","Map","_groups","_init","changeCallback","has","set","push","option","delete","index","splice","computedStyles","values","updateStyle","clear","size","StyleInput","StyleInput_classCallCheck","StyleInput_getPrototypeOf","onChange","StyleInput_assertThisInitialized","target","inputID","getStyle","disabled","htmlFor","OptionGroup","OptionGroup_classCallCheck","OptionGroup_possibleConstructorReturn","OptionGroup_getPrototypeOf","dropdown","createRef","state","open","label","IconToggle","defaultValue","pointerEvents","DropDownIcon","display","isOpen","children","OptionHotkey","OptionHotkey_classCallCheck","OptionHotkey_possibleConstructorReturn","OptionHotkey_getPrototypeOf","keyName","OptionsPanel","OptionsPanel_classCallCheck","OptionsPanel_getPrototypeOf","styleOpts","theme","customTheme","skipWelcome","LocalSave","getStringFromStorage","disableExitWarning","onChangeTheme","OptionsPanel_assertThisInitialized","onChangeModule","root","document","getElementById","opts","invertFunc","opt","color","ColorHelper","getOptionByProp","darkFunc","inverted","registerStyleOption","apply","initialize","registerHandler","onLoadSave","terminate","unregisterHandler","loadFromStorage","getOptions","isDefaultStyle","saveToStorage","prevTheme","resetStyle","setState","panels_options_OptionGroup","panels_options_OptionHotkey","marginTop","checked","setStringToStorage","getPropsByGroup","components_StyleInput","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getModuleName","alert","confirm","prompt","DEFAULT_GRAPH_EXPORTERS","DEFAULT_IMAGE_EXPORTERS","DEFAULT_PANELS","AbstractModule","app","AbstractModule_classCallCheck","_importer","renderLayer","ROUTER","_current","routeTo","component","getCurrentPage","HotKeys","toolbar","undoManager","graphController","machineController","onKeyDown","getUndoManager","getGraphController","addEventListener","removeEventListener","event","which","metaKey","ctrlKey","getCurrentModule","getDefaultGraphExporter","machineName","preventDefault","stopPropagation","shiftKey","redo","undo","imageExporter","UploadButton","UploadButton_classCallCheck","onUploadFileChange","_assertThisInitialized","files","getGraphImporter","importFile","Notifications","addErrorMessage","accept","getImportFileTypes","join","HelpButton","HelpButton_classCallCheck","HelpButton_getPrototypeOf","HelpButton_assertThisInitialized","hasMessages","addMessage","MachineName","MachineName_classCallCheck","MachineName_getPrototypeOf","MachineName_assertThisInitialized","onFocus","onBlur","blur","onSubmit","PageNewIcon","PageNewIcon_classCallCheck","PageNewIcon_possibleConstructorReturn","PageNewIcon_getPrototypeOf","HelpIcon","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","LanguageIcon","LanguageIcon_classCallCheck","LanguageIcon_possibleConstructorReturn","LanguageIcon_getPrototypeOf","OfflineIcon","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","BugReportIcon","BugReportIcon_classCallCheck","BugReportIcon_possibleConstructorReturn","BugReportIcon_getPrototypeOf","DrawerExpander","DrawerExpander_classCallCheck","DrawerExpander_getPrototypeOf","DrawerExpander_assertThisInitialized","isFullscreen","closeDrawer","openDrawer","DEFAULT_TAB_INDEX","MAX_PANEL_THRESHOLD","MIN_PANEL_SIZE","Drawer","Drawer_classCallCheck","Drawer_getPrototypeOf","tabIndex","dragging","onTouchStart","Drawer_assertThisInitialized","onMouseDown","onScroll","_ontouchmove","_ontouchend","prev","x","y","updatePanelSize","touch","changedTouches","onStartDraggingDrawerBorder","clientX","clientY","ev","onStopDraggingDrawerBorder","onMouseMove","onMouseUp","InfoPanel","getModulePanels","onWheel","PanelClass","i","panelID","content_drawer_DrawerExpander","setTab","matchMedia","matches","viewport","getBoundingClientRect","offsetHeight","offsetWidth","EXPORTING_PANEL_TAB_INDEX","OPTIONS_PANEL_TAB_INDEX","Toolbar","Toolbar_classCallCheck","Toolbar_getPrototypeOf","langOn","onMachineNameChange","Toolbar_assertThisInitialized","onMachineNameKeyDown","langOnClick","renameMachine","drawer","graph","getGraph","offline","navigator","onLine","toolbar_MachineName","serviceWorker","getRegistration","icons_OfflineIcon","getLocalizedModuleName","setMachineName","icons_PageNewIcon","toolbar_UploadButton","UploadIcon","canUndo","UndoIcon","canRedo","RedoIcon","isEmpty","SaveIcon","icons_BugReportIcon","toolbar_HelpButton","icons_HelpIcon","activeElement","icons_LanguageIcon","maxWidth","fetchLanguageFile","Subtitle","Subtitle_classCallCheck","Subtitle_possibleConstructorReturn","Subtitle_getPrototypeOf","active","messageTimer","setTimeout","Config","visible","textAnchor","Workspace","Workspace_classCallCheck","Workspace_possibleConstructorReturn","Workspace_getPrototypeOf","inputController","getInputController","getInputAdapter","getViewport","offsetX","getOffsetX","offsetY","getOffsetY","bounds","getBoundingRect","dx","minX","dy","minY","w","EXPORT_PADDING_X","h","EXPORT_PADDING_Y","clone","cloneNode","setAttribute","uiElements","getElementsByClassName","remove","GraphRenderer","getRenderer","GraphOverlayRenderer","max","Number","MIN_VALUE","getScale","halfSize","content_workspace_Subtitle","transform","x1","y1","x2","y2","stroke","_extends","parent","Tutorial","Tutorial_classCallCheck","App","App_classCallCheck","App_getPrototypeOf","inputAdapter","InputAdapter","setMinScale","setMaxScale","setOffsetDamping","UndoManager","Module","App_assertThisInitialized","hotKeys","tutorial","isDangerous","isWaitingForFile","onDragOver","onDragEnter","onDragLeave","onFileDrop","workspaceDOM","start","destroy","moduleName","exportToData","prevMode","mode","Viewport","DANGEROUS","dataTransfer","items","file","kind","getAsFile","clearData","full","screen","update","content_toolbar_Toolbar","NotificationView","notificationManager","visibility","shouldHideContent","opacity","content_workspace_Workspace","content_drawer_Drawer","hot","Logo","Logo_classCallCheck","Logo_possibleConstructorReturn","Logo_getPrototypeOf","version","Quote","Quote_classCallCheck","Quote_possibleConstructorReturn","Quote_getPrototypeOf","QUOTES","QUOTE_INDEX","floor","random","CONTENT_QUOTE","CONTENT_SUBQUOTE","LandingPage","LandingPage_classCallCheck","LandingPage_getPrototypeOf","footer","returnHome","onLaunchButton","LandingPage_assertThisInitialized","onTutorialButton","onReturnHomeButton","onReportBugButton","onAboutButton","onHelpButton","onGithubButton","onscroll","body","scrollHeight","documentElement","clientHeight","innerHeight","scroll","pageYOffset","bottom","Router","focus","scrollTo","top","behavior","launchText","components_Logo","landing_components_Quote","all","then","_ref","_","default","requestAnimationFrame","updateApplication","message","returnValue","isUpdateAvailable","hasUpdate","FRAMES_PER_SECOND","prevtime","time","page","ReactDOM","render","react__WEBPACK_IMPORTED_MODULE_0___default","history","offsetIndex","eventHandler","pop","unshift","applyUndo","applyRedo","FormattedInput","ignoreSaveOnExit","prevValue","onKeyUp","nextProps","hasFocus","select","filter","replace","captureOnExit","formatValue","resetValue","multiline","_this4","separator","selectionStart","selectionEnd","formatter","_this5","rows","InfoBlock","InfoBlock_classCallCheck","InfoBlock_possibleConstructorReturn","InfoBlock_getPrototypeOf","BoxAddIcon","BoxAddIcon_classCallCheck","BoxAddIcon_possibleConstructorReturn","BoxAddIcon_getPrototypeOf","TriangleIcon","TriangleIcon_classCallCheck","TriangleIcon_possibleConstructorReturn","TriangleIcon_getPrototypeOf","StateTag","StateTag_classCallCheck","StateTag_getPrototypeOf","onValueChange","StateTag_assertThisInitialized","newLabel","node","src","getNodesByLabel","renameNode","deleteTargetNode","keyCode","nodes","isCustom","getNodeCustom","spellCheck","StatesList","StatesList_classCallCheck","StatesList_getPrototypeOf","onStateCreate","StatesList_assertThisInitialized","createNode","overview_infoblock_InfoBlock","icons_TriangleIcon","getNodes","overview_stateslist_StateTag","getGraphElementID","getNodeLabel","getNodeAccept","focusOnNode","icons_BoxAddIcon","AlphabetTag","AlphabetTag_classCallCheck","AlphabetTag_getPrototypeOf","symbol","AlphabetTag_assertThisInitialized","newSymbol","oldSymbol","getAlphabet","includes","renameSymbol","createSymbol","deleteSymbol","maxLength","AlphabetList","AlphabetList_classCallCheck","AlphabetList_getPrototypeOf","editingTag","editing","onSymbolCreate","AlphabetList_assertThisInitialized","onStopEditing","alphabet","overview_alphabetlist_AlphabetTag","FSA","FSA_classCallCheck","_states","_transitions","_finalStates","_customAlphabet","fsa","transition","final","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","oldState","newState","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","fromState","toState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","getStartState","isFinal","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","isUsedAlphabet","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","s","getUsedAlphabet","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","foundSymbols","Array","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","transitions","getOutgoingTransitions","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","DFA","NFA","states","usedAlphabet","startState","finalStates","ARROW","NFA_classCallCheck","NFA_possibleConstructorReturn","NFA_getPrototypeOf","doClosureTransition","ps","nfaStates","getStates","j","len","concat","SRC","SYMBOL","DST","SYMBOL_AXIS","getDestinationFromSourceAndSymbol","machine","isSet","doTransition","isArray","TransitionTable","TransitionTable_classCallCheck","TransitionTable_possibleConstructorReturn","TransitionTable_getPrototypeOf","rowAxis","machineBuilder","getMachine","rowAxisType","getTransitions","isNFAMachine","getMachineType","hasEmptyColumn","scope","startsWith","getSymbolFromSourceAndDestination","TransitionFunction","TransitionFunction_classCallCheck","TransitionFunction_possibleConstructorReturn","TransitionFunction_getPrototypeOf","sort","isNFA","emptrans","empclassName","trans","FormalDefinition","FormalDefinition_classCallCheck","FormalDefinition_possibleConstructorReturn","FormalDefinition_getPrototypeOf","getFinalStates","DELTA","OverviewPanel","OverviewPanel_classCallCheck","OverviewPanel_getPrototypeOf","viewFormal","onChangeMachineType","OverviewPanel_assertThisInitialized","onAutoLayout","onChangeAutoRename","onSubmitAutoStatePrefix","onAutoStateFormat","switchDefinition","applyAutoLayout","changeMachineTo","getMachineBuilder","setAutoRenameNodes","labeler","getLabeler","prefix","sortDefaultNodeLabels","overview_formaldefinition_FormalDefinition","overview_stateslist_StatesList","overview_alphabetlist_AlphabetList","overview_transitionfunction_TransitionFunction","overview_transitiontable_TransitionTable","paddingBottom","marginBottom","flexDirection","formattedinput_FormattedInput","background","outline","border","padding","margin","appearance","shouldAutoRenameNodes","solveNFAbyStep","nfa","cachedStates","cachedSymbols","checkedStates","nextStates","nextIndex","cstate","doTerminalTransition","nextState","isFinalState","DFA_classCallCheck","DFA_possibleConstructorReturn","DFA_getPrototypeOf","isValidDFA","TestMode","testingManager","TestMode_classCallCheck","targets","indexofString","running","started","skipToEnd","timer","onNodeDestroy","prepareForNewTest","hasNextStep","inputList","resetTests","step","onNextStep","onPause","hasPrevInput","previous","prevInput","getCurrentInput","hasNextInput","testInput","setResult","nextInput","currentStep","getCurrentCache","nextChar","getFirstGraphNodeByLabel","skipFunc","curr_state","TestingInputList","TestingInputList_classCallCheck","addInput","inputIndex","input","currState","counter","solveNFA","reader","FileReader","onload","testInputs","split","abort","readAsText","first","dirty","markDirty","guid","TestingManager","TestingManager_classCallCheck","shouldCheckError","isImmediateErrorCheck","errorCheckMode","NO_ERROR_CHECK","stepByStepMode","testMode","setMachineType","DELAYED_ERROR_CHECK","IMMEDIATE_ERROR_CHECK","isStarted","onStop","onStart","TESTING","AddIcon","AddIcon_classCallCheck","AddIcon_possibleConstructorReturn","AddIcon_getPrototypeOf","RemoveIcon","RemoveIcon_classCallCheck","RemoveIcon_possibleConstructorReturn","RemoveIcon_getPrototypeOf","SuccessIcon","SuccessIcon_classCallCheck","SuccessIcon_possibleConstructorReturn","SuccessIcon_getPrototypeOf","FailureIcon","FailureIcon_classCallCheck","FailureIcon_possibleConstructorReturn","FailureIcon_getPrototypeOf","RunningManIcon","RunningManIcon_classCallCheck","RunningManIcon_possibleConstructorReturn","RunningManIcon_getPrototypeOf","StatusButton","StatusButton_classCallCheck","StatusButton_possibleConstructorReturn","StatusButton_getPrototypeOf","icons_SuccessIcon","icons_FailureIcon","icons_RunningManIcon","TestingInput","TestingInput_classCallCheck","TestingInput_getPrototypeOf","onStatusClick","TestingInput_assertThisInitialized","onSubmitClick","testList","getInputByIndex","testByIndex","isInputFirst","getInput","newTest","removeInputByIndex","getTests","shouldTestOnly","getCurrentInputIndex","panels_testing_StatusButton","placeholder","icons_AddIcon","icons_RemoveIcon","UploadTestButton","UploadTestButton_classCallCheck","UploadTestButton_possibleConstructorReturn","UploadTestButton_getPrototypeOf","uploadInput","PageNewContentIcon","PageNewContentIcon_classCallCheck","PageNewContentIcon_possibleConstructorReturn","PageNewContentIcon_getPrototypeOf","CloseIcon","CloseIcon_classCallCheck","CloseIcon_possibleConstructorReturn","CloseIcon_getPrototypeOf","TestingPanel","TestingPanel_classCallCheck","TestingPanel_getPrototypeOf","getTestingManager","getErrorCheckMode","noTestMode","_savedGraphHash","_ticksSinceHash","stepByStepModeChecked","onChangeErrorCheckMode","TestingPanel_assertThisInitialized","onGraphChange","onTestsRunAll","onTestsClear","onTestsSave","onTestsNew","onTestsUpload","getHashCode","g","importTests","innerHTML","tester","setErrorCheckMode","machineErrorChecker","setStepByStepMode","clearTests","clearTestName","hideTestInputList","downloadText","getTestsAsStrings","showTestInputList","isTestInvalid","isValidMachine","graphHash","icons_PageNewContentIcon","components_UploadTestButton","icons_CloseIcon","panels_testing_TestingInput","NFAToDFAConversionWarningMessage","NFAToDFAConversionWarningMessage_classCallCheck","NFAToDFAConversionWarningMessage_getPrototypeOf","NFAToDFAConversionWarningMessage_assertThisInitialized","convertMachineTo","close","stateCount","pow","AnalysisPanel","AnalysisPanel_classCallCheck","AnalysisPanel_getPrototypeOf","optimizeUnreachOption","optimizeRedundOption","onConvertToDFA","AnalysisPanel_assertThisInitialized","onConvertToNFA","onOptimizeMachine","unreachableArray","getUnreachableNodes","deleteTargetNodes","messageTag","onDeleteAllUnreachable","canOptimize","AboutPanel","AboutPanel_classCallCheck","AboutPanel_possibleConstructorReturn","AboutPanel_getPrototypeOf","AbstractInputController","AbstractInputController_classCallCheck","_inputAdapter","setController","pointer","onInputEvent","zoomValue","GraphPicker","GraphPicker_classCallCheck","selectionBox","fromX","fromY","toX","toY","targetType","initialTarget","initialTargetType","getNodeByInitialMarkerAt","getEdgeByEndPointAt","getNodeAt","getEdgeAt","startNode","getStartNode","center","getEdges","edge","getCenterPoint","end","getEndPoint","box","mx","my","lx","min","ly","clearSelection","getNodesWithin","getSelection","GraphElement","GraphElement_classCallCheck","_id","graphElementID","GraphNode","GraphNode_classCallCheck","GraphNode_possibleConstructorReturn","GraphNode_getPrototypeOf","_label","usePosition","FSANode","FSANode_classCallCheck","FSANode_possibleConstructorReturn","FSANode_getPrototypeOf","_accept","_custom","FSANode_get","GraphEdge","from","to","GraphEdge_classCallCheck","GraphEdge_possibleConstructorReturn","GraphEdge_getPrototypeOf","_from","_to","HALFPI","PI","isPlaceholder","atan2","halfPlaceholderLength","getPlaceholderLength","placeholderLength","getNodeSize","getHashString","GraphEdge_get","getDirectionalVector","dist","angleOffset","angle","cos","sin","getMidPoint","GraphCurvedEdge","QuadraticEdge_classCallCheck","QuadraticEdge_possibleConstructorReturn","QuadraticEdge_getPrototypeOf","_quad","radians","_coords","changeDestinationNode","fromx","fromy","midpointx","midpointy","sqrt","outrad","inrad","maxdr","setQuadratic","getSelfLoopHeight","prevDest","QuadraticEdge_get","formatAsPlaceholder","isSelfLoop","formatAsSelfLoop","isQuadratic","coords","getQuadraticAsCoords","px","py","nodeSize","qcoords","qx","qy","FSAEdge","FSAEdge_classCallCheck","FSAEdge_possibleConstructorReturn","FSAEdge_getPrototypeOf","QuadraticEdge","FSAEdge_get","getEdgeLabel","InputController","InputController_classCallCheck","InputController_possibleConstructorReturn","InputController_getPrototypeOf","_picker","_graphController","prevPointerX","prevPointerY","isNewEdge","ghostInitialMarker","shouldDestroyPointlessEdges","_swapMouseScheme","_trashMode","InputController_get","picker","getPointerX","getPointerY","updateTarget","hasTarget","cursor","getPicker","setInitialTarget","hasSelection","isTargetInSelection","getStepByStepMode","isTrashMode","prevX","prevY","deleteSelectedNodes","deleteTargetEdge","toggleNode","openLabelEditor","emit","isMoveMode","Node","Edge","targetQuad","getQuadratic","prevQuad","createEdge","setEdgeLabel","edgeQuad","beginSelection","prevEdgeTo","getDestinationNode","moveMultipleNodesTo","moveNodeTo","moveEdgeTo","moveEndpointTo","addOffset","isSelecting","updateSelection","formatEdge","deleteEdge","prevInitial","setStartNode","endSelection","clearTarget","enabled","shouldInputFirst","isAltInput","isDragging","isPointerActive","AbstractGraphController","AbstractGraphController_classCallCheck","_graph","Eventable","__eventListeners","mixin","targetClass","targetPrototype","registerEvent","eventName","unregisterEvent","listener","listeners","flag","clearEventListeners","countEventListeners","getEventListeners","on","once","f","_len","args","_key","_len2","_key2","onEventProcessed","GraphLayout","reachableNode","reachable","getReachableState","unreachableNode","numOfReachable","numOfUnreachable","numOfNode","maxNum","radius","degree_re","degree_un","NodalGraph","nodeClass","edgeClass","NodalGraph_classCallCheck","_nodeClass","_edgeClass","_nodes","_edges","_nodeMapping","_edgeMapping","elementID","nullSourceEdges","getSourceNode","_i","setGraphElementID","clearEdges","clearNodes","getNodeCount","getEdgeCount","maxX","maxY","minNX","MAX_VALUE","minNY","maxNX","maxNY","maxNodeSize","minEX","minEY","maxEX","maxEY","startPoint","endPoint","centerPoint","getStartPoint","sx","sy","ex","ey","string","stringHash","FSAGraph","FSAGraph_classCallCheck","FSAGraph_possibleConstructorReturn","FSAGraph_getPrototypeOf","edgeSource","edgeDestination","edgeLabel","getEdgeSymbolsFromLabel","otherEdge","otherSymbols","parallelEdgeHeight","dist12sq","vertical","m","b","x0","y0","GraphController","GraphController_classCallCheck","GraphController_possibleConstructorReturn","GraphController_getPrototypeOf","labelEditorElement","GraphController_get","applyLayout","isPrevCustom","setNodeLabel","setNodeCustom","newNodeLabel","getNextDefaultNodeLabel","setNodeAccept","selectedNode","selection","deleteNode","other","diameter","nextDX","nextDY","pos","getInputEventPosition","changeInputEventPosition","setQuadraticByCoords","sourceNode","prevLabel","openEditor","setOffset","ax","ay","expandPowersetStateToDFA","powerSetState","dfa","getStateFromSet","hasState","newDFAStateFromNFA","terminals","dfaState","newTransition","setFinalState","MachineController","MachineController_classCallCheck","getLabelFormatter","machineType","read","currentMachineType","powerSetStates","getPowerSet","trapState","newAlphabet","convertToDFA","setGraphToMachine","addCustomSymbol","removeCustomSymbol","prevSymbol","nextSymbol","renameCustomSymbol","_symbols","isCustomSymbol","NodeRenderer","NodeRenderer_classCallCheck","NodeRenderer_possibleConstructorReturn","NodeRenderer_getPrototypeOf","userSelect","fontSize","EdgeRenderer","EdgeRenderer_classCallCheck","EdgeRenderer_possibleConstructorReturn","EdgeRenderer_getPrototypeOf","SIXTH_PI","arrowAngle","quadCoords","edgeDir","getEdgeDirection","flipLabel","quadLine","labels","str","yy","alignmentBaseline","InitialMarkerRenderer","InitialMarkerRenderer_classCallCheck","InitialMarkerRenderer_possibleConstructorReturn","InitialMarkerRenderer_getPrototypeOf","FSAGraphRenderer","FSAGraphRenderer_classCallCheck","FSAGraphRenderer_possibleConstructorReturn","FSAGraphRenderer_getPrototypeOf","renderer_NodeRenderer","renderer_EdgeRenderer","renderer_InitialMarkerRenderer","SelectionBoxRenderer","SelectionBoxRenderer_classCallCheck","SelectionBoxRenderer_possibleConstructorReturn","SelectionBoxRenderer_getPrototypeOf","HIGHLIGHT_LINE_ARRAY","HighlightRenderer","HighlightRenderer_classCallCheck","HighlightRenderer_possibleConstructorReturn","HighlightRenderer_getPrototypeOf","endpoint","strokeDashoffset","offset","strokeDasharray","strokeWidth","FSAGraphOverlayRenderer","FSAGraphOverlayRenderer_classCallCheck","FSAGraphOverlayRenderer_possibleConstructorReturn","FSAGraphOverlayRenderer_getPrototypeOf","getSelectionBox","renderer_HighlightRenderer","renderer_SelectionBoxRenderer","warningNodes","warningEdges","errorNodes","errorEdges","TrashCan","TrashCan_classCallCheck","TrashCan_possibleConstructorReturn","TrashCan_getPrototypeOf","staticTrash","setTrashMode","NORMAL","isUsingTouch","onMouseEnter","onTrashEnter","onMouseLeave","onTrashLeave","onTrashClick","PlayIcon","PlayIcon_classCallCheck","PlayIcon_possibleConstructorReturn","PlayIcon_getPrototypeOf","PauseIcon","PauseIcon_classCallCheck","PauseIcon_possibleConstructorReturn","PauseIcon_getPrototypeOf","StopIcon","StopIcon_classCallCheck","StopIcon_possibleConstructorReturn","StopIcon_getPrototypeOf","TestTray","TestTray_classCallCheck","TestTray_possibleConstructorReturn","TestTray_getPrototypeOf","testIndex","getCurrentTestStringIndex","testOffset","MAX_ELLIPSIS_COUNT","onResume","isRunning","icons_PlayIcon","icons_PauseIcon","onPreviousStep","hasPrevStep","isSkipping","icons_StopIcon","CreateIcon","CreateIcon_classCallCheck","CreateIcon_possibleConstructorReturn","CreateIcon_getPrototypeOf","MoveIcon","MoveIcon_classCallCheck","MoveIcon_possibleConstructorReturn","MoveIcon_getPrototypeOf","CursorMode","CursorMode_classCallCheck","CursorMode_possibleConstructorReturn","CursorMode_getPrototypeOf","actionMode","isActionMode","setInputScheme","icons_CreateIcon","icons_MoveIcon","ViewportRenderer","ViewportRenderer_classCallCheck","ViewportRenderer_possibleConstructorReturn","ViewportRenderer_getPrototypeOf","LabelEditor","getLabelEditor","fsa_renderer_TestTray","content_viewport_CursorMode","content_viewport_TrashCan","MachineLabeler","MachineLabeler_classCallCheck","shouldAutoLabel","isDefaultInitial","defaultNodes","customLabels","defaultName","getDefaultNodeLabelByIndex","nodeIndex","isUniqueNodeLabel","MachineBuilder","MachineBuilder_classCallCheck","onGraphNodeLabelChange","targetNodes","enable","StateUnreachableWarningMessage","StateUnreachableWarningMessage_classCallCheck","StateUnreachableWarningMessage_getPrototypeOf","targetIndex","targetLabel","StateUnreachableWarningMessage_assertThisInitialized","buttonValue","StateMissingTransitionErrorMessage","StateMissingTransitionErrorMessage_classCallCheck","StateMissingTransitionErrorMessage_getPrototypeOf","StateMissingTransitionErrorMessage_assertThisInitialized","targetLength","TransitionErrorMessage","TransitionErrorMessage_classCallCheck","TransitionErrorMessage_getPrototypeOf","TransitionErrorMessage_assertThisInitialized","focusOnEdge","deleteTargetEdges","text","DFAErrorChecker","DFAErrorChecker_classCallCheck","shouldNotifyErrors","warnNodes","warnEdges","nodeTransitionMap","placeholderEdges","emptyEdges","dupeEdges","currentAlphabet","missingNodes","nodeTransitions","clearMessages","unReachedNodes","edges","shift","nextNodes","nextNode","NFAErrorChecker","NFAErrorChecker_classCallCheck","unReachedNode","fillFSA","setStartState","FSABuilder","FSABuilder_classCallCheck","FSABuilder_getPrototypeOf","_machine","_machineType","_machineValidDFA","_alphabet","_timer","_errorTimer","FSABuilder_assertThisInitialized","onDelayedGraphChange","onDelayedErrorCheck","FSABuilder_get","clearTimeout","toNFA","checkErrors","allowNull","symbols","Set","symbolLength","subsymbol","add","EventHandler","eventLogger","controller","postEventName","EventHandler_classCallCheck","onEvent","eventData","captureEvent","postData","capturePostEvent","GraphEdgeDestinationEventHandler","GraphNodeInitialEventHandler_classCallCheck","GraphNodeInitialEventHandler_possibleConstructorReturn","GraphNodeInitialEventHandler_getPrototypeOf","nextInitial","nodeID","prevID","getNodeByElementID","GraphNodeMoveEventHandler","GraphNodeMoveEventHandler_classCallCheck","GraphNodeMoveEventHandler_possibleConstructorReturn","GraphNodeMoveEventHandler_getPrototypeOf","targetNode","nextX","nextY","GraphNodeMoveAllEventHandler","GraphNodeMoveAllEventHandler_classCallCheck","GraphNodeMoveAllEventHandler_possibleConstructorReturn","GraphNodeMoveAllEventHandler_getPrototypeOf","nodeIDs","GraphEdgeMoveEventHandler","GraphEdgeMoveEventHandler_classCallCheck","GraphEdgeMoveEventHandler_possibleConstructorReturn","GraphEdgeMoveEventHandler_getPrototypeOf","targetEdge","nextQuad","edgeID","getEdgeByElementID","GraphEdgeDestinationEventHandler_classCallCheck","GraphEdgeDestinationEventHandler_possibleConstructorReturn","GraphEdgeDestinationEventHandler_getPrototypeOf","nextDestination","prevDestination","GraphEdgeLabelEventHandler","GraphEdgeLabelEventHandler_classCallCheck","GraphEdgeLabelEventHandler_possibleConstructorReturn","GraphEdgeLabelEventHandler_getPrototypeOf","nextLabel","UserCreateNodeEventHandler","UserCreateNodeEventHandler_classCallCheck","UserCreateNodeEventHandler_possibleConstructorReturn","UserCreateNodeEventHandler_getPrototypeOf","custom","UserToggleNodeEventHandler","UserToggleNodeEventHandler_classCallCheck","UserToggleNodeEventHandler_possibleConstructorReturn","UserToggleNodeEventHandler_getPrototypeOf","prevAccept","nodeDatas","nodeCount","edgeDatas","edgeCount","initialIndex","nodeIndices","nodeData","initialNode","edgeData","destinationNode","quadData","graphNodes","graphEdges","graphInitial","quad","sourceIndex","destinationIndex","initial","_version","XML","NULL","nodeElements","getElementsByTagName","edgeElements","nodeElementIDs","nodeElement","nodeElementID","getAttribute","xElements","xElement","hasChildNodes","xValue","childNodes","parseFloat","nodeValue","yElements","yElement","yValue","boundingRect","transitionMapping","edgeElement","sourceID","fromElements","fromElement","fromValue","destinationID","toElements","toElement","toValue","readElements","readElement","readValue","transitionID","keys","transitionKey","doc","DOMParser","parseFromString","structure","appendChild","automaton","UserDeleteNodesEventHandler","UserDeleteNodesEventHandler_classCallCheck","UserDeleteNodesEventHandler_possibleConstructorReturn","UserDeleteNodesEventHandler_getPrototypeOf","graphData","FSAGraphParser","targetID","UserRenameNodeEventHandler","UserRenameNodeEventHandler_classCallCheck","UserRenameNodeEventHandler_possibleConstructorReturn","UserRenameNodeEventHandler_getPrototypeOf","prevCustom","UserCreateEdgeEventHandler","UserCreateEdgeEventHandler_classCallCheck","UserCreateEdgeEventHandler_possibleConstructorReturn","UserCreateEdgeEventHandler_getPrototypeOf","fromID","toID","setSourceNode","UserDeleteEdgeEventHandler","UserDeleteEdgeEventHandler_classCallCheck","UserDeleteEdgeEventHandler_possibleConstructorReturn","UserDeleteEdgeEventHandler_getPrototypeOf","prevTo","UserImportGraphEventHandler","UserImportGraphEventHandler_classCallCheck","UserImportGraphEventHandler_possibleConstructorReturn","UserImportGraphEventHandler_getPrototypeOf","graphName","SafeGraphEventHandler","SafeGraphEventHandler_classCallCheck","SafeGraphEventHandler_possibleConstructorReturn","SafeGraphEventHandler_getPrototypeOf","UserChangeMachineEventHandler","UserChangeMachineEventHandler_classCallCheck","UserChangeMachineEventHandler_possibleConstructorReturn","UserChangeMachineEventHandler_getPrototypeOf","nextMachineType","prevMachineType","prevType","nextType","UserConvertMachineEventHandler","UserConvertMachineEventHandler_classCallCheck","UserConvertMachineEventHandler_possibleConstructorReturn","UserConvertMachineEventHandler_getPrototypeOf","UserRenameMachineEventHandler","UserRenameMachineEventHandler_classCallCheck","UserRenameMachineEventHandler_possibleConstructorReturn","UserRenameMachineEventHandler_getPrototypeOf","nextMachineName","prevMachineName","prevName","nextName","UserRenameSymbolEventHandler","UserRenameSymbolEventHandler_classCallCheck","UserRenameSymbolEventHandler_possibleConstructorReturn","UserRenameSymbolEventHandler_getPrototypeOf","targetIDs","UserDeleteSymbolEventHandler","UserDeleteSymbolEventHandler_classCallCheck","UserDeleteSymbolEventHandler_possibleConstructorReturn","UserDeleteSymbolEventHandler_getPrototypeOf","EventManager","EventManager_classCallCheck","eventHandlers","events","GraphNodeInitialEventHandler","RECOMMENDED_SYMBOLS","DEFAULT_SYMBOLS","LabelEditor_classCallCheck","LabelEditor_getPrototypeOf","parentElement","inputElement","_prevValue","onContextMenu","LabelEditor_assertThisInitialized","onFormat","defaultText","saveOnExit","appendValue","closeEditor","targetStyle","screenPos","ctm","getScreenCTM","transformViewToScreen","left","appendSymbol","JSONIcon","JSONIcon_classCallCheck","JSONIcon_possibleConstructorReturn","JSONIcon_getPrototypeOf","FSAGraphExporter","FSAGraphExporter_classCallCheck","FSAGraphExporter_possibleConstructorReturn","FSAGraphExporter_getPrototypeOf","newGraph","JSONGraphParser","machineData","customSymbols","statePrefix","process","getModuleVersion","timestamp","Date","getCustomSymbols","fromJSON","toJSON","resolve","onerror","code","JSONFileIcon","XMLIcon","XMLIcon_classCallCheck","XMLIcon_possibleConstructorReturn","XMLIcon_getPrototypeOf","JFLAPGraphExporter","JFLAPGraphExporter_classCallCheck","JFLAPGraphExporter_possibleConstructorReturn","JFLAPGraphExporter_getPrototypeOf","xmlData","XMLGraphParser","xmlString","XMLSerializer","serializeToString","XMLFileIcon","PANELS","EXPORTERS","FSAModule","FSAModule_classCallCheck","FSAModule_getPrototypeOf","_refreshRate","_ticks","_inputController","FSAModule_assertThisInitialized","_machineController","_machineBuilder","_eventManager","_testingManager","FSAModule_get","formatAlphabetString","InputPointer","adapter","_adapter","_element","_viewport","_active","_x","_y","_inputpos","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","dscale","InputAdapter_classCallCheck","_controller","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","SVGElement","setElement","onTouchMove","button","onInputDown","mouse","transformScreenToView","setPosition","onInputMove","onInputUp","deltaY","onZoomChange","setScale","onPreInputEvent","beginInput","onDragMove","getDistanceSquToInitial","onDragStart","cancelInputEvent","onDragStop","onAltInputEvent","dt","now","onDblInputEvent","endInput","onPostInputEvent","isActive","NotificationMessage","onExitMessage","getType","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","getMessages","getID","ComponentClass","getComponentClass","componentProps","getComponentProps","notification_components_NotificationMessage","Message","handler","tags","componentClass","_handler","_type","messages","tag","INSTANCE","NotificationManager","_messageQueue","shouldReplaceRelated","hasTag","LocalSaveManager","_handlers","_intervalID","_intervalMillis","onIntervalUpdate","millis","doesSupportLocalStorage","setInterval","clearInterval","onAutoSave","saveKey","stringData","hidden","msHidden","webkitHidden","_typeof","Storage","labelEditor","WAITING","s4","hash","imul","charCodeAt","downloadURL","getTextDataURI","filetype","svgString","blob","Blob","url","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","image","Image","drawImage","revokeObjectURL","imageURI","toDataURL","headerIndex","click","removeChild","encodeURIComponent"],"mappings":"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","file":"app.bundle.7908884ccba7a177ef92.js","sourcesContent":["const LOCAL_STORAGE_ID = \"config\";\n\nconst cfg = {};\ncfg._resetOnLoad = false;\ncfg._userDefined = false;\ncfg._dirty = false;\ncfg.setValue = function(key, value) {\n  if (this.hasOwnProperty(key))\n  {\n    this._userDefined = true;\n    this._dirty = true;\n    this[key] = value;\n  }\n  else\n  {\n    throw new Error(\"Trying to assign value to non-existant key in config\");\n  }\n}.bind(cfg);\nexport default cfg;\n\n//Preferences\n\n//General\ncfg.MACHINE_ERRORS_MESSAGE_TAG = \"machineError\";\ncfg.MACHINE_CONVERSION_MESSAGE_TAG = \"machineConversion\";\n\ncfg.ERROR_CHECK_INTERVAL = 2000;\ncfg.GRAPH_IMMEDIATE_INTERVAL = 50;\n\n//Controller\ncfg.SMOOTH_OFFSET_DAMPING = 0.4;\ncfg.SCROLL_SENSITIVITY = 1.0 / 300.0;\ncfg.MIN_SCALE = 0.1;\ncfg.MAX_SCALE = 10;\n\n//Workspace\ncfg.INIT_WAITTIME = 1500;\n\n//NodalGraph\ncfg.STR_TRANSITION_DEFAULT_LABEL = \"\";\ncfg.STR_STATE_LABEL = \"q\";\ncfg.PARALLEL_EDGE_HEIGHT = 10;\ncfg.SELF_LOOP_HEIGHT = 40;\n\n//Input Fields\ncfg.SUBMIT_KEY = 13; //ENTER\ncfg.CLEAR_KEY = 27; //ESCAPE\ncfg.TAB_KEY = 9; //TAB\ncfg.UP_KEY = 38; //UP\ncfg.DOWN_KEY = 40; //DOWN\ncfg.DELETE_KEY = 8; //DELETE\n\n/** LEGACY CONFIG **/\n\n//Input\ncfg.DELETE_FORWARD_KEY = 46; //DELETE FORWARD\n\n//Geometry\ncfg.DEFAULT_GRAPH_SIZE = 300;\n\ncfg.NODE_RADIUS = 16;\ncfg.NODE_RADIUS_SQU = cfg.NODE_RADIUS * cfg.NODE_RADIUS;\ncfg.NODE_DIAMETER = cfg.NODE_RADIUS * 2;\ncfg.NODE_RADIUS_INNER = 12;\n\ncfg.INITIAL_MARKER_OFFSET_X = -(cfg.NODE_RADIUS + (cfg.NODE_RADIUS / 2));\n\ncfg.EDGE_RADIUS = 12;\ncfg.EDGE_RADIUS_SQU = cfg.EDGE_RADIUS * cfg.EDGE_RADIUS;\ncfg.ARROW_WIDTH = 10;\ncfg.PLACEHOLDER_LENGTH = cfg.NODE_RADIUS * 3;\ncfg.ENDPOINT_RADIUS = 6;\ncfg.ENDPOINT_RADIUS_SQU = cfg.ENDPOINT_RADIUS * cfg.ENDPOINT_RADIUS;\n\ncfg.HOVER_RADIUS_OFFSET = 4;\ncfg.CURSOR_RADIUS = 4;\ncfg.CURSOR_RADIUS_SQU = cfg.CURSOR_RADIUS * cfg.CURSOR_RADIUS;\n\n//Interface\ncfg.DOUBLE_TAP_TICKS = 600;\ncfg.LONG_TAP_TICKS = 600;\ncfg.SPAWN_RADIUS = 64;\ncfg.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\ncfg.DRAGGING_BUFFER = 18;\ncfg.DRAGGING_BUFFER_SQU = cfg.DRAGGING_BUFFER * cfg.DRAGGING_BUFFER;\n\n//Graph sorting\ncfg.PADDING_RADIUS_SQU = 2304;\n\n\n/** LOCAL STORAGE FUNCTIONS **/\n\n//check if browser support local storage\nexport function doesSupportLocalStorage()\n{\n  return typeof(Storage) !== 'undefined';\n}\n\nexport function loadConfig()\n{\n  const jsonString = localStorage.getItem(LOCAL_STORAGE_ID);\n  //If cannot find a config...\n  if (!jsonString)\n  {\n    //Just use the default one and don't save anything...\n    console.log(\"Using default config...\");\n    return;\n  }\n\n  try\n  {\n    console.log(\"Loading config...\");\n    const jsonData = JSON.parse(jsonString);\n    if (jsonData['_resetOnLoad'] == true)\n    {\n      //Reset the config\n      clearConfig();\n\n      //Save a new config\n      saveConfig();\n    }\n    else\n    {\n      Object.assign(cfg, jsonData);\n    }\n  }\n  catch (e)\n  {\n    //Reset the config\n    clearConfig();\n  }\n};\n\nexport function saveConfig(forceSave=false)\n{\n  if (forceSave || (cfg._userDefined && cfg._dirty))\n  {\n    try\n    {\n      console.log(\"Saving config...\");\n      const jsonString = JSON.stringify(cfg);\n      localStorage.setItem(LOCAL_STORAGE_ID, jsonString);\n\n      cfg._dirty = false;\n    }\n    catch (e)\n    {\n      //Reset the config\n      clearConfig();\n    }\n  }\n};\n\nexport function clearConfig()\n{\n  localStorage.removeItem(LOCAL_STORAGE_ID);\n\n  cfg._dirty = true;\n};\n","class AbstractGraphExporter\n{\n  constructor() {}\n\n  importFromData(data, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToData(module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportData()\n  {\n    return false;\n  }\n\n  importFromFile(fileBlob, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToFile(filename, module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportFile()\n  {\n    return false;\n  }\n\n  canImport()\n  {\n    return false;\n  }\n\n  getTitle()\n  {\n    return this.getLabel();\n  }\n\n  getIconClass()\n  {\n    return null;\n  }\n\n  getLabel()\n  {\n    return \"Export as \" + this.getFileType().toUpperCase();\n  }\n\n  getFileType()\n  {\n    throw new Error(\"Unknown file type for exporter\");\n  }\n}\n\nexport default AbstractGraphExporter;\n","class GraphImporter\n{\n  constructor(module)\n  {\n    this._module = module;\n  }\n\n  importFile(fileBlob, module)\n  {\n    if (!fileBlob) throw new Error(\"Unable to import null file\");\n    if (!(fileBlob instanceof File)) throw new Error(\"Unable to import object as file\");\n\n    let result = Promise.reject();\n    const fileName = fileBlob.name;\n    const exporters = module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportFile() && fileName.endsWith(exporter.getFileType()))\n      {\n        result = result.catch(e => exporter.importFromFile(fileBlob, module));\n      }\n    }\n\n    return result.catch(e => {\n      console.error(e);\n      throw new Error(\"Cannot find valid exporter for file: \" + fileName);\n    });\n  }\n\n  importData(data, module)\n  {\n    if (!data) throw new Error(\"Unable to import null data\");\n\n    let result = Promise.reject();\n    const exporters = module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportData())\n      {\n        result = result.catch(e => exporter.importFromData(data, module));\n      }\n    }\n\n    return result.catch(e => {\n      throw new Error(\"Cannot find valid exporter for data: \" + JSON.stringify(data));\n    });\n  }\n\n  getImportFileTypes()\n  {\n    return this._module.getGraphExporters().map(e => {\n      if (!e.canImport() || !e.doesSupportFile()) return null;\n      return '.' + e.getFileType();\n    });\n  }\n}\n\nexport default GraphImporter;\n","//https://www.flaticon.com/free-icon/png_136523\nimport React from 'react';\n\nclass PNGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"png-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <path fill=\"#659C35\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z\"/>\n          <path fill=\"#FFFFFF\" d={\"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z\"}/>\n        </g>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#88C057\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default PNGIcon;\n","//https://www.flaticon.com/free-icon/jpg_136524\nimport React from 'react';\n\nclass JPGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"jpg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#26B99A\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n        <path fill=\"#14A085\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 \" +\n            \"c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 \" +\n            \"c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 \" +\n            \"c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 \" +\n            \"s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 \" +\n            \"c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 \" +\n            \"c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 \" +\n            \"s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 \" +\n            \"c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 \" +\n            \"c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 \" +\n            \"v-1.121H39.5z\"}/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JPGIcon;\n","import AbstractGraphExporter from './AbstractGraphExporter.js';\n\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport Downloader from 'util/Downloader.js';\n\nclass GraphImageExporter extends AbstractGraphExporter\n{\n  constructor(imageType='png')\n  {\n    super();\n    this._imageType = imageType;\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const workspace = module._workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    Downloader.downloadSVG(filename, this._imageType, svg, width, height);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return false;\n  }\n\n  //Override\n  getTitle()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png.hint\");\n      case 'jpg': return I18N.toString(\"file.export.jpg.hint\");\n      default: return super.getTitle();\n    }\n  }\n\n  //Override\n  getLabel()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png\");\n      case 'jpg': return I18N.toString(\"file.export.jpg\");\n      default: return super.getLabel();\n    }\n  }\n\n  //Override\n  getFileType()\n  {\n    return this._imageType;\n  }\n\n  //Override\n  getIconClass()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return PNGIcon;\n      case 'jpg': return JPGIcon;\n      default: return null;\n    }\n  }\n}\n\nexport default GraphImageExporter;\n","import React from 'react';\nimport '../Panel.css';\nimport './ExportingPanel.css';\n\nimport IconButton from 'icons/IconButton.js';\n\nclass ExportingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  renderExporterButton(exporter)\n  {\n    if (!exporter.doesSupportFile()) return null;\n\n    return <IconButton key={exporter.getFileType()}\n      className=\"export-button\"\n      id={\"export-\" + exporter.getFileType()}\n      title={exporter.getTitle()}\n      onClick={() => {\n        const module = this.props.currentModule;\n        const machineController = module.getMachineController();\n        const filename = machineController.getMachineName() || \"Untitled\";\n        exporter.exportToFile(filename, module);\n      }}>\n      { React.createElement(exporter.getIconClass()) }\n      <label>{ exporter.getLabel() }</label>\n    </IconButton>;\n  }\n\n  //Override\n  render()\n  {\n    const module = this.props.currentModule;\n    const graphExporters = module.getGraphExporters();\n    const imageExporters = module.getImageExporters();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"exporting\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n      {\n        graphExporters.map(e => this.renderExporterButton(e))\n      }\n      {\n        imageExporters.map(e => this.renderExporterButton(e))\n      }\n        <hr/>\n        {/*Save to E-mail*/}\n        <div className=\"export-email\">\n        </div>\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(ExportingPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.exporting.title\"); }\n});\nExportingPanel.UNLOCALIZED_NAME = \"component.exporting.title\";\n\nexport default ExportingPanel;\n","const RGB_WHITE = [255, 255, 255];\nconst RGB_BLACK = [0, 0, 0];\n\nexport function blendRGB(percent, rgb1, rgb2=null, dst=[])\n{\n  const blendAmount = Math.abs(percent);\n  if (!rgb2) rgb2 = percent < 0 ? RGB_BLACK : RGB_WHITE;\n\n  dst[0] = rgb1[0] + Math.round(blendAmount * (rgb2[0] - rgb1[0]));\n  dst[1] = rgb1[1] + Math.round(blendAmount * (rgb2[1] - rgb1[1]));\n  dst[2] = rgb1[2] + Math.round(blendAmount * (rgb2[2] - rgb1[2]));\n  return dst;\n}\n\nexport function invertRGB(rgb, blackwhite=false, dst=[])\n{\n  if (blackwhite)\n  {\n    // http://stackoverflow.com/a/3943023/112731\n    if ((rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 186)\n    {\n      dst[0] = 0;\n      dst[1] = 0;\n      dst[2] = 0;\n    }\n    else\n    {\n      dst[0] = 0xFF;\n      dst[1] = 0xFF;\n      dst[2] = 0xFF;\n    }\n  }\n  else\n  {\n    dst[0] = (255 - rgb[0]);\n    dst[1] = (255 - rgb[1]);\n    dst[2] = (255 - rgb[2]);\n  }\n  return dst;\n}\n\n/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nexport function HEXtoRGB(hex, dst=[])\n{\n  if (hex.indexOf('#') === 0) hex = hex.slice(1);\n  if (hex.length === 3) hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  if (hex.length !== 6) throw new Error('Invalid hex color format');\n  const red = hex.substring(0, 2);\n  const green = hex.substring(2, 4);\n  const blue = hex.substring(4, 6);\n\n  dst[0] = parseInt(red, 16);\n  dst[1] = parseInt(green, 16);\n  dst[2] = parseInt(blue, 16);\n  return dst;\n}\nexport function RGBtoHEX(rgb)\n{\n  return '#' + (rgb[2] | (rgb[1] << 8) | (rgb[0] << 16) | (1 << 24)).toString(16).slice(1);\n}\nexport function RGBtoHSV(rgb, dst=[])\n{\n  let r = rgb[0] / 255;\n  let g = rgb[1] / 255;\n  let b = rgb[2] / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const d = max - min;\n\n  let h = 0;\n  const s = max == 0 ? 0 : d / max;\n  const v = max;\n  if (max == min)\n  {\n    h = 0;\n  }\n  else\n  {\n    switch(max)\n    {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  dst[0] = h;\n  dst[1] = s;\n  dst[2] = v;\n  return dst;\n}\nexport function HSVtoRGB(h, s, v, dst=[])\n{\n  let r = 0; let g = 0; let b = 0;\n  const i = Math.floor(h * 6);\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  switch(i % 6)\n  {\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n  }\n\n  dst[0] = r * 255;\n  dst[1] = g * 255;\n  dst[2] = b * 255;\n  return dst;\n}\n","class StyleOption\n{\n  constructor(elementSource, propName, inputType, groupName, callback)\n  {\n    //the html element that this css variable reflects\n    this.element = elementSource;\n    //the name of the css variable\n    this.prop = propName;\n    //the css variable type\n    this.type = inputType;\n    //the group that the variable belongs to (\"default\" if not specified)\n    this.group = groupName;\n\n    this._callback = callback;\n    this._value = null;\n    this._defaultValue = null;\n  }\n\n  /**\n   * Update the current value to reflect the computed style's value.\n   */\n  updateStyle(computedStyle=null, shouldPropagateChange=true)\n  {\n    if (!computedStyle)\n    {\n      computedStyle = window.getComputedStyle(this.element);\n    }\n    const newValue = computedStyle.getPropertyValue(this.prop);\n    if (!newValue)\n    {\n      throw new Error(\"Cannot find style option with prop name \\'\" + this.prop + \"\\' for element\");\n    }\n\n    this._value = newValue.trim();\n    this._defaultValue = this._value;\n    if (shouldPropagateChange && this._callback) this._callback(this, newValue);\n  }\n\n  /**\n   * Reset the current value to reflect the computed style's value.\n   */\n  resetStyle()\n  {\n    this.setStyle(this._defaultValue);\n  }\n\n  /**\n   * Changes the variable's value for prop name.\n   * These changes are reflected to the css source.\n   */\n  setStyle(val, shouldPropagateChange=true)\n  {\n    this._value = val;\n    this.element.style.setProperty(this.prop, val);\n\n    if (shouldPropagateChange && this._callback) this._callback.call(null, this, val);\n  }\n\n  /** Returns the variable's current value. Null if not yet initialized. */\n  getStyle()\n  {\n    return this._value;\n  }\n\n  isDefaultStyle()\n  {\n    return this._value == this._defaultValue;\n  }\n}\n\nclass StyleOptionRegistry\n{\n  constructor()\n  {\n    this._options = new Map();\n    this._groups = new Map();\n\n    this._init = false;\n  }\n\n  registerStyleOption(elementSource, propName, inputType=\"text\", groupName=\"default\", changeCallback=null)\n  {\n    if (this._options.has(propName))\n    {\n      throw new Error(\"Style option with prop name \\'\" + propName + \"\\' already registered\");\n    }\n\n    const result = new StyleOption(elementSource, propName, inputType, groupName, changeCallback);\n    this._options.set(propName, result);\n\n    let group;\n    if (!this._groups.has(groupName))\n    {\n      group = [];\n      this._groups.set(groupName, group);\n    }\n    else\n    {\n      group = this._groups.get(groupName);\n\n      if (group.indexOf(propName) != -1)\n      {\n        //Ignore it, it's already in here\n        return;\n      }\n    }\n    group.push(propName);\n  }\n\n  unregisterStyleOption(propName)\n  {\n    if (this._options.has(propName))\n    {\n      const option = this._options.get(propName);\n      this._options.delete(propName);\n      const groupName = option.group;\n      if (this._groups.has(groupName))\n      {\n        const group = this._groups.get(groupName);\n        const index = group.indexOf(propName);\n        if (index >= 0)\n        {\n          group.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  initialize()\n  {\n    if (this._init)\n    {\n      throw new Error(\"Already initialized\");\n    }\n\n    //Compute the styles\n    const computedStyles = {};\n    let computedStyle;\n    for(let option of this._options.values())\n    {\n      const element = option.element;\n      computedStyle = computedStyles[element];\n      if (!computedStyle)\n      {\n        computedStyle = window.getComputedStyle(element);\n        computedStyles[element] = computedStyle;\n      }\n      option.updateStyle(computedStyle, false);\n    }\n\n    this._init = true;\n  }\n\n  terminate()\n  {\n    if (!this._init)\n    {\n      throw new Error(\"Not yet initialized\");\n    }\n\n    this._options.clear();\n    this._groups.clear();\n\n    this._init = false;\n  }\n\n  getOptionByProp(propName)\n  {\n    return this._options.get(propName);\n  }\n\n  getPropsByGroup(groupName)\n  {\n    return this._groups.get(groupName) || [];\n  }\n\n  getOptions()\n  {\n    return this._options.values();\n  }\n\n  isEmpty()\n  {\n    return this._options.size <= 0;\n  }\n}\n\nexport default StyleOptionRegistry;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e)\n  {\n    const newValue = e.target.value;\n    const value = this.props.value;\n    const onChange = this.props.onChange;\n\n    value.setStyle(newValue);\n    if (onChange) onChange(value);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const value = this.props.value;\n    const propName = value.prop;\n    const inputType = value.type;\n    const inputID = \"styleopt-\" + propName;\n\n    return <span id={this.props.id} className={this.props.className} style={this.props.style}>\n      <input id={inputID} type={inputType} value={value.getStyle()} onChange={this.onChange} disabled={this.props.disabled}/>\n      <label htmlFor={inputID}>{title}</label>\n    </span>;\n  }\n}\nexport default StyleInput;\n","import React from 'react';\nimport './OptionGroup.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\nclass OptionGroup extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"option-group \" + this.props.className}>\n      <div className=\"option-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <label>({this.props.label})</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"option-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        { this.props.children }\n      </div>\n    </div>;\n  }\n}\n\nexport default OptionGroup;\n","import React from 'react';\nimport './OptionHotkey.css';\n\nclass OptionHotkey extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className={\"option-container option-hotkey \" + this.props.className}>\n      <label>{this.props.label}</label>\n      <span>{this.props.keyName}</span>\n    </div>;\n  }\n}\n\nexport default OptionHotkey;\n","import React from 'react';\nimport '../Panel.css';\nimport './OptionsPanel.css';\n\nimport Config from 'config.js';\nimport { saveConfig } from 'config.js';\n\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport * as ColorHelper from 'util/ColorHelper.js';\nimport StyleOptionRegistry from 'system/styleopt/StyleOptionRegistry.js';\nimport StyleInput from 'system/styleopt/components/StyleInput.js';\n\nimport OptionGroup from './OptionGroup.js';\nimport OptionHotkey from './OptionHotkey.js';\n\n//This should be the same as the one referred to by index.js\nconst LOCAL_STORAGE_ID = \"skipWelcome\";\n\nclass OptionsPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n\n    this.container = React.createRef();\n    this.styleOpts = new StyleOptionRegistry();\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalSave.getStringFromStorage(LOCAL_STORAGE_ID) === \"true\",\n      disableExitWarning: LocalSave.getStringFromStorage(\"disableExitWarning\") === \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n    this.onChangeModule = this.onChangeModule.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    const invertFunc = function(opt, value) {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, false, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-invert\").setStyle(result);\n    };\n\n    const darkFunc = function(opt, value) {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.2, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    };\n\n    const subtleFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.39, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-subtle\").setStyle(result);\n    };\n\n    const ghostFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.26, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-ghost\").setStyle(result);\n    };\n\n    const backFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.13, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-back\").setStyle(result);\n    };\n\n    //Toolbar\n    opts.registerStyleOption(root, \"--color-toolbar-main\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-accent\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-accent-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-text\", \"color\", \"toolbar\", invertFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-text-invert\", \"color\", \"hidden\");\n\n    //Drawer\n    opts.registerStyleOption(root, \"--color-drawer-main\", \"color\", \"drawer\", darkFunc);\n    opts.registerStyleOption(root, \"--color-drawer-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-accent\", \"color\", \"drawer\");\n    opts.registerStyleOption(root, \"--color-drawer-text\", \"color\", \"drawer\", (...args) => {\n      subtleFunc(...args);\n      ghostFunc(...args);\n      invertFunc(...args);\n      backFunc(...args);\n    });\n    opts.registerStyleOption(root, \"--color-drawer-text-subtle\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-ghost\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-invert\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-back\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-error\", \"color\", \"drawer\");\n\n    //Testing\n    opts.registerStyleOption(root, \"--color-testing-success\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-failure\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-working\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-text\", \"color\", \"testing\");\n\n    //Notification\n    opts.registerStyleOption(root, \"--color-notification-text\", \"color\", \"notification\");\n    opts.registerStyleOption(root, \"--color-notification-info\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-info-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-error\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-warning\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-warning-dark\", \"color\", \"hidden\");\n\n    //Workspace\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-text\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-main\", \"color\", \"workspace\");\n\n    //Label editor\n    opts.registerStyleOption(root, \"--color-labeleditor-text\", \"color\", \"labeleditor\");\n    opts.registerStyleOption(root, \"--color-labeleditor-main\", \"color\", \"labeleditor\");\n\n    //Viewport\n    opts.registerStyleOption(root, \"--color-viewport-error\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-testing\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-warning\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-highlight-select\", \"color\", \"viewport\");\n\n    opts.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    this.styleOpts.terminate();\n\n    LocalSave.unregisterHandler(this);\n  }\n\n  onLoadSave()\n  {\n    const opts = this.styleOpts;\n    const data = LocalSave.loadFromStorage(\"prefs-color\");\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  onAutoSave()\n  {\n    const opts = this.styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    LocalSave.saveToStorage(\"prefs-color\", data);\n  }\n\n  onChangeTheme(e)\n  {\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of this.styleOpts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  onChangeModule(e)\n  {\n    //Nothing yet...\n  }\n\n  //Override\n  render()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    return <div className={\"panel-container \" + this.props.className} id=\"option\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.options.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n\n        <OptionGroup title={I18N.toString(\"component.workspace.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.savemachine\")} keyName=\"Ctrl + S\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.undo.label\")} keyName=\"Ctrl + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.redo.label\")} keyName=\"Ctrl + Shift + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.saveimage\")} keyName=\"Ctrl + P\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={\"Add test input\"} keyName=\"Enter\"/>\n          <OptionHotkey label={\"Run test input\"} keyName=\"Shift + Enter\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.workspace.submit.label\")} keyName=\"Enter\"/>\n          <OptionHotkey label={I18N.toString(\"action.workspace.cancel.label\")} keyName=\"Escape\"/>\n        </OptionGroup>\n\n        <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n          <input id=\"option-skipwelcome\" type=\"checkbox\" checked={this.state.skipWelcome}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: e.target.checked});\n            LocalSave.setStringToStorage(LOCAL_STORAGE_ID, \"\" + result);\n          }}/>\n          <label htmlFor=\"option-skipwelcome\">{I18N.toString(\"options.skipwelcome\")}</label>\n        </div>\n\n        <hr/>\n\n        <div>\n          <div id=\"options-theme-select-container\">\n            <label htmlFor=\"options-theme-select\">Theme</label>\n            <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n              <option value=\"default\">Default</option>\n              <option value=\"ucsd\" disabled={true}>UC San Diego (Coming Soon)</option>\n              <option value=\"duke\" disabled={true}>Duke University (Coming Soon)</option>\n            </select>\n            {\n              !this.state.customTheme &&\n              <button className=\"panel-button\" onClick={() => this.setState({customTheme: true})}>\n                {I18N.toString(\"action.options.changetheme\")}\n              </button>\n            }\n          </div>\n          {\n            this.state.customTheme && <div>\n              <OptionGroup title={I18N.toString(\"component.toolbar.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"toolbar\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.drawer.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"drawer\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"testing\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.notification.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"notification\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.graph.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"workspace\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"labeleditor\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"options.category.general\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"viewport\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <button className=\"panel-button\" onClick={(e) => {\n                for(let option of this.styleOpts.getOptions())\n                {\n                  option.resetStyle();\n                }\n                this.setState({customTheme: false});\n              }}>{I18N.toString(\"action.options.reset\")}</button>\n            </div>\n          }\n        </div>\n\n        <hr/>\n\n        <div>\n          <h2>Experimental</h2>\n\n          <select id=\"options-experimental-modules\" className=\"panel-select\" value={this.props.currentModule.getModuleName()} onChange={this.onChangeModule}>\n            <option value=\"fsa\">Finite State Automata</option>\n            <option value=\"pda\" disabled={true}>Pushdown Automata (Coming Soon)</option>\n            <option value=\"cfg\" disabled={true}>Context-Free Grammar (Future)</option>\n            <option value=\"tm\" disabled={true}>Turing Machine (Future)</option>\n            <option value=\"rdt\" disabled={true}>Red-Black Tree (Future)</option>\n            <option value=\"hlsm\" disabled={true}>High Level State Machine (Future)</option>\n          </select>\n\n          <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n            <input id=\"option-disableexitwarning\" type=\"checkbox\" checked={this.state.disableExitWarning}\n            onChange={(e) => {\n              const result = e.target.checked;\n              this.setState({disableExitWarning: result});\n              LocalSave.setStringToStorage(\"disableExitWarning\", \"\" + result);\n            }}/>\n            <label htmlFor=\"option-disableexitwarning\">{\"Disable Exit Warning\"}</label>\n          </div>\n\n          <button className=\"panel-button\" style={{marginTop: \"10px\"}} onClick={(e) => {\n            if (LocalSave.getStringFromStorage(\"enableExperimental\") === \"true\")\n            {\n              window.alert(\"Please restart to begin the awakening...\");\n            }\n            else if (window.confirm(\"Be careful! This will PERMANENTLY change \" +\n              \"your app and is intended only for debugging purposes. You \" +\n              \"should only enable this if you know what you are doing. Are \" +\n              \"you sure about this?\"))\n            {\n              if (window.confirm(\"Seriously, THIS CAN BREAK THE APP \" +\n                \"PERMANENTLY! So only proceed if you are absolutely sure \" +\n                \"about this. Ask a member of the dev team for assistance.\"))\n              {\n                if (window.prompt(\"Well, at this point, you are either a \" +\n                \"member of the dev team (welcome to the team) or you have \" +\n                \"been instructed to do so by a member of the dev team \" +\n                \"(hello human). Please ask them for the password:\") === \"I solemnly swear I am up to no good.\")\n                {\n                  if (window.confirm(\"Alright, here we go. Last chance to \" +\n                  \"leave. Cancel it now or restart and face the consequences.\"))\n                  {\n                    LocalSave.setStringToStorage(\"enableExperimental\", \"true\");\n                  }\n                }\n                else\n                {\n                  window.alert(\"Sorry, it looks like you are a normal human. Have a hug. <3\");\n                }\n              }\n            }\n          }}>\n            {\"Enable Experimental Mode\"}\n          </button>\n\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(OptionsPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.options.title\"); }\n});\nOptionsPanel.UNLOCALIZED_NAME = \"component.options.title\";\n\nexport default OptionsPanel;\n","import GraphImporter from './exporter/GraphImporter.js';\nimport GraphImageExporter from './exporter/GraphImageExporter.js';\n\nimport ExportingPanel from './panels/exporting/ExportingPanel.js';\nimport OptionsPanel from './panels/options/OptionsPanel.js';\n\nexport const DEFAULT_GRAPH_EXPORTERS = [];\nexport const DEFAULT_IMAGE_EXPORTERS = [\n  new GraphImageExporter('png'),\n  new GraphImageExporter('jpg')\n];\n//TODO: This is inserted by Drawer.js, not used here. (which is weird)\nexport const DEFAULT_PANELS = [ExportingPanel, OptionsPanel];\n\nclass AbstractModule\n{\n  constructor(app)\n  {\n    this._importer = new GraphImporter(this);\n  }\n\n  initialize(app) {}\n\n  destroy(app) {}\n\n  update(app) {}\n\n  getRenderer(renderLayer) { return null; }\n  getInputController() { throw new Error(\"Missing input controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getGraphController() { throw new Error(\"Missing graph controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getMachineController() { throw new Error(\"Missing machine controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getDefaultGraphExporter()\n  {\n    const exporters = this.getGraphExporters();\n    if (exporters.length > 0) return exporters[0];\n\n    throw new Error(\"Missing default graph exporter for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n  getImageExporters() { return DEFAULT_IMAGE_EXPORTERS; }\n  getGraphExporters() { return DEFAULT_GRAPH_EXPORTERS; }\n  getGraphImporter() { return this._importer; }\n  getModulePanels() { return []; }\n  getModuleVersion() { return '0.0.0'; }\n  getModuleName() { throw new Error(\"Missing module name\"); }\n  getLocalizedModuleName() { return \"Module\"; }\n}\n\nexport default AbstractModule;\n","const ROUTER = {\n  _current: null,\n  routeTo(component)\n  {\n    this._current = component;\n  },\n  getCurrentPage()\n  {\n    return this._current;\n  }\n};\n\nexport default ROUTER;\n","class HotKeys\n{\n  constructor()\n  {\n    this.app = null;\n    this.workspace = null;\n    this.toolbar = null;\n    this.undoManager = null;\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.app = app;\n    this.workspace = app.workspace;\n    this.toolbar = app.toolbar;\n    this.undoManager = app.getUndoManager();\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    window.addEventListener('keydown', this.onKeyDown);\n  }\n\n  destroy()\n  {\n    window.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e)\n  {\n    //Ctrl-S\n    if (event.which == 83 && (event.metaKey || event.ctrlKey))\n    {\n      //Save as machine file\n      const exporter = this.app.getCurrentModule().getDefaultGraphExporter();\n      const machineName = this.machineController.getMachineName();\n      exporter.exportToFile(machineName, this.app.getCurrentModule());\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-Z\n    else if (event.which == 90 && (event.metaKey || event.ctrlKey))\n    {\n      if (event.shiftKey)\n      {\n        //Redo\n        this.undoManager.redo();\n      }\n      else\n      {\n        //Undo\n        this.undoManager.undo();\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-P\n    else if (event.which == 80 && (event.metaKey || event.ctrlKey))\n    {\n      //Export to PNG\n      const imageExporters = this.app.getCurrentModule().getImageExporters();\n      if (imageExporter.length >= 1)\n      {\n        const exporter = imageExporters[0];\n        const machineName = this.machineController.getMachineName();\n        exporter.exportToFile(machineName, this.app.getCurrentModule());\n      }\n      else\n      {\n        throw new Error(\"Unable to find valid image exporter for module \\'\" + this.app.getCurrentModule().getModuleName() + \"\\'\");\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nexport default HotKeys;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass UploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(files[0], this.props.app.getCurrentModule())\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n          console.error(e);\n        });\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  render()\n  {\n    const inputID = this.props.id + \"-input\";\n    return <button\n      className={\"icon-button button-upload \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input id={inputID} type=\"file\" name=\"import\"\n        style={{display:\"none\"}}\n        onChange={this.onUploadFileChange}\n        accept={this.props.app.getCurrentModule().getGraphImporter().getImportFileTypes().join(\",\")}/>\n      <label htmlFor={inputID}>\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadButton;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass HelpButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    if (Notifications.hasMessages())\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.3\"));\n      Notifications.addMessage(I18N.toString(\"message.help.1\"));\n    }\n    else\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.2\"));\n    }\n\n    //The tutorial\n    const LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\n    const newTab = window.open(LINK, '_blank');\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button button-help \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default HelpButton;\n","import React from 'react';\n\nclass MachineName extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  onChange(e)\n  {\n    this.setState({value: e.target.value});\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === 'Escape')\n    {\n      const target = e.target;\n      this.setState({value: null}, () => target.blur());\n      return false;\n    }\n    else if (e.key === 'Enter')\n    {\n      e.target.blur();\n      return false;\n    }\n  }\n\n  onFocus(e)\n  {\n    this.setState({value: this.props.value});\n  }\n\n  onBlur(e)\n  {\n    if (this.state.value)\n    {\n      if (this.props.onSubmit) this.props.onSubmit({value: this.state.value});\n    }\n\n    this.setState({value: null});\n  }\n\n  render()\n  {\n    return <input type=\"text\"\n      className={this.props.className}\n      id={this.props.id}\n      value={this.state.value != null ? this.state.value : this.props.value}\n      onChange={this.onChange}\n      onKeyDown={this.onKeyDown}\n      onFocus={this.onFocus}\n      onBlur={this.onBlur}>\n    </input>;\n  }\n}\n\nexport default MachineName;\n","import React from 'react';\n\nclass PageNewIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenew-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"help-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n    </svg>;\n  }\n}\n\nexport default HelpIcon;\n","import React from 'react';\n\nclass LanguageIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"language-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 \" +\n        \"22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 \" +\n        \"3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 \" +\n        \"1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 \" +\n        \"1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 \" +\n        \"1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 \" +\n        \"4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 \" +\n        \"1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 \" +\n        \"0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 \" +\n        \"5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 \" +\n        \"14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 \" +\n        \"1.36-.26 2h-3.38z\"}/>\n    </svg>;\n  }\n}\n\nexport default LanguageIcon;\n","import React from 'react';\n\nclass OfflineIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"offline-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n      <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n    </svg>;\n  }\n}\n\nexport default OfflineIcon;\n","import React from 'react';\n\nclass BugReportIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"bugreport-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d={\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 \" +\n      \"3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 \" +\n      \"4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 \" +\n      \"1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 \" +\n      \"3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.\"\n      + \"34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 \" +\n      \"1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 \" +\n      \"15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 \" +\n      \"1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 \" +\n      \".63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07\" +\n      \".47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"}/>\n    </svg>;\n  }\n}\n\nexport default BugReportIcon;\n","import React from 'react';\nimport './DrawerExpander.css';\n\nclass DrawerExpander extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const app = this.props.app;\n    if (app.state.isFullscreen)\n    {\n      app.setState({isFullscreen: false});\n    }\n    else if (app.state.isOpen)\n    {\n      app.closeDrawer();\n    }\n    else\n    {\n      app.openDrawer();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const open = app.state.isOpen;\n\n    return <div className={\"drawer-expand\" + (open ? \" open\" : \"\")}\n      onClick={this.onClick}>\n      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M5 3.737l12.395 8.263-12.395 8.263v-16.526zm-2-3.737v24l18-12-18-12z\"/>\n      </svg>\n    </div>;\n  }\n}\n\nexport default DrawerExpander;\n","import React from 'react';\nimport './Drawer.css';\n\nimport DrawerExpander from './DrawerExpander.js';\n\nimport { DEFAULT_PANELS } from 'modules/abstract/AbstractModule.js';\nconst DEFAULT_TAB_INDEX = 0;\n\nconst MAX_PANEL_THRESHOLD = 50;\nconst MIN_PANEL_SIZE = 300;//180\n\nclass Drawer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      tabIndex: DEFAULT_TAB_INDEX,\n      dragging: false\n    };\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    this._ontouchmove = null;\n    this._ontouchend = null;\n  }\n\n  setTab(index)\n  {\n    const app = this.props.app;\n\n    //Open drawer if it is closed\n    if (!app.state.isOpen)\n    {\n      app.openDrawer();\n    }\n    //Full drawer if clicked on same one\n    else\n    {\n      if (this.state.tabIndex === index)\n      {\n        app.openDrawer(!app.state.isFullscreen);\n      }\n    }\n\n    this.setState((prev, props) => {\n      return { tabIndex: index };\n    });\n  }\n\n  onStartDraggingDrawerBorder(x, y)\n  {\n    const app = this.props.app;\n    this.setState({dragging: true});\n\n    //Disable fullscreen if dragging off of it\n    if (app.state.isFullscreen)\n    {\n      app.openDrawer(false);\n    }\n\n    //Update panel to current click position\n    updatePanelSize(app, x, y);\n  }\n\n  onStopDraggingDrawerBorder()\n  {\n    this.setState({dragging: false});\n  }\n\n  onTouchStart(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._ontouchmove)\n    {\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n      this._ontouchmove = null;\n    }\n\n    if (this._ontouchend)\n    {\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      this._ontouchend = null;\n    }\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      this.setState({dragging: false});\n      return;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onStartDraggingDrawerBorder(touch.clientX, touch.clientY);\n\n    this._ontouchmove = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n    };\n\n    document.addEventListener(this._ontouchmove);\n\n    this._ontouchend = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"touchend\", this._ontouchend);\n    document.addEventListener(\"touchmove\", this._ontouchmove);\n  }\n\n  onMouseDown(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      return;\n    }\n\n    this.onStartDraggingDrawerBorder(e.clientX, e.clientY);\n\n    const onMouseMove = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n    };\n\n    const onMouseUp = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousemove\", onMouseMove);\n  }\n\n  onScroll(e)\n  {\n    //if (this.panel)\n    {\n      //TODO: this.panel.container.scrollBy(0, e.deltaY);\n      //TODO: return false;\n    }\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const tabIndex = this.state.tabIndex;\n    const InfoPanel = currentModule ? currentModule.getModulePanels()[0] : null;\n\n    return <div className={\"drawer-container\"} onWheel={this.onScroll}>\n      <div className=\"drawer-content\">\n      {\n        currentModule &&\n        currentModule.getModulePanels().map((PanelClass, i) => {\n          const panelID = i + 1;\n          return <PanelClass key={currentModule.getModuleName() + \":\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            currentModule={currentModule}/>;\n        })\n      }\n      {\n        tabIndex == 0 && InfoPanel != null &&\n        <InfoPanel currentModule={currentModule}/>\n      }\n      {\n        DEFAULT_PANELS.map((PanelClass, i) => {\n          const panelID = -(i + 1);\n          return <PanelClass key={\"default:\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            currentModule={currentModule}/>;\n        })\n      }\n      </div>\n      <div className=\"tab-list\">\n        <DrawerExpander app={app}/>\n        {\n          currentModule &&\n          currentModule.getModulePanels().map((PanelClass, i) => {\n            //Hide panels with no name...\n            if (!PanelClass.UNLOCALIZED_NAME) return;\n\n            const panelID = i + 1;\n            return <button key={currentModule.getModuleName() + \":\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        {\n          DEFAULT_PANELS.map((PanelClass, i) => {\n            const panelID = -(i + 1);\n            return <button key={\"default:\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        <div className=\"tab-right\"></div>\n      </div>\n\n      <div className={\"drawer-border\" + (this.state.dragging ? \" dragging\" : \"\")}\n        onTouchStart={this.onTouchStart}\n        onMouseDown={this.onMouseDown}>\n      </div>\n    </div>;\n  }\n}\n\nfunction updatePanelSize(app, x, y)\n{\n  const container = app.container;\n  let fullscreen = false;\n  let size = 0;\n  //This is the same criteria as in App.css\n  if (window.matchMedia(\"(max-width: 420px)\").matches)\n  {\n    //Vertical slide\n    const viewportOffsetY = app.viewport.ref.getBoundingClientRect().y;\n    if (y - viewportOffsetY < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetHeight - y;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n  else\n  {\n    //Horizontal slide\n    if (x < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetWidth - x;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n\n  //Make sure is greater than minimum size and vice versa\n  if (size < MIN_PANEL_SIZE) size = MIN_PANEL_SIZE;\n\n  //Set panel size\n  container.style.setProperty(\"--panel-size\", size + \"px\");\n}\nDrawer.EXPORTING_PANEL_TAB_INDEX = -1;\nDrawer.OPTIONS_PANEL_TAB_INDEX = -2;\n\nexport default Drawer;\n","import React from 'react';\nimport './Toolbar.css';\n\nimport Config from 'config.js';\n\nimport UploadButton from \"./UploadButton.js\";\nimport HelpButton from \"./HelpButton.js\";\nimport MachineName from './MachineName.js';\n\nimport IconButton from 'icons/IconButton.js';\n\nimport MoreIcon from 'icons/MoreIcon.js';\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewIcon.js';\n//import CreateIcon from 'icons/CreateIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\n//import SaveIcon from 'icons/DiskSaveIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\nimport HelpIcon from 'icons/HelpIcon.js';\nimport LanguageIcon from 'icons/LanguageIcon.js';\nimport OfflineIcon from 'icons/OfflineIcon.js';\nimport OfflinePinIcon from 'icons/OfflinePinIcon.js';\nimport BugReportIcon from 'icons/BugReportIcon.js';\n\nimport Drawer from 'content/drawer/Drawer.js';\n\nconst BUG_REPORT_URL = \"https://goo.gl/forms/XSil43Xl5xLHsa0E2\";\n\nclass Toolbar extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      langOn: false\n    };\n\n    this.onMachineNameChange = this.onMachineNameChange.bind(this);\n    this.onMachineNameKeyDown = this.onMachineNameKeyDown.bind(this);\n    this.langOnClick = this.langOnClick.bind(this);\n  }\n\n  onMachineNameChange(e)\n  {\n    this.props.machineController.renameMachine(e.value);\n  }\n\n  onMachineNameKeyDown()\n  {\n\n  }\n\n  onMachineNameBlur()\n  {\n\n  }\n\n  langOnClick()\n  {\n    this.setState({langOn: !this.state.langOn});\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const drawer = this.props.drawer;\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const undoManager = app.getUndoManager();\n\n    const graph = graphController.getGraph();\n\n    const offline = navigator && navigator.onLine;\n\n    return <div className=\"toolbar-container\">\n      <div className=\"toolbar-title\">\n        <div className=\"toolbar-title-name\">\n          {/*Machine Name*/}\n          <MachineName id=\"machine-name\" value={machineController.getMachineName()} onSubmit={this.onMachineNameChange}/>\n          {/*Toolbar Alt. Title*/}\n          <div className=\"toolbar-title-alt\">\n            {/*Offline Button*/}\n            <IconButton id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n              onClick={() => {\n                if ('serviceWorker' in navigator)\n                {\n                  if (navigator.serviceWorker.getRegistration(\"./app.html\"))\n                  {\n                    alert(I18N.toString(\"message.offline.ready\"));\n                  }\n                  else\n                  {\n                    alert(I18N.toString(\"message.offline.failed\"));\n                  }\n                }\n                else\n                {\n                  alert(I18N.toString(\"message.offline.nosupport\"));\n                }\n              }} disabled={offline}>\n              <OfflineIcon/>\n            </IconButton>\n            {/*Upload Button\n            <div id=\"toolbar-upload-alt\"\n              title={I18N.toString(\"action.toolbar.uploadmachine\")}>\n              <MoreIcon/>\n            </div>\n            */}\n          </div>\n        </div>\n        {/*Machine Type*/}\n        <label id=\"machine-type\"\n          onClick={()=>drawer.setTab(0)}>\n          {currentModule.getLocalizedModuleName()}\n        </label>\n      </div>\n\n      <div className=\"toolbar-tray\">\n        {/*New Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-new\" title={I18N.toString(\"action.toolbar.newmachine\")}\n          onClick={() => {\n            if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n            {\n              graph.clear();\n              undoManager.clear();\n              machineController.setMachineName(null);\n            }\n          }}>\n          <CreateIcon/>\n        </IconButton>\n        {/*Upload Button*/}\n        <UploadButton className=\"navicon\" id=\"toolbar-upload\" title={I18N.toString(\"action.toolbar.uploadmachine\")}\n          app={app}\n          graphController={graphController}>\n          <UploadIcon/>\n        </UploadButton>\n        {/*Undo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-undo\" title={I18N.toString(\"action.toolbar.undo\")}\n          disabled={!undoManager.canUndo()}\n          onClick={()=>undoManager.undo()}>\n          <UndoIcon/>\n        </IconButton>\n        {/*Redo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-redo\" title={I18N.toString(\"action.toolbar.redo\")}\n          disabled={!undoManager.canRedo()}\n          onClick={()=>undoManager.redo()}>\n          <RedoIcon/>\n        </IconButton>\n        {/*Save Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-save\" title={I18N.toString(\"action.toolbar.save\")}\n          onClick={()=>drawer.setTab(Drawer.EXPORTING_PANEL_TAB_INDEX)} disabled={graph.isEmpty()}>\n          <SaveIcon/>\n        </IconButton>\n\n        {/*Right Alt. Toolbar*/}\n        <div className=\"toolbar-tray-alt\">\n          {/*Report a Bug Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-bug\" title={I18N.toString(\"action.toolbar.bug\")}\n            onClick={e => window.open(BUG_REPORT_URL, '_blank')}>\n            <BugReportIcon/>\n          </IconButton>\n          {/*Help Button*/}\n          <HelpButton className=\"navicon\" id=\"toolbar-help\" title={I18N.toString(\"action.toolbar.help\")}>\n            <HelpIcon/>\n          </HelpButton>\n          {/*Language Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n            onClick={(e) => {document.activeElement.blur(); this.langOnClick();}} >\n            <LanguageIcon/>\n          </IconButton>\n          {/*Language Select*/}\n          <select id=\"toolbar-lang-select\" style={{maxWidth: (this.state.langOn ? \"10em\" : \"0\")}} onChange={(e) => {I18N.fetchLanguageFile(e.target.value);}}>\n            <option value=\"en_us\">English</option>\n            <option value=\"xx_pirate\">Pirate Speak</option>\n          </select>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport './Subtitle.css';\n\nimport Config from 'config.js';\n\nclass Subtitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { active: false };\n\n    this.messageTimer = null;\n  }\n\n  componentDidMount()\n  {\n    this.messageTimer = setTimeout(() => {\n      this.setState({ active: true });\n    }, Config.INIT_WAITTIME);\n  }\n\n  render()\n  {\n    const visible = this.state.active ? this.props.visible : false;\n    return <text y=\"-1em\" className={\"graph-ui subtitle\" + (visible ? \" visible\" : \"\")}\n      textAnchor=\"middle\">{I18N.toString(\"message.workspace.empty\")}</text>;\n  }\n}\n\nexport default Subtitle;\n","import React from 'react';\nimport './Workspace.css';\n\nimport Config from 'config.js';\n\nimport Subtitle from './Subtitle.js';\n\nconst WORKSPACE_OFFSET_X = 0;\nconst WORKSPACE_OFFSET_Y = 0;\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nconst GRAPH_RENDER_LAYER = \"graph\";\nconst GRAPH_OVERLAY_RENDER_LAYER = \"graphoverlay\";\n\nclass Workspace extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n  }\n\n  getSVGForExport(width, height)\n  {\n    const svg = this.ref;\n    if (!svg) return null;\n\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n\n    const viewport = inputController.getInputAdapter().getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = svg.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n    clone.setAttribute('style', \".graph-ui {display: none;}\");\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    while(uiElements.length > 0)\n    {\n      const e = uiElements[0];\n      e.remove();//This will propagate changes to uiElements, so be careful\n    }\n\n    return clone;\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const inputController = currentModule.getInputController();\n    const machineController = currentModule.getMachineController();\n\n    const GraphRenderer = currentModule.getRenderer(GRAPH_RENDER_LAYER);\n    const GraphOverlayRenderer = currentModule.getRenderer(GRAPH_OVERLAY_RENDER_LAYER);\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    let size = Config.DEFAULT_GRAPH_SIZE * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfSize = size / 2;\n\n    //Must not be a block content (must inline)\n    return <svg id=\"workspace-content\" ref={ref=>this.ref=ref}\n      viewBox={(-halfSize + WORKSPACE_OFFSET_X) + \" \"\n        + (-halfSize + WORKSPACE_OFFSET_Y) + \" \"\n        + size + \" \" + size}\n      xmlns=\"http://www.w3.org/2000/svg\">\n\n      {/* Graph subtitle */}\n      <Subtitle visible={graph.isEmpty()}/>\n\n      {/* Graph elements */}\n      <g id=\"workspace-content-elements\" transform={\"translate(\"\n        + viewport.getOffsetX() + \" \"\n        + viewport.getOffsetY() + \")\"}>\n\n        {/* Graph origin crosshair */}\n        <g className=\"graph-ui\">\n          <line x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"#E6E6E6\"/>\n          <line x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"#E6E6E6\"/>\n        </g>\n\n        {/* Graph objects */}\n        { GraphRenderer &&\n          <GraphRenderer {...this.props} parent={this}/> }\n\n        {/* Graph overlays */}\n        { GraphOverlayRenderer &&\n          <GraphOverlayRenderer {...this.props} parent={this}/> }\n      </g>\n    </svg>;\n  }\n}\n\nexport default Workspace;\n","import Notifications from 'system/notification/Notifications.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport Config from 'config.js';\n\nclass Tutorial\n{\n  constructor()\n  {\n    this.app = null;\n  }\n\n  start(app)\n  {\n    if (LocalSave.getStringFromStorage(\"skipWelcome\") !== \"true\")\n    {\n      Notifications.addMessage(I18N.toString(\"message.tutorial.1\"));\n      Notifications.addMessage(I18N.toString(\"message.intro.2\"));\n    }\n  }\n}\n\nexport default Tutorial;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './App.css';\n\nimport Config from 'config.js';\n\n//import Modules from './Modules.js';\n//import Module from 'modules/default/DefaultModule.js';\nimport Module from 'modules/fsa/FSAModule.js';\n\nimport HotKeys from './HotKeys.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nimport Toolbar from './toolbar/Toolbar.js';\nimport Workspace from './workspace/Workspace.js';\nimport Drawer from './drawer/Drawer.js';\nimport Viewport from './viewport/Viewport.js';\nimport Tutorial from 'tutorial/Tutorial.js';\n\nimport InputAdapter from 'system/inputadapter/InputAdapter.js';\nimport Notifications from 'system/notification/Notifications.js';\nimport NotificationView from 'system/notification/components/NotificationView.js';\nimport UndoManager from 'system/undomanager/UndoManager.js';\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //Create references\n    this.container = null;\n    this.workspace = null;\n    this.viewport = null;\n    this.drawer = null;\n    this.toolbar = null;\n\n    //These need to be initialized before module\n    this.inputAdapter = new InputAdapter();\n    this.inputAdapter.getViewport()\n      .setMinScale(Config.MIN_SCALE)\n      .setMaxScale(Config.MAX_SCALE)\n      .setOffsetDamping(Config.SMOOTH_OFFSET_DAMPING);\n\n    this.undoManager = new UndoManager();\n\n    //Modules should handle its own initialization, regardless of web state\n    //Also, loading from file should be handled by modules themselves\n    this._module = new Module(this);\n    /*\n    Modules['fsa'].fetch((Module) => {\n      const prevModule = this._module;\n      if (prevModule && this._init)\n      {\n        prevModule.destroy(this);\n      }\n\n      this._module = new Module(this);\n\n      if (this._init)\n      {\n        this._module.initialize(this);\n      }\n    });\n    */\n\n    this.hotKeys = new HotKeys();\n    this.tutorial = new Tutorial();\n\n    this.state = {\n      isOpen: true,\n      isDangerous: false,\n      isFullscreen: false,\n      isWaitingForFile: false\n    };\n\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n\n    this._init = false;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //Initialize input adapter\n    const workspaceDOM = this.workspace.ref;\n    this.inputAdapter.initialize(workspaceDOM);\n\n    //Initialize the module...\n    const module = this.getCurrentModule();\n    module.initialize(this);\n\n    this.hotKeys.initialize(this);\n\n    //Upload drop zone\n    workspaceDOM.addEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.addEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.addEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.addEventListener(\"dragleave\", this.onDragLeave);\n\n    //Begin tutorial\n    this.tutorial.start(this);\n\n    LocalSave.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n\n    this._init = true;\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    LocalSave.unregisterHandler(this);\n\n    LocalSave.terminate();\n\n    this.hotKeys.destroy();\n\n    this._module.destroy(this);\n\n    this.inputAdapter.destroy();\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.removeEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.removeEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.removeEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.removeEventListener(\"dragleave\", this.onDragLeave);\n\n    this._init = false;\n  }\n\n  onLoadSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const data = LocalSave.loadFromStorage(\"graph-\" + moduleName);\n    if (data)\n    {\n      const exporter = this._module.getDefaultGraphExporter();\n      exporter.importFromData(data, this._module);\n    }\n  }\n\n  onAutoSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const exporter = this._module.getDefaultGraphExporter();\n    const data = exporter.exportToData(this._module);\n    LocalSave.saveToStorage(\"graph-\" + moduleName, data);\n  }\n\n  //Called to prevent default file open\n  onDragOver(ev)\n  {\n    ev.preventDefault();\n  }\n\n  onDragEnter(ev)\n  {\n    ev.preventDefault();\n\n    //Change state\n    this.setState({ isWaitingForFile: true });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: Viewport.DANGEROUS\n      };\n    });\n  }\n\n  onDragLeave(ev)\n  {\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n  }\n\n  onFileDrop(ev)\n  {\n    //Prevent file from being opened\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n\n    let fileBlob = null;\n    if (ev.dataTransfer.items)\n    {\n      const length = ev.dataTransfer.items.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = ev.dataTransfer.items[0];\n        if (file.kind === 'file')\n        {\n          fileBlob = file.getAsFile();\n        }\n      }\n    }\n    else\n    {\n      const length = ev.dataTransfer.files.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        fileBlob = ev.dataTransfer.files[0];\n      }\n    }\n\n    if (fileBlob)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(fileBlob, this._module)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n        });\n    }\n\n    if (ev.dataTransfer.items)\n    {\n      ev.dataTransfer.items.clear();\n    }\n    else\n    {\n      ev.dataTransfer.clearData();\n    }\n  }\n\n  openDrawer(full=null)\n  {\n    if (typeof full === 'boolean')\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true, isFullscreen: full };\n      });\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true };\n      });\n    }\n  }\n\n  closeDrawer()\n  {\n    this.setState((prev, props) => {\n      return { isOpen: false };\n    });\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.isOpen;\n  }\n\n  shouldHideContent()\n  {\n    return this.state.isFullscreen && this.state.isOpen;\n  }\n\n  getCurrentModule()\n  {\n    return this._module;\n  }\n\n  getInputController()\n  {\n    return this._module.getInputController();\n  }\n\n  getGraphController()\n  {\n    return this._module.getGraphController();\n  }\n\n  getMachineController()\n  {\n    return this._module.getMachineController();\n  }\n\n  getInputAdapter()\n  {\n    return this.inputAdapter;\n  }\n\n  getUndoManager()\n  {\n    return this.undoManager;\n  }\n\n  render()\n  {\n    const currentModule = this._module;\n    const screen = this.workspace ? this.workspace.ref : null;\n\n    if (this._init)\n    {\n      this.inputAdapter.update();\n      currentModule.update(this);\n    }\n\n    return <div className=\"app-container\" ref={ref=>this.container=ref}>\n      <Toolbar ref={ref=>this.toolbar=ref}\n        app={this}\n        currentModule={currentModule}\n        drawer={this.drawer}/>\n\n      <NotificationView notificationManager={Notifications}/>\n\n      <div className=\"workspace-container\">\n        <div className={\"workspace-main\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\",\n            opacity: this.state.isWaitingForFile ? \"0.1\" : \"1\"\n          }}>\n\n          <Workspace ref={ref=>this.workspace=ref}\n            currentModule={currentModule}/>\n        </div>\n\n        <div className={\"workspace-viewport\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\"\n          }}>\n\n          <Viewport ref={ref=>this.viewport=ref}\n            app={this}\n            currentModule={currentModule}\n            screen={screen}/>\n        </div>\n\n        <div className={\"workspace-drawer\" +\n          (this.state.isOpen ? \" open\" : \"\") +\n          (this.state.isFullscreen ? \" fullscreen\" : \"\")}>\n\n          <Drawer ref={ref=>this.drawer=ref}\n            app={this}\n            currentModule={currentModule}\n            toolbar={this.toolbar}/>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n","import React from 'react';\n\nclass Logo extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg version=\"1.1\" id={this.props.id} xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n    \t viewBox=\"0 0 300 100\">\n      <style type=\"text/css\">\n      {\n      \t`.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}\n      \t.st1{fill:#FFC82C;stroke:#7E55F3;stroke-width:2;stroke-miterlimit:10;}\n      \t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n      \t.st3{font-family:'PTSans-Regular';}\n      \t.st4{font-size:90px;}\n      \t.st5{fill:none;}`\n      }\n      </style>\n      <path className=\"st0\" d=\"M43.7,20.1c0-9.4-8.5-17.1-19.1-17.1\"/>\n      <circle className=\"st1\" cx=\"44.1\" cy=\"45.3\" r=\"29.6\"/>\n      <polygon className=\"st2\" points=\"44.1,42.1 20.2,83.5 68,83.5 \"/>\n      <text transform=\"matrix(1 0 0 1 74.1533 77.1901)\" className=\"st3 st4\">flap.js</text>\n      <path className=\"st5\" d=\"M40.9,89c0,2.9,73.6,5.2,164.6,5.2\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M42.4,83.9c0,7,73,12.6,163.1,12.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st0\" d=\"M227.6,72.1c0,13.7-22.7,24.8-50.7,24.8\"/>\n      <path className=\"st0\" d=\"M6,20.1C6,10.7,14.5,3.1,25,3.1\"/>\n      <line className=\"st0\" x1=\"6\" y1=\"20.1\" x2=\"6\" y2=\"77.2\"/>\n      <path className=\"st0\" d=\"M6,77.2C6,88.1,27,96.9,53,96.9\"/>\n      <line className=\"st0\" x1=\"57.3\" y1=\"96.9\" x2=\"177.4\" y2=\"96.9\"/>\n      <line className=\"st0\" x1=\"53\" y1=\"96.9\" x2=\"64.5\" y2=\"96.9\"/>\n    </svg>;\n  }\n}\n\nexport default Logo;\n","import React from 'react';\nimport './Quote.css';\n\nclass Quote extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className=\"quote-container\">\n      <div className=\"quote\">\n        {this.props.value}\n      </div>\n      <div className=\"subquote\">\n        {this.props.label}\n      </div>\n    </div>;\n  }\n}\n\nexport default Quote;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './LandingPage.css';\n\nimport Router from 'router.js';\n\nimport Logo from './Logo.js';\nimport Quote from './Quote.js';\n\nimport App from 'content/App.js';\n\nconst LAUNCH_BUTTON_TEXT = \"Launch Workspace\";\nconst SMALL_LAUNCH_BUTTON_TEXT = \"Get Started!\";\nconst SMALLER_LAUNCH_BUTTON_TEXT = \"Proceed.\";\nconst TUTORIAL_BUTTON_TEXT = \"= Want to try our awesome tutorial? =\";\n\nconst QUOTES = [\n  [\"Explore what it means to be \\'computable\\'.\", \"- Prof. Mia Minnes\"],\n  [\"Lush has an interactive background in Mozilla\", \"- David\"],\n  [\"Good almost afternoon (I totally didnt just wake up).\", \"- Noah\"],\n  [\"RONALDO IS MY GOD\", \"- David\"],\n  [\"If you dream it, you can do it.\", \"- Walt Disney\"],\n  [\"Never, never, never give up.\", \"- Winston Churchill\"],\n  [\"Don't wait. The time will never be just right.\", \"- Napolean Hill\"],\n  [\"I can, therefore I am.\", \"- Simone Wei\"],\n  [\"Turn your wounds into wisdom.\", \"- Oprah Winfrey\"],\n  [\"Believe you can and you're halfway there.\", \"- Theodore Roosevelt\"],\n  [\"80% of success is showing up.\", \"- Woody Allen\"],\n  [\"A jug fills drop by drop.\", \"- Buddha\"],\n  [\"If you have never failed you have never lived.\", \"- Human\"],\n  [\"Dream big and dare to fail.\", \"- Norman Vaughan\"],\n  [\"Have faith in yourself and in the future.\", \"- Ted Kennedy\"],\n  [\"It's kind of fun to do the impossible.\", \"- Walt Disney\"],\n  [\"Find out who you are and do it on purpose.\", \"- Dolly Parton\"],\n  [\"The only journey is the one within.\", \"- Rainer Maria Rilke\"],\n  [\"Every moment is a fresh beginning.\", \"- T.S. Eliot\"],\n  [\"Be willing to be a beginner every single morning.\", \"- Meister Eckhart\"]\n];\nconst QUOTE_INDEX = Math.floor(Math.random() * QUOTES.length);\nconst [CONTENT_QUOTE, CONTENT_SUBQUOTE] = QUOTES[QUOTE_INDEX];\n\nconst TUTORIAL_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst HELP_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst ABOUT_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/README.md\";\nconst REPORT_BUG_LINK = \"https://goo.gl/forms/XSil43Xl5xLHsa0E2\";\nconst GITHUB_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/\";\n\nconst PROFMINNES_LINK = \"http://cseweb.ucsd.edu/~minnes/\";\nconst MAYA_LINK = \"https://www.linkedin.com/in/maya-bello-6b8637a7/\";\nconst NOAH_LINK = \"https://www.linkedin.com/in/noah-solomon-9a8526129/\";\nconst DAVID_LINK = \"https://www.linkedin.com/in/osunadavid/\";\nconst ERIK_LINK = \"https://www.linkedin.com/in/xuanqiang-zhao-364225153/\";\nconst LIXUAN_LINK = \"https://www.linkedin.com/in/lixuan-lang-3ba206143/\";\nconst ANDREW_LINK = \"https://www.linkedin.com/in/andrew-kuo-790243132/\";\nconst SETH_LINK = \"\";\nconst RAVNEET_LINK = \"\";\n\nclass LandingPage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.footer = null;\n    this.returnHome = null;\n\n    this.onLaunchButton = this.onLaunchButton.bind(this);\n    this.onTutorialButton = this.onTutorialButton.bind(this);\n    this.onReturnHomeButton = this.onReturnHomeButton.bind(this);\n    this.onReportBugButton = this.onReportBugButton.bind(this);\n    this.onAboutButton = this.onAboutButton.bind(this);\n    this.onHelpButton = this.onHelpButton.bind(this);\n    this.onGithubButton = this.onGithubButton.bind(this);\n  }\n\n  componentDidMount()\n  {\n    //Parallax effect for footer\n    window.onscroll = (e) => {\n      let height = Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight\n      ) - window.innerHeight;\n      let scroll = window.pageYOffset;\n      const value = Math.round(height - scroll) / 5;\n\n      if (this.footer && this.returnHome)\n      {\n        this.footer.style.bottom = value + \"px\";\n        this.returnHome.style.opacity = (scroll / height);\n      }\n    };\n  }\n\n  onLaunchButton(e)\n  {\n    //import(/* webpackChunkName: \"content\" */ 'content/App.js').then(({ default: _ }) => { Router.routeTo( _ ); });\n    Router.routeTo(App);\n  }\n\n  onTutorialButton(e)\n  {\n    const newTab = window.open(TUTORIAL_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onReturnHomeButton(e)\n  {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  onReportBugButton(e)\n  {\n    const newTab = window.open(REPORT_BUG_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onAboutButton(e)\n  {\n    const newTab = window.open(ABOUT_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onHelpButton(e)\n  {\n    const newTab = window.open(HELP_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onGithubButton(e)\n  {\n    const newTab = window.open(GITHUB_LINK, '_blank');\n    newTab.focus();\n  }\n\n  render()\n  {\n    let launchText;\n\n    //Smallest\n    if (window.matchMedia(\"(max-width: 400px)\").matches)\n    {\n      launchText = \"\";\n    }\n    //Smaller\n    else if (window.matchMedia(\"(max-width: 760px)\").matches)\n    {\n      launchText = SMALLER_LAUNCH_BUTTON_TEXT;\n    }\n    //Small\n    else if (window.matchMedia(\"(max-width: 68em)\").matches)\n    {\n      launchText = SMALL_LAUNCH_BUTTON_TEXT;\n    }\n    //Default\n    else\n    {\n      launchText = LAUNCH_BUTTON_TEXT;\n    }\n\n    return <div className=\"landing-container\">\n\n      <div className=\"content-container\">\n\n        {/* HEADER*/}\n        <header>\n          <Logo id=\"logo\"/>\n        </header>\n\n        {/* CONTENT */}\n        <div className=\"content\">\n          <div className=\"content-quote-container\">\n            <Quote value={CONTENT_QUOTE} label={CONTENT_SUBQUOTE} />\n          </div>\n          <div className=\"launch-container\">\n            <div className=\"set-container\">\n              <span className=\"openset\">{\"{\"}</span>\n              <button id=\"launch-button\" onClick={this.onLaunchButton}>\n                {launchText}\n              </button>\n              <span className=\"closeset\">{\"}\"}</span>\n            </div>\n            <div id=\"tutorial-button-container\">\n              <button id=\"tutorial-button\" onClick={this.onTutorialButton}>\n                {TUTORIAL_BUTTON_TEXT}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div ref={ref=>this.returnHome=ref} id=\"return-home\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n            onClick={this.onReturnHomeButton}>\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* FOOTER */}\n      <footer ref={ref=>this.footer=ref}>\n        <div className=\"utility\">\n          <div><a className=\"info\" onClick={this.onReportBugButton}>Report a Bug</a></div>\n          <div><a className=\"info\" onClick={this.onAboutButton}>About</a></div>\n          <div><a className=\"info\" onClick={this.onHelpButton}>Help</a></div>\n        </div>\n        <div className=\"credits\">\n          <span className=\"space\"></span>\n          <span className=\"left\">\n            <div>Professor</div>\n            <a className=\"nobreak\" onClick={()=>window.open(PROFMINNES_LINK, '_blank').focus()}>Mia Minnes</a>\n          </span>\n          <span className=\"right\">\n            <div>Developers</div>\n            <a onClick={()=>window.open(ANDREW_LINK, '_blank').focus()}>Andrew</a>\n            <a onClick={()=>window.open(LIXUAN_LINK, '_blank').focus()}>Lixuan</a>\n            <a onClick={()=>window.open(RAVNEET_LINK, '_blank').focus()}>Ravneet</a>\n            <a onClick={()=>window.open(SETH_LINK, '_blank').focus()}>Seth</a>\n            <div>+</div>\n            <a onClick={()=>window.open(MAYA_LINK, '_blank').focus()}>Maya</a>\n            <a onClick={()=>window.open(NOAH_LINK, '_blank').focus()}>Noah</a>\n            <a onClick={()=>window.open(DAVID_LINK, '_blank').focus()}>David</a>\n            <a onClick={()=>window.open(ERIK_LINK, '_blank').focus()}>Erik</a>\n          </span>\n          <span className=\"space\"></span>\n        </div>\n\n        <div>\n          <a className=\"info\" onClick={this.onGithubButton}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n            </svg>\n            Find it on <b>GitHub</b>\n          </a>\n        </div>\n\n        <div className=\"subtitle-container\">\n          <div className=\"subtitle\">\n            {\"\\u00A9 2018 University of California, San Diego. All rights reserved.\"}\n          </div>\n          <div className=\"subtitle\">\n            <label>{\"Thank you for reading me! Stay amazing!\"}</label>\n          </div>\n        </div>\n      </footer>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(LandingPage);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//Router: imports\nimport Router from 'router.js';\nimport App from 'content/App.js';\nimport LandingPage from 'landing/components/LandingPage.js';\n\n//Config: imports\nimport Config from 'config.js';\nimport { loadConfig, saveConfig } from 'config.js';\nconst AUTOSAVE_CONFIG = true;\n//LocalSave: imports\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = true;\n\n//Setup viewport\nwindow.addEventListener('load', (event) => {\n  console.log(\"Preparing for \\'\" + process.env.NODE_ENV + \"\\' environment...\");\n  loadApplication();\n  window.requestAnimationFrame(updateApplication);\n});\n\n//Warn user before exit\nwindow.addEventListener('beforeunload', (event) => {\n  //Config: Only save if changes were made\n  if (AUTOSAVE_CONFIG) saveConfig();\n\n  if (SHOULD_WARN_USERS_ON_EXIT && LocalSave.getStringFromStorage(\"disableExitWarning\") !== \"true\")\n  {\n    const message = I18N.toString(\"alert.window.exit\");\n    event = event || window.event;\n    // For IE and Firefox\n    if (event) event.returnValue = message;\n\n    //For Safari\n    return message;\n  }\n});\n\n//Tell the client that an update is available\nwindow.isUpdateAvailable.then(hasUpdate => {\n  if (hasUpdate)\n  {\n    console.log(\"[App] Found update for version \" + process.env.VERSION + \"...\");\n    window.alert(\"*** New update available! *** \\n Please restart the browser.\");\n  }\n});\n\n//Setup application\nconst FRAMES_PER_SECOND = 60;\nvar prevtime = 0;\nvar root;\nvar dt;\n\n//Load application\nfunction loadApplication()\n{\n  loadConfig();\n  root = document.getElementById(\"root\");\n\n  //This should be the same as the one referred to by OptionsPanel\n  if (LocalSave.getStringFromStorage(\"enableExperimental\") === \"true\")\n  {\n    import(/* webpackChunkName: \"experimental\" */ 'experimental/App.js')\n      .then(({ default: _ }) => Router.routeTo( _ ));\n  }\n  else if (LocalSave.getStringFromStorage(\"skipWelcome\") === \"true\")\n  {\n    Router.routeTo(App);\n  }\n  else\n  {\n    Router.routeTo(LandingPage);\n  }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n  dt = (time - prevtime) / FRAMES_PER_SECOND;\n  {\n    const page = Router.getCurrentPage();\n    if (page)\n    {\n      ReactDOM.render(React.createElement(page), root);\n    }\n  }\n  prevtime = time;\n  window.requestAnimationFrame(updateApplication);\n}\n","import React from 'react';\nimport './IconToggle.css';\n\nclass IconToggle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: this.props.defaultValue || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    //Toggle state\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    });\n\n    //Call passed-in onClick listener\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button icon-toggle \" + (this.state.open ? \" open \" : \"\") + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconToggle;\n","import React from 'react';\n\nclass DropDownIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"dropdown-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M7 10l5 5 5-5z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default DropDownIcon;\n","import React from 'react';\n\nclass UploadIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"upload-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n    </svg>;\n  }\n}\n\nexport default UploadIcon;\n","import React from 'react';\n\nclass SaveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"save-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n    </svg>;\n  }\n}\n\nexport default SaveIcon;\n","import React from 'react';\n\nclass UndoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"undo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n    </svg>;\n  }\n}\n\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"redo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n    </svg>;\n  }\n}\n\nexport default RedoIcon;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n\n  captureEvent(eventHandler)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(eventHandler);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldest recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo();\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo();\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n}\n\nexport default UndoManager;\n","import React from 'react';\n\nclass FormattedInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.element = null;\n    this.ignoreSaveOnExit = false;\n\n    const defaultValue = props.defaultValue || \"\";\n    this.state = {\n      value: defaultValue,\n      prevValue: defaultValue\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    //props:\n    //  filter - a filter function\n    //  formatter - a format function\n    //  captureOnExit - what to capture on blur (none, save, reset)\n    //  defaultValue - the default value for input\n    //  multiline - whether to allow multiple lines\n  }\n\n  //Override\n  componentWillReceiveProps(nextProps)\n  {\n    //Don't overwrite user input...\n    if (this.hasFocus()) return;\n\n    //TODO: This is a way to update the value if it is suppose to be the default value...\n    if (!this.state.value || this.state.value.length <= 0 || this.state.value === this.props.defaultValue)\n    {\n      this.setState({value: nextProps.defaultValue});\n    }\n  }\n\n  get value()\n  {\n    return this.state.value;\n  }\n\n  focus(replace=false)\n  {\n    if (replace)\n    {\n      this.element.select();\n    }\n    else\n    {\n      this.element.focus();\n    }\n  }\n\n  blur()\n  {\n    this.element.blur();\n  }\n\n  hasFocus()\n  {\n    return this.element === document.activeElement;\n  }\n\n  onChange(e)\n  {\n    if (this.props.filter)\n    {\n      const result = e.target.value.replace(this.props.filter, '');\n      this.setState({value: result});\n    }\n    else\n    {\n      this.setState({value: e.target.value});\n    }\n  }\n\n  onBlur(e)\n  {\n    if (this.ignoreSaveOnExit || this.props.captureOnExit == \"none\")\n    {\n      //For those you choose to handle exit, it's value should remain correct.\n      const result = this.formatValue(e.target.value);\n      this.setState({value: result});\n\n      //Don't ignore it for the future.\n      this.ignoreSaveOnExit = false;\n      return;\n    }\n\n    if (this.props.captureOnExit == \"save\")\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n      });\n    }\n    else if (this.props.captureOnExit == \"reset\")\n    {\n      this.resetValue(null);\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.key == \"Enter\")\n    {\n      if (this.props.multiline && e.shiftKey)\n      {\n        return true;\n      }\n\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n    else if (e.key == \"Escape\")\n    {\n      const prev = this.state.prevValue;\n      this.resetValue(prev, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(prev || \"\", prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  resetValue(newValue=null, callback)\n  {\n    if (newValue != null)\n    {\n      const result = this.formatValue(newValue);\n      this.setState({value: result, prevValue: result}, callback);\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        //NOTE: Although you CAN assume prev is valid, but what about when prev does not exist?\n        const result = this.formatValue(prev.prevValue);\n        return {value: result};\n      }, callback);\n    }\n  }\n\n  setValue(value, callback)\n  {\n    if (!value || value.length == 0)\n    {\n      value = this.props.defaultValue || \"\";\n    }\n    else\n    {\n      value = this.formatValue(value);\n    }\n\n    this.setState({value: value}, callback);\n  }\n\n  appendValue(value, separator=\",\")\n  {\n    let result = this.state.value;\n    //If the entire input is selected...\n    if (this.element.selectionStart == 0 &&\n      this.element.selectionEnd == value.length)\n    {\n      //Replace it!\n      result = value;\n    }\n    //Or just append to the end...\n    else\n    {\n      if (!result || result.length == 0)\n      {\n        result = value;\n      }\n      else\n      {\n        result = result + separator + value;\n      }\n    }\n\n    //If can filter input...\n    if (this.props.filter)\n    {\n      result = result.replace(this.props.filter, '');\n    }\n\n    this.setState({value: this.formatValue(result)});\n  }\n\n  formatValue(value)\n  {\n    const formatter = this.props.formatter;\n    const result = formatter(value);\n    return result || \"\";\n  }\n\n  //Override\n  render()\n  {\n    if (this.props.multiline)\n    {\n      return (\n        <textarea\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          rows=\"1\"\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}>\n        </textarea>\n      );\n    }\n    else\n    {\n      return (\n        <input\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}/>\n      );\n    }\n  }\n}\n\nexport default FormattedInput;\n","import React from 'react';\nimport './InfoBlock.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\n//TODO: Should be deprecated to use OptionGroup (or something similar)\nclass InfoBlock extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"infoblock-container \" + this.props.className}>\n      <div className=\"infoblock-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"infoblock-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        {this.props.children}\n      </div>\n    </div>;\n  }\n}\n\nexport default InfoBlock;\n","import React from 'react';\n\nclass BoxAddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"boxadd-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default BoxAddIcon;\n","import React from 'react';\n\nclass TriangleIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"triangle-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    </svg>;\n  }\n}\n\nexport default TriangleIcon;\n","import React from 'react';\nimport './StateTag.css';\n\nimport Config from 'config.js';\n\nclass StateTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    //This is a prop, refer to StateList for the actual node.getNodeLabel()\n    this.setState({ value: this.props.label, error: false }, () => {\n      target.select()\n    });\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const graphController = this.props.graphController;\n    const newLabel = this.state.value;\n\n    //The value is already processed, abort\n    if (newLabel != null)\n    {\n      const node = this.props.src;\n      const graph = graphController.getGraph();\n      if (newLabel.length > 0)\n      {\n        const nodes = graph.getNodesByLabel(newLabel);\n        if (nodes.length <= 0)\n        {\n          //Valid! Rename it!\n          graphController.renameNode(node, newLabel);\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else\n      {\n        //Delete!\n        graphController.deleteTargetNode(this.props.src);\n      }\n\n      this.setState({ value: null, error: false });\n\n      //Call any listening blurs\n      if (this.props.onBlur) this.props.onBlur(e);\n    }\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ value: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const graph = this.props.graphController.getGraph();\n    const value = e.target.value.trim();\n    let error = false;\n    if (value.length > 0)\n    {\n      const nodes = graph.getNodesByLabel(value);\n      if (nodes.length > 0)\n      {\n        //If there are more than 1 that have the same name\n        //OR if it is NOT the one we have...\n        if (nodes.length > 1 || nodes[0] !== this.props.src)\n        {\n          error = true;\n        }\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const isCustom = this.props.src.getNodeCustom();\n    const value = this.state.value != null ? this.state.value : this.props.label;\n    return <div className={\"statetag-container\" +\n      (isCustom ? \" customtag\" : \"\") +\n      (value.length == 0 ? \" emptytag\" : \"\") +\n      (this.state.value && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" className={(this.props.accept ? \" accept\" : \"\")}\n        spellCheck=\"false\"\n        style={{width: value.length + \"ch\"}}\n        value={value}\n        onChange={this.onValueChange}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default StateTag;\n","import React from 'react';\nimport './StatesList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\nimport TriangleIcon from 'icons/TriangleIcon.js';\n\nimport StateTag from './StateTag.js';\n\nclass StatesList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onStateCreate = this.onStateCreate.bind(this);\n  }\n\n  onStateCreate(e)\n  {\n    const x = -100 + (Math.random() * 100 * 2);\n    const y = -100 + (Math.random() * 100 * 2);\n    this.props.graphController.createNode(x, y);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    return <InfoBlock title={I18N.toString(\"component.stateslist.title\")} defaultValue=\"true\">\n      <div className=\"statelist-container\">\n        <div className=\"statelist\">\n          <TriangleIcon/>\n          {\n            graph.getNodes().map((e, i) => {\n              return <StateTag key={e.getGraphElementID()} src={e} label={e.getNodeLabel()} accept={e.getNodeAccept()}\n                graphController={graphController}\n                onFocus={ev => graphController.focusOnNode(e)}/>\n            })\n          }\n        </div>\n        <IconButton onClick={this.onStateCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default StatesList;\n","import React from 'react';\n\nimport './AlphabetTag.css';\nimport Config from 'config.js';\n\nclass AlphabetTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      symbol: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    this.setState({\n      symbol: this.props.src,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const machineController = this.props.machineController;\n    const newSymbol = this.state.symbol;\n\n    if (newSymbol != null)\n    {\n      const oldSymbol = this.props.src;\n      if (newSymbol.length > 0)\n      {\n        const alphabet = machineController.getAlphabet();\n        if (!alphabet.includes(newSymbol))\n        {\n          if (oldSymbol)\n          {\n            //Valid! Rename it!\n            machineController.renameSymbol(oldSymbol, newSymbol);\n          }\n          else\n          {\n            //Valid! Add it to the list!\n            machineController.createSymbol(newSymbol);\n          }\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (oldSymbol)\n      {\n        //Delete!\n        machineController.deleteSymbol(oldSymbol);\n      }\n    }\n\n    this.setState({symbol: null, error: false});\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e);\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ symbol: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const machineController = this.props.machineController;\n    const symbol = e.target.value.trim();\n    let error = false;\n    if (symbol.length > 0)\n    {\n      const alphabet = machineController.getAlphabet();\n      if (alphabet.includes(symbol) && symbol != this.props.src)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      symbol: symbol,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const symbol = this.state.symbol != null ? this.state.symbol : this.props.src;\n    const isUsed = false;\n    //TODO: const isUsed = this.props.src && this.props.machineController.getMachineBuilder().getMachine().getUsedAlphabet().includes(symbol);\n    return <div className={\"alphatag-container\" +\n      (isUsed ? \" usedtag\" : \"\") +\n      (this.props.src && (!symbol || symbol.length == 0) ? \" emptytag\" : \"\") +\n      (this.state.symbol && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" ref={ref=>this.ref=ref} className=\"alphatag-input\"\n        spellCheck=\"false\"\n        maxLength=\"1\"\n        value={symbol}\n        onChange={this.onValueChange}\n        onFocus = {this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default AlphabetTag;\n","import React from 'react';\nimport './AlphabetList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\n\nimport AlphabetTag from './AlphabetTag.js';\n\nclass AlphabetList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    this.editingTag = null;\n\n    this.state = {\n      editing: false\n    };\n\n    this.onSymbolCreate = this.onSymbolCreate.bind(this);\n    this.onStopEditing = this.onStopEditing.bind(this);\n  }\n\n  onSymbolCreate(e)\n  {\n    this.setState({editing: true}, () => {\n      this.editingTag.ref.focus();\n    });\n  }\n\n  onStopEditing(e)\n  {\n    this.setState({editing: false});\n  }\n\n  render()\n  {\n    const machineController = this.props.machineController;\n    const alphabet = machineController.getAlphabet();\n\n    return <InfoBlock title={I18N.toString(\"component.alphabetlist.title\")}>\n      <div className=\"alphalist-container\">\n        <div className=\"alphalist\">\n          {\n            alphabet.map((e, i) => {\n              return <AlphabetTag key={e + \".\" + i} src={e} machineController={machineController}/>\n            })\n          }\n          {\n            this.state.editing &&\n            <AlphabetTag ref={ref=>this.editingTag=ref} src={\"\"} machineController={machineController}\n              onBlur={this.onStopEditing}/>\n          }\n        </div>\n\n        <IconButton onClick={this.onSymbolCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default AlphabetList;\n","const SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass FSA\n{\n  constructor()\n  {\n    this._states = [];\n    this._transitions = [];\n    this._finalStates = [];\n\n    this._customAlphabet = [];\n  }\n\n  clear()\n  {\n    this._states.length = 0;\n    this._transitions.length = 0;\n    this._finalStates.length = 0;\n\n    this._customAlphabet.length = 0;\n  }\n\n  copy(fsa)\n  {\n    this._states.length = 0;\n    for(let state of fsa._states)\n    {\n      this._states.push(state);\n    }\n    this._transitions.length = 0;\n    for(let transition of fsa._transitions)\n    {\n      this._transitions.push(transition.slice());\n    }\n    this._finalStates.length = 0;\n    for(let final of fsa._finalStates)\n    {\n      this._finalStates.push(final);\n    }\n    this._customAlphabet.length = 0;\n    for(let symbol of fsa._customAlphabet)\n    {\n      this._customAlphabet.push(symbol);\n    }\n  }\n\n  newState(state)\n  {\n    if (this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' already added to states.\");\n    }\n\n    this._states.push(state);\n    return state;\n  }\n\n  deleteState(state)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    this._states.splice(this._states.indexOf(state), 1);\n  }\n\n  renameState(oldState, newState)\n  {\n    if (!this._states.includes(oldState))\n    {\n      throw new Error(\"State \\'\" + oldState + \"\\' does not exist.\");\n    }\n    if (this._states.includes(newState))\n    {\n      throw new Error(\"State \\'\" + newState + \"\\' already exists.\");\n    }\n\n    for(let transition of this._transitions)\n    {\n      if (transition[SRC] == oldState)\n      {\n        transition[SRC] = newState;\n      }\n      if (transition[DST] == oldState)\n      {\n        transition[DST] = newState;\n      }\n    }\n\n    const index = this._states.indexOf(oldState);\n    this._states[index] = newState;\n  }\n\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    //Check if already exists...\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n\n  deleteTransition(fromState, toState, symbol=null)\n  {\n    for(let i = this._transitions.length - 1; i >= 0; --i)\n    {\n      const transition = this._transitions[i];\n      if (transition[SRC] == fromState && transition[DST] == toState)\n      {\n        //Delete if src, dst, and symbols match... or if deleting all symbols\n        if (symbol == null || transition[SYMBOL] == symbol)\n        {\n          this._transitions.splice(i, 1);\n        }\n      }\n    }\n  }\n\n  newSymbol(symbol)\n  {\n    if (this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Symbol \\'\" + symbol + \"\\' already added to alphabet.\");\n    }\n\n    this._customAlphabet.push(symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    if (!this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Unable to remove symbol \\'\" + symbol + \"\\'.\");\n    }\n\n    this._customAlphabet.splice(this._customAlphabet.indexOf(symbol), 1);\n  }\n\n  setStartState(state)\n  {\n    if (this._states.length <= 0)\n    {\n      throw new Error(\"Not enough states.\");\n    }\n\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (this.getStartState() == state) return;\n\n    this._states.splice(this._states.indexOf(state), 1);\n    this._states.unshift(state);\n  }\n\n  setFinalState(state, isFinal=true)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (isFinal)\n    {\n      if (this._finalStates.includes(state)) return;\n\n      this._finalStates.push(state);\n    }\n    else\n    {\n      if (!this._finalStates.includes(state)) return;\n      this._finalStates.splice(this._finalStates.indexOf(state), 1);\n    }\n  }\n\n  doTransition(state, symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        return transition[DST];\n      }\n    }\n    return null;\n  }\n\n  isFinalState(state)\n  {\n    return this._finalStates.includes(state);\n  }\n\n  hasState(state)\n  {\n    return this._states.includes(state);\n  }\n\n  getStates()\n  {\n    return this._states;\n  }\n\n  //Is the same as isAlphabet if the user did not add custom symbols\n  isUsedAlphabet(symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SYMBOL] == symbol)\n      {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  //Includes custom user-defined symbols (from newSymbol)\n  isAlphabet(symbol)\n  {\n    for(const s of this._customAlphabet)\n    {\n      if (s == symbol) return true;\n    }\n\n    return this.isUsedAlphabet(symbol);\n  }\n\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (symbol.length > 0 && !result.includes(symbol))\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  getAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const s of this._customAlphabet)\n    {\n      result.push(s);\n    }\n    return this.getUsedAlphabet(result);\n  }\n\n  getOutgoingTransitions(state=null, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state)\n      result.push(transition);\n    }\n    return result;\n  }\n\n  getTransitions()\n  {\n    return this._transitions;\n  }\n\n  getStartState()\n  {\n    return this._states.length <= 0 ? null : this._states[0];\n  }\n\n  getFinalStates()\n  {\n    return this._finalStates;\n  }\n\n  isValidDFA()\n  {\n    const alphabet = this.getAlphabet();\n    const foundSymbols = new Array(alphabet.length);\n    foundSymbols.fill(false);\n\n    for(const state of this._states)\n    {\n      //Get all outgoing transitions\n      const transitions = this.getOutgoingTransitions(state);\n      for(const transition of transitions)\n      {\n        const index = alphabet.indexOf(transition[1]);\n        if (foundSymbols[index] == false)\n        {\n          foundSymbols[index] = true;\n        }\n        else\n        {\n          //Found duplicate\n          return false;\n        }\n      }\n\n      //Reset foundSymbols for next state\n      const length = foundSymbols.length;\n      for(let i = 0; i < length; ++i)\n      {\n        if (foundSymbols[i] == false)\n        {\n          //Found missing symbol for state\n          return false;\n        }\n        foundSymbols[i] = false;\n      }\n    }\n\n    return true;\n  }\n\n  toJSON()\n  {\n    const result = {};\n    if (this instanceof DFA) result.type = \"DFA\";\n    else if (this instanceof NFA) result.type = \"NFA\";\n    else result.type = \"FSA\";\n    result.states = this._states.slice();\n    result.alphabet = this._customAlphabet.slice();\n    result.usedAlphabet = this.getUsedAlphabet();\n    result.transitions = this._transitions.slice();\n    result.startState = this.getStartState();\n    result.finalStates = this._finalStates.slice();\n\n    return result;\n  }\n}\n\nexport default FSA;\n","export const EMPTY = '\\u03B5';\nexport const ARROW = '\\u2192';\nexport const EMPTY_SET = '\\u2205';\n\n//'\\u03BB' = LAMBDA\n","import FSA from './FSA.js';\nimport { EMPTY } from './Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass NFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (!result.includes(symbol) && symbol != EMPTY)\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  //Override\n  doTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        result.push(transition[DST]);\n      }\n    }\n    return result;\n  }\n\n  doClosureTransition(state, dst=[])\n  {\n    const result = dst;\n    result.push(state);\n    for(let i = 0; i < result.length; ++i)\n    {\n      const transitions = this.getOutgoingTransitions(result[i]);\n      for(const transition of transitions)\n      {\n        if (transition[SYMBOL] == EMPTY)\n        {\n          const dst = transition[DST];\n          if (!result.includes(dst))\n          {\n            result.push(dst);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  doTerminalTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        //Get closure on destination states\n        const states = this.doClosureTransition(transition[DST]);\n        for(const s of states)\n        {\n          if (!result.includes(s))\n          {\n            result.push(s);\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n    getPowerSet() {\n        var ps = [[]];\n        var nfaStates = this.getStates();\n        for(var i=0; i < nfaStates.length; i++) {\n            for(var j=0, len = ps.length; j < len; j++) {\n                ps.push(ps[j].concat(nfaStates[i]));\n            }\n        }\n        return ps;\n    }\n}\n\nexport default NFA;\n","import React from 'react';\nimport './TransitionTable.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport NFA from 'machine/NFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nconst SYMBOL_AXIS = \"symbols\";\nconst STATE_AXIS = \"states\";\n\nclass TransitionTable extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      rowAxis: SYMBOL_AXIS\n    }\n  }\n\n  render()\n  {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet();\n    const transitions = machine.getTransitions();\n    const rowAxisType = this.state.rowAxis;\n    const isNFAMachine = machineBuilder.getMachineType() == \"NFA\";\n    const hasEmptyColumn = rowAxisType === SYMBOL_AXIS && isNFAMachine;\n\n    return <InfoBlock title={I18N.toString(\"component.transitiontable.title\")}>\n      <div className=\"transitiontable-container\">\n        <table className=\"transitiontable\">\n          <tbody>\n            <tr>\n              <th className=\"emptycell\">\n                <button className=\"panel-button\" onClick={()=>\n                  this.setState((prev, props)=>{\n                    return {\n                      rowAxis: prev.rowAxis == SYMBOL_AXIS ? STATE_AXIS : SYMBOL_AXIS\n                    };\n                  })}>\n                  {this.state.rowAxis == SYMBOL_AXIS ? \"Q/\\u03A3\" : \"Q/Q\"}\n                </button>\n              </th>\n              {\n                rowAxisType === SYMBOL_AXIS ?\n                  alphabet.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                rowAxisType === STATE_AXIS ?\n                  states.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                null\n              }\n              {\n                hasEmptyColumn &&\n                  <th scope=\"col\">{EMPTY}</th>\n              }\n            </tr>\n            {\n              states.map((e, i)=><tr key={e}>\n                <th scope=\"row\" className=\"row\">{e}</th>\n                {\n                  rowAxisType === SYMBOL_AXIS ?\n                    alphabet.map((symbol, i) => {\n                      let className = \"\";//TODO: machine.isFinalState(e) ? \"accept\" : \"\";\n                      const result = getDestinationFromSourceAndSymbol(machine, e, symbol, isNFAMachine);\n                      if (!isNFAMachine && (result.startsWith(\"{\") || result == \"-\"))\n                      {\n                        className += \" error\";\n                      }\n                      return <td key={e + \",\" + symbol} className={className}>\n                        {result}\n                      </td>;\n                    }) :\n                  rowAxisType === STATE_AXIS ?\n                    states.map((dst, i) => {\n                      const result = getSymbolFromSourceAndDestination(machine, e, dst);\n                      return <td key={e + \",\" + dst}>\n                        {result}\n                      </td>;\n                    }) :\n                  null\n                }\n                {\n                  hasEmptyColumn &&\n                    <td>{getDestinationFromSourceAndSymbol(machine, e, EMPTY)}</td>\n                }\n              </tr>)\n            }\n          </tbody>\n        </table>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nfunction getDestinationFromSourceAndSymbol(machine, src, symbol, isSet=true)\n{\n  const result = machine.doTransition(src, symbol);\n\n  //Assumes that the machine is always an NFA, therefore the result is an array\n  if (Array.isArray(result))\n  {\n    return !isSet && result.length == 1 ?\n      result[0] :\n      result.length > 0 ?\n      \"{\" + result.join(\", \") + \"}\" : \"-\";\n  }\n  else\n  {\n    return result || \"-\";\n  }\n}\n\nfunction getSymbolFromSourceAndDestination(machine, src, dst)\n{\n  const result = [];\n  const transitions = machine.getTransitions();\n  for(const transition of transitions)\n  {\n    if (transition[SRC] == src && transition[DST] == dst)\n    {\n      result.push(transition[SYMBOL]);\n    }\n  }\n\n  if (result.length === 1)\n  {\n    return result[0];\n  }\n  else if (result.length > 0)\n  {\n    return \"{\" + result.join(\", \") + \"}\";\n  }\n  else\n  {\n    return \"-\";\n  }\n}\n\nexport default TransitionTable;\n","import React from 'react';\nimport './TransitionFunction.css';\n\nimport InfoBlock from '../infoblock/InfoBlock';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass TransitionFunction extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return(\n        <InfoBlock title=\"Transition Chart\">\n          <div className=\"transitionfunction-container\">\n            <table className=\"transitionfunction-table\">\n              <tbody>\n                <tr>\n                  <th>Q{\"\\u00d7\"}&Sigma;</th>\n                  <th>{isNFA ? \"\\u2118(Q)\" : \"Q\"}</th>\n                </tr>\n                {\n                  states.map((state, i) => {\n                    let emptrans = machine.doTransition(state, EMPTY);\n                    let empclassName = \"\";\n\n                    let transitions = alphabet.map((symbol, j) => {\n                      let className = \"\";\n                      let trans = machine.doTransition(state, symbol);\n                      if(isNFA && !trans.length) return;\n                      if(!isNFA && !trans.length) {\n                        className = \"error\";\n                        trans = \"-\";\n                      }\n                      if(!isNFA && trans.length > 1) {\n                        className = \"error\";\n                        trans = \"{\" + trans + \"}\"\n                      }\n                      trans = isNFA ? \"{\" + trans + \"}\" : \"\" + trans;\n                      return <tr key={\"\"+state+symbol}>\n                          <td className=\"transitionfunction-key\">{\"(\" + state + \",\" + symbol + \")\"}</td>\n                          <td className={\"transitionfunction-value \" + className}>{trans}</td>\n                        </tr>\n                    });\n\n                    if(emptrans.length > 0) {\n                      if(!isNFA) {\n                        empclassName = \"error\";\n                      }\n                      const addBrac = isNFA || emptrans.length > 1;\n                      emptrans = addBrac ? \"{\" + emptrans + \"}\" : \"\" + emptrans;\n                      transitions.unshift(\n                          <tr key={\"\"+state+EMPTY}>\n                            <td className={\"transitionfunction-key \" + empclassName}>{\"(\" + state + \",\" + EMPTY + \")\"}</td>\n                            <td className=\"transitionfunction-value\">{emptrans}</td>\n                          </tr>\n                      );\n                    }\n                    return transitions;\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </InfoBlock>\n    );\n  }\n}\n\nexport default TransitionFunction;\n","import React from 'react';\nimport './FormalDefinition.css';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport { EMPTY_SET, ARROW } from 'machine/Symbols.js';\n\nconst EQUAL = \"=\";\nconst DELTA = \"\\u03b4\";\n\nclass FormalDefinition extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const finalStates = machine.getFinalStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return <div className=\"formaldef-container\">\n      <h2>{\"M = (Q, \\u03A3, \\u03b4, q0, F)\"}</h2>\n      <div>\n        <h3>Q =</h3>\n        <span className=\"formaldef-values\">\n          {states.length > 0 ? \"{ \" + states.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>&Sigma; =</h3>\n        <span className=\"formaldef-values\">\n          {alphabet.length > 0 ? \"{ \" + alphabet.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>{DELTA}</h3>\n        <div className=\"formaldef-values\">\n          {\n            states.map((state, i) => {\n              let emptrans = machine.doTransition(state, EMPTY);\n              let empclassName = \"\";\n\n              let transitions = alphabet.map((symbol, j) => {\n                let className = \"\";\n                let trans = machine.doTransition(state, symbol);\n                if(isNFA && !trans.length) return;\n                if(!isNFA && !trans.length) {\n                  className = \"error\";\n                  trans = \"-\";\n                }\n                if(!isNFA && trans.length > 1) {\n                  className = \"error\";\n                  trans = \"{ \" + trans + \" }\"\n                }\n                trans = isNFA ? \"{ \" + trans + \" }\" : \"\" + trans;\n                return <div key={\"\"+state+symbol} className={className}>\n                      {DELTA + \"( ( \" + state + \", \" + symbol + \" ) )\" + \" \" + EQUAL + \" \" + trans}\n                </div>\n              });\n\n              if(emptrans.length > 0) {\n                if(!isNFA) {\n                  empclassName = \"error\";\n                }\n                const addBrac = isNFA || emptrans.length > 1;\n                emptrans = addBrac ? \"{ \" + emptrans + \" }\" : \"\" + emptrans;\n                transitions.unshift(\n                    <div key={\"\" + state + EMPTY} className={empclassName}>\n                      {DELTA + \"( ( \" + state + \", \" + EMPTY + \" ) )\" + \" \" + EQUAL + \" \" + emptrans}\n                    </div>\n                );\n              }\n              return transitions;\n            })\n          }\n          {\n            isNFA && <div id=\"formaldef-otherinputs\">\n              <div>{\"For all other inputs (q, x),\"}</div>\n              <div>{DELTA + \"( (q, x) )\" + \" \" + EQUAL + \" \" + EMPTY_SET}</div>\n            </div>\n          }\n        </div>\n      </div>\n      <div>\n        <h3>q0 =</h3>\n        <span className=\"formaldef-values\">\n          {states[0]}\n        </span>\n      </div>\n      <div>\n        <h3>F =</h3>\n        <span className=\"formaldef-values\">\n          {finalStates.length > 0 ? \"{ \" + finalStates.join(\",\") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nexport default FormalDefinition;\n","import React from 'react';\nimport '../Panel.css';\nimport './OverviewPanel.css';\n\nimport Config from 'config.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\nimport StatesList from './stateslist/StatesList.js';\nimport AlphabetList from './alphabetlist/AlphabetList.js';\nimport TransitionTable from './transitiontable/TransitionTable.js';\nimport TransitionFunction from './transitionfunction/TransitionFunction.js';\nimport FormalDefinition from \"./formaldefinition/FormalDefinition\";\n\nclass OverviewPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n\n    this.state = {\n      viewFormal: false\n    };\n\n    this.onChangeMachineType = this.onChangeMachineType.bind(this);\n    this.onAutoLayout = this.onAutoLayout.bind(this);\n\n    this.onChangeAutoRename = this.onChangeAutoRename.bind(this);\n    this.onSubmitAutoStatePrefix = this.onSubmitAutoStatePrefix.bind(this);\n    this.onAutoStateFormat = this.onAutoStateFormat.bind(this);\n\n    this.switchDefinition = this.switchDefinition.bind(this);\n  }\n\n  onAutoLayout(e)\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    graphController.applyAutoLayout();\n  }\n\n  onChangeMachineType(e)\n  {\n    const value = e.target.value;\n    const machineController = this.props.currentModule.getMachineController();\n    machineController.changeMachineTo(value);\n  }\n\n  onChangeAutoRename(e)\n  {\n    const machineBuilder = this.props.currentModule.getMachineController().getMachineBuilder();\n    machineBuilder.setAutoRenameNodes(e.target.checked);\n  }\n\n  onSubmitAutoStatePrefix(next, prev)\n  {\n    const labeler = this.props.currentModule.getMachineController().getMachineBuilder().getLabeler();\n    if (labeler.prefix != next)\n    {\n      labeler.prefix = next;\n      labeler.sortDefaultNodeLabels();\n    }\n  }\n\n  onAutoStateFormat(value)\n  {\n    return value && value.length > 0 ? value : Config.STR_STATE_LABEL;\n  }\n\n  switchDefinition()\n  {\n    this.setState((prev, props) => {\n      return { viewFormal: !prev.viewFormal };\n    });\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"overview\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.overview.title\")}</h1>\n      </div>\n        <div className=\"panel-content\">\n          <select className=\"machine-type panel-select\"\n            value={machineBuilder.getMachineType()}\n            onChange={this.onChangeMachineType}>\n            <option value=\"DFA\">DFA</option>\n            <option value=\"NFA\">NFA</option>\n          </select>\n\n          {this.state.viewFormal &&\n            <FormalDefinition machineBuilder={machineBuilder}/>}\n\n          {\n            !this.state.viewFormal &&\n            <div>\n              <div>\n                <div className=\"graphinfo-important\">\n                  <StatesList graphController={graphController}/>\n                  <AlphabetList machineController={machineController}/>\n                </div>\n                <div className=\"graphinfo\">\n                  <TransitionFunction machineBuilder={machineBuilder}/>\n                  <TransitionTable machineBuilder={machineBuilder}/>\n                </div>\n              </div>\n              <hr/>\n\n              {/*State Labeling*/}\n              <div style={{paddingBottom: \"0.5em\"}}>\n                <h3 style={{marginBottom: \"0\"}}>State Labels</h3>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                  <div className=\"statetag-container\">\n                    <FormattedInput defaultValue={machineBuilder.getLabeler().prefix} style={{width: \"4em\"}} formatter={this.onAutoStateFormat} captureOnExit=\"save\" onSubmit={this.onSubmitAutoStatePrefix}/>\n                  </div>\n                  <select style={{\n                      background: \"none\",\n                      outline: \"none\",\n                      border: \"none\",\n                      padding: \"0\",\n                      margin: \"0\",\n                      appearance: \"none\",\n                      color: \"white\"\n                    }} disabled={true}>\n                    <option>{\"0-9\"}</option>\n                    <option>{\"a-z\"}</option>\n                    <option>{\"A-Z\"}</option>\n                  </select>\n                </div>\n                <div className=\"panel-checkbox\">\n\n                  <input type=\"checkbox\" id=\"auto-statename\"\n                    onChange={this.onChangeAutoRename}\n                    checked={machineBuilder.shouldAutoRenameNodes()}/>\n                  <label htmlFor=\"auto-statename\">{I18N.toString(\"options.autolabel\")}</label>\n                </div>\n              </div>\n\n              <hr/>\n\n              <button className=\"panel-button\" onClick={this.onAutoLayout} disabled={graph.isEmpty()}>\n                {I18N.toString(\"action.overview.autolayout\")}\n              </button>\n            </div>\n          }\n\n          <button className=\"panel-button\" onClick={this.switchDefinition}>\n            {this.state.viewFormal ? \"Back\" : \"View Definition\"}\n          </button>\n        </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(OverviewPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.overview.title\"); }\n});\nOverviewPanel.UNLOCALIZED_NAME = \"component.overview.title\";\n\nexport default OverviewPanel;\n","import { EMPTY } from 'machine/Symbols.js';\nimport NFA from 'machine/NFA.js'\n\n//This ASSUMES that the passed-in machine is an NFA! (and not a DFA)\nexport function solveNFA(nfa, input)\n{\n  if (typeof input === 'string') input = input[Symbol.iterator]();\n\n  let cachedStates = [];\n  let cachedSymbols = [];\n  cachedStates.push({state: nfa.getStartState(), index: 0});\n  for (let currState of nfa.doClosureTransition(nfa.getStartState()))\n  {\n    cachedStates.push({state: currState , index: 0});\n  }\n  let checkedStates = [];\n  let symbol = null;\n\n  let counter = 0;\n\n  while(cachedStates.length > 0)\n  {\n    symbol = input.next().value;\n    let res = solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates);\n    if (res) return true;\n\n    //HACK: This is to stop any infinite loops! This will be fixed in the future!\n    ++counter;\n    if (counter > 1000)\n    {\n      return false;\n    }\n  }\n\n  return false;\n}\n\n//TODO: When an empty transition occurs, it does a closure transition.\n//The closure chain will be stored as a group\n//Any future transitions must not re-enter the group\nexport function solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates)\n{\n  //initialize variables\n  let state = null;\n  let nextStates = [];\n  let nextIndex = 0;\n\n  if (symbol != null)\n  {\n    cachedSymbols.push(symbol);\n  }\n\n  for(let cstate of cachedStates)\n  {\n    state = cstate.state;\n    symbol = cstate.index < cachedSymbols.length ? cachedSymbols[cstate.index] : null;\n\n    if (symbol != null)\n    {\n      //Read to next state...\n      nextIndex = cstate.index + 1;\n      for(let nextState of nfa.doTerminalTransition(state, symbol))\n      {\n        nextStates.push({state: nextState, index: nextIndex});\n      }\n    }\n    else\n    {\n      if (nfa.isFinalState(state)) return true;\n      checkedStates.push(state);\n    }\n\n    //Read none to next state...\n    nextIndex = cstate.index;\n    /*for(let nextState of nfa.doTransition(state,EMPTY))\n    {\n      if (checkedStates.includes(nextState)) continue;\n      if (symbol == null && nfa.isFinalState(nextState)) return true;\n\n      nextStates.push({state: nextState, index: nextIndex});\n    }*/\n  }\n  cachedStates.length = 0\n  cachedStates.push(...nextStates);\n  return false;\n}\n","import FSA from './FSA.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass DFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  validate()\n  {\n    //TODO: Deprecate this\n    console.error(\"This is deprecated, please use FSA.isValidDFA()\");\n    return this.isValidDFA();\n  }\n\n  //Override default behavior\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    for(const transition of this._transitions)\n    {\n      //Check if already exists...\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n      //Check if valid deterministic transition...\n      else if (transition[SRC] == fromState && transition[SYMBOL] == symbol)\n      {\n        throw new Error(\"Unable to create illegal nondeterministic transition for DFA.\");\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n}\n\nexport default DFA;\n","import { solveDFA } from 'machine/util/solveDFA.js';\nimport { solveNFA, solveNFAbyStep } from 'machine/util/solveNFA.js';\n\nimport { DFA } from 'machine/DFA.js';\n\nconst STEPTIME = 500;\nconst SKIPTIME = 50;\n\nclass TestMode\n{\n  constructor(testingManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.testingManager = testingManager;\n\n    this.targets = [];\n\n    this.history = [];\n    this.indexofString = -1;\n    this.result = false;\n\n    //for nfa use\n    this.cachedStates = [];\n    this.cachedSymbols = [];\n    this.checkedStates = [];\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n\n    this.timer = null;\n\n    this.onNodeDestroy = this.onNodeDestroy.bind(this);\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n\n    //NOTE: This is not necessary because you can edit once in stepbystep mode\n    //this.graphController.getGraph().on(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  destroy()\n  {\n    //this.graphController.getGraph().removeEventListener(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  onNodeDestroy(node)\n  {\n    //this.targets.splice(this.targets.indexOf(node), 1);\n  }\n\n  onStart()\n  {\n    //Check the machine, if DFA, then it must be a valid DFA\n    /*if (this.machineController.getMachineBuilder().getMachineType() == \"DFA\")\n    {\n      const dfa = this.machineController.getMachineBuilder().toDFA();\n      if (!dfa.validate()) return;\n    }*/\n    this.prepareForNewTest();\n    this.started = true;\n    this.skipToEnd = false;\n  }\n\n  onResume()\n  {\n    //If at the end, restart!\n    if (!this.hasNextStep())\n    {\n      this.testingManager.inputList.resetTests(false);\n    }\n\n    this.running = true;\n\n    const step = () => {\n      if (this.running)\n      {\n        if (this.hasNextStep())\n        {\n          this.onNextStep();\n          this.timer = setTimeout(step, STEPTIME);\n        }\n        else\n        {\n          this.onPause();\n        }\n      }\n    };\n    this.timer = setTimeout(step, STEPTIME);\n  }\n\n  onPause()\n  {\n    this.running = false;\n  }\n\n  onStop()\n  {\n    this.targets.length = 0;\n\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n  }\n\n  isRunning()\n  {\n    return this.running;\n  }\n\n  isStarted()\n  {\n    return this.started;\n  }\n\n  isSkipping()\n  {\n    return this.skipToEnd;\n  }\n\n  hasPrevStep()\n  {\n    return this.history.length > 0 ||\n      this.testingManager.inputList.hasPrevInput();\n  }\n\n  onPreviousStep()\n  {\n    if (this.history.length > 0)\n    {\n      const previous = this.history.pop();\n      this.targets.length = 0;\n      this.cachedStates.length = 0;\n      this.cachedSymbols.length = 0;\n      this.checkedStates.length = 0;\n\n      //Copy the old step\n      for(const target of previous.targets)\n      {\n        if (!target) throw new Error(\"Found null target\");\n\n        this.targets.push(target);\n      }\n      for(const state of previous.cachedStates)\n      {\n        this.cachedStates.push(state);\n      }\n      for(const symbol of previous.cachedSymbols)\n      {\n        this.cachedSymbols.push(symbol);\n      }\n      for(const state of previous.checkedStates)\n      {\n        this.checkedStates.push(state);\n      }\n\n      this.indexofString--;\n    }\n    else\n    {\n      this.indexofString = -1;\n      this.testingManager.inputList.prevInput();\n    }\n  }\n\n  hasNextStep()\n  {\n    return this.indexofString < this.testingManager.inputList.getCurrentInput().value.length ||\n      this.testingManager.inputList.hasNextInput();\n  }\n\n  onNextStep()\n  {\n    const testInput = this.testingManager.inputList.getCurrentInput();\n    const fsa = this.machineController.getMachineBuilder().getMachine();\n\n    //Get next character of current test string\n    this.indexofString += 1;\n\n    //If no more characters to get...\n    if(this.indexofString >= testInput.value.length)\n    {\n      //End of test string\n      //Run it one more time...\n      this.result = solveNFAbyStep(fsa, null, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      testInput.setResult(this.result);\n\n      //If this is the last test input...\n      if (!this.testingManager.inputList.hasNextInput())\n      {\n        //End of test!\n        this.onPause();\n        return false;\n      }\n      else\n      {\n        const result = this.testingManager.inputList.nextInput();\n\n        //Stop the resume at each string\n        //this.running = false;\n\n        this.prepareForNewTest();\n        return true;\n      }\n    }\n    else\n    {\n      //Update history\n      const currentStep = this.getCurrentCache();\n      this.history.push(currentStep);\n\n      //Run it\n      let nextChar = testInput.value[this.indexofString];\n\n      this.result = solveNFAbyStep(fsa, nextChar, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      //Update targets\n      this.targets.length = 0;\n\n      for(const state of this.cachedStates)\n      {\n        let node = this.machineController.getFirstGraphNodeByLabel(this.graphController.getGraph(), state.state);\n        if (!node) throw new Error(\"Found null target\");\n\n        if (!this.targets.includes(node)) this.targets.push(node);\n      }\n\n      if (this.targets.length <= 0 && !this.running)\n      {\n        this.skipToEnd = true;\n        const skipFunc = () => {\n          if (this.skipToEnd)\n          {\n            this.indexofString += 1;\n            if (this.indexofString >= testInput.value.length)\n            {\n              this.skipToEnd = false;\n            }\n            else\n            {\n              setTimeout(skipFunc, SKIPTIME);\n            }\n          }\n        };\n        setTimeout(skipFunc, SKIPTIME);\n      }\n\n      return true;\n    }\n  }\n\n  getCurrentCache()\n  {\n    return {\n      targets: this.targets.slice(),\n      cachedStates: this.cachedStates.slice(),\n      cachedSymbols: this.cachedSymbols.slice(),\n      checkedStates: this.checkedStates.slice()\n    };\n  }\n\n  getCurrentTestStringIndex()\n  {\n    return this.indexofString + 1;\n  }\n\n  prepareForNewTest()\n  {\n    this.cachedStates.length = 0;\n\n    const graph = this.graphController.getGraph();\n    if (graph.isEmpty()) return;\n\n    const machine = this.machineController.getMachineBuilder().getMachine();\n\n    this.targets.length = 0;\n\n    let startState = machine.getStartState();\n    for (let curr_state of machine.doClosureTransition(startState))\n    {\n      this.cachedStates.push({state: curr_state, index: 0});\n      const node = this.machineController.getFirstGraphNodeByLabel(graph, curr_state);\n      if (!node) throw new Error(\"Found null target\");\n      this.targets.push(node);\n    }\n\n    this.cachedSymbols.length = 0;\n    this.checkedStates.length = 0;\n    this.indexofString = -1;\n    this.history.length = 0;\n\n    this.skipToEnd = false;\n  }\n}\n\nexport default TestMode;\n","import { guid } from 'util/MathHelper.js';\n\nimport { solveNFA } from 'machine/util/solveNFA.js';\n\nconst SUCCESS = true;\nconst FAILURE = false;\nconst PENDING = null;\n\n//Only refer to input by index, NEVER by reference!\nclass TestingInputList\n{\n  constructor()\n  {\n    this.inputList = [];\n    this.addInput(\"\");\n\n    this.inputIndex = 0;\n  }\n\n  isEmpty()\n  {\n    for(const input of this.inputList)\n    {\n      if (input.value.length > 0)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  testByIndex(index, machine)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    const input = this.inputList[index];\n    input.setResult(null);\n    //TODO: make this a promise\n    const result = solveNFA(machine, input.value);\n    input.setResult(result);\n    return result;\n  }\n\n  importTests(file)\n  {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try\n      {\n        //The only time the first element is being removed (then replaced)\n        this.inputList.length = 0;\n        this.inputIndex = 0;\n\n        const testInputs = event.target.result.split(\"\\n\");\n        for(let testInput of testInputs)\n        {\n          testInput = testInput.trim();\n          if (testInput.length > 0)\n          {\n            this.addInput(testInput);\n          }\n        }\n\n        //Make sure a first element exists\n        if (this.inputList.length < 0)\n        {\n          this.addInput(\"\");\n        }\n      }\n      catch(e)\n      {\n        reader.abort();\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  getTestsAsStrings()\n  {\n    return this.inputList.map((e, i) => e.value);\n  }\n\n  clearTests()\n  {\n    //Reset first element\n    const first = this.inputList[0];\n    first.value = \"\";\n    first.result = null;\n    first.dirty = true;\n\n    //Reset list\n    this.inputList.length = 1;\n    this.inputIndex = 0;\n  }\n\n  resetTests(markDirty=true)\n  {\n    this.inputIndex = 0;\n\n    if (markDirty)\n    {\n      for(const input of this.inputList)\n      {\n        input.dirty = true;\n      }\n    }\n  }\n\n  getTests()\n  {\n    return this.inputList;\n  }\n\n  addInput(value)\n  {\n    const input = {\n      value: value,\n      result: null,\n      dirty: true,\n      id: guid(),\n      setResult(result)\n      {\n        this.dirty = false;\n        this.result = result;\n      }\n    };\n\n    this.inputList.push(input);\n    return input;\n  }\n\n  getInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    return this.inputList[index];\n  }\n\n  removeInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    if (index === 0)\n    {\n      //Cannot delete the first input element\n      throw new Error(\"Cannot delete the first test input\");\n    }\n\n    if (index <= this.inputIndex)\n    {\n      --this.inputIndex;\n    }\n\n    this.inputList.splice(index, 1);\n  }\n\n  nextInput()\n  {\n    ++this.inputIndex;\n    if (this.inputIndex >= this.inputList.length)\n    {\n      this.inputIndex = 0;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  prevInput()\n  {\n    --this.inputIndex;\n    if (this.inputIndex < 0)\n    {\n      this.inputIndex = this.inputList.length - 1;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  resetInput()\n  {\n    this.inputIndex = 0;\n  }\n\n  hasNextInput()\n  {\n    return this.inputIndex < this.inputList.length;\n  }\n\n  hasPrevInput()\n  {\n    return this.inputIndex > 0;\n  }\n\n  getCurrentInput()\n  {\n    return this.inputList[this.inputIndex];\n  }\n\n  getCurrentInputIndex()\n  {\n    return this.inputIndex;\n  }\n}\n\nexport default TestingInputList;\n","import Viewport from 'content/viewport/Viewport.js';\nimport TestMode from './TestMode.js';\nimport TestingInputList from './TestingInputList.js';\n\nclass TestingManager\n{\n  constructor()\n  {\n    this.machineController = null;\n    this.viewport = null;\n\n    this.inputList = new TestingInputList();\n\n    this.shouldCheckError = false;\n    this.isImmediateErrorCheck = false;\n    this.errorCheckMode = TestingManager.NO_ERROR_CHECK;\n    this.stepByStepMode = false;\n\n    this.testMode = new TestMode(this);\n  }\n\n  initialize(module, viewport)\n  {\n    this.machineController = module.getMachineController();\n    this.viewport = viewport;\n\n    this.testMode.initialize(module);\n  }\n\n  destroy()\n  {\n\n  }\n\n  setErrorCheckMode(mode)\n  {\n    const machineBuilder = this.machineController.getMachineBuilder();\n\n    //Update machine builder error checker\n    machineBuilder.setMachineType(machineBuilder.getMachineType());\n\n    if (mode == TestingManager.NO_ERROR_CHECK)\n    {\n      this.shouldCheckError = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.DELAYED_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.IMMEDIATE_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = true;\n      this.errorCheckMode = mode;\n    }\n    else\n    {\n      throw new Error(\"Unknown error check mode \\'\" + mode + \"\\'\");\n    }\n  }\n\n  getErrorCheckMode()\n  {\n    return this.errorCheckMode;\n  }\n\n  setStepByStepMode(mode)\n  {\n    this.stepByStepMode = mode ? true : false;\n    if (mode)\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.testMode.onStart();\n      this.viewport.setState((prev, props) => {\n        if (prev.mode != Viewport.TESTING)\n        {\n          return {\n            prevMode: prev.mode,\n            mode: Viewport.TESTING\n          };\n        }\n        else\n        {\n          //It's already the correct viewport mode\n        }\n      });\n    }\n    else\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.viewport.setState((prev, props) => {\n        return {mode: prev.prevMode};\n      });\n    }\n  }\n\n  getStepByStepMode()\n  {\n    return this.stepByStepMode;\n  }\n}\nTestingManager.NO_ERROR_CHECK = \"none\";\nTestingManager.DELAYED_ERROR_CHECK = \"delayed\";\nTestingManager.IMMEDIATE_ERROR_CHECK = \"immediate\";\n\nexport default TestingManager;\n","import React from 'react';\n\nclass AddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"add-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n    </svg>;\n  }\n}\n\nexport default AddIcon;\n","import React from 'react';\n\nclass RemoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"remove-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"/>\n    </svg>;\n  }\n}\n\nexport default RemoveIcon;\n","import React from 'react';\n\nclass SuccessIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"success-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/>\n      <path d=\"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default SuccessIcon;\n","import React from 'react';\n\nclass FailureIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"failure-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default FailureIcon;\n","import React from 'react';\n\nclass RunningManIcon extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n    render() {\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n                <path d=\"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"/>\n            </svg>;\n    }\n}\n\nexport default RunningManIcon;\n","import React from 'react';\nimport './StatusButton.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport SuccessIcon from 'icons/SuccessIcon.js';\nimport FailureIcon from 'icons/FailureIcon.js';\nimport WorkingIcon from 'icons/WorkingIcon.js';\nimport RunningManIcon from 'icons/RunningManIcon.js';\n\nclass StatusButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const active = this.props.active;\n    if (this.props.mode === true)\n    {\n      //Success icon\n      return <IconButton className={\"status-icon success\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <SuccessIcon/>\n      </IconButton>;\n    }\n    else if (this.props.mode === false)\n    {\n      //Failure icon\n      return <IconButton className={\"status-icon failure\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <FailureIcon/>\n      </IconButton>;\n    }\n    else\n    {\n      //Pending icon\n      return <IconButton className={\"status-icon\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <RunningManIcon/>\n      </IconButton>;\n    }\n  }\n}\n\nexport default StatusButton;\n","import React from 'react';\nimport './TestingInput.css';\n\nimport Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport AddIcon from 'icons/AddIcon.js';\nimport RemoveIcon from 'icons/RemoveIcon.js';\n\nimport StatusButton from './StatusButton.js';\n\nclass TestingInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = React.createRef();\n\n    this.onStatusClick = this.onStatusClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  getInput()\n  {\n    return this.props.testList.getInputByIndex(this.props.index);\n  }\n\n  isInputFirst()\n  {\n    return this.props.index === 0;\n  }\n\n  onStatusClick(e)\n  {\n    this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n  }\n\n  onSubmitClick(e)\n  {\n    if (this.isInputFirst())\n    {\n      const src = this.getInput();\n\n      //Add test input to list\n      const newTest = this.props.testList.addInput(src.value);\n      //Copy result to new test (should not be setResult)\n      newTest.result = src.result;\n      newTest.dirty = src.dirty;\n\n      //Delete already processed test\n      src.value = \"\";\n      src.result = null;\n      src.dirty = true;\n\n      //Reselect the target\n      this.ref.focus();\n    }\n    else\n    {\n      //Remove test input from list\n      this.props.testList.removeInputByIndex(this.props.index);\n    }\n  }\n\n  onValueChange(e)\n  {\n    const value = e.target.value.trim();\n    const src = this.getInput();\n    src.value = value;\n    src.dirty = true;\n  }\n\n  onKeyDown(e)\n  {\n    //If it is an 'enter', don't put in a new line...\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.preventDefault();\n    }\n    //Delete it if there is no value in it\n    else if (e.keyCode === Config.DELETE_KEY)\n    {\n      const src = this.getInput();\n      if (src.value.length <= 0)\n      {\n        const nextIndex = this.props.index + 1;\n        //Replace this input with the next one if there is one...\n        //Also, cannot delete first input, but this will never get there :)\n        if (this.props.testList.getTests().length > nextIndex)\n        {\n          const nextInput = this.props.testList.getInputByIndex(nextIndex);\n          src.value = nextInput.value;\n          src.result = nextInput.result;\n          src.dirty = nextInput.dirty;\n\n          this.props.testList.removeInputByIndex(nextIndex);\n        }\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      const shouldTestOnly = e.shiftKey;\n\n      //Should try to add and NOT run\n      if (this.isInputFirst() && !shouldTestOnly)\n      {\n        const src = this.getInput();\n\n        //Add test input to list\n        const newTest = this.props.testList.addInput(src.value);\n        //Copy result to new test (should not be setResult)\n        newTest.result = src.result;\n        newTest.dirty = src.dirty;\n\n        //Delete already processed test\n        src.value = \"\";\n        src.result = null;\n        src.dirty = true;\n\n        //Refocus the target\n        this.ref.focus();\n      }\n      //Should try to run ONLY\n      else\n      {\n        this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n\n        //Select everything again\n        this.ref.select();\n      }\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      e.target.blur();\n    }\n  }\n\n  render()\n  {\n    const src = this.getInput();\n    const first = this.isInputFirst();\n    return <div className={\"testinginput-container \" +\n      (this.props.testList.getCurrentInputIndex() === this.props.index ? \" active\" : \"\")}>\n\n      <StatusButton active={!src.dirty} mode={src.result} onClick={this.onStatusClick}/>\n\n      <input ref={ref=>this.ref=ref} className=\"testinginput-field\"\n        value={src.value}\n        placeholder={EMPTY}\n        onChange={this.onValueChange}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        onFocus={(e)=>e.target.select()}/>\n\n      <IconButton className=\"testinginput-submit\" onClick={this.onSubmitClick}>\n        {first ? <AddIcon/> : <RemoveIcon/>}\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default TestingInput;\n","import React from 'react';\n\nclass UploadTestButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input ref={ref=>this.uploadInput=ref}\n        id=\"test-upload-input\" type=\"file\" name=\"import\"\n        style={{display: \"none\"}}\n        onChange={this.props.onChange} accept=\".txt\"/>\n      <label htmlFor=\"test-upload-input\">\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadTestButton;\n","import React from 'react';\n\nclass PageNewContentIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenewcontent-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewContentIcon;\n","import React from 'react';\n\nclass CloseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CloseIcon;\n","import React from 'react';\nimport '../Panel.css';\nimport './TestingPanel.css';\n\nimport Downloader from 'util/Downloader.js';\n\nimport TestingManager from 'modules/fsa/testing/TestingManager.js';\nimport TestingInput from './TestingInput.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport UploadTestButton from './components/UploadTestButton.js';\n\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewContentIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\nimport CloseIcon from 'icons/CloseIcon.js';\n\nconst TEST_FILENAME = \"test.txt\";\n\n//TODO: This is faster, since it's pretty easy to tell latency here. But really it shouldn't.\nconst REFRESH_TEST_TICKS = 30;\n\nclass TestingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = React.createRef();\n    this.uploadInput = React.createRef();\n\n    this.state = {\n      errorCheckMode: this.props.currentModule.getTestingManager().getErrorCheckMode(),\n      noTestMode: true\n    };\n\n    this._savedGraphHash = 0;\n    this._ticksSinceHash = 0;\n    this.stepByStepModeChecked = false;\n\n    this.onChangeErrorCheckMode = this.onChangeErrorCheckMode.bind(this);\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onTestsRunAll = this.onTestsRunAll.bind(this);\n    this.onTestsClear = this.onTestsClear.bind(this);\n    this.onTestsSave = this.onTestsSave.bind(this);\n    this.onTestsNew = this.onTestsNew.bind(this);\n    this.onTestsUpload = this.onTestsUpload.bind(this);\n  }\n\n  componentWillMount()\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    const graph = graphController.getGraph();\n\n    //HACK: this should be in FSABuilder and listen for machine changes instead\n    this._savedGraphHash = graph.getHashCode();\n    this._ticksSinceHash = 0;\n  }\n\n  componentWillUnmount()\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    const graph = graphController.getGraph();\n    this._savedGraphHash = 0;\n  }\n\n  onGraphChange(g)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    tester.inputList.resetTests();\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      const tester = this.props.currentModule.getTestingManager();\n      tester.inputList.importTests(files[0]);\n      document.getElementById(\"test-name\").innerHTML = files[0].name;\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  onChangeErrorCheckMode(e)\n  {\n    const value = e.target.value;\n\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n    tester.setErrorCheckMode(value);\n\n    //HACK: this should automatically be updated by testing manager on set error check mode\n    if (!tester.shouldCheckError)\n    {\n      machineBuilder.machineErrorChecker.clear();\n    }\n    else\n    {\n      machineBuilder.onGraphChange(graph);\n    }\n\n    this.setState({errorCheckMode: value});\n  }\n\n  onTestsRunAll(e)\n  {\n    const currentModule = this.props.currentModule;\n    const machine = currentModule.getMachineController().getMachineBuilder().getMachine();\n    const tester = currentModule.getTestingManager();\n    if (tester.testMode.isStarted())\n    {\n      tester.setStepByStepMode(false);\n    }\n    else\n    {\n      const testList = tester.inputList;\n      const length = testList.getTests().length;\n      tester.setStepByStepMode(this.stepByStepModeChecked);\n      for(let i = 0; i < length; ++i)\n      {\n        testList.testByIndex(i, machine);\n      }\n    }\n  }\n\n  onTestsClear(e)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    tester.inputList.clearTests();\n    this.clearTestName();\n    this.hideTestInputList();\n    this.setState({noTestMode: true});\n  }\n\n  onTestsSave(e)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    Downloader.downloadText(TEST_FILENAME, tester.inputList.getTestsAsStrings().join(\"\\n\"));\n  }\n\n  onTestsNew(e)\n  {\n      this.onTestsClear();\n      this.showTestInputList();\n      this.clearTestName();\n      this.setState({noTestMode: false});\n  }\n\n  onTestsUpload(e)\n  {\n      this.onTestsNew();\n      this.showTestInputList();\n  }\n\n  showTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"block\";\n  }\n\n  hideTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"none\";\n  }\n\n  clearTestName() {\n      document.getElementById(\"test-name\").innerHTML = \"\";\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const tester = currentModule.getTestingManager();\n    const testList = tester.inputList;\n    const machineBuilder = currentModule.getMachineController().getMachineBuilder();\n\n    const isTestInvalid = !machineBuilder.isValidMachine();\n\n    if (--this._ticksSinceHash <= 0)\n    {\n      this._ticksSinceHash = REFRESH_TEST_TICKS;\n      const graph = currentModule.getGraphController().getGraph();\n      const graphHash = graph.getHashCode();\n      if (this._savedGraphHash !== graphHash)\n      {\n        this.onGraphChange(graph);\n        this._savedGraphHash = graphHash;\n      }\n    }\n\n    return <div className={\"panel-container \" + this.props.className} id=\"testing\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.testing.title\")}</h1>\n      </div>\n\n      <div className=\"test-icon-row\">\n\n          <IconButton className=\"testicon\" id=\"testing-new\" title={I18N.toString(\"action.testing.new\")}\n            onClick={this.onTestsNew}>\n            <CreateIcon/>\n          </IconButton>\n\n          {/*Import Test Button*/}\n          <UploadTestButton className=\"testicon\" id=\"testing-upload\" title={I18N.toString(\"action.testing.import\")}\n            onClick={this.onTestsUpload} onChange={this.onUploadFileChange}>\n            <UploadIcon/>\n          </UploadTestButton>\n\n          {/*Save Test Button*/}\n          <IconButton className=\"testicon\" id=\"testing-save\" title={I18N.toString(\"action.testing.save\")}\n            onClick={this.onTestsSave} disabled={tester.inputList.isEmpty()}>\n            <SaveIcon/>\n          </IconButton>\n\n          <IconButton className=\"testicon\" id=\"testing-clear\" title={I18N.toString(\"action.testing.clear\")}\n            onClick={this.onTestsClear}\n            disabled={this.state.noTestMode}>\n            <CloseIcon/>\n          </IconButton>\n\n      </div>\n\n      <div className=\"panel-content\">\n\n        <div className=\"test-inputlist-container\" id=\"test-inputlist-container\" style={{\"display\": \"none\"}}>\n\n\n          <div className=\"scrollbar-container\">\n            <h3 id=\"test-name\">Test Name</h3>\n            <div className=\"test-inputlist-content\">\n              {\n                isTestInvalid &&\n                <label className=\"test-inputlist-content-warning\">Not a valid machine!</label>\n              }\n              {\n                testList.getTests().map((e, i) =>\n                  <TestingInput key={e.id} index={i}\n                    testList={testList}\n                    machineBuilder={machineBuilder}/>)\n              }\n              {\n                /*\n                <button className=\"panel-button\" onClick={() => testList.addInput(\"\")}>\n                  {I18N.toString(\"action.testing.add\")}\n                </button>\n                */\n              }\n            </div>\n          </div>\n\n          <button className=\"panel-button\" onClick={this.onTestsRunAll}>\n            {tester.testMode.isStarted() ? I18N.toString(\"action.testing.stoprun\") : I18N.toString(\"action.testing.runall\")}\n          </button>\n\n          <div className=\"panel-checkbox\">\n            <input id=\"test-step\" type=\"checkbox\"\n              checked={this.stepByStepModeChecked}\n              onChange={(e) => {\n                this.stepByStepModeChecked = e.target.checked;\n                if(!this.stepByStepModeChecked) tester.setStepByStepMode(false);\n              }}\n              disabled={tester.testMode.isStarted()}/>\n            <label htmlFor=\"test-step\">{I18N.toString(\"options.testing.stepmode\")}</label>\n          </div>\n\n        </div>\n\n        <hr />\n\n        <div id=\"test-errorcheck\">\n          <label>{I18N.toString(\"options.checkerrors\")}</label>\n          <select className=\"panel-select\"\n            value={this.state.errorCheckMode}\n            onChange={this.onChangeErrorCheckMode}>\n            <option value={TestingManager.NO_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.none\")}</option>\n            <option value={TestingManager.DELAYED_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.delayed\")}</option>\n            <option value={TestingManager.IMMEDIATE_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.immediate\")}</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(TestingPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.testing.title\"); }\n});\nTestingPanel.UNLOCALIZED_NAME = \"component.testing.title\";\n\nexport default TestingPanel;\n","import React from 'react';\n\nclass NFAToDFAConversionWarningMessage extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const message = this.props.message;\n        const buttonValue = e.target.value;\n\n        switch(buttonValue)\n        {\n            case \"convert\":\n                {\n                    const machineController = this.props.machineController;\n                    machineController.convertMachineTo(\"DFA\");\n                    message.close();\n                }\n            break;\n            default:\n              throw new Error(\"Unknown button value for message\");\n        }\n    }\n\n    render()\n    {\n        const machineController = this.props.machineController;\n        const machine = machineController.getMachineBuilder().getMachine();\n        const stateCount = machine.getStates().length;\n\n        return <div>\n          <p>{I18N.toString(\"message.warning.convertNFAToDFA\")}</p>\n          <p>{`${stateCount} states -> ${Math.pow(2, stateCount)} states`}</p>\n          <button value=\"convert\" onClick={this.onClick}>{I18N.toString(\"message.action.convert\")}</button>\n        </div>;\n\n    }\n}\n\nexport default NFAToDFAConversionWarningMessage;\n","import React from 'react';\nimport Config from 'config.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport NFAToDFAConversionWarningMessage from 'modules/fsa/notifications/NFAToDFAConversionWarningMessage.js';\n\nclass AnalysisPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n    this.optimizeUnreachOption = null;\n    this.optimizeRedundOption = null;\n\n    this.onConvertToDFA = this.onConvertToDFA.bind(this);\n    this.onConvertToNFA = this.onConvertToNFA.bind(this);\n\n    this.onOptimizeMachine = this.onOptimizeMachine.bind(this);\n  }\n\n  onDeleteAllUnreachable(e)\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const unreachableArray = machineController.getMachineBuilder().machineErrorChecker.getUnreachableNodes();\n    graphController.deleteTargetNodes(unreachableArray);\n  }\n\n  onConvertToDFA(e)\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const props = {graphController: graphController, machineController: machineController};\n    const messageTag = Config.MACHINE_CONVERSION_MESSAGE_TAG;\n\n    //machineController.convertMachineTo(\"DFA\");\n    Notifications.addMessage(I18N.toString(\"message.warning.convertNFAToDFA\"),\n      \"warning\", messageTag, NFAToDFAConversionWarningMessage, props);\n  }\n\n  onConvertToNFA(e)\n  {\n    const machineController = this.props.currentModule.getMachineController();\n    machineController.convertMachineTo(\"NFA\");\n  }\n\n  onOptimizeMachine(e)\n  {\n    if (this.optimizeUnreachOption.checked)\n    {\n      this.onDeleteAllUnreachable(e);\n    }\n  }\n\n  canOptimize()\n  {\n    return (this.optimizeRedundOption && this.optimizeRedundOption.checked) ||\n    (this.optimizeUnreachOption && this.optimizeUnreachOption.checked);\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"analysis\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\"><h1>{I18N.toString(\"component.analysis.title\")}</h1></div>\n      <div className=\"panel-content\">\n\n        {/*Optimize*/}\n        <div style={{paddingBottom: \"0.5em\"}}>\n          <h3 style={{marginBottom: \"0\"}}>Optimizations</h3>\n          <div style={{paddingBottom: \"0.5em\"}}>\n            <div>\n              <input ref={ref=>this.optimizeUnreachOption=ref} id=\"opt-unreach\" type=\"checkbox\"/>\n              <label htmlFor=\"opt-unreach\">Unreachables</label>\n            </div>\n            <div>\n              <input ref={ref=>this.optimizeRedundOption=ref} id=\"opt-redund\" type=\"checkbox\" disabled={true}/>\n              <label htmlFor=\"opt-redund\">Redundant States</label>\n            </div>\n          </div>\n          <button className=\"panel-button\" onClick={this.onOptimizeMachine} disabled={!this.canOptimize()}>Optimize</button>\n        </div>\n\n        <hr/>\n        {\n          machineBuilder.getMachineType() == \"DFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToNFA}>\n              {I18N.toString(\"action.overview.convertnfa\")}\n            </button>\n          : machineBuilder.getMachineType() == \"NFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToDFA}>\n              {I18N.toString(\"action.overview.convertdfa\")}\n            </button>\n          : null\n        }\n\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(AnalysisPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.analysis.title\"); }\n});\nAnalysisPanel.UNLOCALIZED_NAME = \"component.analysis.title\";\n\nexport default AnalysisPanel;\n","import React from 'react';\n\nclass AboutPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  //Override\n  render()\n  {\n    return <div className={\"panel-container \" + this.props.className} id=\"about\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>Finite State Automata</h1>\n      </div>\n      <div className=\"panel-content\">\n        <p>{\"Brought to you with \\u2764 by the Flap.js team.\"}</p>\n        <p>{\"<- Tap on a tab to begin!\"}</p>\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\n\nexport default AboutPanel;\n","class AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    this._module = module;\n    this._inputAdapter = inputAdapter.setController(this);\n  }\n\n  initialize(module) {}\n  destroy(module) {}\n  update(module) {}\n\n  //Override\n  onPreInputEvent(pointer) { return false; }\n  //Override\n  onInputEvent(pointer) { return false; }\n  //Override\n  onAltInputEvent(pointer) { return this.onInputEvent(pointer); }\n  //Override\n  onDblInputEvent(pointer) { return false; }\n  //Override\n  onDragStart(pointer) { return false; }\n  //Override\n  onDragMove(pointer) { return false; }\n  //Override\n  onDragStop(pointer) { return false; }\n  //Override\n  onPostInputEvent(pointer) {}\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue) { return true; }\n\n  getInputAdapter()\n  {\n    return this._inputAdapter;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractInputController;\n","import Config from 'config.js';\n\nclass GraphPicker\n{\n  constructor()\n  {\n    this.selectionBox = {\n      fromX: 0, fromY: 0,\n      toX: 0, toY: 0,\n      visible: false\n    };\n    this.targets = [];\n\n    this.target = null;\n    this.targetType = \"\";\n\n    this.initialTarget = null;\n    this.initialTargetType = \"\";\n  }\n\n  setInitialTarget(target, type)\n  {\n    this.initialTarget = target;\n    this.initialTargetType = type;\n  }\n\n  updateTarget(graph, x, y)\n  {\n    if (this.target = this.getNodeByInitialMarkerAt(graph, x, y))\n    {\n      //Clicked on initial marker\n      this.targetType = \"initial\";\n    }\n    else if (this.target = this.getEdgeByEndPointAt(graph, x, y))\n    {\n      //Clicked on endpoint\n      this.targetType = \"endpoint\";\n    }\n    else if (this.target = this.getNodeAt(graph, x, y))\n    {\n      //Clicked on node\n      this.targetType = \"node\";\n    }\n    else if (this.target = this.getEdgeAt(graph, x, y))\n    {\n      //Clicked on edge\n      this.targetType = \"edge\";\n    }\n    else\n    {\n      //Clicked on graph\n      this.target = null;\n      this.targetType = \"none\";\n    }\n\n    return this.target;\n  }\n\n  clearTarget()\n  {\n    this.target = null;\n    this.targetType = \"none\";\n  }\n\n  hasTarget()\n  {\n    return this.target != null;\n  }\n\n  getNodeAt(graph, x, y)\n  {\n    //Search graph\n    for(const node of graph.getNodes())\n    {\n      const dx = x - node.x;\n      const dy = y - node.y;\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU)\n      {\n        return node;\n      }\n    }\n    return null;\n  }\n\n  getNodeByInitialMarkerAt(graph, x, y)\n  {\n    const startNode = graph.getStartNode();\n    if (!startNode) return null;\n\n    const dx = x - (startNode.x + Config.INITIAL_MARKER_OFFSET_X);\n    const dy = y - startNode.y;\n    if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n    {\n      return startNode;\n    }\n\n    return null;\n  }\n\n  getEdgeAt(graph, x, y)\n  {\n    const center = {x: 0, y: 0};\n\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getCenterPoint(center);\n      const dx = x - center.x;\n      const dy = y - center.y;\n      if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getEdgeByEndPointAt(graph, x, y)\n  {\n    const end = {x: 0, y: 0};\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getEndPoint(end);\n      const dx = x - end.x;\n      const dy = y - end.y;\n      if (dx * dx + dy * dy < Config.ENDPOINT_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getSelectionBox()\n  {\n    return this.selectionBox;\n  }\n\n  getSelection(graph, forceUpdate=false)\n  {\n    if (forceUpdate)\n    {\n      const box = this.selectionBox;\n      const mx = Math.max(box.toX, box.fromX);\n      const my = Math.max(box.toY, box.fromY);\n      const lx = Math.min(box.toX, box.fromX);\n      const ly = Math.min(box.toY, box.fromY);\n      this.clearSelection();\n      getNodesWithin(graph, lx, ly, mx, my, this.targets);\n    }\n\n    return this.targets;\n  }\n\n  hasSelection()\n  {\n    return this.targets.length > 0;\n  }\n\n  clearSelection()\n  {\n    this.targets.length = 0;\n  }\n\n  isTargetInSelection(target)\n  {\n    return this.targets.includes(target || this.target);\n  }\n\n  isTarget(target)\n  {\n    return this.target == target;\n  }\n\n  beginSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.fromX = box.toX = x;\n    box.fromY = box.toY = y;\n    this.clearSelection();\n\n    box.visible = true;\n  }\n\n  updateSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n  }\n\n  endSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n\n    box.visible = false;\n  }\n\n  isSelecting()\n  {\n    return this.selectionBox.visible;\n  }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n  const fromX = Math.min(x1, x2);\n  const fromY = Math.min(y1, y2);\n  const toX = Math.max(x1, x2);\n  const toY = Math.max(y1, y2);\n\n  for(const node of graph.getNodes())\n  {\n    if (node.x >= fromX && node.x < toX &&\n        node.y >= fromY && node.y < toY)\n    {\n      dst.push(node);\n    }\n  }\n  return dst;\n}\n\nexport default GraphPicker;\n","class GraphElement\n{\n  constructor(id)\n  {\n    this._id = id;\n  }\n\n  setGraphElementID(graphElementID)\n  {\n    this._id = graphElementID;\n    return this;\n  }\n\n  //A unique identifier for this graph element\n  getGraphElementID()\n  {\n    return this._id;\n  }\n\n  //Calls getHashString() to generate an integer hash generally unqiue to the instance.\n  //Should only be used to distinguish between other objects with the same\n  //hash function. In other words, every instance should only be compared to\n  //other instances of the same class.\n  //usePosition can be used to tell the hash function whether or not to consider\n  //aesthetic, or position, attributes of the element.\n  getHashString(usePosition=true)\n  {\n    return this._id;\n  }\n}\nexport default GraphElement;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphNode extends GraphElement\n{\n  constructor(id, x, y)\n  {\n    super(id);\n\n    this.x = x;\n    this.y = y;\n\n    this._label = \"\";\n  }\n\n  setNodeLabel(label)\n  {\n    this._label = label;\n    return this;\n  }\n\n  getNodeLabel()\n  {\n    return this._label;\n  }\n\n  getNodeSize()\n  {\n    return 16;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + Math.floor(this.x) + \",\" + Math.floor(this.y) + \".\" + this._label;\n    }\n    else\n    {\n      return super.getHashString(usePosition) + \":\" + this._label;\n    }\n  }\n}\n\nexport default GraphNode;\n","import GraphNode from 'graph/GraphNode.js';\nimport Config from 'config.js';\n\nclass FSANode extends GraphNode\n{\n  constructor(id, x, y)\n  {\n    super(id, x, y);\n\n    this._accept = false;\n\n    //this is not saved to hash since it is an aesthetic option\n    this._custom = false;\n  }\n\n  setNodeAccept(value)\n  {\n    this._accept = value;\n  }\n\n  getNodeAccept()\n  {\n    return this._accept;\n  }\n\n  setNodeCustom(value)\n  {\n    this._custom = value;\n  }\n\n  getNodeCustom()\n  {\n    return this._custom;\n  }\n\n  //Override\n  getNodeSize()\n  {\n    return Config.NODE_RADIUS;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    return super.getHashString(usePosition) + \":\" + (this._accept ? \"1\" : \"0\");\n  }\n}\n\nexport default FSANode;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphEdge extends GraphElement\n{\n  constructor(id, from, to=null)\n  {\n    super(id);\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = from;\n    this._to = to;\n\n    this._label = \"\";\n  }\n\n  setSourceNode(node)\n  {\n    if (!node) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = node;\n    return this;\n  }\n\n  getSourceNode()\n  {\n    return this._from;\n  }\n\n  setDestinationNode(node)\n  {\n    this._to = node;\n    return this;\n  }\n\n  changeDestinationNode(node)\n  {\n    this._to = node;\n  }\n\n  getDestinationNode()\n  {\n    return this._to;\n  }\n\n  setEdgeLabel(label)\n  {\n    this._label = label;\n  }\n\n  getEdgeLabel()\n  {\n    return this._label;\n  }\n\n  getEdgeDirection()\n  {\n    const from = this._from;\n    const to = this._to;\n    const HALFPI = Math.PI / 2;\n    let result = 0;\n\n    if (this.isPlaceholder())\n    {\n      result = Math.PI / 4;\n    }\n    else\n    {\n      const dy = to.y - from.y;\n      const dx = to.x - from.x;\n      result = Math.atan2(dy, dx);\n    }\n\n    if (result > HALFPI || result < -HALFPI)\n    {\n      result += Math.PI;\n    }\n\n    return result;\n  }\n\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    dst.x = from.x;\n    dst.y = from.y;\n    return dst;\n  }\n\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n    if (this.isPlaceholder())\n    {\n      const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n      dst.x = from.x + halfPlaceholderLength;\n      dst.y = from.y + halfPlaceholderLength;\n    }\n    else\n    {\n      dst.x = from.x + (to.x - from.x) / 2;\n      dst.y = from.y + (to.y - from.y) / 2;\n    }\n    return dst;\n  }\n\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    if (this.isPlaceholder())\n    {\n      const from = this._from;\n      const placeholderLength = this.getPlaceholderLength();\n      dst.x = from.x + placeholderLength;\n      dst.y = from.y + placeholderLength;\n    }\n    else\n    {\n      const to = this._to;\n      dst.x = to.x;\n      dst.y = to.y;\n    }\n    return dst;\n  }\n\n  getPlaceholderLength()\n  {\n    return this._from.getNodeSize();\n  }\n\n  isPlaceholder()\n  {\n    return !this._to;\n  }\n\n  isSelfLoop()\n  {\n    return this._from === this._to;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    const src = this._from ? this._from.getHashString(usePosition) : \"\";\n    //HACK: to may be a pointer, which is not a node, so getHashString does not exist.\n    const dst = this._to ? this._to.getHashString ? this._to.getHashString(usePosition) : \"0\" : \"\";\n    return super.getHashString(usePosition) + \":\" + src + \",\" + dst + \".\" + this._label;\n  }\n}\n\nexport default GraphEdge;\n","import GraphEdge from 'graph/GraphEdge.js';\n\nclass GraphCurvedEdge extends GraphEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, null);\n\n    //radians = the angle in radians, where 0 is the normal of midpoint\n    //length = the distance from midpoint\n    this._quad = {\n      radians: 0,\n      length: 0,\n      _coords: {x: 0, y: 0}\n    };\n\n    //Make sure to format it correctly when creating...\n    this.changeDestinationNode(to);\n  }\n\n  setQuadratic(radians, length=undefined)\n  {\n    this._quad.radians = radians;\n    if (typeof length === 'number')\n    {\n      this._quad.length = length;\n    }\n    return this;\n  }\n\n  getQuadratic()\n  {\n    return this._quad;\n  }\n\n  isQuadratic()\n  {\n    return !this.isPlaceholder() && this._quad.length != 0;\n  }\n\n  setQuadraticByCoords(x, y)\n  {\n    const from = this._from;\n    const to = this._to;\n    const fromx = from.x;\n    const fromy = from.y;\n    const tox = to.x;\n    const toy = to.y;\n\n    let dx = tox - fromx;\n    let dy = toy - fromy;\n    const midpointx = fromx + dx / 2;\n    const midpointy = fromy + dy / 2;\n\n    //Remember: y-axis is flipped because canvas coord-space is -y => +y\n    //Therefore, dy needs to be flipped\n    const angleOffset = Math.atan2(-dy, dx);\n    dx = x - midpointx;\n    dy = y - midpointy;\n\n    const PI = Math.PI;\n    const PI2 = PI * 2;\n    const HALFPI = PI / 2;\n    //0 rad = to the right\n    //Also: angleOffset is the offset from midpoint angle, the orthogonal base vector\n    //This is because the from and to could be flipped, and\n    //therefore give a negative, or at least a reversed angle.\n    let radians = Math.atan2(dy, dx) + angleOffset;\n    let length = Math.sqrt(dx * dx + dy * dy);\n    if (length < 0) length = 0;\n\n    const outrad = radians - (-HALFPI);//-PI / 2 is outward\n    const inrad = radians - (HALFPI);//PI / 2 is inward\n    //TODO: Should be dependent on length\n    const maxdr = PI / 20;\n\n    if (Math.abs(length) < 8)\n    {\n      radians = 0;\n      length = 0;\n    }\n    else if (outrad < maxdr && outrad > -maxdr)\n    {\n      radians = -HALFPI;//-PI / 2 is outward\n    }\n    else if (-inrad < maxdr && -inrad > -maxdr)\n    {\n      radians = HALFPI;//PI / 2 is inward\n    }\n\n    this._quad.radians = radians;\n    this._quad.length = length;\n  }\n\n  getQuadraticAsCoords()\n  {\n    const from = this._from;\n    const to = this._to;\n    const dst = this._quad._coords;\n    if (from == null || to == null)\n    {\n      dst.x = 0;\n      dst.y = 0;\n    }\n    else\n    {\n      /*\n      //To mark dirty...\n      _capture: {\n        fx: 0, fy: 0,\n        tx: 0, ty: 0,\n        ql: 0, qr: 0\n      }\n      */\n      getDirectionalVector(from.x, from.y, to.x, to.y, this._quad.length, this._quad.radians, dst);\n    }\n    return dst;\n  }\n\n  getSelfLoopHeight()\n  {\n    return this._from.getNodeSize();\n  }\n\n  formatAsSelfLoop()\n  {\n    this.setQuadratic(-Math.PI / 2, this._from.getNodeSize() + this.getSelfLoopHeight());\n  }\n\n  formatAsPlaceholder(prevDest)\n  {\n    //Quad is re-used to determine edge angle for placeholder\n    //This can be used specifically for quad since regular quad is\n    //dependent on this._to != null, which placeholder assumes this._to == null.\n    //Also, quad.length is ignored, because the length should always be\n    //getPlaceholderLength(). This is resolved by getStartPoint(), etc.\n    if (prevDest)\n    {\n      const dx = this._from.x - prevDest.x;\n      const dy = this._from.y - prevDest.y;\n      const angle = -Math.atan2(dx, dy) - (Math.PI / 2);\n      this._quad.radians = angle;\n    }\n    else\n    {\n      this._quad.radians = 0;\n    }\n  }\n\n  //Override\n  changeDestinationNode(node)\n  {\n    const prevDest = this._to;\n\n    //Just to optimize this a little :)\n    if (prevDest === node) return;\n\n    super.changeDestinationNode(node);\n\n    if (this.isPlaceholder())\n    {\n      this.formatAsPlaceholder(prevDest);\n    }\n    else if (this.isSelfLoop())\n    {\n      this.formatAsSelfLoop();\n    }\n  }\n\n  //Override\n  getEdgeDirection()\n  {\n    let result = 0;\n    if (this.isQuadratic())\n    {\n      const coords = this.getQuadraticAsCoords();\n      result = Math.atan2(coords.y, coords.x) + Math.PI / 2;\n    }\n    else\n    {\n      result = super.getEdgeDirection();\n    }\n\n    return result;\n  }\n\n  //Override\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const nodeSize = from.getNodeSize();\n      dst.x = from.x + px * nodeSize;\n      dst.y = from.y + py * nodeSize;\n      return dst;\n    }\n\n    //Check if edge is following something other than a node...then remain flat\n    if (!to.getNodeSize || !this.isQuadratic())\n    {\n      getDirectionalVector(from.x, from.y, to.x, to.y, from.getNodeSize(), 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(from.x, from.y, qx, qy, from.getNodeSize(), this.isSelfLoop() ? (Math.PI / 4) : 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quadCoords for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength();\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    //Get end point for non-nodes...\n    if (!to.getNodeSize)\n    {\n      return to;\n    }\n    //Get end point for straight edges...\n    else if (!this.isQuadratic())\n    {\n      getDirectionalVector(to.x, to.y, from.x, from.y, to.getNodeSize(), 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n    //Get end point for quadratics...\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(to.x, to.y, qx, qy, to.getNodeSize(), this.isSelfLoop() ? -(Math.PI / 4.0) : 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength() / 2;\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    getMidPoint(from.x, from.y, to.x, to.y, dst);\n\n    if (this.isQuadratic())\n    {\n      const qcoords = this.getQuadraticAsCoords();\n      dst.x += qcoords.x;\n      dst.y += qcoords.y;\n    }\n\n    return dst;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + this._quad.radians + \",\" + this._quad.length;\n    }\n    else\n    {\n      return super.getHashString(usePosition);\n    }\n  }\n}\n\nfunction getDirectionalVector(x1, y1, x2, y2, dist, angleOffset=0, dst={x: 0, y: 0})\n{\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const angle = Math.atan2(dy, dx) + angleOffset;\n  dst.x = Math.cos(angle) * dist;\n  dst.y = Math.sin(angle) * dist;\n  return dst;\n}\n\nfunction getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n  dst.x = x1 + (x2 - x1) / 2;\n  dst.y = y1 + (y2 - y1) / 2;\n  return dst;\n}\n\nexport default GraphCurvedEdge;\n","import QuadraticEdge from 'graph/QuadraticEdge.js';\n\nexport const SYMBOL_SEPARATOR = ' ';\nexport const EMPTY_CHAR = '\\u03B5';\n\nclass FSAEdge extends QuadraticEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, to);\n  }\n\n  //Override\n  setEdgeLabel(label)\n  {\n    if (typeof label === 'string')\n    {\n      super.setEdgeLabel(label);\n    }\n    else\n    {\n      super.setEdgeLabel(EMPTY_CHAR);\n    }\n  }\n\n  getEdgeSymbolsFromLabel()\n  {\n    return this.getEdgeLabel().split(SYMBOL_SEPARATOR);\n  }\n}\n\nexport default FSAEdge;\n","import AbstractInputController from 'modules/abstract/AbstractInputController.js';\nimport Config from 'config.js';\n\nimport GraphPicker from './GraphPicker.js';\nimport Node from 'modules/fsa/graph/FSANode.js';\nimport Edge from 'modules/fsa/graph/FSAEdge.js';\n\nclass InputController extends AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    super(module, inputAdapter);\n\n    this._picker = new GraphPicker();\n\n    this._graphController = null;\n\n    //Used to check if target needs to be updated for the hover effect\n    this.prevPointerX = 0;\n    this.prevPointerY = 0;\n\n    //Make sure this is always false when moving endpoints\n    this.isNewEdge = false;\n\n    //Used to change render to follow pointer when moving initial marker\n    this.ghostInitialMarker = null;\n\n    //Whether to destroy pointless edges\n    this.shouldDestroyPointlessEdges = Config.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE;\n\n    //Swap left to right clicks and vice versa on anything else but Macs\n    this._swapMouseScheme = true;//!navigator.platform.startsWith(\"Mac\");\n\n    //Used to determine whether the target should be destroyed because of trash mode\n    this._trashMode = false;\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this._graphController = module.getGraphController();\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    const graph = this._graphController.getGraph();\n    const picker = this._picker;\n    const x = this._inputAdapter.getPointerX();\n    const y = this._inputAdapter.getPointerY();\n\n    if (x != this.prevPointerX || y != this.prevPointerY)\n    {\n      this.prevPointerX = x;\n      this.prevPointerY = y;\n\n      //Update target\n      picker.updateTarget(graph, x, y);\n\n      //HACK: to make the cursor look like a pointer when targeting\n      if (picker.hasTarget())\n      {\n        document.body.style.cursor = \"pointer\";\n      }\n      else\n      {\n        document.body.style.cursor = \"auto\";\n      }\n    }\n  }\n\n  //Override\n  onPreInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n    picker.setInitialTarget(picker.target, picker.targetType);\n\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    if (picker.hasSelection())\n    {\n      //Unselect everything is clicked on something other than nodes...\n      if (targetType != \"node\" || !picker.isTargetInSelection(target))\n      {\n        picker.clearSelection();\n      }\n    }\n\n    //Disable all graph input when in step-by-step mode\n    if (graphController.tester.getStepByStepMode())\n    {\n      //Consume event!\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const x = pointer.x;\n    const y = pointer.y;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in trash mode... capture all events!\n    if (inputController.isTrashMode())\n    {\n      //Click to delete node\n      if (targetType === 'node')\n      {\n        //So that the emitted 'delete' events can use this\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n\n        //If there exists selected states, delete them all!\n        if (picker.hasSelection())\n        {\n          //Delete all selected nodes\n          graphController.deleteSelectedNodes(target);\n        }\n        else\n        {\n          //Delete a single node\n          graphController.deleteTargetNode(target);\n        }\n\n        return true;\n      }\n      else if (targetType === 'edge' || targetType === 'endpoint')\n      {\n        //Delete a single edge\n        graphController.deleteTargetEdge(target);\n        return true;\n      }\n\n      //Clicked on something you cannot delete\n      //return true;\n      return false;\n    }\n\n    //If not in Trash Mode, then events should pass through to here...\n    //Otherwise, ALL events are captured to prevent ALL default behavior.\n\n    //Makes sure that user cannot toggle state while in trash mode\n    if (targetType === 'node')\n    {\n      graphController.toggleNode(target);\n      return true;\n    }\n    //Edit label for selected edge\n    else if (targetType === 'edge')\n    {\n      graphController.openLabelEditor(target, x, y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onAltInputEvent(pointer)\n  {\n    return this.onInputEvent(pointer);\n  }\n\n  //Override\n  onDblInputEvent(pointer)\n  {\n    const graphController = this._graphController;\n    const x = pointer.x;\n    const y = pointer.y;\n\n    if (!this.isTrashMode())\n    {\n      //Create state at position\n      graphController.createNode(x, y);\n      return true;\n    }\n    else\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Make sure it is not in trash mode\n      if (inputController.isTrashMode())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        graphController.emit(\"tryCreateWhileTrash\");\n        return false;\n      }\n\n      //Make sure it is not in new edge mode\n      inputController.isNewEdge = false;\n\n      //Makes sure that placeholders are not quadratics!\n      if (targetType === 'edge' && target.isPlaceholder())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        //Ignore drag event...\n        return false;\n      }\n      //Moving node (and selected nodes)\n      else if (targetType === 'node')\n      {\n        //target MUST be an instance of Node...\n        if (!(target instanceof Node))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Node.\");\n\n        //Ready to move node(s)...\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n        return true;\n      }\n      //Moving edge center point\n      else if (targetType === 'edge')\n      {\n        //target MUST be an instance of Edge...\n        if (!(target instanceof Edge))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n        //Makes sure that placeholders are not quadratics!\n        if (target.isPlaceholder())\n        {\n          //inputController.setMoveMode(false, true);//Set to false\n          return false;\n        }\n\n        //Save previous quadratics\n        const targetQuad = target.getQuadratic();\n        graphController.prevQuad.radians = targetQuad.radians;\n        graphController.prevQuad.length = targetQuad.length;\n\n        //Ready to move the edge vertex to pointer...\n        return true;\n      }\n      //Moving initial marker\n      else if (targetType === 'initial')\n      {\n        inputController.ghostInitialMarker = pointer;\n\n        //Ready to move the initial marker to another state...\n        return true;\n      }\n      //Moving nothing\n      else if (targetType === 'none')\n      {\n        //Reuse nodal prev pos for graph prev pos\n        graphController.prevX = x;\n        graphController.prevY = y;\n\n        //Ready to move the graph to pointer...\n        return true;\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If input dragged a node...\n      if (targetType === 'node')\n      {\n        if (!inputController.isTrashMode())\n        {\n          const edge = graph.createEdge(target, pointer);\n          edge.setEdgeLabel(Config.STR_TRANSITION_DEFAULT_LABEL);\n\n          //Redirect pointer to refer to the edge as the new target\n          picker.setInitialTarget(edge, \"endpoint\");\n          inputController.isNewEdge = true;\n\n          //Reset previous quad values for new proxy edge\n          const edgeQuad = edge.getQuadratic();\n          graphController.prevQuad.radians = edgeQuad.radians;\n          graphController.prevQuad.length = edgeQuad.length;\n\n          //Ready to move proxy edge to pointer...\n          //inputController.setMoveMode(true, true);\n          return true;\n        }\n        else\n        {\n          graphController.emit(\"tryCreateWhileTrash\");\n          return false;\n        }\n      }\n      else if (targetType == 'edge')\n      {\n        //Do nothing.\n        return false;\n      }\n      //If input dragged nothing...\n      else if (targetType === 'none')\n      {\n        //Begin selection box...\n        picker.beginSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    //In either moving or not... moving endpoints\n    if (targetType === 'endpoint')\n    {\n      //target MUST be an instance of Edge...\n      if (!(target instanceof Edge))\n        throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n      const targetQuad = target.getQuadratic();\n      graphController.prevQuad.radians = targetQuad.radians;\n      graphController.prevQuad.length = targetQuad.length;\n\n      graphController.prevEdgeTo = target.getDestinationNode();\n      inputController.isNewEdge = inputController.isMoveMode() ? false : true;\n\n      //Ready to move the edge endpoint to pointer...\n      return true;\n    }\n\n    //All input should be handled\n    //throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n\n    return false;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Continue to move node(s)\n      if (targetType === 'node')\n      {\n        if (picker.hasSelection())\n        {\n          graphController.moveMultipleNodesTo(pointer, picker.getSelection(graph), x, y);\n        }\n        else\n        {\n          graphController.moveNodeTo(pointer, target, x, y);\n        }\n        return true;\n      }\n      //Continue to move edge vertex\n      else if (targetType === 'edge')\n      {\n        graphController.moveEdgeTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move edge endpoint\n      else if (targetType === 'endpoint')\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move initial\n      else if (targetType === 'initial')\n      {\n        //Move initial marker to node or pointer\n        const dst = picker.getNodeAt(graph, x, y) || pointer;\n        inputController.ghostInitialMarker = dst;\n        return true;\n      }\n      //Continue to move graph\n      else if (targetType === 'none')\n      {\n        //Move graph\n        const dx = x - graphController.prevX;\n        const dy = y - graphController.prevY;\n        inputController.getInputAdapter().getViewport().addOffset(dx, dy, true);\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      if (inputController.isNewEdge)\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n\n      //If the selection box is active...\n      if (picker.isSelecting())\n      {\n        //Update the selection box\n        picker.updateSelection(graph, x, y);\n        return true;\n      }\n\n      //Otherwise, don't do anything. Cause even input drags will become move drags.\n    }\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode() || inputController.isNewEdge)\n    {\n      //If stopped dragging a node...\n      if (targetType === 'node')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          //If there exists selected states, delete them all!\n          if (picker.hasSelection())\n          {\n            graphController.deleteSelectedNodes(target);\n          }\n          else\n          {\n            //Delete a single node\n            graphController.deleteTargetNode(target);\n          }\n\n          return true;\n        }\n        //If dragged to an empty space (not trash)\n        else\n        {\n          //Do nothing, since should have moved to position\n          if (picker.hasSelection())\n          {\n            const dx = x - graphController.prevX;\n            const dy = y - graphController.prevY;\n            graphController.emit(\"nodeMoveAll\", graph, picker.getSelection(graph), dx, dy);\n          }\n          else\n          {\n            graphController.emit(\"nodeMove\", graph, target, x, y, graphController.prevX, graphController.prevY);\n          }\n          return true;\n        }\n      }\n      //If stopped dragging a edge...\n      else if (targetType === 'edge')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n        }\n        else\n        {\n          //Do nothing, since should have moved to position\n          graphController.emit(\"edgeMove\", graph, target, target.getQuadratic(), graphController.prevQuad);\n        }\n        return true;\n      }\n      //If stopped dragging a endpoint...\n      else if (inputController.isNewEdge || targetType === 'endpoint')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n          return true;\n        }\n        //If hovering over a node...\n        else if (target.getDestinationNode() instanceof Node)\n        {\n          const result = graph.formatEdge(target);\n\n          //If a different edge is the result of the target...\n          if (result !== target)\n          {\n            //Allow the user to edit the merged labels\n            graphController.openLabelEditor(result, x, y, result.getEdgeLabel(), false);\n\n            //Delete the merged label\n            graph.deleteEdge(target);\n            return true;\n          }\n          //Open label editor if a new edge...\n          else\n          {\n            if (inputController.isNewEdge)\n            {\n              graphController.openLabelEditor(target, x, y, null, true, () => {\n                graphController.emit(\"userPostCreateEdge\", graph, target);\n              });\n            }\n            else\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n          }\n\n          if (inputController.isNewEdge)\n          {\n            //Must be after openLabelEditor() to allow the function to check it...\n            inputController.isNewEdge = false;\n\n            //Emit event\n            graphController.emit(\"userCreateEdge\", graph, target);\n          }\n          else if (graphController.prevEdgeTo !== null)\n          {\n            //Emit event\n            graphController.emit(\"edgeDestination\", graph, target, target.getDestinationNode(), graphController.prevEdgeTo, graphController.prevQuad);\n          }\n\n          return true;\n        }\n        //If hovering over anything else...\n        else\n        {\n          //Destroy any edge that no longer have a destination\n          if (inputController.shouldDestroyPointlessEdges)\n          {\n            if (!inputController.isNewEdge)\n            {\n              graphController.deleteTargetEdge(target);\n            }\n            else\n            {\n              graph.deleteEdge(target);\n            }\n            return true;\n          }\n          //Keep edges as placeholders (used in DFA's)\n          else\n          {\n            target.changeDestinationNode(null);\n\n            //Open label editor if default edge...\n            if (target.getEdgeLabel().length <= 0)\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n            return true;\n          }\n        }\n      }\n      else if (targetType === 'initial')\n      {\n        //If valid initial object to mark...\n        if (inputController.ghostInitialMarker instanceof Node)\n        {\n          const prevInitial = graph.getStartNode();\n\n          //Set the new object as the initial node\n          graph.setStartNode(inputController.ghostInitialMarker);\n\n          //Emit event\n          graphController.emit(\"nodeInitial\", graph, inputController.ghostInitialMarker, prevInitial);\n        }\n\n        //Reset ghost initial marker\n        inputController.ghostInitialMarker = null;\n        return true;\n      }\n      else if (targetType === 'none')\n      {\n        //Do nothing. It should already be moved.\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If was trying to select...\n      if (picker.isSelecting())\n      {\n        //Stop selecting stuff, fool.\n        picker.endSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  //Override\n  onPostInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n\n    picker.clearTarget();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n  }\n\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return true;\n  }\n\n  setTrashMode(enabled)\n  {\n    this._trashMode = enabled;\n  }\n\n  isTrashMode()\n  {\n    return this._trashMode;\n  }\n\n  setInputScheme(shouldInputFirst)\n  {\n    this._swapMouseScheme = !shouldInputFirst;\n  }\n\n  getInputScheme()\n  {\n    return this._swapMouseScheme;\n  }\n\n  isMoveMode()\n  {\n    const result = this._inputAdapter.isAltInput();\n    return this._swapMouseScheme ? !result : result;\n  }\n\n  isDragging()\n  {\n    return this._inputAdapter.isDragging();\n  }\n\n  isActionMode(graphController)\n  {\n    return this._inputAdapter.isPointerActive() ?\n      //Is considered an input when NOT moving or when creating a new edge...\n      graphController.isNewEdge || !this.isMoveMode() :\n      //If not active, just show default input...\n      !this._swapMouseScheme;\n  }\n\n  getPicker()\n  {\n    return this._picker;\n  }\n}\n\nexport default InputController;\n","class AbstractGraphController\n{\n  constructor(module, graph)\n  {\n    this._module = module;\n    this._graph = graph;\n\n    //throw new Error(\"Missing implementation for graph controller \\'\" + this.getModule().getModuleName() + \"\\'\");\n  }\n\n  initialize(module) {}\n  destroy(module) {}\n  update(module) {}\n\n  getGraph()\n  {\n    return this._graph;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractGraphController;\n","const ALLOW_AUTOMATIC_REGISTER = false;\n\nconst Eventable = {\n  __eventListeners: null,\n  mixin(targetClass)\n  {\n    const targetPrototype = targetClass.prototype;\n    Object.assign(targetPrototype, Eventable);\n    delete targetPrototype.mixin;\n  },\n\n  registerEvent(eventName)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    if (!this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.set(eventName, []);\n    }\n    else\n    {\n      throw new Error(\"Already registered event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  unregisterEvent(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.delete(eventName);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  addEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    let listeners;\n    if (this.__eventListeners.has(eventName))\n    {\n      listeners = this.__eventListeners.get(eventName);\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n\n    listeners.push(listener);\n  },\n\n  removeEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      let flag = false;\n      let i = listeners.length;\n      while(i--)\n      {\n        if (listeners[i] === listener)\n        {\n          listeners.splice(i, 1);\n          flag = true;\n        }\n      }\n\n      if (!flag)\n      {\n        throw new Error(\"Unable to find listener for event \\'\" + eventName + \"\\'\");\n      }\n    }\n    else\n    {\n      throw new Error(\"Unknown event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  clearEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      listeners.length = 0;\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  countEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return 0;\n    return this.__eventListeners.has(eventName) ? this.__eventListeners.get(eventName).length : 0;\n  },\n\n  getEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return null;\n    return this.__eventListeners.get(eventName);\n  },\n\n  on(eventName, listener)\n  {\n    this.addEventListener(eventName, listener);\n  },\n\n  once(eventName, listener)\n  {\n    const f = (...args) => {\n      try\n      {\n        listener.apply(null, args);\n      }\n      finally\n      {\n        this.removeEventListener(eventName, f);\n      }\n    };\n\n    this.addEventListener(eventName, f);\n  },\n\n  emit(eventName, ...args)\n  {\n    try\n    {\n      if (!this.__eventListeners) return;\n\n      let listeners;\n      if (!this.__eventListeners.has(eventName))\n      {\n        if (ALLOW_AUTOMATIC_REGISTER)\n        {\n          listeners = [];\n          this.__eventListeners.set(eventName, listeners);\n        }\n        else\n        {\n          throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n        }\n      }\n      else\n      {\n        listeners = this.__eventListeners.get(eventName);\n\n        let result = null;\n        let i = listeners.length;\n        while(i--)\n        {\n          try\n          {\n            result = listeners[i].apply(null, args);\n          }\n          catch(e)\n          {\n            console.error(e);\n          }\n\n          if (result === true) break;\n        }\n      }\n    }\n    finally\n    {\n      this.onEventProcessed(eventName, ...args);\n    }\n  },\n\n  onEventProcessed(eventName, ...args)\n  {\n    //Do nothing.\n  }\n};\n\nexport default Eventable;\n","\nfunction getReachableState(graph)\n{\n  let reachable = [];\n  let startNode = graph.getStartNode();\n  reachable.push(startNode);\n  for(let i = 0; i < reachable.length; i++)\n  {\n    for (const edge of graph.getEdges())\n    {\n      if(edge.from == reachable[i])\n      {\n        if(!reachable.includes(edge.to))\n        {\n          reachable.push(edge.to);\n        }\n      }\n    }\n  }\n  return reachable;\n}\n\nclass GraphLayout\n{\n  static applyLayout(graph, type=\"circle\")\n  {\n    if (type != \"circle\") throw new Error(\"Invalid layout type\");\n    //seperate node to reachable and unreachable\n    const reachableNode= getReachableState(graph);\n    function unreachable(node)\n    {\n      return !reachableNode.includes(node)\n    }\n    const unreachableNode = graph.getNodes().filter(unreachable)\n\n    //get num of nodes\n    const numOfReachable = reachableNode.length;\n    const numOfUnreachable = unreachableNode.length;\n    const numOfNode = graph.getNodes().length;\n    const maxNum = Math.max(numOfReachable, numOfUnreachable)\n    if(numOfNode == 0)\n    {\n      return;\n    }\n    //set radius\n    var radius;\n    if(numOfReachable < 10 && numOfUnreachable < 10){\n      radius = maxNum/4 * 50 + 10;\n    }\n    else{\n      radius = (maxNum/5) * 40 + 10;\n    }\n    /*var radius;\n    if(numOfNode < 10){\n      radius = numOfNode/4 * 50 + 10;\n    }\n    else{\n      radius = (numOfNode/5) * 40 + 10;\n    }*/\n\n    //set degree\n    const degree_re = 2* Math.PI/numOfReachable;\n    const degree_un = 2* Math.PI/numOfUnreachable;\n\n    let currentStep = 0\n    for(const node of reachableNode)\n    {\n      node.y = Math.sin(degree_re*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree_re*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }\n    currentStep = 0\n    for(const node of unreachableNode)\n    {\n      node.y = Math.sin(degree_un*currentStep + Math.PI)*(radius + 100);\n      node.x = Math.cos(degree_un*currentStep + Math.PI)*(radius + 100);\n      currentStep += 1\n    }\n    /*for(const node of graph.getNodes())\n    {\n      node.y = Math.sin(degree*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }*/\n  }\n\n\n}\n\nexport default GraphLayout;\n","import GraphNode from './GraphNode.js';\nimport GraphEdge from './GraphEdge.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\nclass NodalGraph\n{\n  constructor(nodeClass=GraphNode, edgeClass=GraphEdge)\n  {\n    this._nodeClass = nodeClass;\n    this._edgeClass = edgeClass;\n\n    this._nodes = [];\n    this._edges = [];\n    this._nodeMapping = new Map();\n    this._edgeMapping = new Map();\n  }\n\n  /** NODES **/\n\n  createNode(x=0, y=0, id=null)\n  {\n    const result = new (this._nodeClass)(id || guid(), x, y);\n    const i = this._nodes.length;\n    this._nodes.push(result);\n    this._nodeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteNode(node)\n  {\n    const elementID = node.getGraphElementID();\n    const i = this._nodeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._nodes.splice(i, 1);\n      this._nodeMapping.delete(elementID);\n\n      //HACK: This is inefficient, you should convert everything to use only\n      //the map so the indicies would not need to be fixed in the array.\n      //Basically, get rid of this._nodes (you will have to change how setStartNode works)\n      for(let j = i, len = this._nodes.length; j < len; ++j)\n      {\n        this._nodeMapping.set(this._nodes[j].getGraphElementID(), j);\n      }\n\n      const nullSourceEdges = [];\n\n      //Remove connected edges\n      for(const edge of this._edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          nullSourceEdges.push(edge);\n        }\n        else if (edge.getDestinationNode() === node)\n        {\n          edge.changeDestinationNode(null);\n        }\n      }\n      for(const edge of nullSourceEdges)\n      {\n        this.deleteEdge(edge);\n      }\n    }\n  }\n  addNode(node)\n  {\n    if (!node.getGraphElementID()) node.setGraphElementID(guid());\n\n    const i = this._nodes.length;\n    this._nodes.push(node);\n    this._nodeMapping.set(node.getGraphElementID(), i);\n    return node;\n  }\n  clearNodes() { this._nodes.length = 0; this._nodeMapping.clear(); }\n  getNodeByElementID(elementID)\n  {\n    const index = this._nodeMapping.get(elementID);\n    return index >= 0 ? this._nodes[index] : null;\n  }\n  getNodesByLabel(label, dst=[])\n  {\n    for(const node of this._nodes)\n    {\n      if (node.getNodeLabel() == label) dst.push(node);\n    }\n    return dst;\n  }\n  getNodes() { return this._nodes; }\n  getNodeCount() { return this._nodes.length; }\n  getNodeClass() { return this._nodeClass; }\n\n  /** EDGES **/\n\n  createEdge(from, to=null, id=null)\n  {\n    const result = new (this._edgeClass)(id || guid(), from, to);\n    const i = this._edges.length;\n    this._edges.push(result);\n    this._edgeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteEdge(edge)\n  {\n    const elementID = edge.getGraphElementID();\n    const i = this._edgeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._edges.splice(i, 1);\n      this._edgeMapping.delete(elementID);\n\n      //HACK: This is inefficient, refer to deleteNode().\n      for(let j = i, len = this._edges.length; j < len; ++j)\n      {\n        this._edgeMapping.set(this._edges[j].getGraphElementID(), j);\n      }\n    }\n  }\n  addEdge(edge)\n  {\n    if (!edge.getGraphElementID()) edge.setGraphElementID(guid());\n\n    const i = this._edges.length;\n    this._edges.push(edge);\n    this._edgeMapping.set(edge.getGraphElementID(), i);\n    return edge;\n  }\n  clearEdges() { this._edges.length = 0; this._edgeMapping.clear(); }\n  getEdgeByElementID(elementID)\n  {\n    const index = this._edgeMapping.get(elementID);\n    return index >= 0 ? this._edges[index] : null;\n  }\n  getEdges() { return this._edges; }\n  getEdgeCount() { return this._edges.length; }\n  getEdgeClass() { return this._edgeClass; }\n\n  /** HELPER **/\n\n  clear()\n  {\n    this.clearEdges();\n    this.clearNodes();\n  }\n\n  isEmpty()\n  {\n    return this.getNodeCount() <= 0 && this.getEdgeCount() <= 0;\n  }\n\n  getBoundingRect()\n  {\n    if (this._nodes.length <= 0) return {\n      minX: 0,\n      minY: 0,\n      maxX: 1,\n      maxY: 1,\n      width: 1,\n      height: 1\n    };\n\n    var minNX = Number.MAX_VALUE;\n    var minNY = Number.MAX_VALUE;\n    var maxNX = Number.MIN_VALUE;\n    var maxNY = Number.MIN_VALUE;\n\n    var maxNodeSize = 0;\n    for(const node of this._nodes)\n    {\n      const x = node.x;\n      const y = node.y;\n      const size = node.getNodeSize();\n      if (size > maxNodeSize) maxNodeSize = size;\n\n      minNX = Math.min(minNX, x);\n      maxNX = Math.max(maxNX, x);\n\n      minNY = Math.min(minNY, y);\n      maxNY = Math.max(maxNY, y);\n    }\n\n    minNX -= maxNodeSize;\n    minNY -= maxNodeSize;\n    maxNX += maxNodeSize;\n    maxNY += maxNodeSize;\n\n    var minEX = Number.MAX_VALUE;\n    var minEY = Number.MAX_VALUE;\n    var maxEX = Number.MIN_VALUE;\n    var maxEY = Number.MIN_VALUE;\n\n    const startPoint = {x: 0, y: 0};\n    const endPoint = {x: 0, y: 0};\n    const centerPoint = {x: 0, y: 0};\n    for(const edge of this._edges)\n    {\n      //Will store into point objects...\n      edge.getStartPoint(startPoint);\n      edge.getEndPoint(endPoint);\n      edge.getCenterPoint(centerPoint);\n\n      const sx = startPoint.x;\n      const sy = startPoint.y;\n      const ex = endPoint.x;\n      const ey = endPoint.y;\n      const cx = centerPoint.x;\n      const cy = centerPoint.y;\n\n      minEX = Math.min(minEX, sx, ex, cx);\n      maxEX = Math.max(maxEX, sx, ex, cx);\n\n      minEY = Math.min(minEY, sy, ey, cy);\n      maxEY = Math.max(maxEY, sy, ey, cy);\n    }\n\n    const result = {\n      minX: Math.min(minNX, minEX),\n      minY: Math.min(minNY, minEY),\n      maxX: Math.max(maxNX, maxEX),\n      maxY: Math.max(maxNY, maxEY),\n      width: 0,\n      height: 0\n    };\n    result.width = result.maxX - result.minX;\n    result.height = result.maxY - result.minY;\n    return result;\n  }\n\n  //Gets a hash of the graph's current state. Can generally assume the hash will\n  //change if the graph's content has changed (including nodes and edges).\n  getHashCode(usePosition=true)\n  {\n    let string = \"\";\n    for(const node of this._nodes)\n    {\n      string += node.getHashString(usePosition) + \",\";\n    }\n    string += \"|\";\n    for(const edge of this._edges)\n    {\n      string += edge.getHashString(usePosition) + \",\";\n    }\n    return stringHash(string);\n  }\n}\n\nexport default NodalGraph;\n","import NodalGraph from 'graph/NodalGraph.js';\nimport FSANode from './FSANode.js';\nimport FSAEdge, { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst PARALLEL_EDGE_HEIGHT = 10;\n\nclass FSAGraph extends NodalGraph\n{\n  constructor()\n  {\n    super(FSANode, FSAEdge);\n  }\n\n  setStartNode(node)\n  {\n    if (this._nodes.length <= 0) throw new Error(\"Cannot set start node to empty graph\");\n\n    //There is only one node, and that is already the start node\n    if (this._nodes.length === 1) return;\n\n    const i = this._nodes.indexOf(node);\n    if (i > 0)\n    {\n      //This does a swap; we could do a prepend but that's more costly...\n      const prev = this._nodes[0];\n      this._nodes[0] = node;\n      this._nodes[i] = prev;\n    }\n    else if (i < 0)\n    {\n      throw new Error(\"Cannot set start node for unknown node\");\n    }\n  }\n\n  getStartNode()\n  {\n    return this._nodes.length > 0 ? this._nodes[0] : null;\n  }\n\n  //This is more like addEdge() without adding it to the graph and just returns the result\n  //This should only be called once when completing an edge\n  formatEdge(edge)\n  {\n    const edgeSource = edge.getSourceNode();\n    const edgeDestination = edge.getDestinationNode();\n    const edgeLabel = edge.getEdgeSymbolsFromLabel();\n\n    //Look for an existing edge with similar from and to\n    for(const otherEdge of this._edges)\n    {\n      if (otherEdge === edge) continue;\n      if (otherEdge.getSourceNode() === edgeSource && otherEdge.getDestinationNode() === edgeDestination)\n      {\n        const otherSymbols = otherEdge.getEdgeSymbolsFromLabel();\n        if (edgeLabel.length > 0)\n        {\n          const result = otherSymbols.concat(edgeLabel);\n          otherEdge.setEdgeLabel(result.join(SYMBOL_SEPARATOR));\n        }\n\n        //Merged with newfound edge...\n        return otherEdge;\n      }\n    }\n\n    //Otherwise, format the current edge\n\n    if (!edge.isSelfLoop())\n    {\n      let flag = false;\n\n      //Bend away if there is another edge not bent with the same src/dst\n      const parallelEdgeHeight = PARALLEL_EDGE_HEIGHT;\n      const HALFPI = Math.PI / 2;\n      for(const otherEdge of this._edges)\n      {\n        if (otherEdge.isQuadratic() && Math.abs(otherEdge.getQuadratic().length) >= parallelEdgeHeight * 2) continue;\n        if ((otherEdge.getDestinationNode() === edgeSource && otherEdge.getSourceNode() === edgeDestination))\n        {\n          edge.setQuadratic(HALFPI, parallelEdgeHeight);\n          otherEdge.setQuadratic(HALFPI, parallelEdgeHeight);\n          flag = true;\n\n          //ASSUMES that there will only ever be 2 edges that are parallel...\n          break;\n        }\n      }\n\n      //Try to move the edge away from intersecting nodes...\n      if (!flag)\n      {\n        const maxNodeSize = Math.max(edgeSource.getNodeSize(), edgeDestination.getNodeSize());\n        const x1 = edgeSource.x;\n        const y1 = edgeSource.y;\n        const x2 = edgeDestination.x;\n        const y2 = edgeDestination.y;\n        const dist12sq = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n        let vertical = false;\n        let m = 0;\n        let b = 0;\n\n        if(x1 > x2)\n        {\n          m = (y1-y2) / (x1-x2);\n          b = y2-m*x2;\n        }\n        else if (x1 < x2)\n        {\n          m = (y2-y1) / (x2-x1);\n          b = y1-m*x1;\n        }\n        else\n        {\n          vertical = true;\n        }\n\n        for(const node of this._nodes)\n        {\n          if(node === edgeSource || node === edgeDestination) continue;\n\n          const x0 = node.x;\n          const y0 = node.y;\n\n          const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n          const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n          if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n          let dist = 0;\n          if(vertical) {\n            dist = Math.abs(x1-x0);\n          } else {\n            dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n          }\n\n          if(dist < node.getNodeSize())\n          {\n            flag = true;\n            break;\n          }\n        }\n\n        if (flag)\n        {\n          edge.setQuadratic(-Math.PI / 2, maxNodeSize + 10);\n        }\n      }\n    }\n\n    return edge;\n  }\n}\n\nexport default FSAGraph;\n","import AbstractGraphController from 'modules/abstract/AbstractGraphController.js';\n\nimport Config from 'config.js';\nimport Eventable from 'util/Eventable.js';\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport FSAGraph from 'modules/fsa/graph/FSAGraph.js';\n\nclass GraphController extends AbstractGraphController\n{\n  constructor(module)\n  {\n    super(module, new FSAGraph());\n\n    this.inputController = null;\n    this.machineController = null;\n\n    this.labelEditorElement = null;\n    this.tester = null;\n\n    this.prevQuad = {\n      radians: 0, length: 0,\n      x: 0, y: 0\n    };\n    this.prevEdgeTo = null;\n    this.prevX = 0;\n    this.prevY = 0;\n\n    //The difference between controller events vs graph events is: controller has user-intent\n\n    //userCreateNode(graph, node) - When user creates a node\n    this.registerEvent(\"userCreateNode\");\n    this.registerEvent(\"userPreCreateNode\");//(graph, nextNodeID, x, y)\n    this.registerEvent(\"userPostCreateNode\");//(graph, node)\n\n    //userToggleNode(graph, node, prevAccept) - When user toggles the accept state\n    this.registerEvent(\"userToggleNode\");\n\n    //userDeleteNodes(graph, node, targetNodes, prevX, prevY) - When user deletes one or more nodes\n    this.registerEvent(\"userDeleteNodes\");\n    this.registerEvent(\"userPreDeleteNodes\");\n    this.registerEvent(\"userPostDeleteNodes\");\n\n    //userDeleteEdge(graph, edge, prevTo, prevQuad) - When user deletes an edge\n    this.registerEvent(\"userDeleteEdge\");\n    this.registerEvent(\"userPreDeleteEdge\");\n    this.registerEvent(\"userPostDeleteEdge\");\n\n    //userCreateEdge(graph, edge) - When user creates an edge, after naming it\n    this.registerEvent(\"userCreateEdge\");\n    //this.registerEvent(\"userPreCreateEdge\");\n    this.registerEvent(\"userPostCreateEdge\");\n\n    /*\n    //userMoveNodes(graph, nodes, dx, dy) - When user moves one or more nodes\n    this.registerEvent(\"userMoveNodes\");\n    //userMoveInitial(graph, node, prevNode) - When user moves the initial marker to another\n    this.registerEvent(\"userMoveInitial\");\n    //userPreCreateEdge(graph, edge) - When user is about to create an edge, before src\n    this.registerEvent(\"userPreCreateEdge\");\n    //userBeginEdge(graph, edge, src) - When user begins to create an edge, after src and before naming it\n    this.registerEvent(\"userBeginEdge\");\n    //userEndEdge(graph, edge, src, dst) - When user finishes creating an edge, after dst and before naming it (dst could be null for deletion)\n    this.registerEvent(\"userEndEdge\");\n    //userPostCreateEdge(graph, edge) - When user is finished creating an edge, after dst and after quad changes\n    this.registerEvent(\"userPostCreateEdge\");\n    //userMoveEdge(graph, edge, prevDest) - When user changes the dst of edge\n    this.registerEvent(\"userChangeEdge\");\n    //userBendEdge(graph, edge, prevQuad) - When user bends the edge\n    this.registerEvent(\"userBendEdge\");\n    //userLabelEdge(graph, edge, prevLabel) - When user re-labels the edge\n    this.registerEvent(\"userLabelEdge\");\n    */\n\n    //userRenameNode(graph, node, nextLabel, prevLabel, isPrevCustom) - When user sets the label of node\n    this.registerEvent(\"userRenameNode\");\n\n    //userChangeLayout(graph, prevLayout) - When user re-layouts the graph\n    this.registerEvent(\"userChangeLayout\");\n    this.registerEvent(\"userPreChangeLayout\");//before any changes\n    this.registerEvent(\"userPostChangeLayout\");//after all changes\n\n    //userImportGraph(graph) - When user imports a graph\n    this.registerEvent(\"userImportGraph\");\n    this.registerEvent(\"userPreImportGraph\");//before any changes\n    this.registerEvent(\"userPostImportGraph\");//after all changes\n\n    //nodeMove(targetNode, nextX, nextY, prevX, prevY)\n    this.registerEvent(\"nodeMove\");\n    //nodeMoveAll(targetNodes, dx, dy)\n    this.registerEvent(\"nodeMoveAll\");\n    //nodeInitial(nextInitial, prevInitial)\n    this.registerEvent(\"nodeInitial\");\n    //edgeDestination(targetEdge, nextDestination, prevDestination, prevQuad)\n    this.registerEvent(\"edgeDestination\");\n    //edgeMove(targetEdge, nextQuad, prevQuad)\n    this.registerEvent(\"edgeMove\");\n    //edgeLabel(targetEdge, nextLabel, prevLabel)\n    this.registerEvent(\"edgeLabel\");\n    //tryCreateWhileTrash()\n    this.registerEvent(\"tryCreateWhileTrash\");\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n    this.tester = module.getTestingManager();\n\n    this.inputController = module.getInputController();\n    this.machineController = module.getMachineController();\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  applyAutoLayout()\n  {\n    this.emit(\"userPreChangeLayout\", this.getGraph());\n    GraphLayout.applyLayout(this.getGraph());\n\n    this.emit(\"userChangeLayout\", this.getGraph());\n    this.emit(\"userPostChangeLayout\", this.getGraph());\n  }\n\n  renameNode(node, name)\n  {\n    const prev = node.getNodeLabel();\n    const isPrevCustom = node.getNodeCustom();\n\n    node.setNodeLabel(name);\n    node.setNodeCustom(true);\n\n    this.emit(\"userRenameNode\", this.getGraph(), node, name, prev, isPrevCustom);\n  }\n\n  createNode(x, y)\n  {\n    const newNodeLabel = this.machineController.getMachineBuilder().getLabeler().getNextDefaultNodeLabel();\n\n    if (typeof x === 'undefined') x = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n    if (typeof y === 'undefined') y = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n\n    this.emit(\"userPreCreateNode\", this.getGraph(), newNodeLabel, x, y);\n\n    const node = this.getGraph().createNode(x, y);\n    node.setNodeLabel(newNodeLabel);\n\n    this.emit(\"userCreateNode\", this.getGraph(), node);\n\n    this.emit(\"userPostCreateNode\", this.getGraph(), node);\n    return node;\n  }\n\n  toggleNode(node)\n  {\n    const prev = node.getNodeAccept();\n    const result = !prev;\n    //Toggle accept for selected node\n    node.setNodeAccept(result);\n\n    //Emit event\n    this.emit(\"userToggleNode\", this.getGraph(), node, prev);\n  }\n\n  deleteSelectedNodes(selectedNode)\n  {\n    const picker = this.inputController.getPicker();\n    const selection = picker.getSelection(this.getGraph()).slice();\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n\n    //Remove from graph\n    for(const node of selection)\n    {\n      this.getGraph().deleteNode(node);\n    }\n\n    //Remove from selection\n    picker.clearSelection();\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n  }\n\n  deleteTargetNode(target)\n  {\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n\n    this.getGraph().deleteNode(target);\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n  }\n\n  deleteTargetNodes(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n\n    const graph = this.getGraph();\n    for(const node of targets)\n    {\n      graph.deleteNode(node);\n    }\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n  }\n\n  deleteTargetEdge(target)\n  {\n    this.emit(\"userPreDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.getGraph().deleteEdge(target);\n\n    //Emit event\n    this.emit(\"userDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.emit(\"userPostDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n  }\n\n  deleteTargetEdges(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    for(const target of targets)\n    {\n      this.deleteTargetEdge(target);\n    }\n  }\n\n  moveNodeTo(pointer, node, x, y)\n  {\n    for(const other of this.getGraph().getNodes())\n    {\n      //Update node collision\n      if (node === other) continue;\n\n      const dx = x - other.x;\n      const dy = y - other.y;\n      const angle = Math.atan2(dy, dx);\n\n      const diameter = (Config.NODE_RADIUS * 2);\n      const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n      const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU * 4)\n      {\n        x += nextDX;\n        y += nextDY;\n      }\n    }\n\n    node.x = x;\n    node.y = y;\n  }\n\n  moveMultipleNodesTo(pointer, nodes, x, y)\n  {\n    //Moves all nodes by difference between initial position with passed-in x and y\n    const pos = pointer.getInputEventPosition();\n    const dx = x - pos.x;\n    const dy = y - pos.y;\n    for(const node of nodes)\n    {\n      node.x += dx;\n      node.y += dy;\n    }\n\n    //Updates initial position to passed-in x and y to maintain relative position\n    pointer.changeInputEventPosition(x, y);\n  }\n\n  moveEdgeTo(pointer, edge, x, y)\n  {\n    edge.setQuadraticByCoords(x, y);\n  }\n\n  moveEndpointTo(pointer, edge, x, y)\n  {\n    //Get ONLY node at x and y (cannot use hover target, since it is not ONLY nodes)\n    const picker = this.inputController.getPicker();\n    const dst = picker.getNodeAt(this.getGraph(), x, y) || pointer;\n\n    edge.changeDestinationNode(dst);\n\n    //If the cursor returns to the state after leaving it...\n    if (edge.isSelfLoop())\n    {\n      //Make it a self loop\n      const sourceNode = edge.getSourceNode();\n      const dx = sourceNode.x - x;\n      const dy = sourceNode.y - y;\n      const radians = Math.atan2(dy, dx) + Math.PI;\n      edge.setQuadratic(radians);\n    }\n    //Otherwise, maintain original curve\n    else\n    {\n      //TODO: This also causes self-loops to act weird when no longer a self loop\n      edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n    }\n  }\n\n  openLabelEditor(target, x, y, placeholder=null, replace=true, callback=null)\n  {\n    if (!this.labelEditorElement)\n    {\n      if (callback) callback();\n      return;\n    }\n\n    const prevLabel = placeholder || target.getEdgeLabel();\n    this.labelEditorElement.openEditor(target, placeholder, replace, () => {\n      const label = target.getEdgeLabel();\n      if (prevLabel.length > 0 && label != prevLabel)\n      {\n        this.emit(\"edgeLabel\", this.getGraph(), target, label, prevLabel);\n      }\n\n      if (callback)\n      {\n        callback();\n      }\n    });\n  }\n\n  focusOnNode(node)\n  {\n    //Center workspace at focused node; inverted due to graph-to-screen space\n    this.inputController.getInputAdapter().getViewport().setOffset(-node.x, -node.y);\n  }\n\n  focusOnEdge(edge)\n  {\n    //Center workspace at focused edge; inverted due to graph-to-screen space\n    const center = edge.getCenterPoint();\n    this.inputController.getInputAdapter().getViewport().setOffset(-center.x, -center.y);\n  }\n\n  focusOnNodes(nodes)\n  {\n    //Center workspace at the average of focused nodes; inverted due to graph-to-screen space\n    const length = nodes.length;\n    let ax = 0;\n    let ay = 0;\n    for(const node of nodes)\n    {\n      ax += node.x;\n      ay += node.y;\n    }\n    this.inputController.getInputAdapter().getViewport().setOffset(-ax / length, -ay / length);\n  }\n}\n//Mixin Eventable\nEventable.mixin(GraphController);\n\nfunction moveNodesOutOfEdges(target, graph)\n{\n\n  const x1 = target.getSourceNode().x;\n  const y1 = target.getSourceNode().y;\n  const x2 = target.getDestinationNode().x;\n  const y2 = target.getDestinationNode().y;\n  const dist12sq = (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n  let vertical = false;\n  let m = 0;\n  let b = 0;\n  if(x1 > x2) {\n    m = (y1-y2) / (x1-x2);\n    b = y2-m*x2;\n  } else if (x1 < x2) {\n    m = (y2-y1) / (x2-x1);\n    b = y1-m*x1;\n  } else {\n    vertical = true;\n  }\n\n  for(const node of graph.getNodes())\n  {\n    if(node === target.getSourceNode() || node === target.getDestinationNode()) continue;\n\n    const x0 = node.x;\n    const y0 = node.y;\n\n    const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n    const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n    if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n\n    let dist = 0;\n    let xint = 0;\n    let yint = 0;\n    let m0 = 0;\n    let horizontal = false;\n    if(vertical) {\n      dist = Math.abs(x1-x0);\n      xint = x1;\n      yint = y0;\n      m0 = 0;\n    } else {\n      dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n      xint = (x0 + m*y0 - m*b) / (m*m + 1);\n      yint = m * xint + b;\n      if(m !== 0) {\n        m0 = 1 / m;\n      } else {\n        horizontal = true;\n      }\n    }\n\n    if(dist < Config.NODE_RADIUS) {\n      const toMove = Config.NODE_RADIUS - dist + 10;\n      const distx = x0 - xint;\n      const disty = y0 - yint;\n      let signx = -1;\n      let signy = -1;\n      if(distx > 0) signx = 1;\n      if(disty > 0) signy = 1;\n\n      if(horizontal) {\n        node.y = y0 + signy * toMove;\n      } else {\n        let toMovex = toMove / Math.sqrt(m0*m0 + 1);\n        let toMovey = Math.abs(m0) * toMovex;\n        node.x = x0 + signx * toMovex;\n        node.y = y0 + signy * toMovey;\n      }\n    }\n  }\n}\n\nexport default GraphController;\n","import DFA from 'machine/DFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nexport function convertToDFA(nfa, dst=null)\n{\n  const result = dst || new DFA();\n\n  const alphabet = nfa.getAlphabet();\n  const startState = nfa.getStartState();\n\n  //Make new DFA start state\n  let nextStates = nfa.doClosureTransition(startState);\n  const newStartState = newDFAStateFromNFA(result, nfa, nextStates);\n\n  //For every state from the NFA's powerset, add it to DFA with correct transitions\n  const powerSetStates = nfa.getPowerSet();\n  for(const powerSetState of powerSetStates) {\n      console.log(\"Adding to DFA: \" + getStateFromSet(powerSetState));\n      if(powerSetState.length != 0)\n        expandPowersetStateToDFA(powerSetState, nfa, result);\n  }\n\n  //Create trap state\n  const trapState = result.newState(\"{}\");\n  let flag = false;\n\n  //Check for the new alphabet...\n  const newAlphabet = result.getAlphabet();\n  for(const state of result.getStates())\n  {\n    for(const symbol of newAlphabet)\n    {\n      //If transition for this symbol does not exist...\n      if (!result.doTransition(state, symbol))\n      {\n        //Create it\n        result.newTransition(state, trapState, symbol);\n\n        if (state !== trapState) flag = true;\n      }\n    }\n  }\n\n  return result;\n}\n\n/* Inspired by expandNFAStateToDFA, it takes a powerSetState, which is a set\n * of NFA states from the powerset (e.g. [q1, q1]) and adds it to the DFA as a\n * single state (e.g. {q1, q2}) and adds its transitions\n */\nfunction expandPowersetStateToDFA(powerSetState, nfa, dfa) {\n    const result = [];\n    const alphabet = nfa.getAlphabet();\n    const state = getStateFromSet(powerSetState);\n\n    if(!dfa.hasState(state)) {\n        result.push(newDFAStateFromNFA(dfa, nfa, powerSetState));\n    }\n\n    let terminals = [];\n    let dfaState = null;\n\n    for(const symbol of alphabet)\n    {\n      //Get all closed reachable states...\n      for(const s of powerSetState)\n      {\n        nfa.doTerminalTransition(s, symbol, terminals);\n      }\n\n      //If has reachable states...\n      if (terminals.length > 0)\n      {\n        dfaState = getStateFromSet(terminals);\n\n        //Create state if it does not exist...\n        if (!dfa.hasState(dfaState))\n        {\n          dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n          result.push(dfaState);\n        }\n\n        //Create transition for reachable state\n        dfa.newTransition(state, dfaState, symbol);\n      }\n\n      //Reset list\n      terminals.length = 0;\n    }\n\n    return result;\n}\n\nfunction expandNFAStateToDFA(state, nfa, dfa)\n{\n  const result = [];\n  const alphabet = nfa.getAlphabet();\n\n  let terminals = [];\n  let nfaStates = null;\n  let dfaState = null;\n\n  for(const symbol of alphabet)\n  {\n    //Get all closed reachable states...\n    nfaStates = getSetFromState(state);\n    for(const s of nfaStates)\n    {\n      nfa.doTerminalTransition(s, symbol, terminals);\n    }\n\n    //If has reachable states...\n    if (terminals.length > 0)\n    {\n      dfaState = getStateFromSet(terminals);\n\n      //Create state if it does not exist...\n      if (!dfa.hasState(dfaState))\n      {\n        dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n        result.push(dfaState);\n      }\n\n      //Create transition for reachable state\n      dfa.newTransition(state, dfaState, symbol);\n    }\n\n    //Reset list\n    terminals.length = 0;\n  }\n\n  return result;\n}\n\nfunction newDFAStateFromNFA(dfa, nfa, nfaStates)\n{\n  const result = dfa.newState(getStateFromSet(nfaStates));\n\n  //If the NFA states contain a final, then DFA state should be final\n  for(const s of nfaStates)\n  {\n    if (nfa.isFinalState(s))\n    {\n      dfa.setFinalState(result);\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction getStateFromSet(nfaStates)\n{\n  nfaStates.sort();\n  return \"{\" + nfaStates.join(\",\") + \"}\";\n}\n\nfunction getSetFromState(dfaState)\n{\n  return dfaState.substring(1, dfaState.length - 1).split(\",\");\n}\n","import Eventable from 'util/Eventable.js';\n\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport { convertToDFA } from 'machine/util/convertNFA.js';\nimport DFA from 'machine/DFA.js';\n\nclass MachineController\n{\n  constructor(module)\n  {\n    this._module = module;\n\n    this.machineName = null;\n\n    this.graphController = null;\n\n    //userChangeMachine(machineBuilder, nextMachineType, prevMachineType) - when user changes machine type\n    this.registerEvent(\"userChangeMachine\");\n    //userConvertMachine(machineBuilder, nextMachineType, prevMachineType) - when user converts machine type\n    this.registerEvent(\"userConvertMachine\");\n    this.registerEvent(\"userPreConvertMachine\");//Before changes\n    this.registerEvent(\"userPostConvertMachine\");//After all changes\n    //userRenameMachine(machineBuilder, nextMachineName, prevMachineName) - when machine name is changed\n    this.registerEvent(\"userRenameMachine\");\n    //userCreateSymbol(machineBuilder, symbol) - When user adds a custom symbol\n    this.registerEvent(\"userCreateSymbol\");\n    //userDeleteSymbol(machineBuilder, symbol, prevEdges) - When user delets a symbol (and affects the edges)\n    this.registerEvent(\"userDeleteSymbol\");\n    this.registerEvent(\"userPreDeleteSymbol\");//userPreDeleteSymbol(machineBuilder, symbol)\n    this.registerEvent(\"userPostDeleteSymbol\");\n    //userRenameSymbol(machineBuilder, symbol, prevSymbol, targetEdges) - When user renames a used symbol (and affects the edges)\n    this.registerEvent(\"userRenameSymbol\");\n    this.registerEvent(\"userPreRenameSymbol\");//userPreDeleteSymbol(machineBuilder, symbol, prevSymbol)\n    this.registerEvent(\"userPostRenameSymbol\");\n  }\n\n  setModule(module)\n  {\n    this._module = module;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n  }\n\n  destroy()\n  {\n\n  }\n\n  getLabelFormatter()\n  {\n    return this._module.getLabelFormatter();\n  }\n\n  getMachineBuilder()\n  {\n    return this._module.getMachineBuilder();\n  }\n\n  getMachineType()\n  {\n    return this.getMachineBuilder().getMachineType();\n  }\n\n  setMachineType(machineType)\n  {\n    this.getMachineBuilder().setMachineType(machineType);\n  }\n\n  getMachineName()\n  {\n    return this.machineName || I18N.toString(\"file.untitled\");\n  }\n\n  setMachineName(machineName)\n  {\n    if (!machineName || machineName.length <= 0)\n    {\n      this.machineName = null;\n    }\n    else\n    {\n      this.machineName = machineName;\n    }\n\n    const value = this.getMachineName();\n    const element = document.getElementById('window-title');\n    const string = element.innerHTML;\n    const separator = string.indexOf('-');\n    if (separator !== -1)\n    {\n      element.innerHTML = value + \" - \" + string.substring(separator + 1).trim();\n    }\n    else\n    {\n      element.innerHTML = value + \" - \" + string;\n    }\n  }\n\n  renameMachine(machineName)\n  {\n    const prev = this.machineName;\n    this.setMachineName(machineName);\n\n    //Emit a user rename machine event\n    this.emit(\"userRenameMachine\", this.getMachineBuilder(), machineName, prev);\n  }\n\n  changeMachineTo(machineType)\n  {\n    const prev = this.getMachineBuilder().getMachineType();\n    if (prev != machineType)\n    {\n      this.setMachineType(machineType);\n\n      //Emit event\n      this.emit(\"userChangeMachine\", this.getMachineBuilder(), machineType, prev);\n    }\n  }\n\n  getFirstGraphNodeByLabel(graph, label)\n  {\n    for(const node of graph.getNodes())\n    {\n      if (node.getNodeLabel() == label)\n      {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  setGraphToMachine(graph, machine)\n  {\n    graph.clear();\n\n    //Add all states\n    let node;\n    for(const state of machine.getStates())\n    {\n      node = graph.createNode(0, 0);\n      node.setNodeLabel(state);\n      if (machine.isFinalState(state))\n      {\n        node.setNodeAccept(true);\n      }\n    }\n\n    //Add all transitions\n    let edge, from, to, read, labels, flag;\n    for(let transition of machine.getTransitions())\n    {\n      from = this.getFirstGraphNodeByLabel(graph, transition[0]);\n      read = transition[1];\n      to = this.getFirstGraphNodeByLabel(graph, transition[2]);\n      edge = graph.createEdge(from, to);\n      edge.setEdgeLabel(read);\n      const formattedEdge = graph.formatEdge(edge);\n      if (edge != formattedEdge) graph.deleteEdge(edge);\n    }\n\n    //Set start state\n    const startState = machine.getStartState();\n    graph.setStartNode(this.getFirstGraphNodeByLabel(graph, startState));\n\n    //Auto layout graph\n    GraphLayout.applyLayout(graph);\n  }\n\n  convertMachineTo(machineType)\n  {\n    const currentMachineType = this.getMachineType();\n\n    //Already converted machine...\n    if (currentMachineType === machineType) return;\n\n    if (machineType == \"DFA\" && currentMachineType == \"NFA\")\n    {\n      this.emit(\"userPreConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n\n      const result = convertToDFA(this.getMachineBuilder().getMachine(), new DFA());\n      this.setGraphToMachine(this.graphController.getGraph(), result);\n      this.setMachineType(machineType);\n\n      this.emit(\"userConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n      this.emit(\"userPostConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n    }\n    else if (machineType == \"NFA\" && currentMachineType == \"DFA\")\n    {\n      this.changeMachineTo(machineType);\n    }\n    else\n    {\n      throw new Error(\"Conversion scheme between \\'\" + currentMachineType + \"\\' to \\'\" + machineType + \"\\' is not supported\");\n    }\n  }\n\n  getAlphabet()\n  {\n    return this.getMachineBuilder().getAlphabet();\n  }\n\n  createSymbol(symbol)\n  {\n    this.getMachineBuilder().addCustomSymbol(symbol);\n\n    this.emit(\"userCreateSymbol\", this.getMachineBuilder(), symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    let edge = null;\n    let index = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreDeleteSymbol\", this.getMachineBuilder(), symbol);\n\n    const graph = this.graphController.getGraph();\n    for(let i = graph.getEdges().length - 1; i >= 0; --i)\n    {\n      edge = graph.getEdges()[i];\n      index = edge.getEdgeLabel().indexOf(symbol);\n      if (index >= 0)\n      {\n        result = edge.getEdgeLabel().substring(0, index) + edge.getEdgeLabel().substring(index + 1);\n        if (result.length > 0)\n        {\n          edge.setEdgeLabel(result);\n        }\n        else\n        {\n          edge.setEdgeLabel(\"\");\n          graph.deleteEdge(edge);\n        }\n        targets.push(edge);\n      }\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().removeCustomSymbol(symbol);\n    }\n\n    this.emit(\"userDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n    this.emit(\"userPostDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n  }\n\n  renameSymbol(prevSymbol, nextSymbol)\n  {\n    let edge = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol);\n\n    const graph = this.graphController.getGraph();\n    const length = graph.getEdges().length;\n    for(let i = 0; i < length; ++i)\n    {\n      edge = graph.getEdges()[i];\n      let result = edge.getEdgeLabel().replace(prevSymbol, nextSymbol);\n      if (result != edge.getEdgeLabel())\n      {\n        targets.push(edge);\n      }\n      edge.setEdgeLabel(result);\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().renameCustomSymbol(prevSymbol, nextSymbol);\n    }\n\n    this.emit(\"userRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n    this.emit(\"userPostRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n  }\n\n  getCustomSymbols()\n  {\n    return this.getMachineBuilder()._symbols;\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this.getMachineBuilder().isCustomSymbol(symbol);\n  }\n}\nEventable.mixin(MachineController);\n\nexport default MachineController;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass NodeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    //TODO: Refer to app.css for comparable colors\n    const node = this.props.node;\n    return <g className=\"graph-node-container\">\n      {/*Outer circle*/}\n      <circle className=\"graph-node\"\n        cx={node.x}\n        cy={node.y}\n        r={Config.NODE_RADIUS}\n\n        fill=\"#FEE781\"\n        stroke=\"#000000\"/>\n\n      {/*Inner circle*/}\n      {node.getNodeAccept() &&\n        <circle className=\"graph-node-inner\"\n          cx={node.x}\n          cy={node.y}\n          r={Config.NODE_RADIUS_INNER}\n          fill=\"none\"\n\n          stroke=\"#000000\"/>}\n\n      //Label\n      <text className=\"graph-node-label\"\n        x={node.x} y={node.y + 4}\n        pointerEvents=\"none\"\n        style={{\n          userSelect: \"none\",\n          fontSize: (1 - Math.min(Math.max(node.getNodeLabel().length - 2, 0) / 6, 0.5)) + \"em\"\n        }}\n        textAnchor=\"middle\">\n        {node.getNodeLabel()}\n      </text>\n    </g>;\n  }\n}\n\nexport default NodeRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass EdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const SIXTH_PI = Math.PI / 6;\n\n    let arrowAngle = 0;\n    const edge = this.props.edge;\n    const start = edge.getStartPoint();\n    const end = edge.getEndPoint();\n    const center = edge.getCenterPoint();\n    const label = edge.getEdgeLabel();\n    const quad = edge.getQuadratic();\n    const quadCoords = edge.getQuadraticAsCoords();\n    const edgeDir = edge.getEdgeDirection();\n    const flipLabel = quadCoords.y > 0;\n\n    //Calculate curved lines...\n    let quadLine = null;\n    if (!edge.isQuadratic())\n    {\n      //Straight line\n      arrowAngle = Math.atan2(start.x - end.x, start.y - end.y) + Math.PI;\n      quadLine = \"L \" + end.x + \" \" + end.y;\n    }\n    else\n    {\n      //Quadratic curve\n      //center = (midpoint + the quadratic offset) + the quadratic offset\n      const cx = center.x + quadCoords.x;\n      const cy = center.y + quadCoords.y;\n      arrowAngle = Math.atan2(cx - end.x, cy - end.y) + Math.PI;\n      quadLine = \"Q \" + cx + \" \" + cy + \" \" + end.x + \" \" + end.y;\n    }\n\n    //Draw multiple labels\n    const labels = edge.getEdgeSymbolsFromLabel();\n    let dy = 0;\n\n    const cx = (center && center.x || 0);\n    const cy = (center && center.y || 0);\n\n    return <g className=\"graph-edge-container\">\n      //Draw lines\n      <path className=\"graph-edge\" id={\"edge:\" + edge.getGraphElementID()}\n        d={\n          \"M \" + start.x + \" \" + start.y + \" \" +\n          quadLine + \" \" +\n          \"M \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle - SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle - SIXTH_PI))) + \" \" +\n          \"L \" + end.x + \" \" + end.y + \" \" +\n          \"L \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle + SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle + SIXTH_PI)))}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n\n      {/*Draw labels*/}\n      <g transform={\"translate(\" + (cx) + \",\" + (cy) + \") rotate(\" + (edgeDir * 180 / Math.PI) + \")\"}>\n      { labels.length > 0 && labels.map((str, i) => {\n          const yy = (i + 1) * -15;\n\n          //TODO: ctx.clearRect(xx - cx - 2, yy - 5, (cx * 2) + 4, 10);\n          return <text\n            key={str + \".\" + i}\n            className=\"graph-edge-label\"\n            transform={\"translate(0, \" + yy + \")\" + (flipLabel ? \" scale(-1, -1)\" : \"\")}\n            alignmentBaseline=\"central\"\n            pointerEvents=\"none\"\n            style={{userSelect: \"none\"}}\n            textAnchor=\"middle\">\n            {str}\n          </text>;\n      })}\n      </g>\n    </g>;\n  }\n}\n\nexport default EdgeRenderer;\n","import React from 'react';\n\nimport Node from 'modules/fsa/graph/FSANode.js';\n\nimport Config from 'config.js';\n\nclass InitialMarkerRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const node = this.props.node;\n    //node.x + offset marker back to center if not a node (or is a pointer)\n    const x = node.x + (!(node instanceof Node) ? -Config.INITIAL_MARKER_OFFSET_X : 0);\n    const y = node.y;\n    const r = Config.NODE_RADIUS;\n    const d = r * 2;\n    return <g className=\"graph-initial-container\">\n      <path className=\"graph-initial\" d={\n        \"M\" + (x - r) + \" \" + (y) +\n        \" L\" + (x - d) + \" \" + (y - r) +\n        \" L\" + (x - d) + \" \" + (y + r) +\n        \" Z\"}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n    </g>;\n  }\n}\n\nexport default InitialMarkerRenderer;\n","import React from 'react';\nimport './FSAGraphRenderer.css';\n\nimport NodeRenderer from './NodeRenderer.js';\nimport EdgeRenderer from './EdgeRenderer.js';\nimport InitialMarkerRenderer from './InitialMarkerRenderer.js';\n\nclass FSAGraphRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const graph = graphController.getGraph();\n\n    return <g>\n      {/* Nodes */}\n      {graph.getNodes().map((e, i) => <NodeRenderer key={e.getGraphElementID() || i} node={e}/>)}\n\n      {/* Edges */}\n      {graph.getEdges().map((e, i) => <EdgeRenderer key={e.getGraphElementID() || i} edge={e}/>)}\n\n      {/* Initial marker and ghost */}\n      { graph.getStartNode() && (inputController.ghostInitialMarker == null ?\n        <InitialMarkerRenderer node={graph.getStartNode()}/> :\n        <InitialMarkerRenderer node={inputController.ghostInitialMarker}/>) }\n    </g>;\n  }\n}\n\nexport default FSAGraphRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass SelectionBoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const visible = this.props.visible;\n    const fromX = this.props.fromX || 0;\n    const fromY = this.props.fromY || 0;\n    const toX = this.props.toX || fromX + 1;\n    const toY = this.props.toY || fromY + 1;\n\n    const dx = toX - fromX;\n    const dy = toY - fromY;\n\n    return <g className=\"graph-selection-container\">\n    { visible &&\n      <rect className=\"graph-selection\"\n        x={dx < 0 ? toX : fromX}\n        y={dy < 0 ? toY : fromY}\n        width={dx < 0 ? -dx : dx}\n        height={dy < 0 ? -dy : dy}/> }\n    </g>;\n  }\n}\n\nexport default SelectionBoxRenderer;\n","import React from 'react';\nimport Config from 'config.js';\n\nconst HIGHLIGHT_RADIUS_OFFSET = 4;\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\n\nclass HighlightRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const target = this.props.target;\n    const type = this.props.type;\n\n    let x = 0;\n    let y = 0;\n    let r = Config.CURSOR_RADIUS;\n    switch(type)\n    {\n      case \"node\":\n        x = target.x || 0;\n        y = target.y || 0;\n        r = Config.NODE_RADIUS;\n        break;\n      case \"edge\":\n        const center = target.getCenterPoint();\n        x = center.x || 0;\n        y = center.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n      case \"endpoint\":\n        const endpoint = target.getEndPoint();\n        x = endpoint.x || 0;\n        y = endpoint.y || 0;\n        r = Config.ENDPOINT_RADIUS;\n        break;\n      case \"initial\":\n        x = target.x + Config.INITIAL_MARKER_OFFSET_X || 0;\n        y = target.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n    }\n\n    return <g className=\"graph-highlight-container\">\n      <circle className={\"graph-highlight \" + this.props.className}\n        cx={x} cy={y}\n        r={r + HIGHLIGHT_RADIUS_OFFSET}\n        strokeDashoffset={this.props.offset || 0}\n        strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n        strokeWidth={HIGHLIGHT_LINE_WIDTH}\n        fill=\"none\"/>\n    </g>;\n  }\n}\n\nexport default HighlightRenderer;\n","import React from 'react';\n\nimport SelectionBoxRenderer from 'content/workspace/renderer/SelectionBoxRenderer.js';\nimport HighlightRenderer from 'content/workspace/renderer/HighlightRenderer.js';\n\nclass FSAGraphOverlayRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const parent = this.props.parent;\n    const currentModule = this.props.currentModule;\n\n    const graphController = currentModule.getGraphController();\n    const inputController = currentModule.getInputController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n    const machineBuilder = machineController.getMachineBuilder();\n    const picker = inputController.getPicker();\n    const selectionBox = picker.getSelectionBox();\n\n    return <g>\n      {/* Selected elements */}\n      { picker.hasSelection() &&\n        picker.getSelection(graph).map((e, i) =>\n          <HighlightRenderer key={e.getGraphElementID()} className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={e} type=\"node\"/>) }\n\n      {/* Selection box */}\n      <SelectionBoxRenderer visible={selectionBox.visible}\n        fromX={selectionBox.fromX} fromY={selectionBox.fromY}\n        toX={selectionBox.toX} toY={selectionBox.toY}/>\n\n      {/* Node warning targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.warningNodes.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n      {/* Edge warning targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.warningEdges.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n      {/* Node error targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.errorNodes.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n      {/* Edge error targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.errorEdges.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n      {/* Node test targets */}\n      { tester.testMode.targets.map((e, i) => {\n          return <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-test graph-gui\" target={e} type=\"node\" offset=\"6\"/>;\n        }) }\n\n      {/* Hover markers */}\n      { picker.hasTarget() &&\n        !picker.isTargetInSelection() &&\n        <HighlightRenderer className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={picker.target} type={picker.targetType}/> }\n    </g>;\n  }\n}\n\nexport default FSAGraphOverlayRenderer;\n","import React from 'react';\nimport './TrashCan.css';\n\nimport Viewport from './Viewport.js';\n\nclass TrashCan extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      staticTrash: false\n    };\n  }\n\n  onTrashEnter(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(true);\n\n    //Enable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.DANGEROUS};\n    });\n  }\n\n  onTrashLeave(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(false);\n\n    //Disable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.NORMAL};\n    });\n  }\n\n  onTrashClick(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.setState((prev, props) => {\n      const result = !prev.staticTrash;\n      this.props.inputController.setTrashMode(result);\n\n      //Enable mode: dangerous\n      this.props.viewport.setState((prev, props) => {\n        return {mode: result ? Viewport.DANGEROUS : Viewport.NORMAL};\n      })\n\n      return {\n        staticTrash: result\n      };\n    });\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const inputAdapter = inputController.getInputAdapter();\n\n    return <svg id=\"trash-btn\"\n      className={(inputController.isTrashMode() ? \"danger \" : \"\") +\n        (inputAdapter.isUsingTouch() && inputAdapter.isDragging() ? \"hidden\" : \"\")}\n      width=\"24\" height=\"24\"\n      viewBox=\"0 0 24 24\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      onMouseEnter={this.onTrashEnter.bind(this)}\n      onMouseLeave={this.onTrashLeave.bind(this)}\n      onClick={this.onTrashClick.bind(this)}>\n      <path d={\"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 \" +\n      \"1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z\"}/>\n    </svg>;\n  }\n}\n\nexport default TrashCan;\n","import React from 'react';\n\nclass PlayIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M8 5v14l11-7z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PlayIcon;\n","import React from 'react';\n\nclass PauseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pause-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PauseIcon;\n","import React from 'react';\n\nclass StopIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"stop-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M6 6h12v12H6z\"/>\n    </svg>;\n  }\n}\n\nexport default StopIcon;\n","import React from 'react';\nimport './TestTray.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport PlayIcon from 'icons/PlayIcon.js';\nimport PauseIcon from 'icons/PauseIcon.js';\nimport StopIcon from 'icons/StopIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\n\nconst MAX_STRING_PREV_LENGTH = 2;\nconst MAX_ELLIPSIS_COUNT = 3;\n\nclass TestTray extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const tester = this.props.tester;\n    const testList = this.props.tester.inputList;\n    const testMode = this.props.tester.testMode;\n    const testInput = testList.getCurrentInput();\n    const testIndex = testMode.getCurrentTestStringIndex();\n\n    return <div className=\"test-tray-container\">\n      <div className=\"test-tray-input-string-container\">\n      {\n        testInput && testIndex >= 0 &&\n        testInput.value.split('').map((e, i) => {\n          const testOffset = testIndex - i;\n          if (testOffset > MAX_ELLIPSIS_COUNT + MAX_STRING_PREV_LENGTH) return;\n          if (testOffset > MAX_STRING_PREV_LENGTH)\n          {\n            return <span key={e + \".\" + i} className=\"test-tray-input-placeholder\">.</span>;\n          }\n          return <span key={e + \".\" + i}\n            className={\"test-tray-input-char\" +\n            (testIndex == i ? \" active\" : \"\")}>\n            {e}\n            </span>;\n        })\n      }\n      </div>\n      <div className=\"test-tray-control\">\n\n        <IconButton onClick={(e)=>{\n          testMode.onResume();\n        }} disabled={testMode.isRunning()}>\n          <PlayIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPause();\n        }} disabled={!testMode.isRunning()}>\n          <PauseIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPreviousStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!testMode.hasPrevStep() || testMode.isSkipping()}>\n          <UndoIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onNextStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!tester.testMode.hasNextStep() || testMode.isSkipping()}>\n          <RedoIcon/>\n        </IconButton>\n\n        <IconButton onClick={(e)=>{\n          tester.setStepByStepMode(false);\n        }}>\n          <StopIcon/>\n        </IconButton>\n\n        <div className=\"trash-placeholder\">{/*PLACEHOLDER for TRASH*/}</div>\n      </div>\n    </div>;\n  }\n}\n\nexport default TestTray;\n","import React from 'react';\n\nclass CreateIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"create-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CreateIcon;\n","import React from 'react';\n\nclass MoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"move-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\" />\n    </svg>;\n  }\n}\n\nexport default MoveIcon;\n","import React from 'react';\nimport './CursorMode.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport CreateIcon from 'icons/CreateIcon.js';\nimport MoveIcon from 'icons/MoveIcon.js';\n\nclass CursorMode extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const actionMode = inputController.isActionMode(graphController);\n\n    return <div id=\"cursor-btn\">\n      <IconButton id=\"action-mode\" className={actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(true)}\n        title={I18N.toString(\"cursor.actionmode\")}>\n        <CreateIcon/>\n      </IconButton>\n      <IconButton id=\"move-mode\" className={!actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(false)}\n        title={I18N.toString(\"cursor.movemode\")}>\n        <MoveIcon/>\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default CursorMode;\n","import React from 'react';\n\nimport TrashCan from 'content/viewport/TrashCan.js';\nimport TestTray from './TestTray.js';\nimport CursorMode from 'content/viewport/CursorMode.js';\n\nclass ViewportRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const parent = this.props.parent;\n    const currentModule = this.props.currentModule;\n    const screen = this.props.screen;\n\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const LabelEditor = currentModule.getLabelEditor();\n\n    return <span>\n    { LabelEditor &&\n      <LabelEditor ref={ref=>graphController.labelEditorElement=ref}\n      inputController={inputController}\n      graphController={graphController}\n      machineController={machineController}\n      screen={screen}/> }\n    {\n      tester.getStepByStepMode() ?\n      <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n        <TestTray tester={tester} graphController={graphController}/>\n      </div>\n      :\n      <span>\n        <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n          <CursorMode inputController={inputController} graphController={graphController}/>\n        </div>\n        <div className=\"anchor-bottom-right\">\n          <TrashCan inputController={inputController} viewport={parent}/>\n        </div>\n      </span>\n    }\n    </span>;\n  }\n}\nexport default ViewportRenderer;\n","import Config from 'config.js';\n\nclass MachineLabeler\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.prefix = Config.STR_STATE_LABEL;\n\n    //TODO: this is hooked into the controller in module\n    this.shouldAutoLabel = false;\n  }\n\n  sortDefaultNodeLabels()\n  {\n    const startNode = this.graph.getStartNode();\n    if (!startNode) return;\n    const isDefaultInitial = !startNode.getNodeCustom();\n\n    const defaultNodes = [];\n    const customLabels = [];\n    for(const node of this.graph.getNodes())\n    {\n      if (node.getNodeCustom())\n      {\n        customLabels.push(node.getNodeLabel());\n      }\n      else\n      {\n        defaultNodes.push(node);\n      }\n    }\n\n    let index = isDefaultInitial ? 0 : 1;\n    for(const node of defaultNodes)\n    {\n      let defaultName = null;\n      while(customLabels.includes(\n        defaultName = this.getDefaultNodeLabelByIndex(index++))) {}\n\n      node.setNodeLabel(defaultName);\n    }\n  }\n\n  getNextDefaultNodeLabel()\n  {\n    //if (!this.shouldAutoLabel) return this.prefix;\n\n    let nodeIndex = 0;\n    let result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    while(!this.isUniqueNodeLabel(result))\n    {\n      ++nodeIndex;\n      result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    }\n    return result;\n  }\n\n  getDefaultNodeLabelByIndex(index)\n  {\n    return this.prefix + (index);\n  }\n\n  isUniqueNodeLabel(newLabel)\n  {\n    for(const node of this.graph.getNodes())\n    {\n      if (node.getNodeLabel() == newLabel)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n\nexport default MachineLabeler;\n","import Config from 'config.js';\nimport MachineLabeler from './MachineLabeler.js';\n\nconst DEFAULT_AUTO_RENAME = true;\n\nclass MachineBuilder\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.graphController = null;\n\n    this.labeler = new MachineLabeler(graph);\n\n    this.onGraphNodeLabelChange = this.onGraphNodeLabelChange.bind(this);\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n\n    this.setAutoRenameNodes(DEFAULT_AUTO_RENAME);\n  }\n\n  destroy()\n  {\n\n  }\n\n  onGraphNodeLabelChange(graph, node, targetNodes, prevX, prevY)\n  {\n    this.labeler.sortDefaultNodeLabels();\n  }\n\n  setAutoRenameNodes(enable)\n  {\n    const prev = this.labeler.shouldAutoLabel;\n    this.labeler.shouldAutoLabel = enable;\n    if (prev != enable && enable)\n    {\n      this.graphController.on(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n    else\n    {\n      this.graphController.removeEventListener(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n  }\n\n  shouldAutoRenameNodes()\n  {\n    return this.labeler.shouldAutoLabel;\n  }\n\n  getLabeler()\n  {\n    return this.labeler;\n  }\n}\n\nexport default MachineBuilder;\n","import React from 'react';\n\nclass StateUnreachableWarningMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        //Locate the target node\n        const target = message.value[this.targetIndex++];\n        if (this.targetIndex >= message.value.length)\n        {\n          this.targetIndex = 0;\n        }\n\n        //Move pointer to target\n        graphController.focusOnNode(target);\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value;\n        //Delete all target nodes\n        graphController.deleteTargetNodes(targets);\n\n        //Sort the nodes after deleting if enabled...\n        machineController.getMachineBuilder().labeler.sortDefaultNodeLabels();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.warning.unreachable\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateUnreachableWarningMessage;\n","import React from 'react';\n\nclass StateMissingTransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.error.missing\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n    </div>;\n  }\n}\n\nexport default StateMissingTransitionErrorMessage;\n","import React from 'react';\n\nimport { ARROW } from 'machine/Symbols.js';\n\nclass TransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += \"(\" + target.getSourceNode().getNodeLabel() + \", \" + (target.getDestinationNode() ? target.getDestinationNode().getNodeLabel() : \"null\") + \") \" + ARROW + \" \" + target.getEdgeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnEdge(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target edges\n        graphController.deleteTargetEdges(targets);\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{this.props.message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default TransitionErrorMessage;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport StateMissingTransitionErrorMessage from 'modules/fsa/notifications/StateMissingTransitionErrorMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\nimport StateErrorMessage from 'modules/fsa/notifications/StateErrorMessage.js';\n\nclass DFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    //This should only run for \"DFA\" machine types...\n    if (this.machineBuilder.getMachineType() != \"DFA\")\n    {\n      throw new Error(\"Invalid machine type to check for DFA errors\");\n    }\n\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let startNode = graph.getStartNode();\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.getEdges())\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeSymbolsFromLabel();\n\n        for(const label of labels)\n        {\n          //check for empty transitions\n          if(label == EMPTY)\n          {\n            //Update cached error targets\n            emptyEdges.push(edge);\n            if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n          }\n          else\n          {\n            if(!nodeTransitionMap.has(from))\n            {\n              nodeTransitionMap.set(from, [label]);\n            }\n            else\n            {\n              //check for duplicate transitions\n              const currentAlphabet = nodeTransitionMap.get(from);\n              if(currentAlphabet.includes(label))\n              {\n                //Update cached error targets\n                dupeEdges.push(edge);\n                if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n              }\n              else\n              {\n                currentAlphabet.push(label);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const missingNodes = [];\n    //Check for missing transitions\n    for(const node of graph.getNodes())\n    {\n      const nodeTransitions = nodeTransitionMap.get(node);\n      if (!nodeTransitions && alphabet.length != 0 ||\n        nodeTransitions && nodeTransitions.length < alphabet.length)\n      {\n        //Get the required missing symbols\n        /*\n        let array;\n        if (nodeTransitions)\n        {\n          array = [];\n          for(const symbol of alphabet)\n          {\n            if (!nodeTransitions.includes(symbol))\n            {\n              array.push(symbol);\n            }\n          }\n        }\n        else\n        {\n          array = alphabet.slice();\n        }\n        */\n\n        //Update cached error targets\n        missingNodes.push(node);\n        if (errorNodes.indexOf(node) == -1) errorNodes.push(node);\n      }\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    if (shouldNotifyErrors)\n    {\n      const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n      //Clear the existing messages\n      Notifications.clearMessages(messageTag);\n\n      //No errors!\n      if (!result)\n      {\n        Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n      }\n      //There are some errors/warnings...\n      else\n      {\n        const props = {graphController: graphController, machineController: machineController};\n        //Add new warning messages\n        const unReachedNodes = this.getUnreachableNodes();\n        if (unReachedNodes.length > 0)\n        {\n          Notifications.addMessage(unReachedNodes,\n            \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n        }\n\n        //Add new error messages\n        if (placeholderEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (emptyEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.empty\"), targets: emptyEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (dupeEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.dupe\"), targets: dupeEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (missingNodes.length > 0)\n        {\n          Notifications.addMessage({targets: missingNodes},\n            \"error\", messageTag, StateMissingTransitionErrorMessage, props, false);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n    const graph = this.graph;\n    if (graph.getNodeCount() <= 1) return [];\n\n    const edges = graph.getEdges();\n    const nodes = graph.getNodes().slice();\n    const startNode = nodes.shift();\n    let nextNodes = [];\n    nextNodes.push(startNode);\n\n    while(nextNodes.length > 0)\n    {\n      const node = nextNodes.pop();\n      for(const edge of edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          const i = nodes.indexOf(edge.getDestinationNode());\n          if (i >= 0)\n          {\n            const nextNode = nodes.splice(i, 1)[0];\n            nextNodes.push(nextNode);\n          }\n        }\n      }\n    }\n\n    return nodes;\n  }\n}\n\nexport default DFAErrorChecker;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\n\nclass NFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let unReachedNode = graph.getNodes().slice();\n    let startNode = graph.getStartNode();\n    unReachedNode.splice(unReachedNode.indexOf(startNode),1);\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.getEdges())\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeSymbolsFromLabel();\n\n        for(const label of labels)\n        {\n          //remove to from unReachedNode list\n          if (unReachedNode.includes(to)) unReachedNode.splice(unReachedNode.indexOf(to),1);\n        }\n      }\n    }\n\n    //check disconnect states\n    for (const node of unReachedNode)\n    {\n      if (warnNodes.indexOf(node) == -1) warnNodes.push(node);\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n    //Clear the existing messages\n    Notifications.clearMessages(messageTag);\n\n    //No errors!\n    if (!result)\n    {\n      Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n    }\n    //There are some errors/warnings...\n    else\n    {\n      const props = {graphController: graphController, machineController: machineController};\n\n      //Add new warning messages\n      if (unReachedNode.length > 0)\n      {\n        Notifications.addMessage(unReachedNode,\n          \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n      }\n\n      //Add new error messages\n      if (placeholderEdges.length > 0)\n      {\n        Notifications.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n          \"error\", messageTag, TransitionErrorMessage, props, false);\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n\n    const graph = this.graph;\n\n    let unReachedNodes = graph.getNodes().slice();\n\n    //keep start state\n    //unReachedNodes.splice(unReachedNodes.indexOf(unReachedNode.getStartNode()), 1);\n    for(const edge of graph.getEdges()) {\n      const labels = edge.label.split(\",\");\n      for(const label of labels) {\n\n        const from = edge.from;\n        const to = edge.to;\n        //remove to from unReachedNode list\n        if(unReachedNodes.includes(to)) unReachedNodes.splice(unReachedNodes.indexOf(to),1);\n      }\n    }\n    return unReachedNodes;\n  }\n}\n\nexport default NFAErrorChecker;\n","import Config from 'config.js';\n\nimport MachineBuilder from './MachineBuilder.js';\nimport DFAErrorChecker from './DFAErrorChecker.js';\nimport NFAErrorChecker from './NFAErrorChecker.js';\nimport DFA from 'machine/DFA.js';\nimport NFA from 'machine/NFA.js';\nimport Node from 'modules/fsa/graph/FSANode.js';\nimport { SYMBOL_SEPARATOR } from 'modules/fsa/graph/FSAEdge.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass FSABuilder extends MachineBuilder\n{\n  constructor(graph)\n  {\n    super(graph);\n\n    this._machine = new NFA();\n    this._machineType = \"DFA\";\n    this._machineValidDFA = false;\n    this._alphabet = [];\n    this._symbols = [];\n\n    this._savedGraphHash = 0;\n\n    this._timer = null;\n    this._errorTimer = null;\n\n    this.machineErrorChecker = new DFAErrorChecker(this, graph);\n    this.tester = null;\n\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onDelayedGraphChange = this.onDelayedGraphChange.bind(this);\n    this.onDelayedErrorCheck = this.onDelayedErrorCheck.bind(this);\n  }\n\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this.tester = module.getTestingManager();\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n\n    this._savedGraphHash = this.graph.getHashCode(false);\n    this.onGraphChange();\n  }\n\n  destroy()\n  {\n    this._savedGraphHash = this.graph.getHashCode(false);\n    this.onGraphChange();\n\n    super.destroy();\n  }\n\n  update()\n  {\n    const graphHash = this.graph.getHashCode(false);\n    if (graphHash !== this._savedGraphHash)\n    {\n      this._savedGraphHash = graphHash;\n      this.onGraphChange(this.graph);\n    }\n  }\n\n  onGraphChange(graph)\n  {\n    if (!this.tester) return;\n\n    if (this._timer)\n    {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n\n    if (this._errorTimer)\n    {\n      clearTimeout(this._errorTimer);\n      this._errorTimer = null;\n    }\n\n    this._timer = setTimeout(this.onDelayedGraphChange, Config.GRAPH_IMMEDIATE_INTERVAL);\n    this._errorTimer = setTimeout(this.onDelayedErrorCheck,\n      this.tester.isImmediateErrorCheck ? (Config.GRAPH_IMMEDIATE_INTERVAL * 2) : Config.ERROR_CHECK_INTERVAL);\n  }\n\n  onDelayedGraphChange()\n  {\n    this._machine.clear();\n    const result = this.toNFA(this._machine);\n    for(const s of this._symbols)\n    {\n      this._machine.newSymbol(s);\n    }\n    this._machineValidDFA = this._machine.isValidDFA();\n  }\n\n  onDelayedErrorCheck()\n  {\n    if (!this.tester.shouldCheckError) return;\n\n    this.machineErrorChecker.checkErrors(true, this.graphController, this.machineController);\n  }\n\n  formatAlphabetString(string, allowNull=false)\n  {\n    const symbols = string.split(SYMBOL_SEPARATOR);\n    const result = new Set();\n\n    let symbol = \"\";\n    let symbolLength = 0;\n    const length = symbols.length;\n    for(let i = 0; i < length; ++i)\n    {\n      symbol = symbols[i].trim();\n      symbolLength = symbol.length;\n      //If the symbol has none or more than 1 char\n      if (symbolLength !== 1)\n      {\n        //Remove symbol (by not adding to result)\n\n        //Divide multi-char symbol into smaller single char symbols\n        if (symbolLength > 1)\n        {\n          for(let subsymbol of symbol.split(\"\"))\n          {\n            subsymbol = subsymbol.trim();\n            if (!result.has(subsymbol))\n            {\n              result.add(subsymbol);\n            }\n          }\n        }\n      }\n      else\n      {\n        result.add(symbol);\n      }\n    }\n\n    //If it is an empty string...\n    if (result.size <= 0) return allowNull ? null : EMPTY;\n    return Array.from(result).join(SYMBOL_SEPARATOR);\n  }\n\n  setMachineType(machineType)\n  {\n    if (this._machineType == machineType) return;\n\n    this._machineType = machineType;\n    if (machineType == \"DFA\")\n    {\n      this.machineErrorChecker = new DFAErrorChecker(this, this.graph);\n    }\n    else if (machineType == \"NFA\")\n    {\n      this.machineErrorChecker = new NFAErrorChecker(this, this.graph);\n    }\n    else\n    {\n      throw new Error(\"Cannot find error checker for machine type \\'\" + machineType + \"\\'\");\n    }\n\n    this.onGraphChange();\n  }\n\n  getMachineType()\n  {\n    return this._machineType;\n  }\n\n  addCustomSymbol(symbol)\n  {\n    this._symbols.push(symbol);\n\n    this.onGraphChange();\n  }\n\n  removeCustomSymbol(symbol)\n  {\n    this._symbols.splice(this._symbols.indexOf(symbol), 1);\n\n    this.onGraphChange();\n  }\n\n  renameCustomSymbol(prevSymbol, nextSymbol)\n  {\n    const i = this._symbols.indexOf(prevSymbol);\n    if (i <= 0) throw new Error(\"Trying to rename unknown symbol \\'\" + prevSymbol + \"\\'\");\n    this._symbols[i] = nextSymbol;\n\n    this.onGraphChange();\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._symbols.includes(symbol);\n  }\n\n  getAlphabet()\n  {\n    const machine = this.getMachine();\n    this._alphabet.length = 0;\n    machine.getAlphabet(this._alphabet);\n    return this._alphabet;\n  }\n\n  isValidMachine()\n  {\n    if (this._machineType == \"DFA\")\n    {\n      return this._machineValidDFA;\n    }\n    else\n    {\n      return true;\n    }\n  }\n\n  toDFA(dst = null)\n  {\n    const result = dst || new DFA();\n    if (!(result instanceof DFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  toNFA(dst=null)\n  {\n    const result = dst || new NFA();\n    if (!(result instanceof NFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  getMachine()\n  {\n    return this._machine;\n  }\n}\n\nfunction fillFSA(graph, fsa)\n{\n  if (graph.getNodes().length <= 0) return fsa;\n  //Create all the nodes\n  for(const node of graph.getNodes())\n  {\n    try\n    {\n      let state = node.getNodeLabel();\n      fsa.newState(state);\n\n      //Set final state\n      if (node.getNodeAccept())\n      {\n        fsa.setFinalState(state, true);\n      }\n    }\n    catch(e)\n    {\n      throw e;\n    }\n  }\n\n  //Create all the edges\n  for(const edge of graph.getEdges())\n  {\n    //Ignore any incomplete edges\n    if (edge.isPlaceholder()) continue;\n    const from = edge.getSourceNode();\n    const to = edge.getDestinationNode();\n    if (from instanceof Node && to instanceof Node)\n    {\n      const labels = edge.getEdgeSymbolsFromLabel();\n      for(const label of labels)\n      {\n        try\n        {\n          fsa.newTransition(from.getNodeLabel(), to.getNodeLabel(), label);\n        }\n        catch(e)\n        {\n          throw e;\n        }\n      }\n    }\n  }\n\n  //Set start state\n  let startState = graph.getStartNode().getNodeLabel();\n  fsa.setStartState(startState);\n\n  return fsa;\n}\n\nexport default FSABuilder;\n","class EventHandler\n{\n  constructor(eventLogger, controller, eventName, postEventName)\n  {\n    this.eventLogger = eventLogger;\n    this.controller = controller;\n    this.eventName = eventName;\n    this.postEventName = postEventName || null;\n\n    this.onEvent = this.onEvent.bind(this);\n\n    this.controller.on(this.eventName, this.onEvent);\n  }\n\n  destroy()\n  {\n    this.controller.removeEventListener(this.eventName, this.onEvent);\n  }\n\n  onEvent(...args)\n  {\n    const result = {};\n    result.applyUndo = this.applyUndo.bind(this, result);\n    result.applyRedo = this.applyRedo.bind(this, result);\n\n    result.eventData = this.captureEvent(...args);\n\n    if (this.postEventName)\n    {\n      //Wait for post event to finalize event\n      this.controller.once(this.postEventName, (...args) => {\n        result.postData = this.capturePostEvent(...args);\n\n        this.eventLogger.captureEvent(result);\n      });\n    }\n    else\n    {\n      result.postData = result.eventData;\n\n      //Finalize event right now\n      this.eventLogger.captureEvent(result);\n    }\n  }\n\n  captureEvent(...args)\n  {\n    return {};\n  }\n\n  capturePostEvent(...args)\n  {\n    return {};\n  }\n\n  applyUndo(e)\n  {\n\n  }\n\n  applyRedo(e)\n  {\n\n  }\n}\n\nexport default EventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeInitial\");\n  }\n\n  //Override\n  captureEvent(graph, nextInitial, prevInitial)\n  {\n    return {\n      graph: graph,\n      nodeID: nextInitial.getGraphElementID(),\n      prevID: prevInitial.getGraphElementID()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.prevID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetNode, nextX, nextY, prevX, prevY)\n  {\n    return {\n      graph: graph,\n      nodeID: targetNode.getGraphElementID(),\n      nextX: nextX,\n      nextY: nextY,\n      prevX: prevX,\n      prevY: prevY\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.x = e.eventData.prevX;\n    node.y = e.eventData.prevY;\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n    \n    node.x = e.eventData.nextX;\n    node.y = e.eventData.nextY;\n  }\n}\nexport default GraphNodeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveAllEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMoveAll\");\n  }\n\n  //Override\n  captureEvent(graph, nodes, dx, dy)\n  {\n    return {\n      graph: graph,\n      nodeIDs: nodes.map(e => e.getGraphElementID()),\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x += e.eventData.dx;\n      node.y += e.eventData.dy;\n    }\n  }\n}\nexport default GraphNodeMoveAllEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextQuad, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextQuad: Object.assign({}, nextQuad),\n      prevQuad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.prevQuad.radians, e.eventData.prevQuad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.nextQuad.radians, e.eventData.nextQuad.length);\n  }\n}\nexport default GraphEdgeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeDestination\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextDestination, prevDestination, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextDestination: nextDestination,\n      prevDestination: prevDestination,\n      nextQuad: Object.assign({}, targetEdge.getQuadratic()),\n      prevQuad: Object.assign({}, prevQuad),\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.prevQuad.radians;\n    const length = e.eventData.prevQuad.length;\n\n    edge.changeDestinationNode(e.eventData.prevDestination);\n    //Flip them, since self loops are upside down\n    if (edge.isSelfLoop()) radians = -radians;\n    edge.setQuadratic(radians, length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.nextQuad.radians;\n    const length = e.eventData.nextQuad.length;\n\n    edge.changeDestinationNode(e.eventData.nextDestination);\n    edge.setQuadratic(radians, length);\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeLabelEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeLabel\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextLabel, prevLabel)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.prevLabel);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.nextLabel);\n  }\n}\nexport default GraphEdgeLabelEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateNode\");\n  }\n\n  //Override\n  captureEvent(graph, node)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      x: node.x,\n      y: node.y,\n      accept: node.getNodeAccept(),\n      label: node.getNodeLabel(),\n      custom: node.getNodeCustom()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteNode(node);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node)\n    {\n      node = graph.createNode(e.postData.x, e.postData.y, e.postData.nodeID);\n    }\n    else\n    {\n      node.x = e.postData.x;\n      node.y = e.postData.y;\n    }\n    node.setNodeLabel(e.postData.label);\n    node.setNodeAccept(e.postData.accept);\n    node.setNodeCustom(e.postData.custom);\n  }\n}\nexport default UserCreateNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserToggleNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userToggleNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, prevAccept)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      prevAccept: prevAccept\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(e.eventData.prevAccept);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(!e.eventData.prevAccept);\n  }\n}\nexport default UserToggleNodeEventHandler;\n","import FSAGraph from './FSAGraph.js';\nimport { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst GRAPH_PARSER_VERSION = \"1.0.0\";\n\nexport const JSON = {\n  parse(data, dst=null)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeDatas = data['nodes'] || [];\n    const nodeCount = Math.min(nodeDatas.length || 0, data['nodeCount'] || 0);\n    const edgeDatas = data['edges'] || [];\n    const edgeCount = Math.min(edgeDatas.length || 0, data['edgeCount'] || 0);\n    const initialIndex = data['initial'] || 0;\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeData = nodeDatas[i];\n      if (!nodeData) continue;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(nodeData['x'] || 0, nodeData['y'] || 0, nodeData['id']);\n      node.setNodeLabel(nodeData['label'] || \"\");\n      node.setNodeAccept(nodeData['accept'] || false);\n      node.setNodeCustom(nodeData['custom'] || false);\n\n      nodeIndices.set(i, node);\n    }\n\n    const initialNode = nodeIndices.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeData = edgeDatas[i];\n      if (!edgeData) continue;\n      const sourceNode = nodeIndices.get(edgeData['from']) || null;\n      //Cannot create source-less edges\n      if (!sourceNode) continue;\n      const destinationNode = nodeIndices.get(edgeData['to']) || null;\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode, edgeData['id']);\n      const quadData = edgeData['quad'] || {};\n      edge.setEdgeLabel(edgeData['label'] || \"\");\n      edge.setQuadratic(quadData['radians'] || 0, quadData['length'] || 0);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const nodeDatas = new Array(nodeCount);\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      if (node)\n      {\n        //NOTE: Assumes node must have an id\n        const elementID = node.getGraphElementID();\n\n        nodeIndices.set(node, i);\n        nodeDatas[i] = {\n          id: elementID,\n          x: node.x || 0, y: node.y || 0,\n          label: node.getNodeLabel() || \"\",\n          accept: node.getNodeAccept() || false,\n          custom: node.getNodeCustom() || false\n        };\n      }\n    }\n\n    const edgeDatas = new Array(edgeCount);\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edge = graphEdges[i];\n      if (edge)\n      {\n        //NOTE: Assumes edge must have an id\n        const elementID = edge.getGraphElementID();\n\n        const quad = edge.getQuadratic() || {};\n        const edgeSource = edge.getSourceNode();\n        const edgeDestination = edge.getDestinationNode();\n        const sourceIndex = nodeIndices.has(edgeSource) ? nodeIndices.get(edgeSource) : -1;\n        const destinationIndex = nodeIndices.has(edgeDestination) ? nodeIndices.get(edgeDestination) : -1;\n        edgeDatas[i] = {\n          id: elementID,\n          from: sourceIndex,\n          to: destinationIndex,\n          quad: { radians: quad['radians'] || 0, length: quad['length'] || 0 },\n          label: edge.getEdgeLabel() || \"\"\n        };\n      }\n    }\n\n    const initialIndex = nodeIndices.get(graphInitial) || 0;\n\n    return {\n      nodeCount: nodeCount,\n      nodes: nodeDatas,\n      edgeCount: edgeCount,\n      edges: edgeDatas,\n      initial: initialIndex,\n      _version: GRAPH_PARSER_VERSION\n    };\n  }\n};\n\nexport const XML = {\n  parse(data, dst=NULL)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeElements = data.getElementsByTagName('state') || [];\n    const nodeCount = nodeElements.length;\n    const edgeElements = data.getElementsByTagName('transition') || [];\n    const edgeCount = edgeElements.length;\n    let initialIndex = \"0\";\n\n    //Get the nodes...\n    const nodeElementIDs = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeElement = nodeElements[i];\n      if (!nodeElement) continue;\n      const nodeElementID = nodeElement.getAttribute('id');\n      if (!nodeElementID) continue;\n\n      //Get x value\n      let x = 0;\n      const xElements = nodeElement.getElementsByTagName('x');\n      //If no elements exists, we are guaranteed an empty list...\n      if (xElements.length > 0)\n      {\n        const xElement = xElements[0];\n        if (xElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const xValue = xElement.childNodes[0];\n          if (xValue)\n          {\n            try\n            {\n              x = parseFloat(xValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              x = 0;\n            }\n          }\n        }\n      }\n\n      //Get y value\n      let y = 0;\n      const yElements = nodeElement.getElementsByTagName('y');\n      //If no elements exists, we are guaranteed an empty list...\n      if (yElements.length > 0)\n      {\n        const yElement = yElements[0];\n        if (yElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const yValue = yElement.childNodes[0];\n          if (yValue)\n          {\n            try\n            {\n              y = parseFloat(yValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              y = 0;\n            }\n          }\n        }\n      }\n\n      //Get initial flag\n      const initialElements = nodeElement.getElementsByTagName('initial');\n      //If no elements exists, we are guaranteed an empty list...\n      const initial = initialElements.length > 0;\n\n      //Get final flag\n      const finalElements = nodeElement.getElementsByTagName('final');\n      //If no elements exists, we are guaranteed an empty list...\n      const final = finalElements.length > 0;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(x, y);\n      node.setNodeLabel(nodeElement.getAttribute('name') || \"\");\n      node.setNodeAccept(final);\n\n      if (initial) initialIndex = nodeElementID;\n      nodeElementIDs.set(nodeElementID, node);\n    }\n\n    //Set the initial node...\n    const initialNode = nodeElementIDs.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    //Readjust the center of graph...\n    const boundingRect = dst.getBoundingRect();\n    const minX = boundingRect.minX;\n    const minY = boundingRect.minY;\n    const width = boundingRect.width;\n    const height = boundingRect.height;\n    const graphNodes = dst.getNodes();\n    for(let i = 0, len = graphNodes.length; i < len; ++i)\n    {\n      graphNodes[i].x -= minX + width / 2;\n      graphNodes[i].y -= minY + height / 2;\n    }\n\n    //Get the transitions...\n    const transitionMapping = new Map();\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeElement = edgeElements[i];\n      if (!edgeElement) continue;\n\n      //Get from value\n      let sourceID = null;\n      const fromElements = edgeElement.getElementsByTagName('from');\n      //If no elements exists, we are guaranteed an empty list...\n      if (fromElements.length > 0)\n      {\n        const fromElement = fromElements[0];\n        if (fromElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const fromValue = fromElement.childNodes[0];\n          if (fromValue)\n          {\n            sourceID = fromValue.nodeValue;\n          }\n        }\n      }\n\n      //Cannot create source-less edges\n      if (!nodeElementIDs.has(sourceID)) continue;\n\n      //Get to value\n      let destinationID = \"\";\n      const toElements = edgeElement.getElementsByTagName('to');\n      //If no elements exists, we are guaranteed an empty list...\n      if (toElements.length > 0)\n      {\n        const toElement = toElements[0];\n        if (toElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const toValue = toElement.childNodes[0];\n          if (toValue)\n          {\n            destinationID = toValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      //Get read value\n      let symbol = \"\";\n      const readElements = edgeElement.getElementsByTagName('read');\n      //If no elements exists, we are guaranteed an empty list...\n      if (readElements.length > 0)\n      {\n        const readElement = readElements[0];\n        if (readElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const readValue = readElement.childNodes[0];\n          if (readValue)\n          {\n            symbol = readValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      const transitionID = sourceID + \"\\n\" + destinationID;\n      let symbols;\n      if (transitionMapping.has(transitionID))\n      {\n        symbols = transitionMapping.get(transitionID);\n      }\n      else\n      {\n        symbols = [];\n        transitionMapping.set(transitionID, symbols);\n      }\n      symbols.push(symbol);\n    }\n\n    for(const transitionKey of transitionMapping.keys())\n    {\n      const key = transitionKey.split(\"\\n\");\n      if (key.length !== 2) continue;\n\n      const symbols = transitionMapping.get(transitionKey);\n      const label = symbols.join(SYMBOL_SEPARATOR);\n      //Should never be null, since it was checked before...\n      const sourceNode = nodeElementIDs.get(key[0]);\n      const destinationNode = nodeElementIDs.get(key[1]);\n\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode);\n      edge.setEdgeLabel(label);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const header = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\" +\n      \"<!--Created with flap.js \" + GRAPH_PARSER_VERSION + \"-->\" +\n      \"<structure></structure>\";\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(header, \"application/xml\");\n    const structure = doc.getElementsByTagName(\"structure\")[0];\n\n    const type = doc.createElement(\"type\");\n    type.innerHTML = \"fa\"; //finite automata\n    structure.appendChild(type);\n\n    const automaton = doc.createElement(\"automaton\");\n    structure.appendChild(automaton);\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      nodeIndices.set(node, i);\n\n      //state tag\n      const state = doc.createElement(\"state\");\n      state.id = \"\" + i;\n      state.setAttribute(\"name\", node.getNodeLabel());\n      automaton.appendChild(state);\n\n      //x tag\n      const x = doc.createElement(\"x\");\n      x.innerHTML = \"\" + (node.x || 0);\n      state.appendChild(x);\n\n      //y tag\n      const y = doc.createElement(\"y\");\n      y.innerHTML = \"\" + (node.y || 0);\n      state.appendChild(y);\n\n      //initial tag\n      if (graphInitial === node)\n      {\n        state.appendChild(doc.createElement(\"initial\"));\n      }\n\n      //final tag\n      if (node.getNodeAccept())\n      {\n        state.appendChild(doc.createElement(\"final\"));\n      }\n    }\n\n    for(let edge of graphEdges)\n    {\n      const symbols = edge.getEdgeSymbolsFromLabel();\n      for(let symbol of symbols)\n      {\n        //transition tag\n        const transition = doc.createElement(\"transition\");\n        automaton.appendChild(transition);\n\n        //from tag\n        const from = doc.createElement(\"from\");\n        from.innerHTML = \"\" + (nodeIndices.get(edge.getSourceNode()) || 0);\n        transition.appendChild(from);\n\n        //to tag\n        const to = doc.createElement(\"to\");\n        to.innerHTML = \"\" + (nodeIndices.get(edge.getDestinationNode()) || 0);\n        transition.appendChild(to);\n\n        //read tag\n        const read = doc.createElement(\"read\");\n        read.innerHTML = \"\" + (symbol || \"\");\n        transition.appendChild(read);\n      }\n    }\n\n    return doc;\n  }\n};\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteNodesEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteNodes\", \"userPostDeleteNodes\");\n  }\n\n  //Override\n  captureEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    const targets = [];\n    for(const target of targetNodes)\n    {\n      targets.push(target.getGraphElementID());\n    }\n    const dx = node.x - prevX;\n    const dy = node.y - prevY;\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      targets: targets,\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override\n  capturePostEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n    for(const targetID of e.eventData.targets)\n    {\n      const node = graph.getNodeByElementID(targetID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default UserDeleteNodesEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userRenameNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, nextLabel, prevLabel, isPrevCustom)\n  {\n    return {\n      node: node,\n      nodeID: node.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel,\n      prevCustom: isPrevCustom\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.prevLabel);\n    node.setNodeCustom(e.eventData.prevCustom);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.nextLabel);\n    node.setNodeCustom(true);\n  }\n}\nexport default UserRenameNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge)\n  {\n    const edgeQuad = edge.getQuadratic();\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: edge.getDestinationNode() ? edge.getDestinationNode().getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: { radians: edgeQuad.radians, length: edgeQuad.length }\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: when formatting edges change an edge different than this one, it does not revert them.\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.postData.edgeID);\n\n    const from = graph.getNodeByElementID(e.postData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.postData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.postData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.postData.label);\n    edge.setQuadratic(e.postData.quad.radians, e.postData.quad.length);\n  }\n}\nexport default UserCreateEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserDeleteEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge, prevTo, prevQuad)\n  {\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: prevTo ? prevTo.getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.eventData.edgeID);\n\n    const from = graph.getNodeByElementID(e.eventData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.eventData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.eventData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.eventData.label);\n    edge.setQuadratic(e.eventData.quad.radians, e.eventData.quad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n}\nexport default UserDeleteEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserImportGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, machineController)\n  {\n    super(eventLogger, graphController, \"userPreImportGraph\", \"userPostImportGraph\");\n\n    this.machineController = machineController;\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.eventData.graphName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.postData.graphName);\n  }\n}\nexport default UserImportGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass SafeGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, eventName, postEventName)\n  {\n    super(eventLogger, graphController, eventName, postEventName);\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default SafeGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserChangeMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userChangeMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    return {\n      prevType: prevMachineType,\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserChangeMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserConvertMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreConvertMachine\", \"userPostConvertMachine\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      prevType: prevMachineType\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserConvertMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userRenameMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineName, prevMachineName)\n  {\n    return {\n      prevName: prevMachineName,\n      nextName: nextMachineName\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineName(e.eventData.prevName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineName(e.postData.nextName);\n  }\n}\nexport default UserRenameMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserRenameSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreRenameSymbol\", \"userPostRenameSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol, prevSymbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, prevSymbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserRenameSymbolEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreDeleteSymbol\", \"userPostDeleteSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserDeleteSymbolEventHandler;\n","import GraphNodeInitialEventHandler from './controller/events/GraphNodeInitialEventHandler.js';\nimport GraphNodeMoveEventHandler from './controller/events/GraphNodeMoveEventHandler.js';\nimport GraphNodeMoveAllEventHandler from './controller/events/GraphNodeMoveAllEventHandler.js';\nimport GraphEdgeMoveEventHandler from './controller/events/GraphEdgeMoveEventHandler.js';\nimport GraphEdgeDestinationEventHandler from './controller/events/GraphEdgeDestinationEventHandler.js';\nimport GraphEdgeLabelEventHandler from './controller/events/GraphEdgeLabelEventHandler.js';\n\nimport UserCreateNodeEventHandler from './controller/events/UserCreateNodeEventHandler.js';\nimport UserToggleNodeEventHandler from './controller/events/UserToggleNodeEventHandler.js';\nimport UserDeleteNodesEventHandler from './controller/events/UserDeleteNodesEventHandler.js';\nimport UserRenameNodeEventHandler from './controller/events/UserRenameNodeEventHandler.js';\n\nimport UserCreateEdgeEventHandler from './controller/events/UserCreateEdgeEventHandler.js';\nimport UserDeleteEdgeEventHandler from './controller/events/UserDeleteEdgeEventHandler.js';\nimport UserImportGraphEventHandler from './controller/events/UserImportGraphEventHandler.js';\nimport SafeGraphEventHandler from './controller/events/SafeGraphEventHandler.js';\n\nimport UserChangeMachineEventHandler from './controller/events/UserChangeMachineEventHandler.js';\nimport UserConvertMachineEventHandler from './controller/events/UserConvertMachineEventHandler.js';\nimport UserRenameMachineEventHandler from './controller/events/UserRenameMachineEventHandler.js';\nimport UserRenameSymbolEventHandler from './controller/events/UserRenameSymbolEventHandler.js';\nimport UserDeleteSymbolEventHandler from './controller/events/UserDeleteSymbolEventHandler.js';\n\nclass EventManager\n{\n  constructor(undoManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.eventHandlers = [];\n\n    this.undoManager = undoManager;\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n\n    const graph = this.graphController.getGraph();\n    const events = this.undoManager;\n\n    this.eventHandlers.push(new GraphNodeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeMoveAllEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeDestinationEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeInitialEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeLabelEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserRenameNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserToggleNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteNodesEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateEdgeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteEdgeEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserImportGraphEventHandler(events, this.graphController, this.machineController));\n    this.eventHandlers.push(new SafeGraphEventHandler(events, this.graphController, \"userPreChangeLayout\", \"userPostChangeLayout\"));\n\n    this.eventHandlers.push(new UserChangeMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserConvertMachineEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserRenameMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserRenameSymbolEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserDeleteSymbolEventHandler(events, this.machineController, this.graphController));\n  }\n\n  destroy()\n  {\n    for(const handler of this.eventHandlers)\n    {\n      handler.destroy();\n    }\n\n    //TODO: Remove all event listeners...\n    this.graphController.clearEventListeners();\n  }\n}\n\nexport default EventManager;\n","import React from 'react';\nimport './LabelEditor.css';\n\nimport Config from 'config.js';\nimport { SYMBOL_SEPARATOR, EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\n//TODO: This is equivalent to 4em for toolbar height\nconst LABEL_OFFSET_Y = -64;\nconst EDITOR_OFFSET_Y = -36;\nconst DELETE_KEY = 8;\nconst DELETE_FORWARD_KEY = 46;\n\nconst RECOMMENDED_SYMBOLS = [\"0\", \"1\"];\nconst DEFAULT_SYMBOLS = [EMPTY_CHAR];\nconst DELETE_ON_EMPTY = true;\n\nclass LabelEditor extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.parentElement = null;\n    this.inputElement = null;\n\n    //HACK: this is so if the click is focused back to the label editor, then it will NOT close\n    this._timer = null;\n    this._prevValue = \"\";\n\n    this.state = {\n      target: null,\n      callback: null\n    };\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFormat = this.onFormat.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  openEditor(targetEdge, defaultText=null, replace=true, callback=null)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    this.setState((prev, props) => {\n      return {\n        target: targetEdge,\n        callback: callback\n      };\n    });\n\n    this.inputElement.resetValue(targetEdge.getEdgeLabel(), () => {\n      if (defaultText) this.inputElement.setValue(defaultText);\n\n      this._prevValue = targetEdge.getEdgeLabel();\n      this.parentElement.focus();\n      this.inputElement.focus(replace);\n    });\n  }\n\n  closeEditor(saveOnExit=false)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    //Save data\n    if (this.state.target !== null)\n    {\n      if (saveOnExit)\n      {\n        let value = this.inputElement.value;\n        this.state.target.setEdgeLabel(value);\n      }\n      else\n      {\n        if (!this.state.target.getEdgeLabel())\n        {\n          //Make sure its empty (and let edge handle default labels)\n          this.state.target.setEdgeLabel(null);\n\n          //Delete it since it is not a valid edge\n          if (DELETE_ON_EMPTY)\n          {\n            this.props.graphController.getGraph().deleteEdge(this.state.target);\n          }\n        }\n      }\n\n      this.setState({target: null});\n\n      if (this.state.callback) this.state.callback();\n    }\n\n    //Reset label editor\n    this.inputElement.blur();\n  }\n\n  hasFocus()\n  {\n    return this.inputElement.hasFocus();\n  }\n\n  isEditorOpen()\n  {\n    return this.state.target !== null;\n  }\n\n  onContextMenu(e)\n  {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  appendSymbol(symbol)\n  {\n    this.inputElement.appendValue(symbol, SYMBOL_SEPARATOR);\n    this.inputElement.focus(false);\n  }\n\n  onSubmit(newValue, prevValue)\n  {\n    //this._prevValue = newValue;\n    //If the value has changed or the value remained empty...\n    if (newValue != prevValue)\n    {\n      //this.closeEditor(true);\n    }\n    else\n    {\n      //TODO: This was commented out for some reason...\n      //Will close due to timer...\n      this.closeEditor(false);\n    }\n  }\n\n  onFormat(value)\n  {\n    //return this.props.machineController.getMachineBuilder().formatAlphabetString(value, false);\n    return this.props.machineController.getLabelFormatter().call(null, value, false);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const viewport = inputController.getInputAdapter().getViewport();\n    const graphController = this.props.graphController;//This is used in closeEditor()\n    const machineController = this.props.machineController;//This is also used in callbacks\n    const screen = this.props.screen;\n\n    const targetStyle = {\n      visibility: \"hidden\"\n    };\n\n    const target = this.state.target;\n\n    if (target)\n    {\n      targetStyle.visibility = \"visible\";\n\n      //Assumes target is an instance of Edge\n      const center = target.getCenterPoint();\n      const screenPos = transformViewToScreen(screen,\n        center.x + viewport.getOffsetX(),\n        center.y + viewport.getOffsetY());\n      const x = screenPos.x;\n      const y = screenPos.y + LABEL_OFFSET_Y + EDITOR_OFFSET_Y;\n      const offsetX = -(this.parentElement.offsetWidth / 2);\n      const offsetY = -(this.parentElement.offsetHeight / 2);\n\n      targetStyle.top = (y + offsetY) + \"px\";\n      targetStyle.left = (x + offsetX) + \"px\";\n    }\n\n    const usedAlphabet = machineController.getMachineBuilder().getMachine().getAlphabet();\n\n    return <div className=\"bubble\" id=\"label-editor\" ref={ref=>this.parentElement=ref}\n      tabIndex={\"0\"/*This is to allow div's to focus/blur*/}\n      style={targetStyle}\n      onContextMenu={this.onContextMenu}\n      onFocus={(e)=>{\n        //HACK: delete the timer that will exit labelEditor\n        clearTimeout(this._timer);\n      }}\n      onBlur={(e)=>{\n        //HACK: start the timer that will exit labelEditor if not return focus\n        this._timer = setTimeout(() => this.closeEditor(true), 10);\n      }}>\n      <FormattedInput className=\"label-editor-input\" ref={ref=>this.inputElement=ref}\n        formatter={this.onFormat}\n        onSubmit={this.onSubmit}\n        captureOnExit={\"none\"}/>\n      <div className=\"label-editor-tray\">\n        {\n          usedAlphabet &&\n          <span className=\"label-editor-tray-used\">\n            {\n              usedAlphabet.map((e, i) => {\n                if (e.length < 1) return null;\n                return <button key={i} onClick={ev=>this.appendSymbol(e)}>{e}</button>\n              })\n            }\n          </span>\n        }\n        <span className=\"label-editor-tray-default\">\n          {\n            usedAlphabet &&\n            usedAlphabet.length <= 1 &&\n            RECOMMENDED_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n          {\n            DEFAULT_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n  const ctm = svg.getScreenCTM();\n  return {\n    x: (x * ctm.a) + ctm.e,\n    y: (y * ctm.d) + ctm.f\n  };\n}\n\nexport default LabelEditor;\n","//https://www.flaticon.com/free-icon/json-file_136525\nimport React from 'react';\n\nclass JSONIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"json-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 \" +\n            \"s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 \" +\n            \"s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 \" +\n            \"s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 \" +\n            \"s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 \" +\n            \"s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 \" +\n            \"s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 \" +\n            \"s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 \" +\n            \"c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 \" +\n            \"c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 \" +\n            \"s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 \" +\n            \"s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 \" +\n            \"s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 \" +\n            \"s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 \" +\n            \"s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 \" +\n            \"s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 \" +\n            \"s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 \" +\n            \"s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 \" +\n            \"s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 \" +\n            \"s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 \" +\n            \"s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n          <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        </g>\n        <g>\n          <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n          <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n          <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n          <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JSONIcon;\n","import AbstractGraphExporter from 'modules/abstract/exporter/AbstractGraphExporter.js';\n\nimport JSONFileIcon from 'icons/flat/JSONIcon.js';\nimport { JSON as JSONGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport Downloader from 'util/Downloader.js';\n\nclass FSAGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  fromJSON(data, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n    const machineBuilder = machineController.getMachineBuilder();\n    const graph = graphController.getGraph();\n\n    const metadata = '_metadata' in data ? data['_metadata'] : {};\n    const newGraph = JSONGraphParser.parse(data.graphData, graph);\n\n    //HACK: this should be calculated elsewhere\n    const machineData = data.machineData;\n    const machineName = machineData.name;\n    if (machineName) machineController.setMachineName(machineName);\n    const machineType = machineData.type;\n    if (machineType) machineController.setMachineType(machineType);\n    const customSymbols = machineData.symbols;\n    if (customSymbols)\n    {\n      machineBuilder._symbols.length = 0;\n      for(const symbol of customSymbols)\n      {\n        machineBuilder._symbols.push(symbol);\n      }\n    }\n    const statePrefix = machineData.statePrefix;\n    if (statePrefix) machineBuilder.getLabeler().prefix = statePrefix;\n\n    return newGraph;\n  }\n\n  toJSON(graphData, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    const dst = {};\n    dst[\"_metadata\"] = {\n      module: module.getModuleName(),\n      version: process.env.VERSION + \":\" + module.getModuleVersion(),\n      timestamp: new Date().toString()\n    };\n    dst[\"graphData\"] = graphData;\n    dst[\"machineData\"] = {\n      name: machineController.getMachineName(),\n      type: machineController.getMachineType(),\n      symbols: machineController.getCustomSymbols(),\n      statePrefix: machineBuilder.getLabeler().prefix\n    };\n    return dst;\n  }\n\n  //Override\n  importFromData(data, module)\n  {\n    this.fromJSON(data, module);\n  }\n\n  //Override\n  exportToData(module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const result = this.toJSON(graphData, module);\n    return result;\n  }\n\n  //Override\n  doesSupportData()\n  {\n    return true;\n  }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const jsonData = JSON.parse(data);\n\n          this.fromJSON(jsonData, module);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const dst = this.toJSON(graphData, module);\n    const jsonString = JSON.stringify(dst);\n    Downloader.downloadText(filename + '.' + this.getFileType(), jsonString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.machine.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.machine\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"json\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return JSONFileIcon;\n  }\n}\n\nexport default FSAGraphExporter;\n","//https://www.flaticon.com/free-icon/xml_136526\nimport React from 'react';\n\nclass XMLIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"xml-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#F29C1F\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z\"/>\n          <path fill=\"#FFFFFF\" d=\"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z\"/>\n        </g>\n        <path fill=\"#F29C1F\" d=\"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default XMLIcon;\n","import AbstractGraphExporter from 'modules/abstract/exporter/AbstractGraphExporter.js';\n\nimport XMLFileIcon from 'icons/flat/XMLIcon.js';\nimport { XML as XMLGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport Downloader from 'util/Downloader.js';\n\nclass JFLAPGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const xmlData = new DOMParser().parseFromString(data, \"text/xml\");\n          XMLGraphParser.parse(xmlData, graph);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = XMLGraphParser.objectify(graph);\n    const xmlString = new XMLSerializer().serializeToString(graphData);\n    Downloader.downloadText(filename + '.' + this.getFileType(), xmlString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.jff.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.jff\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"jff\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return XMLFileIcon;\n  }\n}\n\nexport default JFLAPGraphExporter;\n","import AbstractModule from 'modules/abstract/AbstractModule.js';\n\nimport Notifications from 'system/notification/Notifications.js';\n\nimport OverviewPanel from './panels/overview/OverviewPanel.js';\nimport TestingPanel from './panels/testing/TestingPanel.js';\nimport AnalysisPanel from './panels/analysis/AnalysisPanel.js';\nimport AboutPanel from './panels/about/AboutPanel.js';\n\nimport InputController from './controller/InputController.js';\nimport GraphController from './controller/GraphController.js';\nimport MachineController from './controller/MachineController.js';\n\nimport FSAGraphRenderer from './renderer/FSAGraphRenderer.js';\nimport FSAGraphOverlayRenderer from './renderer/FSAGraphOverlayRenderer.js';\nimport ViewportRenderer from './renderer/ViewportRenderer.js';\n\nimport FSABuilder from './builder/FSABuilder.js';\nimport GraphLayout from './graph/GraphLayout.js';\nimport EventManager from './EventManager.js';\nimport LabelEditor from './editor/LabelEditor.js';\nimport TestingManager from './testing/TestingManager.js';\n\nimport FSAGraphExporter from './exporter/FSAGraphExporter.js';\nimport JFLAPGraphExporter from './exporter/JFLAPGraphExporter.js';\n\nconst VERSION = \"0.0.1\";\nconst PANELS = [AboutPanel, TestingPanel, OverviewPanel, AnalysisPanel];\nconst EXPORTERS = [\n  new FSAGraphExporter(),\n  new JFLAPGraphExporter()\n];\n\nclass FSAModule extends AbstractModule\n{\n  constructor(app)\n  {\n    super(app);\n\n    this._workspace = null;\n\n    this._refreshRate = 60;\n    this._ticks = 0;\n\n    this._inputController = new InputController(this, app.getInputAdapter());\n    this._graphController = new GraphController(this);\n    this._machineController = new MachineController(this);\n\n    this._machineBuilder = new FSABuilder(this._graphController.getGraph());\n\n    this._eventManager = new EventManager(app.getUndoManager());\n    this._testingManager = new TestingManager();\n  }\n\n  //Override\n  initialize(app)\n  {\n    super.initialize(app);\n\n    const viewport = app.viewport;\n    const workspace = app.workspace;\n\n    this._workspace = workspace;\n\n    this._inputController.initialize(this);\n    this._graphController.initialize(this);\n    this._machineController.initialize(this);\n\n    this._machineBuilder.initialize(this);\n\n    this._eventManager.initialize(this);\n\n    this._testingManager.initialize(this, viewport);\n\n    //Notify on create in delete mode\n    const tryCreateWhileTrash = () => {\n      if (this._inputController.isTrashMode())\n      {\n        Notifications.addMessage(I18N.toString(\"message.warning.cannotmodify\"), \"warning\", \"tryCreateWhileTrash\");\n      }\n    };\n    this._graphController.on(\"tryCreateWhileTrash\", tryCreateWhileTrash);\n  }\n\n  //Override\n  destroy(app)\n  {\n    this._testingManager.destroy();\n\n    this._eventManager.destroy();\n\n    this._machineBuilder.destroy();\n\n    this._machineController.destroy();\n    this._graphController.destroy();\n    this._inputController.destroy();\n\n    super.destroy(app);\n  }\n\n  //Override\n  update(app)\n  {\n    this._inputController.update(this);\n    this._graphController.update(this);\n\n    if (--this._ticks <= 0)\n    {\n      this._machineBuilder.update(this);\n      this._ticks = this._refreshRate;\n    }\n  }\n\n  getGraph()\n  {\n    return this._graphController.getGraph();\n  }\n\n  getTestingManager()\n  {\n    return this._testingManager;\n  }\n\n  getDefaultGraphLayout()\n  {\n    return GraphLayout;\n  }\n\n  getMachineBuilder()\n  {\n    return this._machineBuilder;\n  }\n\n  getLabelFormatter()\n  {\n    return this._machineBuilder.formatAlphabetString.bind(this._machineBuilder);\n  }\n\n  getLabelEditor()\n  {\n    return LabelEditor;\n  }\n\n  //Override\n  getRenderer(renderLayer)\n  {\n    switch(renderLayer)\n    {\n      case \"graph\":\n        return FSAGraphRenderer;\n      case \"graphoverlay\":\n        return FSAGraphOverlayRenderer;\n      case \"viewport\":\n        return ViewportRenderer;\n    }\n    return null;\n  }\n  //Override\n  getInputController() { return this._inputController; }\n  //Override\n  getGraphController() { return this._graphController; }\n  //Override\n  getMachineController() { return this._machineController; }\n  //Override\n  getDefaultGraphExporter() { return EXPORTERS[0]; }\n  //Override\n  getGraphExporters() { return EXPORTERS; }\n  //Override\n  getModuleVersion() { return VERSION; }\n  //Override\n  getModulePanels() { return PANELS; }\n  //Override\n  getModuleName() { return \"fsa\"; }\n  //Override\n  getLocalizedModuleName() { return this._machineBuilder.getMachineType(); }\n}\nexport default FSAModule;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor(adapter, element, viewport)\n  {\n    this._adapter = adapter;\n    this._element = element;\n    this._viewport = viewport;\n\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n    return this;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is mutable.\n   */\n  getInputEventPosition()\n  {\n    return this._inputpos;\n  }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput()\n  {\n    this._active = false;\n  }\n\n  isActive()\n  {\n    return this._active;\n  }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * The DOM element for which this pointer provides context for; this should be\n   * the same element as in the input adapter.\n   */\n  getElement()\n  {\n    return this._element;\n  }\n\n  /**\n   * The viewport for this pointer operates within; this should be the same\n   * viewport as in the input adapter.\n   */\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  /**\n   * The input adapter that controls this pointer's properties\n   */\n  getAdapter()\n  {\n    return this._adapter;\n  }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale)\n  {\n    this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale));\n  }\n\n  addScale(dscale)\n  {\n    this._scaleFactor += dscale;\n\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    else if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n  }\n\n  getOffsetX()\n  {\n    return this._offsetX;\n  }\n\n  getOffsetY()\n  {\n    return this._offsetY;\n  }\n\n  getOffsetDamping()\n  {\n    return this._offsetDamping;\n  }\n\n  getScale()\n  {\n    return this._scaleFactor;\n  }\n\n  getMinScale()\n  {\n    return this._minScale;\n  }\n\n  getMaxScale()\n  {\n    return this._maxScale;\n  }\n\n  getElement()\n  {\n    return this._element;\n  }\n}\n\nexport default ViewportAdapter;\n","import Config from 'config.js';\n\nimport InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\n/**\n * Provides an interface for InputController to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._controller = null;\n    this._element = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n    this._pointer = null;\n\n    this._viewport = new ViewportAdapter();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = Config.LONG_TAP_TICKS;\n    this._dblInputDelay = Config.DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = Config.SCROLL_SENSITIVITY;\n    this._minTapRadius = Config.CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = Config.CURSOR_RADIUS_SQU + Config.DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  setController(controller)\n  {\n    this._controller = controller;\n    return this;\n  }\n\n  initialize(element)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Missing SVG element for input adapter's viewport\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._viewport.setElement(this._element = element);\n    this._pointer = new InputPointer(this, this._element, this._viewport);\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  update()\n  {\n    //Smooth transition offset\n    this._viewport.update();\n  }\n\n  onMouseDown(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this._controller) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    this._pointer.setPosition(mouse.x, mouse.y);\n\n    //Can update target here for hover effects...\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this._controller) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    if (controller.onZoomChange(pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    if (!controller.onPreInputEvent(pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n        if (!controller.onDragStart(pointer))\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      controller.onDragMove(pointer);\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      controller.onDragStop(pointer);\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        controller.onAltInputEvent(pointer);\n      }\n      else\n      {\n        //Tap!\n        const result = controller.onInputEvent(pointer);\n\n        //If the input was not consumed...\n        if (!result)\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            controller.onDblInputEvent(pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  getActiveElement()\n  {\n    return this._element;\n  }\n\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  getPointerX()\n  {\n    return this._pointer ? this._pointer.x : 0;\n  }\n\n  getPointerY()\n  {\n    return this._pointer ? this._pointer.y : 0;\n  }\n\n  isPointerActive()\n  {\n    return this._pointer ? this._pointer.isActive() : false;\n  }\n\n  isUsingTouch()\n  {\n    return this._cursor._touchmove || this._cursor._touchend;\n  }\n\n  isAltInput()\n  {\n    return this._altinput;\n  }\n\n  isDragging()\n  {\n    return this._dragging;\n  }\n}\n\nexport default InputAdapter;\n","import React from 'react';\nimport './NotificationMessage.css';\n\nclass NotificationMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onExitMessage = this.onExitMessage.bind(this);\n  }\n\n  onExitMessage(e)\n  {\n    const message = this.props.value;\n    message.close();\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.value;\n    return <div className={\"notification-message-container notification-message-type-\" + message.getType() + \" \" + this.props.className}\n      id={this.props.id} style={this.props.style}>\n      { this.props.children || message.value.split(\"\\\\n\").map(e => <p key={e}>{e}</p>) || message }\n      <button onClick={this.onExitMessage}>{I18N.toString(\"message.action.close\")}</button>\n    </div>;\n  }\n}\nexport default NotificationMessage;\n","import React from 'react';\nimport './NotificationView.css';\n\nimport NotificationMessage from './NotificationMessage.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return <div className={\"notification-container \" + this.props.className} id={this.props.id} style={this.props.style}>\n    {\n      notificationManager.getMessages().map(e => {\n        const id = e.getID();\n        const ComponentClass = e.getComponentClass();\n        const componentProps = e.getComponentProps() || {};\n\n        return <NotificationMessage key={id} value={e}>\n        { ComponentClass && <ComponentClass message={e} {...componentProps}/> }\n        </NotificationMessage>;\n      })\n    }\n    </div>;\n  }\n}\nexport default NotificationView;\n","import React from 'react';\nimport './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconButton;\n","import { guid } from 'util/MathHelper.js';\n\nclass Message\n{\n  constructor(handler, value, type, tags, componentClass, componentProps)\n  {\n    this._handler = handler;\n    this._id = guid();\n    this._type = type;\n\n    this.value = value;\n    this.tags = tags;\n    this.componentClass = componentClass;\n    this.componentProps = componentProps;\n  }\n\n  close()\n  {\n    const messages = this._handler.getMessages();\n    const index = messages.indexOf(this);\n    if (index < 0) throw new Error(\"Trying to close an unopened notification message\");\n    messages.splice(index, 1);\n  }\n\n  getType()\n  {\n    return this._type;\n  }\n\n  getID()\n  {\n    return this._id;\n  }\n\n  getComponentClass()\n  {\n    return this.componentClass;\n  }\n\n  getComponentProps()\n  {\n    return this.componentProps;\n  }\n\n  hasTag(tag)\n  {\n    return this.tags.indexOf(tag) >= 0;\n  }\n}\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._messageQueue = [];\n  }\n\n  addMessage(value, type=null, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    if (tags && shouldReplaceRelated)\n    {\n      this.clearMessages(tags);\n    }\n\n    const result = new Message(this, value, type || \"default\", tags || [], componentClass, componentProps);\n    this._messageQueue.unshift(result);\n  }\n\n  addDefaultMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"default\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addErrorMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"error\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addWarningMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"warning\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  clearMessages(tags=null)\n  {\n    if (!tags)\n    {\n      this._messageQueue.length = 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      let message;\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            this._messageQueue.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  hasMessages(tags=null)\n  {\n    if (!tags)\n    {\n      return this._messageQueue.length >= 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }\n\n  getMessages()\n  {\n    return this._messageQueue;\n  }\n}\nexport default NotificationManager;\n","import NotificationManager from './NotificationManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new NotificationManager();\nexport default INSTANCE;\n","import LocalSaveManager from './LocalSaveManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new LocalSaveManager();\nexport default INSTANCE;\n","class LocalSaveManager\n{\n  constructor()\n  {\n    this._handlers = new Set();\n    this._intervalID = null;\n    this._intervalMillis = 1000;\n\n    this._init = false;\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n  }\n\n  setAutoSaveInterval(millis)\n  {\n    if (!millis || millis <= 0) throw new Error(\"AutoSave interval must be greater than 0\");\n    this._intervalMillis = millis;\n  }\n\n  registerHandler(handler)\n  {\n    if (this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot register handler, since it is already registered\");\n    }\n    this._handlers.add(handler);\n  }\n\n  unregisterHandler(handler)\n  {\n    if (!this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot remove handler, since it is not yet registered\");\n    }\n    this._handlers.delete(handler);\n  }\n\n  initialize()\n  {\n    if (this._init) throw new Error(\"Cannot initialize LocalSave, since it is already initialized\");\n\n    if (this.doesSupportLocalStorage())\n    {\n      //Prepare autosave\n      this._intervalID = setInterval(this.onIntervalUpdate, this._intervalMillis);\n      this._init = true;\n    }\n    else\n    {\n      //Does not support local storage, so ignore everything...\n    }\n  }\n\n  terminate()\n  {\n    if (!this._init) throw new Error(\"Cannot terminate LocalSave, since it is not yet initialized\");\n\n    clearInterval(this._intervalID);\n\n    this._handlers.clear();\n    this._init = false;\n  }\n\n  onIntervalUpdate()\n  {\n    //Save most recent save for all registered handlers\n    for(let handler of this._handlers)\n    {\n      try\n      {\n        handler.onAutoSave();\n      }\n      catch(e)\n      {\n        console.error(e);\n      }\n    }\n  }\n\n  setStringToStorage(saveKey, stringData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n    if (stringData.length > 0)\n    {\n      localStorage.setItem(saveKey, stringData);\n    }\n    else\n    {\n      localStorage.removeItem(saveKey);\n    }\n  }\n\n  getStringFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return \"\";\n    return localStorage.getItem(saveKey) || \"\";\n  }\n\n  loadFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return null;\n    try\n    {\n      const value = localStorage.getItem(saveKey);\n      if (value && value.length > 0)\n      {\n        return JSON.parse(value);\n      }\n      else\n      {\n        return null;\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n      return {};\n    }\n  }\n\n  saveToStorage(saveKey, jsonData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    let hidden, visibilityChange;\n\n    // Opera 12.10 and Firefox 18 and later support\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    if (document[hidden])\n    {\n      //Don't save anything...\n      return;\n    }\n\n    try\n    {\n      if (typeof jsonData == 'object')\n      {\n        let flag = jsonData;\n        if (flag)\n        {\n          flag = false;\n\n          //Don't save empty objects, cause that is wasteful.\n          for(let key in jsonData)\n          {\n            if (jsonData.hasOwnProperty(key))\n            {\n              flag = true;\n              break;\n            }\n          }\n        }\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, JSON.stringify(jsonData));\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n      else if (typeof jsonData == 'string')\n      {\n        const flag = jsonData.length <= 0;\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, jsonData);\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n    }\n  }\n\n  existsInStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return false;\n    return localStorage.getItem(saveKey) != null;\n  }\n\n  clearStorage()\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    localStorage.clear();\n  }\n\n  doesSupportLocalStorage()\n  {\n    //check if browser support local storage\n    return typeof Storage !== 'undefined';\n  }\n}\nexport default LocalSaveManager;\n","import React from 'react';\nimport './Viewport.css';\n\nconst VIEWPORT_RENDER_LAYER = \"viewport\";\n\nclass Viewport extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.labelEditor = null;\n\n    this.state = {\n      prevMode: Viewport.NORMAL,\n      mode: Viewport.NORMAL\n    };\n  }\n\n  //Override\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const ViewportRenderer = currentModule.getRenderer(VIEWPORT_RENDER_LAYER);\n\n    return <div className={\"viewport-container viewport-\" + this.state.mode} ref={ref=>this.ref=ref}>\n      { ViewportRenderer &&\n        <ViewportRenderer {...this.props} parent={this}/>}\n    </div>;\n  }\n}\nViewport.NORMAL = \"normal\";\nViewport.WAITING = \"waiting\";\nViewport.TESTING = \"testing\";\nViewport.DANGEROUS = \"dangerous\";\n\nexport default Viewport;\n","export function guid()\n{\n  function s4()\n  {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexport function lerp(a, b, dt)\n{\n  return a * (1 - dt) + b * dt;\n};\n\nexport function stringHash(value=\"\")\n{\n  let hash = 0;\n  for(let i = 0, len = value.length; i < len; i++)\n  {\n    hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n  }\n  return hash;\n};\n","class Downloader\n{\n  static downloadText(filename, data)\n  {\n    Downloader.downloadURL(filename, Downloader.getTextDataURI(data));\n  }\n\n  static downloadSVG(filename, filetype, svg, width, height)\n  {\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], {type:'image/svg+xml'});\n    const url = URL.createObjectURL(blob);\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext(\"2d\");\n    const pixelRatio = window.devicePixelRatio || 1;\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n    const image = new Image();\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0);\n      URL.revokeObjectURL(url);\n\n      const imageURI = canvas.toDataURL('image/' + filetype).replace('image/' + filetype, 'image/octet-stream');\n      Downloader.downloadURL(filename + '.' + filetype, imageURI);\n    };\n    image.src = url;\n  }\n\n  static downloadURL(filename, url)\n  {\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(\";\");\n    url = url.substring(0, headerIndex + 1) + \"headers=Content-Disposition%3A%20attachment%3B%20filename=\" + filename + \";\" + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  static getTextDataURI(data)\n  {\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n  }\n}\n\nexport default Downloader;\n"],"sourceRoot":""}