{"version":3,"sources":["webpack:///./src/app/content/viewport/Viewport.js","webpack:///./src/app/util/Downloader.js","webpack:///./src/app/icons/flat/JSONIcon.js","webpack:///./src/app/modules/base/AbstractInputController.js","webpack:///./src/app/modules/base/AbstractGraphController.js","webpack:///./src/app/graph/NodalGraph.js","webpack:///./src/app/graph/GraphNode.js","webpack:///./src/app/graph/GraphEdge.js","webpack:///./src/app/icons/UploadIcon.js","webpack:///./src/app/icons/SaveIcon.js","webpack:///./src/app/icons/UndoIcon.js","webpack:///./src/app/icons/RedoIcon.js","webpack:///./src/app/icons/IconToggle.js","webpack:///./src/app/icons/DropDownIcon.js","webpack:///./src/app/modules/base/exporter/GraphImporter.js","webpack:///./src/app/icons/flat/PNGIcon.js","webpack:///./src/app/icons/flat/JPGIcon.js","webpack:///./src/app/modules/base/exporter/GraphImageExporter.js","webpack:///./src/app/modules/base/AbstractModule.js","webpack:///./src/app/config.js","webpack:///./src/app/system/notification/NotificationManager.js","webpack:///./src/app/system/notification/Notifications.js","webpack:///./src/app/icons/IconButton.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/modules/base/exporter/AbstractGraphExporter.js","webpack:///./src/app/graph/GraphElement.js","webpack:///./src/app/router.js","webpack:///./src/app/content/Modules.js","webpack:///./src/app/modules/default/DefaultGraphExporter.js","webpack:///./src/app/modules/default/DefaultInputController.js","webpack:///./src/app/modules/default/DefaultGraphController.js","webpack:///./src/app/modules/base/AbstractMachineController.js","webpack:///./src/app/modules/default/DefaultMachineController.js","webpack:///./src/app/modules/default/DefaultModule.js","webpack:///./src/app/content/HotKeys.js","webpack:///./src/app/system/localsave/LocalSave.js","webpack:///./src/app/system/localsave/LocalSaveManager.js","webpack:///./src/app/content/toolbar/UploadButton.js","webpack:///./src/app/content/toolbar/HelpButton.js","webpack:///./src/app/content/toolbar/MachineName.js","webpack:///./src/app/icons/PageNewIcon.js","webpack:///./src/app/icons/HelpIcon.js","webpack:///./src/app/icons/LanguageIcon.js","webpack:///./src/app/icons/OfflineIcon.js","webpack:///./src/app/icons/BugReportIcon.js","webpack:///./src/app/content/drawer/DrawerExpander.js","webpack:///./src/app/content/drawer/panels/exporting/ExportingPanel.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/system/styleopt/StyleOptionRegistry.js","webpack:///./src/app/system/styleopt/components/StyleInput.js","webpack:///./src/app/content/drawer/panels/options/OptionGroup.js","webpack:///./src/app/content/drawer/panels/options/OptionHotkey.js","webpack:///./src/app/content/drawer/panels/options/OptionsPanel.js","webpack:///./src/app/content/drawer/Drawer.js","webpack:///./src/app/content/toolbar/Toolbar.js","webpack:///./src/app/content/workspace/Subtitle.js","webpack:///./src/app/content/workspace/Workspace.js","webpack:///./src/app/tutorial/Tutorial.js","webpack:///./src/app/system/inputadapter/InputPointer.js","webpack:///./src/app/system/inputadapter/ViewportAdapter.js","webpack:///./src/app/system/inputadapter/InputAdapter.js","webpack:///./src/app/system/notification/components/NotificationMessage.js","webpack:///./src/app/system/notification/components/NotificationView.js","webpack:///./src/app/system/undomanager/UndoManager.js","webpack:///./src/app/content/App.js","webpack:///./src/app/landing/components/Logo.js","webpack:///./src/app/landing/components/Quote.js","webpack:///./src/app/landing/components/LandingPage.js","webpack:///./src/app/index.js"],"names":["Viewport","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","ref","labelEditor","state","prevMode","NORMAL","mode","React","Component","_this2","app","screen","currentModule","getCurrentModule","inputController","getInputController","graphController","getGraphController","machineController","getMachineController","LabelEditor","getLabelEditor","ViewportRenderer","getRenderer","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","viewport","WAITING","TESTING","DANGEROUS","Downloader","filename","data","downloadURL","getTextDataURI","filetype","svg","width","height","svgString","XMLSerializer","serializeToString","blob","Blob","type","url","URL","createObjectURL","canvas","document","ctx","getContext","pixelRatio","window","devicePixelRatio","style","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageURI","toDataURL","replace","src","element","headerIndex","indexOf","substring","setAttribute","display","body","appendChild","click","removeChild","encodeURIComponent","JSONIcon","xmlns","viewBox","fill","d","points","cx","cy","r","AbstractInputController","module","inputAdapter","_module","_inputAdapter","setController","pointer","onInputEvent","zoomValue","prevValue","AbstractGraphController","graph","_graph","NodalGraph","_nodes","_edges","_nodeMapping","Map","_edgeMapping","x","arguments","length","undefined","y","id","result","GraphNode","guid","i","push","set","getGraphElementID","node","elementID","get","splice","delete","j","len","nullSourceEdges","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","edge","value","getSourceNode","getDestinationNode","changeDestinationNode","err","return","_i","deleteEdge","setGraphElementID","clear","index","label","dst","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getNodeLabel","from","to","GraphEdge","clearEdges","clearNodes","getNodeCount","getEdgeCount","minX","minY","maxX","maxY","minNX","Number","MAX_VALUE","minNY","maxNX","MIN_VALUE","maxNY","maxNodeSize","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","size","getNodeSize","Math","min","max","minEX","minEY","maxEX","maxEY","startPoint","endPoint","centerPoint","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","getStartPoint","getEndPoint","getCenterPoint","sx","sy","ex","ey","usePosition","string","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","getHashString","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","stringHash","_label","GraphElement","_get","prototype","floor","Error","_from","_to","HALFPI","PI","isPlaceholder","dy","dx","atan2","halfPlaceholderLength","getPlaceholderLength","placeholderLength","UploadIcon","SaveIcon","UndoIcon","RedoIcon","IconToggle","open","defaultValue","onClick","bind","_assertThisInitialized","e","setState","prev","title","disabled","children","DropDownIcon","GraphImporter","fileBlob","File","Promise","reject","fileName","name","exporters","getGraphExporters","_loop","exporter","canImport","doesSupportFile","endsWith","getFileType","catch","importFromFile","console","error","_loop2","doesSupportData","importFromData","JSON","stringify","map","PNGIcon","PNGIcon_classCallCheck","react_default","JPGIcon","JPGIcon_classCallCheck","JPGIcon_possibleConstructorReturn","JPGIcon_getPrototypeOf","GraphImageExporter","imageType","GraphImageExporter_classCallCheck","GraphImageExporter_possibleConstructorReturn","GraphImageExporter_getPrototypeOf","_imageType","AbstractGraphExporter","workspace","workspaceDim","baseVal","getSVGForExport","downloadSVG","I18N","toString","DEFAULT_PANELS","DEFAULT_GRAPH_EXPORTERS","DEFAULT_IMAGE_EXPORTERS","AbstractModule","AbstractModule_classCallCheck","_importer","renderLayer","getModuleName","__webpack_require__","__webpack_exports__","loadConfig","saveConfig","LOCAL_STORAGE_ID","cfg","jsonString","localStorage","getItem","log","jsonData","parse","clearConfig","Object","assign","_userDefined","_dirty","setItem","removeItem","_resetOnLoad","setValue","key","hasOwnProperty","MACHINE_ERRORS_MESSAGE_TAG","MACHINE_CONVERSION_MESSAGE_TAG","ERROR_CHECK_INTERVAL","GRAPH_IMMEDIATE_INTERVAL","SMOOTH_OFFSET_DAMPING","SCROLL_SENSITIVITY","MIN_SCALE","MAX_SCALE","INIT_WAITTIME","STR_TRANSITION_DEFAULT_LABEL","STR_STATE_LABEL","PARALLEL_EDGE_HEIGHT","SELF_LOOP_HEIGHT","SUBMIT_KEY","CLEAR_KEY","TAB_KEY","UP_KEY","DOWN_KEY","DELETE_KEY","DELETE_FORWARD_KEY","DEFAULT_GRAPH_SIZE","NODE_RADIUS","NODE_RADIUS_SQU","NODE_DIAMETER","NODE_RADIUS_INNER","INITIAL_MARKER_OFFSET_X","EDGE_RADIUS","EDGE_RADIUS_SQU","ARROW_WIDTH","PLACEHOLDER_LENGTH","ENDPOINT_RADIUS","ENDPOINT_RADIUS_SQU","HOVER_RADIUS_OFFSET","CURSOR_RADIUS","CURSOR_RADIUS_SQU","DOUBLE_TAP_TICKS","LONG_TAP_TICKS","SPAWN_RADIUS","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","DRAGGING_BUFFER","DRAGGING_BUFFER_SQU","PADDING_RADIUS_SQU","Message","handler","tags","componentClass","componentProps","_handler","_id","_type","messages","getMessages","tag","INSTANCE","NotificationManager","_messageQueue","shouldReplaceRelated","clearMessages","unshift","addMessage","message","Array","isArray","hasTag","IconButton","s4","random","hash","imul","charCodeAt","getLabel","toUpperCase","graphElementID","ROUTER","_current","routeTo","component","getCurrentPage","Modules","version","fetch","callback","all","then","_ref","_","default","DefaultGraphExporter","resolve","DefaultInputController","DefaultInputController_classCallCheck","DefaultInputController_possibleConstructorReturn","DefaultInputController_getPrototypeOf","DefaultGraphController","DefaultGraphController_classCallCheck","DefaultGraphController_possibleConstructorReturn","DefaultGraphController_getPrototypeOf","AbstractMachineController","machine","AbstractMachineController_classCallCheck","_machine","DefaultMachineController","DefaultMachineController_classCallCheck","DefaultMachineController_possibleConstructorReturn","DefaultMachineController_getPrototypeOf","_machineName","DefaultModule","DefaultModule_classCallCheck","DefaultModule_getPrototypeOf","_exporter","_inputController","DefaultModule_assertThisInitialized","getInputAdapter","_graphController","_machineController","HotKeys","HotKeys_classCallCheck","toolbar","undoManager","onKeyDown","getUndoManager","addEventListener","removeEventListener","event","which","metaKey","ctrlKey","getDefaultGraphExporter","machineName","getMachineName","exportToFile","preventDefault","stopPropagation","shiftKey","redo","undo","imageExporters","getImageExporters","imageExporter","LocalSaveManager","LocalSaveManager_classCallCheck","_handlers","Set","_intervalID","_intervalMillis","_init","onIntervalUpdate","millis","has","add","doesSupportLocalStorage","setInterval","clearInterval","onAutoSave","saveKey","stringData","hidden","msHidden","webkitHidden","LocalSaveManager_typeof","flag","Storage","UploadButton","UploadButton_classCallCheck","UploadButton_getPrototypeOf","onUploadFileChange","UploadButton_assertThisInitialized","files","target","getGraphImporter","importFile","Notifications","addErrorMessage","inputID","onChange","accept","getImportFileTypes","join","htmlFor","HelpButton","HelpButton_classCallCheck","HelpButton_getPrototypeOf","HelpButton_assertThisInitialized","hasMessages","MachineName","MachineName_classCallCheck","MachineName_getPrototypeOf","MachineName_assertThisInitialized","onFocus","onBlur","blur","onSubmit","PageNewIcon","PageNewIcon_classCallCheck","PageNewIcon_possibleConstructorReturn","PageNewIcon_getPrototypeOf","HelpIcon","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","LanguageIcon","LanguageIcon_classCallCheck","LanguageIcon_possibleConstructorReturn","LanguageIcon_getPrototypeOf","OfflineIcon","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","BugReportIcon","BugReportIcon_classCallCheck","BugReportIcon_possibleConstructorReturn","BugReportIcon_getPrototypeOf","DrawerExpander","DrawerExpander_classCallCheck","DrawerExpander_getPrototypeOf","DrawerExpander_assertThisInitialized","isFullscreen","isOpen","closeDrawer","openDrawer","ExportingPanel","ExportingPanel_classCallCheck","ExportingPanel_possibleConstructorReturn","ExportingPanel_getPrototypeOf","container","getTitle","getIconComponentClass","_this3","graphExporters","renderExporterButton","UNLOCALIZED_NAME","ColorHelper","hex","startsWith","slice","red","green","blue","parseInt","g","b","h","s","v","f","p","q","t","StyleOption","elementSource","propName","inputType","groupName","StyleOptionRegistry_classCallCheck","prop","group","_callback","_value","_defaultValue","computedStyle","shouldPropagateChange","getComputedStyle","newValue","getPropertyValue","trim","setStyle","val","setProperty","StyleOptionRegistry","_options","_groups","changeCallback","option","computedStyles","values","updateStyle","StyleInput","StyleInput_classCallCheck","StyleInput_getPrototypeOf","StyleInput_assertThisInitialized","getStyle","OptionGroup","OptionGroup_classCallCheck","OptionGroup_possibleConstructorReturn","OptionGroup_getPrototypeOf","dropdown","createRef","pointerEvents","OptionHotkey","OptionHotkey_classCallCheck","OptionHotkey_possibleConstructorReturn","OptionHotkey_getPrototypeOf","keyName","OptionsPanel","OptionsPanel_classCallCheck","OptionsPanel_getPrototypeOf","styleOpts","theme","customTheme","skipWelcome","LocalSave","getStringFromStorage","onChangeTheme","OptionsPanel_assertThisInitialized","onChangeModule","root","getElementById","opts","invertFunc","opt","color","HEXtoRGB","RGBtoHSV","apply","concat","HSVtoRGB","RGBtoHEX","getOptionByProp","darkFunc","registerStyleOption","initialize","registerHandler","onLoadSave","registry","terminate","unregisterHandler","loadFromStorage","getOptions","isDefaultStyle","saveToStorage","prevTheme","resetStyle","panels_options_OptionGroup","panels_options_OptionHotkey","marginTop","checked","setStringToStorage","getPropsByGroup","components_StyleInput","DEFAULT_TAB_INDEX","MAX_PANEL_THRESHOLD","MIN_PANEL_SIZE","Drawer","Drawer_classCallCheck","Drawer_getPrototypeOf","tabIndex","dragging","onTouchStart","Drawer_assertThisInitialized","onMouseDown","onScroll","_ontouchmove","_ontouchend","updatePanelSize","touch","changedTouches","onStartDraggingDrawerBorder","clientX","clientY","ev","onStopDraggingDrawerBorder","onMouseMove","onMouseUp","InfoPanel","getDefaultModulePanel","onWheel","getModulePanels","PanelClass","panelID","content_drawer_DrawerExpander","setTab","matchMedia","matches","getBoundingClientRect","offsetHeight","offsetWidth","EXPORTING_PANEL_TAB_INDEX","OPTIONS_PANEL_TAB_INDEX","Toolbar","Toolbar_classCallCheck","Toolbar_getPrototypeOf","langOn","onMachineNameChange","Toolbar_assertThisInitialized","onMachineNameKeyDown","langOnClick","renameMachine","drawer","getGraph","offline","navigator","onLine","toolbar_MachineName","serviceWorker","getRegistration","alert","icons_OfflineIcon","getLocalizedModuleName","confirm","setMachineName","icons_PageNewIcon","toolbar_UploadButton","canUndo","canRedo","isEmpty","icons_BugReportIcon","toolbar_HelpButton","icons_HelpIcon","activeElement","icons_LanguageIcon","maxWidth","fetchLanguageFile","Subtitle","Subtitle_classCallCheck","Subtitle_possibleConstructorReturn","Subtitle_getPrototypeOf","active","messageTimer","setTimeout","Config","visible","textAnchor","Workspace","Workspace_classCallCheck","Workspace_possibleConstructorReturn","Workspace_getPrototypeOf","getViewport","offsetX","getOffsetX","offsetY","getOffsetY","bounds","getBoundingRect","w","EXPORT_PADDING_X","EXPORT_PADDING_Y","clone","cloneNode","uiElements","getElementsByClassName","remove","GraphRenderer","getGraphRenderer","GraphOverlayRenderer","getScale","halfSize","content_workspace_Subtitle","transform","x1","y1","x2","y2","stroke","Tutorial","Tutorial_classCallCheck","existsInStorage","InputPointer","adapter","InputPointer_classCallCheck","_adapter","_element","_viewport","_active","_x","_y","_inputpos","pos","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","ctm","getScreenCTM","dscale","InputAdapter","InputAdapter_classCallCheck","_controller","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_timer","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onContextMenu","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","controller","SVGElement","setElement","onTouchMove","update","cursor","focus","button","onInputDown","mouse","transformScreenToView","setPosition","onInputMove","onInputUp","deltaY","onZoomChange","setScale","onPreInputEvent","beginInput","onDragMove","getDistanceSquToInitial","onDragStart","cancelInputEvent","timer","clearTimeout","onDragStop","onAltInputEvent","dist","dt","Date","now","onDblInputEvent","endInput","onPostInputEvent","isActive","NotificationMessage","NotificationMessage_classCallCheck","NotificationMessage_getPrototypeOf","onExitMessage","NotificationMessage_assertThisInitialized","close","getType","split","NotificationView","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","notificationManager","getID","ComponentClass","getComponentClass","getComponentProps","notification_components_NotificationMessage","_extends","UndoManager","UndoManager_classCallCheck","history","offsetIndex","eventHandler","pop","applyUndo","applyRedo","App","App_classCallCheck","App_getPrototypeOf","setMinScale","setMaxScale","setOffsetDamping","App_assertThisInitialized","Module","destroy","hotKeys","tutorial","isDangerous","isWaitingForFile","onDragOver","onDragEnter","onDragLeave","onFileDrop","workspaceDOM","start","moduleName","exportToData","dataTransfer","items","file","kind","getAsFile","clearData","full","content_toolbar_Toolbar","notification_components_NotificationView","visibility","shouldHideContent","opacity","content_workspace_Workspace","content_drawer_Drawer","hot","Logo","Logo_classCallCheck","Logo_possibleConstructorReturn","Logo_getPrototypeOf","Quote","Quote_classCallCheck","Quote_possibleConstructorReturn","Quote_getPrototypeOf","QUOTES","QUOTE_INDEX","CONTENT_QUOTE","CONTENT_SUBQUOTE","LandingPage","LandingPage_classCallCheck","LandingPage_getPrototypeOf","footer","returnHome","onLaunchButton","LandingPage_assertThisInitialized","onTutorialButton","onReturnHomeButton","onReportBugButton","onAboutButton","onHelpButton","onGithubButton","onscroll","scrollHeight","documentElement","clientHeight","innerHeight","scroll","pageYOffset","round","bottom","Router","scrollTo","top","behavior","launchText","components_Logo","landing_components_Quote","requestAnimationFrame","updateApplication","returnValue","isUpdateAvailable","hasUpdate","FRAMES_PER_SECOND","prevtime","time","page","ReactDOM","render"],"mappings":"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","file":"app.bundle.449b923555330ee947b8.js","sourcesContent":["import React from 'react';\nimport './Viewport.css';\n\nconst VIEWPORT_RENDER_LAYER = \"viewport\";\n\nclass Viewport extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.labelEditor = null;\n\n    this.state = {\n      prevMode: Viewport.NORMAL,\n      mode: Viewport.NORMAL\n    };\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const screen = this.props.screen;\n    const currentModule = app.getCurrentModule();\n    const inputController = app.getInputController();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n\n    const LabelEditor = currentModule.getLabelEditor();\n    const ViewportRenderer = currentModule.getRenderer(VIEWPORT_RENDER_LAYER);\n\n    return <div className={\"viewport-container viewport-\" + this.state.mode} ref={ref=>this.ref=ref}>\n      { LabelEditor &&\n        <LabelEditor ref={ref=>this.labelEditor=ref}\n        inputController={inputController}\n        graphController={graphController}\n        machineController={machineController}\n        screen={screen}/> }\n      { ViewportRenderer &&\n        <ViewportRenderer\n        viewport={this}\n        app={app}/>}\n    </div>;\n  }\n}\nViewport.NORMAL = \"normal\";\nViewport.WAITING = \"waiting\";\nViewport.TESTING = \"testing\";\nViewport.DANGEROUS = \"dangerous\";\n\nexport default Viewport;\n","class Downloader\n{\n  static downloadText(filename, data)\n  {\n    Downloader.downloadURL(filename, Downloader.getTextDataURI(data));\n  }\n\n  static downloadSVG(filename, filetype, svg, width, height)\n  {\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], {type:'image/svg+xml'});\n    const url = URL.createObjectURL(blob);\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext(\"2d\");\n    const pixelRatio = window.devicePixelRatio || 1;\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n    const image = new Image();\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0);\n      URL.revokeObjectURL(url);\n\n      const imageURI = canvas.toDataURL('image/' + filetype).replace('image/' + filetype, 'image/octet-stream');\n      Downloader.downloadURL(filename + '.' + filetype, imageURI);\n    };\n    image.src = url;\n  }\n\n  static downloadURL(filename, url)\n  {\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(\";\");\n    url = url.substring(0, headerIndex + 1) + \"headers=Content-Disposition%3A%20attachment%3B%20filename=\" + filename + \";\" + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  static getTextDataURI(data)\n  {\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n  }\n}\n\nexport default Downloader;\n","//https://www.flaticon.com/free-icon/json-file_136525\nimport React from 'react';\n\nclass JSONIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"json-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 \" +\n            \"s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 \" +\n            \"s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 \" +\n            \"s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 \" +\n            \"s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 \" +\n            \"s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 \" +\n            \"s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 \" +\n            \"s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 \" +\n            \"c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 \" +\n            \"c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 \" +\n            \"s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 \" +\n            \"s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 \" +\n            \"s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 \" +\n            \"s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 \" +\n            \"s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 \" +\n            \"s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 \" +\n            \"s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 \" +\n            \"s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 \" +\n            \"s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 \" +\n            \"s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 \" +\n            \"s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n          <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        </g>\n        <g>\n          <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n          <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n          <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n          <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JSONIcon;\n","class AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    this._module = module;\n    this._inputAdapter = inputAdapter.setController(this);\n  }\n\n  initialize(app) {}\n  destroy(app) {}\n  update(app) {}\n\n  //Override\n  onPreInputEvent(pointer) { return false; }\n  //Override\n  onInputEvent(pointer) { return false; }\n  //Override\n  onAltInputEvent(pointer) { return this.onInputEvent(pointer); }\n  //Override\n  onDblInputEvent(pointer) { return false; }\n  //Override\n  onDragStart(pointer) { return false; }\n  //Override\n  onDragMove(pointer) { return false; }\n  //Override\n  onDragStop(pointer) { return false; }\n  //Override\n  onPostInputEvent(pointer) {}\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue) { return true; }\n\n  getInputAdapter()\n  {\n    return this._inputAdapter;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractInputController;\n","class AbstractGraphController\n{\n  constructor(module, graph)\n  {\n    this._module = module;\n    this._graph = graph;\n\n    //throw new Error(\"Missing implementation for graph controller \\'\" + this.getModule().getModuleName() + \"\\'\");\n  }\n\n  initialize(app) {}\n  destroy(app) {}\n  update(app) {}\n\n  getGraph()\n  {\n    return this._graph;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractGraphController;\n","import GraphNode from './GraphNode.js';\nimport GraphEdge from './GraphEdge.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\nclass NodalGraph\n{\n  constructor()\n  {\n    this._nodes = [];\n    this._edges = [];\n    this._nodeMapping = new Map();\n    this._edgeMapping = new Map();\n  }\n\n  /** NODES **/\n\n  createNode(x=0, y=0, id=null)\n  {\n    const result = new GraphNode(id || guid(), x, y);\n    const i = this._nodes.length;\n    this._nodes.push(result);\n    this._nodeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteNode(node)\n  {\n    const elementID = node.getGraphElementID();\n    const i = this._nodeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._nodes.splice(i, 1);\n      this._nodeMapping.delete(elementID);\n\n      //HACK: This is inefficient, you should convert everything to use only\n      //the map so the indicies would not need to be fixed in the array.\n      //Basically, get rid of this._nodes (you will have to change how setStartNode works)\n      for(let j = i, len = this._nodes.length; j < len; ++j)\n      {\n        this._nodeMapping.set(this._nodes[j].getGraphElementID(), j);\n      }\n\n      const nullSourceEdges = [];\n\n      //Remove connected edges\n      for(const edge of this._edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          nullSourceEdges.push(edge);\n        }\n        else if (edge.getDestinationNode() === node)\n        {\n          edge.changeDestinationNode(null);\n        }\n      }\n      for(const edge of nullSourceEdges)\n      {\n        this.deleteEdge(edge);\n      }\n    }\n  }\n  addNode(node)\n  {\n    if (!node.getGraphElementID()) node.setGraphElementID(guid());\n\n    const i = this._nodes.length;\n    this._nodes.push(node);\n    this._nodeMapping.set(node.getGraphElementID(), i);\n    return node;\n  }\n  clearNodes() { this._nodes.length = 0; this._nodeMapping.clear(); }\n  getNodeByElementID(elementID)\n  {\n    const index = this._nodeMapping.get(elementID);\n    return index >= 0 ? this._nodes[index] : null;\n  }\n  getNodesByLabel(label, dst=[])\n  {\n    for(const node of this._nodes)\n    {\n      if (node.getNodeLabel() == label) dst.push(node);\n    }\n    return dst;\n  }\n  getNodes() { return this._nodes; }\n  getNodeCount() { return this._nodes.length; }\n\n  /** EDGES **/\n\n  createEdge(from, to=null, id=null)\n  {\n    const result = new GraphEdge(id || guid(), from, to);\n    const i = this._edges.length;\n    this._edges.push(result);\n    this._edgeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteEdge(edge)\n  {\n    const elementID = edge.getGraphElementID();\n    const i = this._edgeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._edges.splice(i, 1);\n      this._edgeMapping.delete(elementID);\n\n      //HACK: This is inefficient, refer to deleteNode().\n      for(let j = i, len = this._edges.length; j < len; ++j)\n      {\n        this._edgeMapping.set(this._edges[j].getGraphElementID(), j);\n      }\n    }\n  }\n  addEdge(edge)\n  {\n    if (!edge.getGraphElementID()) edge.setGraphElementID(guid());\n\n    const i = this._edges.length;\n    this._edges.push(edge);\n    this._edgeMapping.set(edge.getGraphElementID(), i);\n    return edge;\n  }\n  clearEdges() { this._edges.length = 0; this._edgeMapping.clear(); }\n  getEdgeByElementID(elementID)\n  {\n    const index = this._edgeMapping.get(elementID);\n    return index >= 0 ? this._edges[index] : null;\n  }\n  getEdges() { return this._edges; }\n  getEdgeCount() { return this._edges.length; }\n\n  /** HELPER **/\n\n  clear()\n  {\n    this.clearEdges();\n    this.clearNodes();\n  }\n\n  isEmpty()\n  {\n    return this.getNodeCount() <= 0 && this.getEdgeCount() <= 0;\n  }\n\n  getBoundingRect()\n  {\n    if (this._nodes.length <= 0) return {\n      minX: 0,\n      minY: 0,\n      maxX: 1,\n      maxY: 1,\n      width: 1,\n      height: 1\n    };\n\n    var minNX = Number.MAX_VALUE;\n    var minNY = Number.MAX_VALUE;\n    var maxNX = Number.MIN_VALUE;\n    var maxNY = Number.MIN_VALUE;\n\n    var maxNodeSize = 0;\n    for(const node of this._nodes)\n    {\n      const x = node.x;\n      const y = node.y;\n      const size = node.getNodeSize();\n      if (size > maxNodeSize) maxNodeSize = size;\n\n      minNX = Math.min(minNX, x);\n      maxNX = Math.max(maxNX, x);\n\n      minNY = Math.min(minNY, y);\n      maxNY = Math.max(maxNY, y);\n    }\n\n    minNX -= maxNodeSize;\n    minNY -= maxNodeSize;\n    maxNX += maxNodeSize;\n    maxNY += maxNodeSize;\n\n    var minEX = Number.MAX_VALUE;\n    var minEY = Number.MAX_VALUE;\n    var maxEX = Number.MIN_VALUE;\n    var maxEY = Number.MIN_VALUE;\n\n    const startPoint = {x: 0, y: 0};\n    const endPoint = {x: 0, y: 0};\n    const centerPoint = {x: 0, y: 0};\n    for(const edge of this._edges)\n    {\n      //Will store into point objects...\n      edge.getStartPoint(startPoint);\n      edge.getEndPoint(endPoint);\n      edge.getCenterPoint(centerPoint);\n\n      const sx = startPoint.x;\n      const sy = startPoint.y;\n      const ex = endPoint.x;\n      const ey = endPoint.y;\n      const cx = centerPoint.x;\n      const cy = centerPoint.y;\n\n      minEX = Math.min(minEX, sx, ex, cx);\n      maxEX = Math.max(maxEX, sx, ex, cx);\n\n      minEY = Math.min(minEY, sy, ey, cy);\n      maxEY = Math.max(maxEY, sy, ey, cy);\n    }\n\n    const result = {\n      minX: Math.min(minNX, minEX),\n      minY: Math.min(minNY, minEY),\n      maxX: Math.max(maxNX, maxEX),\n      maxY: Math.max(maxNY, maxEY),\n      width: 0,\n      height: 0\n    };\n    result.width = result.maxX - result.minX;\n    result.height = result.maxY - result.minY;\n    return result;\n  }\n\n  //Gets a hash of the graph's current state. Can generally assume the hash will\n  //change if the graph's content has changed (including nodes and edges).\n  getHashCode(usePosition=true)\n  {\n    let string = \"\";\n    for(const node of this._nodes)\n    {\n      string += node.getHashString(usePosition) + \",\";\n    }\n    string += \"|\";\n    for(const edge of this._edges)\n    {\n      string += edge.getHashString(usePosition) + \",\";\n    }\n    return stringHash(string);\n  }\n}\n\nexport default NodalGraph;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphNode extends GraphElement\n{\n  constructor(id, x, y)\n  {\n    super(id);\n\n    this.x = x;\n    this.y = y;\n\n    this._label = \"\";\n  }\n\n  setNodeLabel(label)\n  {\n    this._label = label;\n    return this;\n  }\n\n  getNodeLabel()\n  {\n    return this._label;\n  }\n\n  getNodeSize()\n  {\n    return 10;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + Math.floor(this.x) + \",\" + Math.floor(this.y) + \".\" + this._label;\n    }\n    else\n    {\n      return super.getHashString(usePosition) + \":\" + this._label;\n    }\n  }\n}\n\nexport default GraphNode;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphEdge extends GraphElement\n{\n  constructor(id, from, to=null)\n  {\n    super(id);\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = from;\n    this._to = to;\n\n    this._label = \"\";\n  }\n\n  setSourceNode(node)\n  {\n    if (!node) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = node;\n    return this;\n  }\n\n  getSourceNode()\n  {\n    return this._from;\n  }\n\n  setDestinationNode(node)\n  {\n    this._to = node;\n    return this;\n  }\n\n  changeDestinationNode(node)\n  {\n    this._to = node;\n  }\n\n  getDestinationNode()\n  {\n    return this._to;\n  }\n\n  setEdgeLabel(label)\n  {\n    this._label = label;\n  }\n\n  getEdgeLabel()\n  {\n    return this._label;\n  }\n\n  getEdgeDirection()\n  {\n    const from = this._from;\n    const to = this._to;\n    const HALFPI = Math.PI / 2;\n    let result = 0;\n\n    if (this.isPlaceholder())\n    {\n      result = Math.PI / 4;\n    }\n    else\n    {\n      const dy = to.y - from.y;\n      const dx = to.x - from.x;\n      result = Math.atan2(dy, dx);\n    }\n\n    if (result > HALFPI || result < -HALFPI)\n    {\n      result += Math.PI;\n    }\n\n    return result;\n  }\n\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    dst.x = from.x;\n    dst.y = from.y;\n    return dst;\n  }\n\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n    if (this.isPlaceholder())\n    {\n      const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n      dst.x = from.x + halfPlaceholderLength;\n      dst.y = from.y + halfPlaceholderLength;\n    }\n    else\n    {\n      dst.x = from.x + (to.x - from.x) / 2;\n      dst.y = from.y + (to.y - from.y) / 2;\n    }\n    return dst;\n  }\n\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    if (this.isPlaceholder())\n    {\n      const from = this._from;\n      const placeholderLength = getPlaceholderLength();\n      dst.x = from.x + placeholderLength;\n      dst.y = from.y + placeholderLength;\n    }\n    else\n    {\n      const to = this._to;\n      dst.x = to.x;\n      dst.y = to.y;\n    }\n    return dst;\n  }\n\n  getPlaceholderLength()\n  {\n    return this._from.getNodeSize();\n  }\n\n  isPlaceholder()\n  {\n    return !this._to;\n  }\n\n  isSelfLoop()\n  {\n    return this._from === this._to;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    const src = this._from ? this._from.getHashString(usePosition) : \"\";\n    //HACK: to may be a pointer, which is not a node, so getHashString does not exist.\n    const dst = this._to ? this._to.getHashString ? this._to.getHashString(usePosition) : \"0\" : \"\";\n    return super.getHashString(usePosition) + \":\" + src + \",\" + dst + \".\" + this._label;\n  }\n}\n\nexport default GraphEdge;\n","import React from 'react';\n\nclass UploadIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"upload-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n    </svg>;\n  }\n}\n\nexport default UploadIcon;\n","import React from 'react';\n\nclass SaveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"save-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n    </svg>;\n  }\n}\n\nexport default SaveIcon;\n","import React from 'react';\n\nclass UndoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"undo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n    </svg>;\n  }\n}\n\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"redo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n    </svg>;\n  }\n}\n\nexport default RedoIcon;\n","import React from 'react';\nimport './IconToggle.css';\n\nclass IconToggle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: this.props.defaultValue || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    //Toggle state\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    });\n\n    //Call passed-in onClick listener\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button icon-toggle \" + (this.state.open ? \" open \" : \"\") + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconToggle;\n","import React from 'react';\n\nclass DropDownIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"dropdown-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M7 10l5 5 5-5z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default DropDownIcon;\n","class GraphImporter\n{\n  constructor(module)\n  {\n    this._module = module;\n  }\n\n  importFile(fileBlob, app)\n  {\n    if (!fileBlob) throw new Error(\"Unable to import null file\");\n    if (!(fileBlob instanceof File)) throw new Error(\"Unable to import object as file\");\n\n    let result = Promise.reject();\n    const fileName = fileBlob.name;\n    const exporters = this._module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportFile() && fileName.endsWith(exporter.getFileType()))\n      {\n        result = result.catch(e => exporter.importFromFile(fileBlob, app));\n      }\n    }\n\n    return result.catch(e => {\n      console.error(e);\n      throw new Error(\"Cannot find valid exporter for file: \" + fileName);\n    });\n  }\n\n  importData(data, app)\n  {\n    if (!data) throw new Error(\"Unable to import null data\");\n\n    let result = Promise.reject();\n    const exporters = this._module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportData())\n      {\n        result = result.catch(e => exporter.importFromData(data, app));\n      }\n    }\n\n    return result.catch(e => {\n      throw new Error(\"Cannot find valid exporter for data: \" + JSON.stringify(data));\n    });\n  }\n\n  getImportFileTypes()\n  {\n    return this._module.getGraphExporters().map(e => {\n      if (!e.canImport() || !e.doesSupportFile()) return null;\n      return '.' + e.getFileType();\n    });\n  }\n}\n\nexport default GraphImporter;\n","//https://www.flaticon.com/free-icon/png_136523\nimport React from 'react';\n\nclass PNGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"png-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <path fill=\"#659C35\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z\"/>\n          <path fill=\"#FFFFFF\" d={\"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z\"}/>\n        </g>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#88C057\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default PNGIcon;\n","//https://www.flaticon.com/free-icon/jpg_136524\nimport React from 'react';\n\nclass JPGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"jpg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#26B99A\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n        <path fill=\"#14A085\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 \" +\n            \"c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 \" +\n            \"c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 \" +\n            \"c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 \" +\n            \"s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 \" +\n            \"c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 \" +\n            \"c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 \" +\n            \"s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 \" +\n            \"c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 \" +\n            \"c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 \" +\n            \"v-1.121H39.5z\"}/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JPGIcon;\n","import AbstractGraphExporter from './AbstractGraphExporter.js';\n\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport Downloader from 'util/Downloader.js';\n\nclass GraphImageExporter extends AbstractGraphExporter\n{\n  constructor(imageType='png')\n  {\n    super();\n    this._imageType = imageType;\n  }\n\n  //Override\n  exportToFile(filename, app)\n  {\n    const workspace = app.workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    Downloader.downloadSVG(filename, this._imageType, svg, width, height);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return false;\n  }\n\n  //Override\n  getTitle()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png.hint\");\n      case 'jpg': return I18N.toString(\"file.export.jpg.hint\");\n      default: return super.getTitle();\n    }\n  }\n\n  //Override\n  getLabel()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png\");\n      case 'jpg': return I18N.toString(\"file.export.jpg\");\n      default: return super.getLabel();\n    }\n  }\n\n  //Override\n  getFileType()\n  {\n    return this._imageType;\n  }\n\n  //Override\n  getIconComponentClass()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return PNGIcon;\n      case 'jpg': return JPGIcon;\n      default: return null;\n    }\n  }\n}\n\nexport default GraphImageExporter;\n","import GraphImporter from './exporter/GraphImporter.js';\nimport GraphImageExporter from './exporter/GraphImageExporter.js';\n\nconst DEFAULT_PANELS = [];\nconst DEFAULT_GRAPH_EXPORTERS = [];\nconst DEFAULT_IMAGE_EXPORTERS = [\n  new GraphImageExporter('png'),\n  new GraphImageExporter('jpg')\n];\n\nclass AbstractModule\n{\n  constructor(app)\n  {\n    this._importer = new GraphImporter(this);\n  }\n\n  initialize(app) {}\n\n  destroy(app) {}\n\n  update(app) {}\n\n  getRenderer(renderLayer)\n  {\n    return null;\n  }\n\n  getInputController()\n  {\n    throw new Error(\"Missing input controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getGraphController()\n  {\n    throw new Error(\"Missing graph controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getMachineController()\n  {\n    throw new Error(\"Missing machine controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getDefaultGraphExporter()\n  {\n    const exporters = this.getGraphExporters();\n    if (exporters.length > 0) return exporters[0];\n\n    throw new Error(\"Missing default graph exporter for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getImageExporters()\n  {\n    return DEFAULT_IMAGE_EXPORTERS;\n  }\n\n  getGraphExporters()\n  {\n    return DEFAULT_GRAPH_EXPORTERS;\n  }\n\n  getGraphImporter()\n  {\n    return this._importer;\n  }\n\n  getGraphRenderer()\n  {\n    return null;\n  }\n\n  getDefaultModulePanel()\n  {\n    return null;\n  }\n\n  getModulePanels()\n  {\n    return DEFAULT_PANELS;\n  }\n\n  getModuleVersion()\n  {\n    return '0.0.0';\n  }\n\n  getModuleName()\n  {\n    throw new Error(\"Missing module name\");\n  }\n\n  getLocalizedModuleName()\n  {\n    return \"Module\";\n  }\n}\n\nexport default AbstractModule;\n","const LOCAL_STORAGE_ID = \"config\";\n\nconst cfg = {};\ncfg._resetOnLoad = false;\ncfg._userDefined = false;\ncfg._dirty = false;\ncfg.setValue = function(key, value) {\n  if (this.hasOwnProperty(key))\n  {\n    this._userDefined = true;\n    this._dirty = true;\n    this[key] = value;\n  }\n  else\n  {\n    throw new Error(\"Trying to assign value to non-existant key in config\");\n  }\n}.bind(cfg);\nexport default cfg;\n\n//Preferences\n\n//General\ncfg.MACHINE_ERRORS_MESSAGE_TAG = \"machineError\";\ncfg.MACHINE_CONVERSION_MESSAGE_TAG = \"machineConversion\";\n\ncfg.ERROR_CHECK_INTERVAL = 2000;\ncfg.GRAPH_IMMEDIATE_INTERVAL = 50;\n\n//Controller\ncfg.SMOOTH_OFFSET_DAMPING = 0.4;\ncfg.SCROLL_SENSITIVITY = 1.0 / 300.0;\ncfg.MIN_SCALE = 0.1;\ncfg.MAX_SCALE = 10;\n\n//Workspace\ncfg.INIT_WAITTIME = 1500;\n\n//NodalGraph\ncfg.STR_TRANSITION_DEFAULT_LABEL = \"\";\ncfg.STR_STATE_LABEL = \"q\";\ncfg.PARALLEL_EDGE_HEIGHT = 10;\ncfg.SELF_LOOP_HEIGHT = 40;\n\n//Input Fields\ncfg.SUBMIT_KEY = 13; //ENTER\ncfg.CLEAR_KEY = 27; //ESCAPE\ncfg.TAB_KEY = 9; //TAB\ncfg.UP_KEY = 38; //UP\ncfg.DOWN_KEY = 40; //DOWN\ncfg.DELETE_KEY = 8; //DELETE\n\n/** LEGACY CONFIG **/\n\n//Input\ncfg.DELETE_FORWARD_KEY = 46; //DELETE FORWARD\n\n//Geometry\ncfg.DEFAULT_GRAPH_SIZE = 300;\n\ncfg.NODE_RADIUS = 16;\ncfg.NODE_RADIUS_SQU = cfg.NODE_RADIUS * cfg.NODE_RADIUS;\ncfg.NODE_DIAMETER = cfg.NODE_RADIUS * 2;\ncfg.NODE_RADIUS_INNER = 12;\n\ncfg.INITIAL_MARKER_OFFSET_X = -(cfg.NODE_RADIUS + (cfg.NODE_RADIUS / 2));\n\ncfg.EDGE_RADIUS = 12;\ncfg.EDGE_RADIUS_SQU = cfg.EDGE_RADIUS * cfg.EDGE_RADIUS;\ncfg.ARROW_WIDTH = 10;\ncfg.PLACEHOLDER_LENGTH = cfg.NODE_RADIUS * 3;\ncfg.ENDPOINT_RADIUS = 6;\ncfg.ENDPOINT_RADIUS_SQU = cfg.ENDPOINT_RADIUS * cfg.ENDPOINT_RADIUS;\n\ncfg.HOVER_RADIUS_OFFSET = 4;\ncfg.CURSOR_RADIUS = 4;\ncfg.CURSOR_RADIUS_SQU = cfg.CURSOR_RADIUS * cfg.CURSOR_RADIUS;\n\n//Interface\ncfg.DOUBLE_TAP_TICKS = 600;\ncfg.LONG_TAP_TICKS = 600;\ncfg.SPAWN_RADIUS = 64;\ncfg.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\ncfg.DRAGGING_BUFFER = 18;\ncfg.DRAGGING_BUFFER_SQU = cfg.DRAGGING_BUFFER * cfg.DRAGGING_BUFFER;\n\n//Graph sorting\ncfg.PADDING_RADIUS_SQU = 2304;\n\n\n/** LOCAL STORAGE FUNCTIONS **/\n\n//check if browser support local storage\nexport function doesSupportLocalStorage()\n{\n  return typeof(Storage) !== 'undefined';\n}\n\nexport function loadConfig()\n{\n  const jsonString = localStorage.getItem(LOCAL_STORAGE_ID);\n  //If cannot find a config...\n  if (!jsonString)\n  {\n    //Just use the default one and don't save anything...\n    console.log(\"Using default config...\");\n    return;\n  }\n\n  try\n  {\n    console.log(\"Loading config...\");\n    const jsonData = JSON.parse(jsonString);\n    if (jsonData['_resetOnLoad'] == true)\n    {\n      //Reset the config\n      clearConfig();\n\n      //Save a new config\n      saveConfig();\n    }\n    else\n    {\n      Object.assign(cfg, jsonData);\n    }\n  }\n  catch (e)\n  {\n    //Reset the config\n    clearConfig();\n  }\n};\n\nexport function saveConfig(forceSave=false)\n{\n  if (forceSave || (cfg._userDefined && cfg._dirty))\n  {\n    try\n    {\n      console.log(\"Saving config...\");\n      const jsonString = JSON.stringify(cfg);\n      localStorage.setItem(LOCAL_STORAGE_ID, jsonString);\n\n      cfg._dirty = false;\n    }\n    catch (e)\n    {\n      //Reset the config\n      clearConfig();\n    }\n  }\n};\n\nexport function clearConfig()\n{\n  localStorage.removeItem(LOCAL_STORAGE_ID);\n\n  cfg._dirty = true;\n};\n","import { guid } from 'util/MathHelper.js';\n\nclass Message\n{\n  constructor(handler, value, type, tags, componentClass, componentProps)\n  {\n    this._handler = handler;\n    this._id = guid();\n    this._type = type;\n\n    this.value = value;\n    this.tags = tags;\n    this.componentClass = componentClass;\n    this.componentProps = componentProps;\n  }\n\n  close()\n  {\n    const messages = this._handler.getMessages();\n    const index = messages.indexOf(this);\n    if (index < 0) throw new Error(\"Trying to close an unopened notification message\");\n    messages.splice(index, 1);\n  }\n\n  getType()\n  {\n    return this._type;\n  }\n\n  getID()\n  {\n    return this._id;\n  }\n\n  getComponentClass()\n  {\n    return this.componentClass;\n  }\n\n  getComponentProps()\n  {\n    return this.componentProps;\n  }\n\n  hasTag(tag)\n  {\n    return this.tags.indexOf(tag) >= 0;\n  }\n}\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._messageQueue = [];\n  }\n\n  addMessage(value, type=null, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    if (tags && shouldReplaceRelated)\n    {\n      this.clearMessages(tags);\n    }\n\n    const result = new Message(this, value, type || \"default\", tags || [], componentClass, componentProps);\n    this._messageQueue.unshift(result);\n  }\n\n  addDefaultMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"default\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addErrorMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"error\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addWarningMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"warning\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  clearMessages(tags=null)\n  {\n    if (!tags)\n    {\n      this._messageQueue.length = 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      let message;\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            this._messageQueue.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  hasMessages(tags=null)\n  {\n    if (!tags)\n    {\n      return this._messageQueue.length >= 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }\n\n  getMessages()\n  {\n    return this._messageQueue;\n  }\n}\nexport default NotificationManager;\n","import NotificationManager from './NotificationManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new NotificationManager();\nexport default INSTANCE;\n","import React from 'react';\nimport './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconButton;\n","export function guid()\n{\n  function s4()\n  {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexport function lerp(a, b, dt)\n{\n  return a * (1 - dt) + b * dt;\n};\n\nexport function stringHash(value=\"\")\n{\n  let hash = 0;\n  for(let i = 0, len = value.length; i < len; i++)\n  {\n    hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n  }\n  return hash;\n};\n","class AbstractGraphExporter\n{\n  constructor() {}\n\n  importFromData(data, app)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToData(app)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportData()\n  {\n    return false;\n  }\n\n  importFromFile(fileBlob, app)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToFile(filename, app)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportFile()\n  {\n    return false;\n  }\n\n  canImport()\n  {\n    return false;\n  }\n\n  getTitle()\n  {\n    return this.getLabel();\n  }\n\n  getIconComponentClass()\n  {\n    return null;\n  }\n\n  getLabel()\n  {\n    return \"Export as \" + this.getFileType().toUpperCase();\n  }\n\n  getFileType()\n  {\n    throw new Error(\"Unknown file type for exporter\");\n  }\n}\n\nexport default AbstractGraphExporter;\n","class GraphElement\n{\n  constructor(id)\n  {\n    this._id = id;\n  }\n\n  setGraphElementID(graphElementID)\n  {\n    this._id = graphElementID;\n    return this;\n  }\n\n  //A unique identifier for this graph element\n  getGraphElementID()\n  {\n    return this._id;\n  }\n\n  //Calls getHashString() to generate an integer hash generally unqiue to the instance.\n  //Should only be used to distinguish between other objects with the same\n  //hash function. In other words, every instance should only be compared to\n  //other instances of the same class.\n  //usePosition can be used to tell the hash function whether or not to consider\n  //aesthetic, or position, attributes of the element.\n  getHashString(usePosition=true)\n  {\n    return this._id;\n  }\n}\nexport default GraphElement;\n","const ROUTER = {\n  _current: null,\n  routeTo(component)\n  {\n    this._current = component;\n  },\n  getCurrentPage()\n  {\n    return this._current;\n  }\n};\n\nexport default ROUTER;\n","const Modules = {};\n\nModules['fsa'] = {\n  name: \"Finite State Automata\",\n  version: \"1.0.0\",\n  fetch: function(callback) { import(/* webpackChunkName: \"module_fsa\" */ 'modules/fsa/FSAModule.js').then(({ default: _ }) => { callback( _ ); });}\n};\n\nexport default Modules;\n","import AbstractGraphExporter from 'modules/base/exporter/AbstractGraphExporter.js';\n\nimport JSONIcon from 'icons/flat/JSONIcon.js';\n\nclass DefaultGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  //Override\n  importFromData(data, app)\n  {\n    //Do nothing...\n  }\n\n  //Override\n  exportToData(app)\n  {\n    //Return nothing...\n    return {};\n  }\n\n  //Override\n  doesSupportData()\n  {\n    return true;\n  }\n\n  //Override\n  importFromFile(fileBlob, app)\n  {\n    return new Promise((resolve, reject) => {\n      //Do nothing...\n      resolve();\n    });\n  }\n\n  //Override\n  exportToFile(filename, app)\n  {\n    //Do nothing...\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.machine.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.machine\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"json\";\n  }\n\n  //Override\n  getIconComponentClass()\n  {\n    return JSONIcon;\n  }\n}\n\nexport default DefaultGraphExporter;\n","import AbstractInputController from 'modules/base/AbstractInputController.js';\n\nclass DefaultInputController extends AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    super(module, inputAdapter);\n  }\n}\nexport default DefaultInputController;\n","import AbstractGraphController from 'modules/base/AbstractGraphController.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\n\nclass DefaultGraphController extends AbstractGraphController\n{\n  constructor(module)\n  {\n    super(module, new NodalGraph());\n  }\n}\nexport default DefaultGraphController;\n","class AbstractMachineController\n{\n  constructor(module, machine)\n  {\n    this._module = module;\n    this._machine = machine;\n\n    //throw new Error(\"Missing implementation for graph controller \\'\" + this.getModule().getModuleName() + \"\\'\");\n  }\n\n  initialize(app) {}\n  destroy(app) {}\n  update(app) {}\n\n  getMachine()\n  {\n    return this._machine;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractMachineController;\n","import AbstractMachineController from 'modules/base/AbstractMachineController.js';\n\nclass DefaultMachineController extends AbstractMachineController\n{\n  constructor(module)\n  {\n    super(module);\n\n    this._machineName = \"\";\n  }\n\n  setMachineName(name) { this._machineName = name; }\n  getMachineName() { return this._machineName; }\n}\nexport default DefaultMachineController;\n","import AbstractModule from 'modules/base/AbstractModule.js';\n\nimport DefaultGraphExporter from './DefaultGraphExporter.js';\nimport DefaultInputController from './DefaultInputController.js';\nimport DefaultGraphController from './DefaultGraphController.js';\nimport DefaultMachineController from './DefaultMachineController.js';\n\nclass DefaultModule extends AbstractModule\n{\n  constructor(app)\n  {\n    super(app);\n\n    this._exporter = new DefaultGraphExporter();\n    this._inputController = new DefaultInputController(this, app.getInputAdapter());\n    this._graphController = new DefaultGraphController(this);\n    this._machineController = new DefaultMachineController(this);\n  }\n\n  getLabelEditor() { return null; }\n\n  getDefaultGraphExporter() { return this._exporter; }\n  //Override\n  getInputController() { return this._inputController; }\n  //Override\n  getGraphController() { return this._graphController; }\n  //Override\n  getMachineController() { return this._machineController; }\n  //Override\n  getModuleName() { return \"default\"; }\n}\n\nexport default DefaultModule;\n","class HotKeys\n{\n  constructor()\n  {\n    this.app = null;\n    this.workspace = null;\n    this.toolbar = null;\n    this.undoManager = null;\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.app = app;\n    this.workspace = app.workspace;\n    this.toolbar = app.toolbar;\n    this.undoManager = app.getUndoManager();\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    window.addEventListener('keydown', this.onKeyDown);\n  }\n\n  destroy()\n  {\n    window.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e)\n  {\n    //Ctrl-S\n    if (event.which == 83 && (event.metaKey || event.ctrlKey))\n    {\n      //Save as machine file\n      const exporter = this.app.getCurrentModule().getDefaultGraphExporter();\n      const machineName = this.machineController.getMachineName();\n      exporter.exportToFile(machineName, this.app);\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-Z\n    else if (event.which == 90 && (event.metaKey || event.ctrlKey))\n    {\n      if (event.shiftKey)\n      {\n        //Redo\n        this.undoManager.redo();\n      }\n      else\n      {\n        //Undo\n        this.undoManager.undo();\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-P\n    else if (event.which == 80 && (event.metaKey || event.ctrlKey))\n    {\n      //Export to PNG\n      const imageExporters = this.app.getCurrentModule().getImageExporters();\n      if (imageExporter.length >= 1)\n      {\n        const exporter = imageExporters[0];\n        const machineName = this.machineController.getMachineName();\n        exporter.exportToFile(machineName, this.app);\n      }\n      else\n      {\n        throw new Error(\"Unable to find valid image exporter for module \\'\" + this.app.getCurrentModule().getModuleName() + \"\\'\");\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nexport default HotKeys;\n","import LocalSaveManager from './LocalSaveManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new LocalSaveManager();\nexport default INSTANCE;\n","class LocalSaveManager\n{\n  constructor()\n  {\n    this._handlers = new Set();\n    this._intervalID = null;\n    this._intervalMillis = 1000;\n\n    this._init = false;\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n  }\n\n  setAutoSaveInterval(millis)\n  {\n    if (!millis || millis <= 0) throw new Error(\"AutoSave interval must be greater than 0\");\n    this._intervalMillis = millis;\n  }\n\n  registerHandler(handler)\n  {\n    if (this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot register handler, since it is already registered\");\n    }\n    this._handlers.add(handler);\n  }\n\n  unregisterHandler(handler)\n  {\n    if (!this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot remove handler, since it is not yet registered\");\n    }\n    this._handlers.delete(handler);\n  }\n\n  initialize()\n  {\n    if (this._init) throw new Error(\"Cannot initialize LocalSave, since it is already initialized\");\n\n    if (this.doesSupportLocalStorage())\n    {\n      //Prepare autosave\n      this._intervalID = setInterval(this.onIntervalUpdate, this._intervalMillis);\n      this._init = true;\n    }\n    else\n    {\n      //Does not support local storage, so ignore everything...\n    }\n  }\n\n  terminate()\n  {\n    if (!this._init) throw new Error(\"Cannot terminate LocalSave, since it is not yet initialized\");\n\n    clearInterval(this._intervalID);\n\n    this._handlers.clear();\n    this._init = false;\n  }\n\n  onIntervalUpdate()\n  {\n    //Save most recent save for all registered handlers\n    for(let handler of this._handlers)\n    {\n      try\n      {\n        handler.onAutoSave();\n      }\n      catch(e)\n      {\n        console.error(e);\n      }\n    }\n  }\n\n  setStringToStorage(saveKey, stringData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n    if (stringData.length > 0)\n    {\n      localStorage.setItem(saveKey, stringData);\n    }\n    else\n    {\n      localStorage.removeItem(saveKey);\n    }\n  }\n\n  getStringFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return \"\";\n    return localStorage.getItem(saveKey) || \"\";\n  }\n\n  loadFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return null;\n    try\n    {\n      const value = localStorage.getItem(saveKey);\n      if (value && value.length > 0)\n      {\n        return JSON.parse(value);\n      }\n      else\n      {\n        return null;\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n      return {};\n    }\n  }\n\n  saveToStorage(saveKey, jsonData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    let hidden, visibilityChange;\n\n    // Opera 12.10 and Firefox 18 and later support\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    if (document[hidden])\n    {\n      //Don't save anything...\n      return;\n    }\n\n    try\n    {\n      if (typeof jsonData == 'object')\n      {\n        let flag = jsonData;\n        if (flag)\n        {\n          flag = false;\n\n          //Don't save empty objects, cause that is wasteful.\n          for(let key in jsonData)\n          {\n            if (jsonData.hasOwnProperty(key))\n            {\n              flag = true;\n              break;\n            }\n          }\n        }\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, JSON.stringify(jsonData));\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n      else if (typeof jsonData == 'string')\n      {\n        const flag = jsonData.length <= 0;\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, jsonData);\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n    }\n  }\n\n  existsInStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return false;\n    return localStorage.getItem(saveKey) != null;\n  }\n\n  clearStorage()\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    localStorage.clear();\n  }\n\n  doesSupportLocalStorage()\n  {\n    //check if browser support local storage\n    return typeof Storage !== 'undefined';\n  }\n}\nexport default LocalSaveManager;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass UploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(files[0], this.props.app)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n          console.error(e);\n        });\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  render()\n  {\n    const inputID = this.props.id + \"-input\";\n    return <button\n      className={\"icon-button button-upload \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input id={inputID} type=\"file\" name=\"import\"\n        style={{display:\"none\"}}\n        onChange={this.onUploadFileChange}\n        accept={this.props.app.getCurrentModule().getGraphImporter().getImportFileTypes().join(\",\")}/>\n      <label htmlFor={inputID}>\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadButton;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass HelpButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    if (Notifications.hasMessages())\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.3\"));\n      Notifications.addMessage(I18N.toString(\"message.help.1\"));\n    }\n    else\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.2\"));\n    }\n\n    //The tutorial\n    const LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/HELP.md\";\n    const newTab = window.open(LINK, '_blank');\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button button-help \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default HelpButton;\n","import React from 'react';\n\nclass MachineName extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  onChange(e)\n  {\n    this.setState({value: e.target.value});\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === 'Escape')\n    {\n      const target = e.target;\n      this.setState({value: null}, () => target.blur());\n      return false;\n    }\n    else if (e.key === 'Enter')\n    {\n      e.target.blur();\n      return false;\n    }\n  }\n\n  onFocus(e)\n  {\n    this.setState({value: this.props.value});\n  }\n\n  onBlur(e)\n  {\n    if (this.state.value)\n    {\n      if (this.props.onSubmit) this.props.onSubmit({value: this.state.value});\n    }\n\n    this.setState({value: null});\n  }\n\n  render()\n  {\n    return <input type=\"text\"\n      className={this.props.className}\n      id={this.props.id}\n      value={this.state.value != null ? this.state.value : this.props.value}\n      onChange={this.onChange}\n      onKeyDown={this.onKeyDown}\n      onFocus={this.onFocus}\n      onBlur={this.onBlur}>\n    </input>;\n  }\n}\n\nexport default MachineName;\n","import React from 'react';\n\nclass PageNewIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenew-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"help-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n    </svg>;\n  }\n}\n\nexport default HelpIcon;\n","import React from 'react';\n\nclass LanguageIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"language-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 \" +\n        \"22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 \" +\n        \"3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 \" +\n        \"1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 \" +\n        \"1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 \" +\n        \"1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 \" +\n        \"4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 \" +\n        \"1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 \" +\n        \"0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 \" +\n        \"5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 \" +\n        \"14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 \" +\n        \"1.36-.26 2h-3.38z\"}/>\n    </svg>;\n  }\n}\n\nexport default LanguageIcon;\n","import React from 'react';\n\nclass OfflineIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"offline-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n      <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n    </svg>;\n  }\n}\n\nexport default OfflineIcon;\n","import React from 'react';\n\nclass BugReportIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"bugreport-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d={\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 \" +\n      \"3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 \" +\n      \"4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 \" +\n      \"1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 \" +\n      \"3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.\"\n      + \"34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 \" +\n      \"1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 \" +\n      \"15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 \" +\n      \"1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 \" +\n      \".63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07\" +\n      \".47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"}/>\n    </svg>;\n  }\n}\n\nexport default BugReportIcon;\n","import React from 'react';\nimport './DrawerExpander.css';\n\nclass DrawerExpander extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const app = this.props.app;\n    if (app.state.isFullscreen)\n    {\n      app.setState({isFullscreen: false});\n    }\n    else if (app.state.isOpen)\n    {\n      app.closeDrawer();\n    }\n    else\n    {\n      app.openDrawer();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const open = app.state.isOpen;\n\n    return <div className={\"drawer-expand\" + (open ? \" open\" : \"\")}\n      onClick={this.onClick}>\n      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M5 3.737l12.395 8.263-12.395 8.263v-16.526zm-2-3.737v24l18-12-18-12z\"/>\n      </svg>\n    </div>;\n  }\n}\n\nexport default DrawerExpander;\n","import React from 'react';\nimport '../Panel.css';\nimport './ExportingPanel.css';\n\nimport IconButton from 'icons/IconButton.js';\n\nclass ExportingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  renderExporterButton(exporter)\n  {\n    if (!exporter.doesSupportFile()) return null;\n    return <IconButton key={exporter.getFileType()}\n      className=\"export-button\"\n      id={\"export-\" + exporter.getFileType()}\n      title={exporter.getTitle()}\n      onClick={() => {\n        const filename = this.props.machineController.getMachineName();\n        exporter.exportToFile(filename, this.props.app);\n      }}>\n      { React.createElement(exporter.getIconComponentClass()) }\n      <label>{ exporter.getLabel() }</label>\n    </IconButton>;\n  }\n\n  //Override\n  render()\n  {\n    const module = this.props.app.getCurrentModule();\n    const graphExporters = module.getGraphExporters();\n    const imageExporters = module.getImageExporters();\n\n    return <div className=\"panel-container\" id=\"exporting\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n      {\n        graphExporters.map(e => this.renderExporterButton(e))\n      }\n      {\n        imageExporters.map(e => this.renderExporterButton(e))\n      }\n        <hr/>\n        {/*Save to E-mail*/}\n        <div className=\"export-email\">\n        </div>\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nExportingPanel.UNLOCALIZED_NAME = \"component.exporting.title\";\n\nexport default ExportingPanel;\n","/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nclass ColorHelper\n{\n  static HEXtoRGB(hex, dst=[])\n  {\n    if (hex.startsWith('#')) hex = hex.slice(1);\n    const red = hex.substring(0, 2);\n    const green = hex.substring(2, 4);\n    const blue = hex.substring(4, 6);\n    dst[0] = parseInt(red, 16);\n    dst[1] = parseInt(green, 16);\n    dst[2] = parseInt(blue, 16);\n    return dst;\n  }\n\n  static RGBtoHEX(r, g, b)\n  {\n    return '#' + (b | (g << 8) | (r << 16) | (1 << 24)).toString(16).slice(1);\n  }\n\n  static RGBtoHSV(r, g, b, dst=[])\n  {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n\n    const d = max - min;\n\n    let h = 0;\n    const s = max == 0 ? 0 : d / max;\n    const v = max;\n\n    if (max == min)\n    {\n      h = 0;\n    }\n    else\n    {\n      switch(max)\n      {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n      }\n\n      h /= 6;\n    }\n\n    dst[0] = h;\n    dst[1] = s;\n    dst[2] = v;\n    return dst;\n  }\n\n  static HSVtoRGB(h, s, v, dst=[])\n  {\n    let r = 0;\n    let g = 0;\n    let b = 0;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch(i % 6)\n    {\n      case 0: r = v, g = t, b = p; break;\n      case 1: r = q, g = v, b = p; break;\n      case 2: r = p, g = v, b = t; break;\n      case 3: r = p, g = q, b = v; break;\n      case 4: r = t, g = p, b = v; break;\n      case 5: r = v, g = p, b = q; break;\n    }\n\n    dst[0] = r * 255;\n    dst[1] = g * 255;\n    dst[2] = b * 255;\n    return dst;\n  }\n}\n\nexport default ColorHelper;\n","class StyleOption\n{\n  constructor(elementSource, propName, inputType, groupName, callback)\n  {\n    //the html element that this css variable reflects\n    this.element = elementSource;\n    //the name of the css variable\n    this.prop = propName;\n    //the css variable type\n    this.type = inputType;\n    //the group that the variable belongs to (\"default\" if not specified)\n    this.group = groupName;\n\n    this._callback = callback;\n    this._value = null;\n    this._defaultValue = null;\n  }\n\n  /**\n   * Update the current value to reflect the computed style's value.\n   */\n  updateStyle(computedStyle=null, shouldPropagateChange=true)\n  {\n    if (!computedStyle)\n    {\n      computedStyle = window.getComputedStyle(this.element);\n    }\n    const newValue = computedStyle.getPropertyValue(this.prop);\n    if (!newValue)\n    {\n      throw new Error(\"Cannot find style option with prop name \\'\" + this.prop + \"\\' for element\");\n    }\n\n    this._value = newValue.trim();\n    this._defaultValue = this._value;\n    if (shouldPropagateChange && this._callback) this._callback(this, newValue);\n  }\n\n  /**\n   * Reset the current value to reflect the computed style's value.\n   */\n  resetStyle()\n  {\n    this.setStyle(this._defaultValue);\n  }\n\n  /**\n   * Changes the variable's value for prop name.\n   * These changes are reflected to the css source.\n   */\n  setStyle(val, shouldPropagateChange=true)\n  {\n    this._value = val;\n    this.element.style.setProperty(this.prop, val);\n\n    if (shouldPropagateChange && this._callback) this._callback.call(null, this, val);\n  }\n\n  /** Returns the variable's current value. Null if not yet initialized. */\n  getStyle()\n  {\n    return this._value;\n  }\n\n  isDefaultStyle()\n  {\n    return this._value == this._defaultValue;\n  }\n}\n\nclass StyleOptionRegistry\n{\n  constructor()\n  {\n    this._options = new Map();\n    this._groups = new Map();\n\n    this._init = false;\n  }\n\n  registerStyleOption(elementSource, propName, inputType=\"text\", groupName=\"default\", changeCallback=null)\n  {\n    if (this._options.has(propName))\n    {\n      throw new Error(\"Style option with prop name \\'\" + propName + \"\\' already registered\");\n    }\n\n    const result = new StyleOption(elementSource, propName, inputType, groupName, changeCallback);\n    this._options.set(propName, result);\n\n    let group;\n    if (!this._groups.has(groupName))\n    {\n      group = [];\n      this._groups.set(groupName, group);\n    }\n    else\n    {\n      group = this._groups.get(groupName);\n\n      if (group.indexOf(propName) != -1)\n      {\n        //Ignore it, it's already in here\n        return;\n      }\n    }\n    group.push(propName);\n  }\n\n  unregisterStyleOption(propName)\n  {\n    if (this._options.has(propName))\n    {\n      const option = this._options.get(propName);\n      this._options.delete(propName);\n      const groupName = option.group;\n      if (this._groups.has(groupName))\n      {\n        const group = this._groups.get(groupName);\n        const index = group.indexOf(propName);\n        if (index >= 0)\n        {\n          group.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  initialize()\n  {\n    if (this._init)\n    {\n      throw new Error(\"Already initialized\");\n    }\n\n    //Compute the styles\n    const computedStyles = {};\n    let computedStyle;\n    for(let option of this._options.values())\n    {\n      const element = option.element;\n      computedStyle = computedStyles[element];\n      if (!computedStyle)\n      {\n        computedStyle = window.getComputedStyle(element);\n        computedStyles[element] = computedStyle;\n      }\n      option.updateStyle(computedStyle, false);\n    }\n\n    this._init = true;\n  }\n\n  terminate()\n  {\n    if (!this._init)\n    {\n      throw new Error(\"Not yet initialized\");\n    }\n\n    this._options.clear();\n    this._groups.clear();\n\n    this._init = false;\n  }\n\n  getOptionByProp(propName)\n  {\n    return this._options.get(propName);\n  }\n\n  getPropsByGroup(groupName)\n  {\n    return this._groups.get(groupName) || [];\n  }\n\n  getOptions()\n  {\n    return this._options.values();\n  }\n\n  isEmpty()\n  {\n    return this._options.size <= 0;\n  }\n}\n\nexport default StyleOptionRegistry;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e)\n  {\n    const newValue = e.target.value;\n    const value = this.props.value;\n    const onChange = this.props.onChange;\n\n    value.setStyle(newValue);\n    if (onChange) onChange(value);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const value = this.props.value;\n    const propName = value.prop;\n    const inputType = value.type;\n    const inputID = \"styleopt-\" + propName;\n\n    return <span id={this.props.id} className={this.props.className} style={this.props.style}>\n      <input id={inputID} type={inputType} value={value.getStyle()} onChange={this.onChange} disabled={this.props.disabled}/>\n      <label htmlFor={inputID}>{title}</label>\n    </span>;\n  }\n}\nexport default StyleInput;\n","import React from 'react';\nimport './OptionGroup.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\nclass OptionGroup extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"option-group \" + this.props.className}>\n      <div className=\"option-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <label>({this.props.label})</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"option-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        { this.props.children }\n      </div>\n    </div>;\n  }\n}\n\nexport default OptionGroup;\n","import React from 'react';\nimport './OptionHotkey.css';\n\nclass OptionHotkey extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className={\"option-container option-hotkey \" + this.props.className}>\n      <label>{this.props.label}</label>\n      <span>{this.props.keyName}</span>\n    </div>;\n  }\n}\n\nexport default OptionHotkey;\n","import React from 'react';\nimport '../Panel.css';\nimport './OptionsPanel.css';\n\nimport Config from 'config.js';\nimport { saveConfig } from 'config.js';\n\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport ColorHelper from 'util/ColorHelper.js';\nimport StyleOptionRegistry from 'system/styleopt/StyleOptionRegistry.js';\nimport StyleInput from 'system/styleopt/components/StyleInput.js';\n\nimport OptionGroup from './OptionGroup.js';\nimport OptionHotkey from './OptionHotkey.js';\n\n//This should be the same as the one referred to by index.js\nconst LOCAL_STORAGE_ID = \"skipWelcome\";\n\nclass OptionsPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n\n    this.container = React.createRef();\n    this.styleOpts = new StyleOptionRegistry();\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalSave.getStringFromStorage(LOCAL_STORAGE_ID) == \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n    this.onChangeModule = this.onChangeModule.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    const invertFunc = function(opt, value) {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      //INVERT HUE: color[0] = (color[0] + 0.5) % 1;\n      //INVERT BRIGHTNESS:\n      color[2] = 1 - color[2];\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-invert\").setStyle(result);\n    };\n\n    const darkFunc = function(opt, value) {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.8;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    };\n\n    const subtleFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.61;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-subtle\").setStyle(result);\n    };\n\n    const ghostFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.74;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-ghost\").setStyle(result);\n    };\n\n    const backFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.87;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-back\").setStyle(result);\n    };\n\n    //Toolbar\n    opts.registerStyleOption(root, \"--color-toolbar-main\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-accent\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-accent-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-text\", \"color\", \"toolbar\", invertFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-text-invert\", \"color\", \"hidden\");\n\n    //Drawer\n    opts.registerStyleOption(root, \"--color-drawer-main\", \"color\", \"drawer\", darkFunc);\n    opts.registerStyleOption(root, \"--color-drawer-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-accent\", \"color\", \"drawer\");\n    opts.registerStyleOption(root, \"--color-drawer-text\", \"color\", \"drawer\", (...args) => {\n      subtleFunc(...args);\n      ghostFunc(...args);\n      invertFunc(...args);\n      backFunc(...args);\n    });\n    opts.registerStyleOption(root, \"--color-drawer-text-subtle\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-ghost\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-invert\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-back\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-error\", \"color\", \"drawer\");\n\n    //Testing\n    opts.registerStyleOption(root, \"--color-testing-success\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-failure\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-working\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-text\", \"color\", \"testing\");\n\n    //Notification\n    opts.registerStyleOption(root, \"--color-notification-text\", \"color\", \"notification\");\n    opts.registerStyleOption(root, \"--color-notification-info\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-info-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-error\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-warning\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-warning-dark\", \"color\", \"hidden\");\n\n    //Workspace\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-text\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-main\", \"color\", \"workspace\");\n\n    //Label editor\n    opts.registerStyleOption(root, \"--color-labeleditor-text\", \"color\", \"labeleditor\");\n    opts.registerStyleOption(root, \"--color-labeleditor-main\", \"color\", \"labeleditor\");\n\n    //Viewport\n    opts.registerStyleOption(root, \"--color-viewport-error\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-testing\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-warning\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-highlight-select\", \"color\", \"viewport\");\n\n    opts.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    registry.terminate();\n\n    LocalSave.unregisterHandler(this);\n  }\n\n  onLoadSave()\n  {\n    const opts = this.styleOpts;\n    const data = LocalSave.loadFromStorage(\"prefs-color\");\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  onAutoSave()\n  {\n    const opts = this.styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    LocalSave.saveToStorage(\"prefs-color\", data);\n  }\n\n  onChangeTheme(e)\n  {\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of this.styleOpts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  onChangeModule(e)\n  {\n    //Nothing yet...\n  }\n\n  //Override\n  render()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    return <div className=\"panel-container\" id=\"option\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.options.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n\n        <OptionGroup title={I18N.toString(\"component.workspace.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.savemachine\")} keyName=\"Ctrl + S\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.undo.label\")} keyName=\"Ctrl + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.redo.label\")} keyName=\"Ctrl + Shift + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.saveimage\")} keyName=\"Ctrl + P\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={\"Add test input\"} keyName=\"Enter\"/>\n          <OptionHotkey label={\"Run test input\"} keyName=\"Shift + Enter\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.workspace.submit.label\")} keyName=\"Enter\"/>\n          <OptionHotkey label={I18N.toString(\"action.workspace.cancel.label\")} keyName=\"Escape\"/>\n        </OptionGroup>\n\n        <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n          <input id=\"option-skipwelcome\" type=\"checkbox\" checked={this.state.skipWelcome}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: e.target.checked});\n            LocalSave.setStringToStorage(LOCAL_STORAGE_ID, \"\" + result);\n          }}/>\n          <label htmlFor=\"option-skipwelcome\">{I18N.toString(\"options.skipwelcome\")}</label>\n        </div>\n\n        <hr/>\n\n        <div>\n          <div id=\"options-theme-select-container\">\n            <label htmlFor=\"options-theme-select\">Theme</label>\n            <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n              <option value=\"default\">Default</option>\n              <option value=\"ucsd\" disabled={true}>UC San Diego (Coming Soon)</option>\n              <option value=\"duke\" disabled={true}>Duke University (Coming Soon)</option>\n            </select>\n            {\n              !this.state.customTheme &&\n              <button className=\"panel-button\" onClick={() => this.setState({customTheme: true})}>\n                {I18N.toString(\"action.options.changetheme\")}\n              </button>\n            }\n          </div>\n          {\n            this.state.customTheme && <div>\n              <OptionGroup title={I18N.toString(\"component.toolbar.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"toolbar\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.drawer.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"drawer\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"testing\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.notification.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"notification\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.graph.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"workspace\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"labeleditor\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"options.category.general\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"viewport\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <button className=\"panel-button\" onClick={(e) => {\n                for(let option of this.styleOpts.getOptions())\n                {\n                  option.resetStyle();\n                }\n                this.setState({customTheme: false});\n              }}>{I18N.toString(\"action.options.reset\")}</button>\n            </div>\n          }\n        </div>\n\n        <hr/>\n\n        <div>\n          <h2>Experimental</h2>\n          <label htmlFor=\"options-experimental-modules\">Module</label>\n          <select id=\"options-experimental-modules\" className=\"panel-select\" value={this.props.app.getCurrentModule().getModuleName()} onChange={this.onChangeModule}>\n            <option value=\"fsa\">Finite State Automata</option>\n            <option value=\"pda\" disabled={true}>Pushdown Automata (Coming Soon)</option>\n            <option value=\"cfg\" disabled={true}>Context-Free Grammar (Future)</option>\n            <option value=\"tm\" disabled={true}>Turing Machine (Future)</option>\n            <option value=\"rdt\" disabled={true}>Red-Black Tree (Future)</option>\n            <option value=\"hlsm\" disabled={true}>High Level State Machine (Future)</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nOptionsPanel.UNLOCALIZED_NAME = \"component.options.title\";\n\nexport default OptionsPanel;\n","import React from 'react';\nimport './Drawer.css';\n\nimport DrawerExpander from './DrawerExpander.js';\n\nimport ExportingPanel from './panels/exporting/ExportingPanel.js';\nimport OptionsPanel from './panels/options/OptionsPanel.js';\n\nconst DEFAULT_PANELS = [ExportingPanel, OptionsPanel];\nconst DEFAULT_TAB_INDEX = 0;\n\nconst MAX_PANEL_THRESHOLD = 50;\nconst MIN_PANEL_SIZE = 300;//180\n\nclass Drawer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      tabIndex: DEFAULT_TAB_INDEX,\n      dragging: false\n    };\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    this._ontouchmove = null;\n    this._ontouchend = null;\n  }\n\n  setTab(index)\n  {\n    const app = this.props.app;\n\n    //Open drawer if it is closed\n    if (!app.state.isOpen)\n    {\n      app.openDrawer();\n    }\n    //Full drawer if clicked on same one\n    else\n    {\n      if (this.state.tabIndex === index)\n      {\n        app.openDrawer(!app.state.isFullscreen);\n      }\n    }\n\n    this.setState((prev, props) => {\n      return { tabIndex: index };\n    });\n  }\n\n  onStartDraggingDrawerBorder(x, y)\n  {\n    const app = this.props.app;\n    this.setState({dragging: true});\n\n    //Disable fullscreen if dragging off of it\n    if (app.state.isFullscreen)\n    {\n      app.openDrawer(false);\n    }\n\n    //Update panel to current click position\n    updatePanelSize(app, x, y);\n  }\n\n  onStopDraggingDrawerBorder()\n  {\n    this.setState({dragging: false});\n  }\n\n  onTouchStart(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._ontouchmove)\n    {\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n      this._ontouchmove = null;\n    }\n\n    if (this._ontouchend)\n    {\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      this._ontouchend = null;\n    }\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      this.setState({dragging: false});\n      return;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onStartDraggingDrawerBorder(touch.clientX, touch.clientY);\n\n    this._ontouchmove = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n    };\n\n    document.addEventListener(this._ontouchmove);\n\n    this._ontouchend = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"touchend\", this._ontouchend);\n    document.addEventListener(\"touchmove\", this._ontouchmove);\n  }\n\n  onMouseDown(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      return;\n    }\n\n    this.onStartDraggingDrawerBorder(e.clientX, e.clientY);\n\n    const onMouseMove = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n    };\n\n    const onMouseUp = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousemove\", onMouseMove);\n  }\n\n  onScroll(e)\n  {\n    //if (this.panel)\n    {\n      //TODO: this.panel.container.scrollBy(0, e.deltaY);\n      //TODO: return false;\n    }\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n\n    const tabIndex = this.state.tabIndex;\n    const InfoPanel = currentModule ? currentModule.getDefaultModulePanel() : null;\n\n    return <div className={\"drawer-container\"} onWheel={this.onScroll}>\n      <div className=\"drawer-content\">\n      {\n        currentModule &&\n        currentModule.getModulePanels().map((PanelClass, i) => {\n          const panelID = i + 1;\n          return <PanelClass key={currentModule.getModuleName() + \":\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      {\n        tabIndex == 0 && InfoPanel != null &&\n        <InfoPanel app={app}/>\n      }\n      {\n        DEFAULT_PANELS.map((PanelClass, i) => {\n          const panelID = -(i + 1);\n          return <PanelClass key={\"default:\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      </div>\n      <div className=\"tab-list\">\n        <DrawerExpander app={app}/>\n        {\n          currentModule &&\n          currentModule.getModulePanels().map((PanelClass, i) => {\n            const panelID = i + 1;\n            return <button key={currentModule.getModuleName() + \":\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        {\n          DEFAULT_PANELS.map((PanelClass, i) => {\n            const panelID = -(i + 1);\n            return <button key={\"default:\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        <div className=\"tab-right\"></div>\n      </div>\n\n      <div className={\"drawer-border\" + (this.state.dragging ? \" dragging\" : \"\")}\n        onTouchStart={this.onTouchStart}\n        onMouseDown={this.onMouseDown}>\n      </div>\n    </div>;\n  }\n}\n\nfunction updatePanelSize(app, x, y)\n{\n  const container = app.container;\n  let fullscreen = false;\n  let size = 0;\n  //This is the same criteria as in App.css\n  if (window.matchMedia(\"(max-width: 420px)\").matches)\n  {\n    //Vertical slide\n    const viewportOffsetY = app.viewport.ref.getBoundingClientRect().y;\n    if (y - viewportOffsetY < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetHeight - y;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n  else\n  {\n    //Horizontal slide\n    if (x < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetWidth - x;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n\n  //Make sure is greater than minimum size and vice versa\n  if (size < MIN_PANEL_SIZE) size = MIN_PANEL_SIZE;\n\n  //Set panel size\n  container.style.setProperty(\"--panel-size\", size + \"px\");\n}\nDrawer.EXPORTING_PANEL_TAB_INDEX = -1;\nDrawer.OPTIONS_PANEL_TAB_INDEX = -2;\n\nexport default Drawer;\n","import React from 'react';\nimport './Toolbar.css';\n\nimport Config from 'config.js';\n\nimport UploadButton from \"./UploadButton.js\";\nimport HelpButton from \"./HelpButton.js\";\nimport MachineName from './MachineName.js';\n\nimport IconButton from 'icons/IconButton.js';\n\nimport MoreIcon from 'icons/MoreIcon.js';\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewIcon.js';\n//import CreateIcon from 'icons/CreateIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\n//import SaveIcon from 'icons/DiskSaveIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\nimport HelpIcon from 'icons/HelpIcon.js';\nimport LanguageIcon from 'icons/LanguageIcon.js';\nimport OfflineIcon from 'icons/OfflineIcon.js';\nimport OfflinePinIcon from 'icons/OfflinePinIcon.js';\nimport BugReportIcon from 'icons/BugReportIcon.js';\n\nimport Drawer from 'content/drawer/Drawer.js';\n\nclass Toolbar extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      langOn: false\n    };\n\n    this.onMachineNameChange = this.onMachineNameChange.bind(this);\n    this.onMachineNameKeyDown = this.onMachineNameKeyDown.bind(this);\n    this.langOnClick = this.langOnClick.bind(this);\n  }\n\n  onMachineNameChange(e)\n  {\n    this.props.machineController.renameMachine(e.value);\n  }\n\n  onMachineNameKeyDown()\n  {\n\n  }\n\n  onMachineNameBlur()\n  {\n\n  }\n\n  langOnClick()\n  {\n    this.setState({langOn: !this.state.langOn});\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const drawer = this.props.drawer;\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const undoManager = app.getUndoManager();\n\n    const graph = graphController.getGraph();\n\n    const offline = navigator && navigator.onLine;\n\n    return <div className=\"toolbar-container\">\n      <div className=\"toolbar-title\">\n        <div className=\"toolbar-title-name\">\n          {/*Machine Name*/}\n          <MachineName id=\"machine-name\" value={machineController.getMachineName()} onSubmit={this.onMachineNameChange}/>\n          {/*Toolbar Alt. Title*/}\n          <div className=\"toolbar-title-alt\">\n            {/*Offline Button*/}\n            <IconButton id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n              onClick={() => {\n                if ('serviceWorker' in navigator)\n                {\n                  if (navigator.serviceWorker.getRegistration(\"./app.html\"))\n                  {\n                    alert(I18N.toString(\"message.offline.ready\"));\n                  }\n                  else\n                  {\n                    alert(I18N.toString(\"message.offline.failed\"));\n                  }\n                }\n                else\n                {\n                  alert(I18N.toString(\"message.offline.nosupport\"));\n                }\n              }} disabled={offline}>\n              <OfflineIcon/>\n            </IconButton>\n            {/*Upload Button\n            <div id=\"toolbar-upload-alt\"\n              title={I18N.toString(\"action.toolbar.uploadmachine\")}>\n              <MoreIcon/>\n            </div>\n            */}\n          </div>\n        </div>\n        {/*Machine Type*/}\n        <label id=\"machine-type\"\n          onClick={()=>drawer.setTab(0)}>\n          {currentModule.getLocalizedModuleName()}\n        </label>\n      </div>\n\n      <div className=\"toolbar-tray\">\n        {/*New Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-new\" title={I18N.toString(\"action.toolbar.newmachine\")}\n          onClick={() => {\n            if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n            {\n              graph.clear();\n              undoManager.clear();\n              machineController.setMachineName(null);\n            }\n          }}>\n          <CreateIcon/>\n        </IconButton>\n        {/*Upload Button*/}\n        <UploadButton className=\"navicon\" id=\"toolbar-upload\" title={I18N.toString(\"action.toolbar.uploadmachine\")}\n          app={app}\n          graphController={graphController}>\n          <UploadIcon/>\n        </UploadButton>\n        {/*Undo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-undo\" title={I18N.toString(\"action.toolbar.undo\")}\n          disabled={!undoManager.canUndo()}\n          onClick={()=>undoManager.undo()}>\n          <UndoIcon/>\n        </IconButton>\n        {/*Redo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-redo\" title={I18N.toString(\"action.toolbar.redo\")}\n          disabled={!undoManager.canRedo()}\n          onClick={()=>undoManager.redo()}>\n          <RedoIcon/>\n        </IconButton>\n        {/*Save Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-save\" title={I18N.toString(\"action.toolbar.save\")}\n          onClick={()=>drawer.setTab(Drawer.EXPORTING_PANEL_TAB_INDEX)} disabled={graph.isEmpty()}>\n          <SaveIcon/>\n        </IconButton>\n\n        {/*Right Alt. Toolbar*/}\n        <div className=\"toolbar-tray-alt\">\n          {/*Report a Bug Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-bug\" title={I18N.toString(\"action.toolbar.bug\")}>\n            <BugReportIcon/>\n          </IconButton>\n          {/*Help Button*/}\n          <HelpButton className=\"navicon\" id=\"toolbar-help\" title={I18N.toString(\"action.toolbar.help\")}>\n            <HelpIcon/>\n          </HelpButton>\n          {/*Language Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n            onClick={(e) => {document.activeElement.blur(); this.langOnClick();}} >\n            <LanguageIcon/>\n          </IconButton>\n          {/*Language Select*/}\n          <select id=\"toolbar-lang-select\" style={{maxWidth: (this.state.langOn ? \"10em\" : \"0\")}} onChange={(e) => {I18N.fetchLanguageFile(e.target.value);}}>\n            <option value=\"en_us\">English</option>\n            <option value=\"xx_pirate\">Pirate Speak</option>\n          </select>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport './Subtitle.css';\n\nimport Config from 'config.js';\n\nclass Subtitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { active: false };\n\n    this.messageTimer = null;\n  }\n\n  componentDidMount()\n  {\n    this.messageTimer = setTimeout(() => {\n      this.setState({ active: true });\n    }, Config.INIT_WAITTIME);\n  }\n\n  render()\n  {\n    const visible = this.state.active ? this.props.visible : false;\n    return <text y=\"-1em\" className={\"graph-ui subtitle\" + (visible ? \" visible\" : \"\")}\n      textAnchor=\"middle\">{I18N.toString(\"message.workspace.empty\")}</text>;\n  }\n}\n\nexport default Subtitle;\n","import React from 'react';\nimport './Workspace.css';\n\nimport Config from 'config.js';\n\nimport Subtitle from './Subtitle.js';\n\nconst WORKSPACE_OFFSET_X = 0;\nconst WORKSPACE_OFFSET_Y = 0;\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nconst GRAPH_OVERLAY_RENDER_LAYER = \"graphoverlay\";\n\nclass Workspace extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n  }\n\n  getSVGForExport(width, height)\n  {\n    const svg = this.ref;\n    if (!svg) return null;\n\n    const viewport = this.props.inputController.getInputAdapter().getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = this.props.graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = svg.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    for(const e of uiElements)\n    {\n      e.remove();\n    }\n\n    return clone;\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const inputController = app.getInputController();\n    const machineController = app.getMachineController();\n\n    const GraphRenderer = currentModule.getGraphRenderer();\n    const GraphOverlayRenderer = currentModule.getRenderer(GRAPH_OVERLAY_RENDER_LAYER);\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    let size = Config.DEFAULT_GRAPH_SIZE * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfSize = size / 2;\n\n    //Must not be a block content (must inline)\n    return <svg id=\"workspace-content\" ref={ref=>this.ref=ref}\n      viewBox={(-halfSize + WORKSPACE_OFFSET_X) + \" \" + (-halfSize + WORKSPACE_OFFSET_Y) + \" \" + size + \" \" + size}\n      xmlns=\"http://www.w3.org/2000/svg\">\n\n      {/* Graph subtitle */}\n      <Subtitle visible={graph.isEmpty()}/>\n\n      {/* Graph elements */}\n      <g id=\"workspace-content-elements\" transform={\n        \"translate(\" +\n        viewport.getOffsetX() + \" \" +\n        viewport.getOffsetY() + \")\"}>\n\n        {/* Graph origin crosshair */}\n        <line className=\"graph-ui\" x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"rgba(0,0,0,0.04)\"/>\n        <line className=\"graph-ui\" x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"rgba(0,0,0,0.04)\"/>\n\n        {/* Graph objects */}\n        { GraphRenderer &&\n          <GraphRenderer graph={graph} inputController={inputController}/> }\n\n        {/* Graph overlays */}\n        { GraphOverlayRenderer &&\n          <GraphOverlayRenderer workspace={this} app={app}/> }\n      </g>\n    </svg>;\n  }\n}\n\nexport default Workspace;\n","import Notifications from 'system/notification/Notifications.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport Config from 'config.js';\n\nclass Tutorial\n{\n  constructor()\n  {\n    this.app = null;\n  }\n\n  start(app)\n  {\n    if (!LocalSave.existsInStorage(\"graph\"))\n    {\n      Notifications.addMessage(I18N.toString(\"message.tutorial.1\"));\n      Notifications.addMessage(I18N.toString(\"message.intro.2\"));\n    }\n  }\n}\n\nexport default Tutorial;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor(adapter, element, viewport)\n  {\n    this._adapter = adapter;\n    this._element = element;\n    this._viewport = viewport;\n\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n    return this;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is mutable.\n   */\n  getInputEventPosition()\n  {\n    return this._inputpos;\n  }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput()\n  {\n    this._active = false;\n  }\n\n  isActive()\n  {\n    return this._active;\n  }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * The DOM element for which this pointer provides context for; this should be\n   * the same element as in the input adapter.\n   */\n  getElement()\n  {\n    return this._element;\n  }\n\n  /**\n   * The viewport for this pointer operates within; this should be the same\n   * viewport as in the input adapter.\n   */\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  /**\n   * The input adapter that controls this pointer's properties\n   */\n  getAdapter()\n  {\n    return this._adapter;\n  }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale)\n  {\n    this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale));\n  }\n\n  addScale(dscale)\n  {\n    this._scaleFactor += dscale;\n\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    else if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n  }\n\n  getOffsetX()\n  {\n    return this._offsetX;\n  }\n\n  getOffsetY()\n  {\n    return this._offsetY;\n  }\n\n  getOffsetDamping()\n  {\n    return this._offsetDamping;\n  }\n\n  getScale()\n  {\n    return this._scaleFactor;\n  }\n\n  getMinScale()\n  {\n    return this._minScale;\n  }\n\n  getMaxScale()\n  {\n    return this._maxScale;\n  }\n\n  getElement()\n  {\n    return this._element;\n  }\n}\n\nexport default ViewportAdapter;\n","import Config from 'config.js';\n\nimport InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\n/**\n * Provides an interface for InputController to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._controller = null;\n    this._element = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n    this._pointer = null;\n\n    this._viewport = new ViewportAdapter();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = Config.LONG_TAP_TICKS;\n    this._dblInputDelay = Config.DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = Config.SCROLL_SENSITIVITY;\n    this._minTapRadius = Config.CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = Config.CURSOR_RADIUS_SQU + Config.DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  setController(controller)\n  {\n    this._controller = controller;\n    return this;\n  }\n\n  initialize(element)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Missing SVG element for input adapter's viewport\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._viewport.setElement(this._element = element);\n    this._pointer = new InputPointer(this, this._element, this._viewport);\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  update()\n  {\n    //Smooth transition offset\n    this._viewport.update();\n  }\n\n  onMouseDown(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this._controller) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    this._pointer.setPosition(mouse.x, mouse.y);\n\n    //Can update target here for hover effects...\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this._controller) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    if (controller.onZoomChange(pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    if (!controller.onPreInputEvent(pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n        if (!controller.onDragStart(pointer))\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      controller.onDragMove(pointer);\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      controller.onDragStop(pointer);\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        controller.onAltInputEvent(pointer);\n      }\n      else\n      {\n        //Tap!\n        const result = controller.onInputEvent(pointer);\n\n        //If the input was not consumed...\n        if (!result)\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            controller.onDblInputEvent(pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  getActiveElement()\n  {\n    return this._element;\n  }\n\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  getPointerX()\n  {\n    return this._pointer ? this._pointer.x : 0;\n  }\n\n  getPointerY()\n  {\n    return this._pointer ? this._pointer.y : 0;\n  }\n\n  isPointerActive()\n  {\n    return this._pointer ? this._pointer.isActive() : false;\n  }\n\n  isUsingTouch()\n  {\n    return this._cursor._touchmove || this._cursor._touchend;\n  }\n\n  isAltInput()\n  {\n    return this._altinput;\n  }\n\n  isDragging()\n  {\n    return this._dragging;\n  }\n}\n\nexport default InputAdapter;\n","import React from 'react';\nimport './NotificationMessage.css';\n\nclass NotificationMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onExitMessage = this.onExitMessage.bind(this);\n  }\n\n  onExitMessage(e)\n  {\n    const message = this.props.value;\n    message.close();\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.value;\n    return <div className={\"notification-message-container notification-message-type-\" + message.getType() + \" \" + this.props.className}\n      id={this.props.id} style={this.props.style}>\n      { this.props.children || message.value.split(\"\\\\n\").map(e => <p key={e}>{e}</p>) || message }\n      <button onClick={this.onExitMessage}>{I18N.toString(\"message.action.close\")}</button>\n    </div>;\n  }\n}\nexport default NotificationMessage;\n","import React from 'react';\nimport './NotificationView.css';\n\nimport NotificationMessage from './NotificationMessage.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return <div className={\"notification-container \" + this.props.className} id={this.props.id} style={this.props.style}>\n    {\n      notificationManager.getMessages().map(e => {\n        const id = e.getID();\n        const ComponentClass = e.getComponentClass();\n        const componentProps = e.getComponentProps() || {};\n\n        return <NotificationMessage key={id} value={e}>\n        { ComponentClass && <ComponentClass message={e} {...componentProps}/> }\n        </NotificationMessage>;\n      })\n    }\n    </div>;\n  }\n}\nexport default NotificationView;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n\n  captureEvent(eventHandler)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(eventHandler);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldest recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo();\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo();\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n}\n\nexport default UndoManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './App.css';\n\nimport Config from 'config.js';\n\nimport Modules from './Modules.js';\nimport DefaultModule from 'modules/default/DefaultModule.js';\n\nimport HotKeys from './HotKeys.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nimport Toolbar from './toolbar/Toolbar.js';\nimport Workspace from './workspace/Workspace.js';\nimport Drawer from './drawer/Drawer.js';\nimport Viewport from './viewport/Viewport.js';\nimport Tutorial from 'tutorial/Tutorial.js';\n\nimport InputAdapter from 'system/inputadapter/InputAdapter.js';\nimport Notifications from 'system/notification/Notifications.js';\nimport NotificationView from 'system/notification/components/NotificationView.js';\nimport UndoManager from 'system/undomanager/UndoManager.js';\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //Create references\n    this.container = null;\n    this.workspace = null;\n    this.viewport = null;\n    this.drawer = null;\n    this.toolbar = null;\n\n    //These need to be initialized before module\n    this.inputAdapter = new InputAdapter();\n    this.inputAdapter.getViewport()\n      .setMinScale(Config.MIN_SCALE)\n      .setMaxScale(Config.MAX_SCALE)\n      .setOffsetDamping(Config.SMOOTH_OFFSET_DAMPING);\n\n    this.undoManager = new UndoManager();\n\n    this._module = new DefaultModule(this);\n    Modules['fsa'].fetch((Module) => {\n      if (this._module)\n      {\n        this._module.destroy();\n      }\n\n      this._module = new Module(this);\n      this._module.initialize(this);\n    });\n\n    this.hotKeys = new HotKeys();\n    this.tutorial = new Tutorial();\n\n    this.state = {\n      isOpen: true,\n      isDangerous: false,\n      isFullscreen: false,\n      isWaitingForFile: false\n    };\n\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n\n    this._init = false;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //Initialize input adapter\n    const workspaceDOM = this.workspace.ref;\n    this.inputAdapter.initialize(workspaceDOM);\n\n    //Initialize the module...\n    const module = this.getCurrentModule();\n    module.initialize(this);\n\n    this.hotKeys.initialize(this);\n\n    //Upload drop zone\n    workspaceDOM.addEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.addEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.addEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.addEventListener(\"dragleave\", this.onDragLeave);\n\n    //Begin tutorial\n    this.tutorial.start(this);\n\n    LocalSave.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n\n    this._init = true;\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    LocalSave.unregisterHandler(this);\n\n    LocalSave.terminate();\n\n    this.hotKeys.destroy();\n\n    this._module.destroy(this);\n\n    this.inputAdapter.destroy();\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.removeEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.removeEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.removeEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.removeEventListener(\"dragleave\", this.onDragLeave);\n\n    this._init = false;\n  }\n\n  onLoadSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const data = LocalSave.loadFromStorage(\"graph-\" + moduleName);\n    if (data)\n    {\n      const exporter = this._module.getDefaultGraphExporter();\n      exporter.importFromData(data, this);\n    }\n  }\n\n  onAutoSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const exporter = this._module.getDefaultGraphExporter();\n    const data = exporter.exportToData(this);\n    LocalSave.saveToStorage(\"graph-\" + moduleName, data);\n  }\n\n  //Called to prevent default file open\n  onDragOver(ev)\n  {\n    ev.preventDefault();\n  }\n\n  onDragEnter(ev)\n  {\n    ev.preventDefault();\n\n    //Change state\n    this.setState({ isWaitingForFile: true });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: Viewport.DANGEROUS\n      };\n    });\n  }\n\n  onDragLeave(ev)\n  {\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n  }\n\n  onFileDrop(ev)\n  {\n    //Prevent file from being opened\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n\n    let fileBlob = null;\n    if (ev.dataTransfer.items)\n    {\n      const length = ev.dataTransfer.items.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = ev.dataTransfer.items[0];\n        if (file.kind === 'file')\n        {\n          fileBlob = file.getAsFile();\n        }\n      }\n    }\n    else\n    {\n      const length = ev.dataTransfer.files.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        fileBlob = ev.dataTransfer.files[0];\n      }\n    }\n\n    if (fileBlob)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(fileBlob, this)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n        });\n    }\n\n    if (ev.dataTransfer.items)\n    {\n      ev.dataTransfer.items.clear();\n    }\n    else\n    {\n      ev.dataTransfer.clearData();\n    }\n  }\n\n  openDrawer(full=null)\n  {\n    if (typeof full === 'boolean')\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true, isFullscreen: full };\n      });\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true };\n      });\n    }\n  }\n\n  closeDrawer()\n  {\n    this.setState((prev, props) => {\n      return { isOpen: false };\n    });\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.isOpen;\n  }\n\n  shouldHideContent()\n  {\n    return this.state.isFullscreen && this.state.isOpen;\n  }\n\n  getCurrentModule()\n  {\n    return this._module;\n  }\n\n  getInputController()\n  {\n    return this._module.getInputController();\n  }\n\n  getGraphController()\n  {\n    return this._module.getGraphController();\n  }\n\n  getMachineController()\n  {\n    return this._module.getMachineController();\n  }\n\n  getInputAdapter()\n  {\n    return this.inputAdapter;\n  }\n\n  getUndoManager()\n  {\n    return this.undoManager;\n  }\n\n  render()\n  {\n    const screen = this.workspace ? this.workspace.ref : null;\n\n    if (this._init)\n    {\n      this.inputAdapter.update();\n      this._module.update(this);\n    }\n\n    return <div className=\"app-container\" ref={ref=>this.container=ref}>\n      <Toolbar ref={ref=>this.toolbar=ref}\n        app={this}\n        drawer={this.drawer}/>\n\n      <NotificationView notificationManager={Notifications}/>\n\n      <div className=\"workspace-container\">\n        <div className={\"workspace-main\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\",\n            opacity: this.state.isWaitingForFile ? \"0.1\" : \"1\"\n          }}>\n\n          <Workspace ref={ref=>this.workspace=ref}\n            app={this}/>\n        </div>\n\n        <div className={\"workspace-viewport\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\"\n          }}>\n\n          <Viewport ref={ref=>this.viewport=ref}\n            app={this}\n            screen={screen}/>\n        </div>\n\n        <div className={\"workspace-drawer\" +\n          (this.state.isOpen ? \" open\" : \"\") +\n          (this.state.isFullscreen ? \" fullscreen\" : \"\")}>\n\n          <Drawer ref={ref=>this.drawer=ref}\n            app={this}\n            toolbar={this.toolbar}/>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n","import React from 'react';\n\nclass Logo extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg version=\"1.1\" id={this.props.id} xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n    \t viewBox=\"0 0 300 100\">\n      <style type=\"text/css\">\n      {\n      \t`.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}\n      \t.st1{fill:#FFC82C;stroke:#7E55F3;stroke-width:2;stroke-miterlimit:10;}\n      \t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n      \t.st3{font-family:'PTSans-Regular';}\n      \t.st4{font-size:90px;}\n      \t.st5{fill:none;}`\n      }\n      </style>\n      <path className=\"st0\" d=\"M43.7,20.1c0-9.4-8.5-17.1-19.1-17.1\"/>\n      <circle className=\"st1\" cx=\"44.1\" cy=\"45.3\" r=\"29.6\"/>\n      <polygon className=\"st2\" points=\"44.1,42.1 20.2,83.5 68,83.5 \"/>\n      <text transform=\"matrix(1 0 0 1 74.1533 77.1901)\" className=\"st3 st4\">flap.js</text>\n      <path className=\"st5\" d=\"M40.9,89c0,2.9,73.6,5.2,164.6,5.2\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M42.4,83.9c0,7,73,12.6,163.1,12.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st0\" d=\"M227.6,72.1c0,13.7-22.7,24.8-50.7,24.8\"/>\n      <path className=\"st0\" d=\"M6,20.1C6,10.7,14.5,3.1,25,3.1\"/>\n      <line className=\"st0\" x1=\"6\" y1=\"20.1\" x2=\"6\" y2=\"77.2\"/>\n      <path className=\"st0\" d=\"M6,77.2C6,88.1,27,96.9,53,96.9\"/>\n      <line className=\"st0\" x1=\"57.3\" y1=\"96.9\" x2=\"177.4\" y2=\"96.9\"/>\n      <line className=\"st0\" x1=\"53\" y1=\"96.9\" x2=\"64.5\" y2=\"96.9\"/>\n    </svg>;\n  }\n}\n\nexport default Logo;\n","import React from 'react';\nimport './Quote.css';\n\nclass Quote extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className=\"quote-container\">\n      <div className=\"quote\">\n        {this.props.value}\n      </div>\n      <div className=\"subquote\">\n        {this.props.label}\n      </div>\n    </div>;\n  }\n}\n\nexport default Quote;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './LandingPage.css';\n\nimport Router from 'router.js';\n\nimport Logo from './Logo.js';\nimport Quote from './Quote.js';\n\nimport App from 'content/App.js';\n\nconst LAUNCH_BUTTON_TEXT = \"Launch Workspace\";\nconst SMALL_LAUNCH_BUTTON_TEXT = \"Get Started!\";\nconst SMALLER_LAUNCH_BUTTON_TEXT = \"Proceed.\";\nconst TUTORIAL_BUTTON_TEXT = \"= Want to try our awesome tutorial? =\";\n\nconst QUOTES = [\n  [\"Explore what it means to be \\'computable\\'.\", \"- Prof. Mia Minnes\"],\n  [\"Lush has an interactive background in Mozilla\", \"- David\"],\n  [\"Good almost afternoon (I totally didnt just wake up).\", \"- Noah\"],\n  [\"RONALDO IS MY GOD\", \"- David\"],\n  [\"If you dream it, you can do it.\", \"- Walt Disney\"],\n  [\"Never, never, never give up.\", \"- Winston Churchill\"],\n  [\"Don't wait. The time will never be just right.\", \"- Napolean Hill\"],\n  [\"I can, therefore I am.\", \"- Simone Wei\"],\n  [\"Turn your wounds into wisdom.\", \"- Oprah Winfrey\"],\n  [\"Believe you can and you're halfway there.\", \"- Theodore Roosevelt\"],\n  [\"80% of success is showing up.\", \"- Woody Allen\"],\n  [\"A jug fills drop by drop.\", \"- Buddha\"],\n  [\"If you have never failed you have never lived.\", \"- Human\"],\n  [\"Dream big and dare to fail.\", \"- Norman Vaughan\"],\n  [\"Have faith in yourself and in the future.\", \"- Ted Kennedy\"],\n  [\"It's kind of fun to do the impossible.\", \"- Walt Disney\"],\n  [\"Find out who you are and do it on purpose.\", \"- Dolly Parton\"],\n  [\"The only journey is the one within.\", \"- Rainer Maria Rilke\"],\n  [\"Every moment is a fresh beginning.\", \"- T.S. Eliot\"],\n  [\"Be willing to be a beginner every single morning.\", \"- Meister Eckhart\"]\n];\nconst QUOTE_INDEX = Math.floor(Math.random() * QUOTES.length);\nconst [CONTENT_QUOTE, CONTENT_SUBQUOTE] = QUOTES[QUOTE_INDEX];\n\nconst TUTORIAL_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst HELP_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst ABOUT_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/README.md\";\nconst REPORT_BUG_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/issues\";\nconst GITHUB_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/\";\n\nconst PROFMINNES_LINK = \"http://cseweb.ucsd.edu/~minnes/\";\nconst MAYA_LINK = \"https://www.linkedin.com/in/maya-bello-6b8637a7/\";\nconst NOAH_LINK = \"https://www.linkedin.com/in/noah-solomon-9a8526129/\";\nconst DAVID_LINK = \"https://www.linkedin.com/in/osunadavid/\";\nconst ERIK_LINK = \"https://www.linkedin.com/in/xuanqiang-zhao-364225153/\";\nconst LIXUAN_LINK = \"https://www.linkedin.com/in/lixuan-lang-3ba206143/\";\nconst ANDREW_LINK = \"https://www.linkedin.com/in/andrew-kuo-790243132/\";\nconst SETH_LINK = \"\";\nconst RAVNEET_LINK = \"\";\n\nclass LandingPage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.footer = null;\n    this.returnHome = null;\n\n    this.onLaunchButton = this.onLaunchButton.bind(this);\n    this.onTutorialButton = this.onTutorialButton.bind(this);\n    this.onReturnHomeButton = this.onReturnHomeButton.bind(this);\n    this.onReportBugButton = this.onReportBugButton.bind(this);\n    this.onAboutButton = this.onAboutButton.bind(this);\n    this.onHelpButton = this.onHelpButton.bind(this);\n    this.onGithubButton = this.onGithubButton.bind(this);\n  }\n\n  componentDidMount()\n  {\n    //Parallax effect for footer\n    window.onscroll = (e) => {\n      let height = Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight\n      ) - window.innerHeight;\n      let scroll = window.pageYOffset;\n      const value = Math.round(height - scroll) / 5;\n\n      if (this.footer && this.returnHome)\n      {\n        this.footer.style.bottom = value + \"px\";\n        this.returnHome.style.opacity = (scroll / height);\n      }\n    };\n  }\n\n  onLaunchButton(e)\n  {\n    //import(/* webpackChunkName: \"content\" */ 'content/App.js').then(({ default: _ }) => { Router.routeTo( _ ); });\n    Router.routeTo(App);\n  }\n\n  onTutorialButton(e)\n  {\n    const newTab = window.open(TUTORIAL_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onReturnHomeButton(e)\n  {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  onReportBugButton(e)\n  {\n    const newTab = window.open(REPORT_BUG_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onAboutButton(e)\n  {\n    const newTab = window.open(ABOUT_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onHelpButton(e)\n  {\n    const newTab = window.open(HELP_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onGithubButton(e)\n  {\n    const newTab = window.open(GITHUB_LINK, '_blank');\n    newTab.focus();\n  }\n\n  render()\n  {\n    let launchText;\n\n    //Smallest\n    if (window.matchMedia(\"(max-width: 400px)\").matches)\n    {\n      launchText = \"\";\n    }\n    //Smaller\n    else if (window.matchMedia(\"(max-width: 760px)\").matches)\n    {\n      launchText = SMALLER_LAUNCH_BUTTON_TEXT;\n    }\n    //Small\n    else if (window.matchMedia(\"(max-width: 68em)\").matches)\n    {\n      launchText = SMALL_LAUNCH_BUTTON_TEXT;\n    }\n    //Default\n    else\n    {\n      launchText = LAUNCH_BUTTON_TEXT;\n    }\n\n    return <div className=\"landing-container\">\n\n      <div className=\"content-container\">\n\n        {/* HEADER*/}\n        <header>\n          <Logo id=\"logo\"/>\n        </header>\n\n        {/* CONTENT */}\n        <div className=\"content\">\n          <div className=\"content-quote-container\">\n            <Quote value={CONTENT_QUOTE} label={CONTENT_SUBQUOTE} />\n          </div>\n          <div className=\"launch-container\">\n            <div className=\"set-container\">\n              <span className=\"openset\">{\"{\"}</span>\n              <button id=\"launch-button\" onClick={this.onLaunchButton}>\n                {launchText}\n              </button>\n              <span className=\"closeset\">{\"}\"}</span>\n            </div>\n            <div id=\"tutorial-button-container\">\n              <button id=\"tutorial-button\" onClick={this.onTutorialButton}>\n                {TUTORIAL_BUTTON_TEXT}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div ref={ref=>this.returnHome=ref} id=\"return-home\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n            onClick={this.onReturnHomeButton}>\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* FOOTER */}\n      <footer ref={ref=>this.footer=ref}>\n        <div className=\"utility\">\n          <div><a className=\"info\" onClick={this.onReportBugButton}>Report a Bug</a></div>\n          <div><a className=\"info\" onClick={this.onAboutButton}>About</a></div>\n          <div><a className=\"info\" onClick={this.onHelpButton}>Help</a></div>\n        </div>\n        <div className=\"credits\">\n          <span className=\"space\"></span>\n          <span className=\"left\">\n            <div>Professor</div>\n            <a className=\"nobreak\" onClick={()=>window.open(PROFMINNES_LINK, '_blank').focus()}>Mia Minnes</a>\n          </span>\n          <span className=\"right\">\n            <div>Developers</div>\n            <a onClick={()=>window.open(ANDREW_LINK, '_blank').focus()}>Andrew</a>\n            <a onClick={()=>window.open(LIXUAN_LINK, '_blank').focus()}>Lixuan</a>\n            <a onClick={()=>window.open(RAVNEET_LINK, '_blank').focus()}>Ravneet</a>\n            <a onClick={()=>window.open(SETH_LINK, '_blank').focus()}>Seth</a>\n            <div>+</div>\n            <a onClick={()=>window.open(MAYA_LINK, '_blank').focus()}>Maya</a>\n            <a onClick={()=>window.open(NOAH_LINK, '_blank').focus()}>Noah</a>\n            <a onClick={()=>window.open(DAVID_LINK, '_blank').focus()}>David</a>\n            <a onClick={()=>window.open(ERIK_LINK, '_blank').focus()}>Erik</a>\n          </span>\n          <span className=\"space\"></span>\n        </div>\n\n        <div>\n          <a className=\"info\" onClick={this.onGithubButton}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n            </svg>\n            Find it on <b>GitHub</b>\n          </a>\n        </div>\n\n        <div className=\"subtitle-container\">\n          <div className=\"subtitle\">\n            {\"\\u00A9 2018 University of California, San Diego. All rights reserved.\"}\n          </div>\n          <div className=\"subtitle\">\n            <label>{\"Thank you for reading me! Stay amazing!\"}</label>\n          </div>\n        </div>\n      </footer>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(LandingPage);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//Router: imports\nimport Router from 'router.js';\nimport App from 'content/App.js';\nimport LandingPage from 'landing/components/LandingPage.js';\n//Config: imports\nimport Config from 'config.js';\nimport { loadConfig, saveConfig } from 'config.js';\nconst AUTOSAVE_CONFIG = true;\n//LocalSave: imports\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = true;\n\n//Setup viewport\nwindow.addEventListener('load', (event) => {\n  console.log(\"Preparing for \\'\" + process.env.NODE_ENV + \"\\' environment...\");\n  loadApplication();\n  window.requestAnimationFrame(updateApplication);\n});\n\n//Warn user before exit\nwindow.addEventListener('beforeunload', (event) => {\n  //Config: Only save if changes were made\n  if (AUTOSAVE_CONFIG) saveConfig();\n\n  if (SHOULD_WARN_USERS_ON_EXIT)\n  {\n    const message = I18N.toString(\"alert.window.exit\");\n    event = event || window.event;\n    // For IE and Firefox\n    if (event) event.returnValue = message;\n\n    //For Safari\n    return message;\n  }\n});\n\n//Tell the client that an update is available\nwindow.isUpdateAvailable.then(hasUpdate => {\n  if (hasUpdate)\n  {\n    console.log(\"[App] Found update for version \" + process.env.VERSION + \"...\");\n    window.alert(\"*** New update available! *** \\n Please restart the browser.\");\n  }\n});\n\n//Setup application\nconst FRAMES_PER_SECOND = 60;\nvar prevtime = 0;\nvar root;\nvar dt;\n\n//Load application\nfunction loadApplication()\n{\n  loadConfig();\n  root = document.getElementById(\"root\");\n  //import(/* webpackChunkName: \"landing\" */ 'landing/components/LandingPage.js').then(({ default: _ }) => Router.routeTo( _ ));\n\n  //This should be the same as the one referred to by OptionsPanel\n  if (LocalSave.getStringFromStorage(\"skipWelcome\") == \"true\")\n  {\n    Router.routeTo(App);\n  }\n  else\n  {\n    Router.routeTo(LandingPage);\n  }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n  dt = (time - prevtime) / FRAMES_PER_SECOND;\n  {\n    const page = Router.getCurrentPage();\n    if (page)\n    {\n      ReactDOM.render(React.createElement(page), root);\n    }\n  }\n  prevtime = time;\n  window.requestAnimationFrame(updateApplication);\n}\n"],"sourceRoot":""}