{"version":3,"sources":["webpack:///./src/app/router.js","webpack:///./src/app/config.js","webpack:///./src/app/modules/base/exporter/GraphImporter.js","webpack:///./src/app/modules/base/exporter/AbstractGraphExporter.js","webpack:///./src/app/icons/flat/PNGIcon.js","webpack:///./src/app/icons/flat/JPGIcon.js","webpack:///./src/app/util/Downloader.js","webpack:///./src/app/modules/base/exporter/GraphImageExporter.js","webpack:///./src/app/modules/base/AbstractModule.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/system/notification/NotificationManager.js","webpack:///./src/app/system/notification/Notifications.js","webpack:///./src/app/system/formattedinput/FormattedInput.js","webpack:///./src/app/icons/IconToggle.js","webpack:///./src/app/icons/DropDownIcon.js","webpack:///./src/app/modules/fsa/panels/overview/infoblock/InfoBlock.js","webpack:///./src/app/icons/IconButton.js","webpack:///./src/app/icons/BoxAddIcon.js","webpack:///./src/app/icons/TriangleIcon.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StateTag.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StatesList.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetTag.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetList.js","webpack:///./src/app/machine/FSA.js","webpack:///./src/app/machine/Symbols.js","webpack:///./src/app/machine/NFA.js","webpack:///./src/app/modules/fsa/panels/overview/transitiontable/TransitionTable.js","webpack:///./src/app/modules/fsa/panels/overview/transitionfunction/TransitionFunction.js","webpack:///./src/app/modules/fsa/panels/overview/formaldefinition/FormalDefinition.js","webpack:///./src/app/modules/fsa/panels/overview/OverviewPanel.js","webpack:///./src/app/content/viewport/Viewport.js","webpack:///./src/app/machine/util/solveNFA.js","webpack:///./src/app/machine/DFA.js","webpack:///./src/app/modules/fsa/testing/TestMode.js","webpack:///./src/app/modules/fsa/testing/TestingInputList.js","webpack:///./src/app/modules/fsa/testing/TestingManager.js","webpack:///./src/app/icons/AddIcon.js","webpack:///./src/app/icons/RemoveIcon.js","webpack:///./src/app/icons/SuccessIcon.js","webpack:///./src/app/icons/FailureIcon.js","webpack:///./src/app/icons/RunningManIcon.js","webpack:///./src/app/modules/fsa/panels/testing/StatusButton.js","webpack:///./src/app/modules/fsa/panels/testing/TestingInput.js","webpack:///./src/app/modules/fsa/panels/testing/components/UploadTestButton.js","webpack:///./src/app/icons/UploadIcon.js","webpack:///./src/app/icons/PageNewContentIcon.js","webpack:///./src/app/icons/SaveIcon.js","webpack:///./src/app/icons/CloseIcon.js","webpack:///./src/app/modules/fsa/panels/testing/TestingPanel.js","webpack:///./src/app/modules/fsa/notifications/NFAToDFAConversionWarningMessage.js","webpack:///./src/app/modules/fsa/panels/analysis/AnalysisPanel.js","webpack:///./src/app/modules/fsa/panels/about/AboutPanel.js","webpack:///./src/app/modules/base/AbstractInputController.js","webpack:///./src/app/modules/fsa/controller/GraphPicker.js","webpack:///./src/app/graph/GraphElement.js","webpack:///./src/app/graph/GraphNode.js","webpack:///./src/app/modules/fsa/graph/FSANode.js","webpack:///./src/app/graph/GraphEdge.js","webpack:///./src/app/graph/QuadraticEdge.js","webpack:///./src/app/modules/fsa/graph/FSAEdge.js","webpack:///./src/app/modules/fsa/controller/InputController.js","webpack:///./src/app/modules/base/AbstractGraphController.js","webpack:///./src/app/util/Eventable.js","webpack:///./src/app/modules/fsa/graph/GraphLayout.js","webpack:///./src/app/graph/NodalGraph.js","webpack:///./src/app/modules/fsa/graph/FSAGraph.js","webpack:///./src/app/modules/fsa/controller/GraphController.js","webpack:///./src/app/machine/util/convertNFA.js","webpack:///./src/app/modules/fsa/controller/MachineController.js","webpack:///./src/app/modules/fsa/graph/renderer/NodeRenderer.js","webpack:///./src/app/modules/fsa/graph/renderer/EdgeRenderer.js","webpack:///./src/app/modules/fsa/graph/renderer/InitialMarkerRenderer.js","webpack:///./src/app/modules/fsa/graph/renderer/FSAGraphRenderer.js","webpack:///./src/app/content/workspace/renderer/SelectionBoxRenderer.js","webpack:///./src/app/content/workspace/renderer/HighlightRenderer.js","webpack:///./src/app/modules/fsa/graph/renderer/FSAGraphOverlayRenderer.js","webpack:///./src/app/content/viewport/TrashCan.js","webpack:///./src/app/icons/PlayIcon.js","webpack:///./src/app/icons/PauseIcon.js","webpack:///./src/app/icons/StopIcon.js","webpack:///./src/app/icons/UndoIcon.js","webpack:///./src/app/icons/RedoIcon.js","webpack:///./src/app/content/viewport/TestTray.js","webpack:///./src/app/icons/CreateIcon.js","webpack:///./src/app/icons/MoveIcon.js","webpack:///./src/app/content/viewport/CursorMode.js","webpack:///./src/app/modules/fsa/renderer/ViewportRenderer.js","webpack:///./src/app/modules/fsa/builder/MachineLabeler.js","webpack:///./src/app/modules/fsa/builder/MachineBuilder.js","webpack:///./src/app/modules/fsa/notifications/StateUnreachableWarningMessage.js","webpack:///./src/app/modules/fsa/notifications/StateMissingTransitionErrorMessage.js","webpack:///./src/app/modules/fsa/notifications/TransitionErrorMessage.js","webpack:///./src/app/modules/fsa/builder/DFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/NFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/FSABuilder.js","webpack:///./src/app/modules/fsa/controller/events/EventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeInitialEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveAllEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeDestinationEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeLabelEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserToggleNodeEventHandler.js","webpack:///./src/app/modules/fsa/graph/FSAGraphParser.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteNodesEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserImportGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/SafeGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserChangeMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserConvertMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameSymbolEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteSymbolEventHandler.js","webpack:///./src/app/modules/fsa/EventManager.js","webpack:///./src/app/modules/fsa/editor/LabelEditor.js","webpack:///./src/app/icons/flat/JSONIcon.js","webpack:///./src/app/modules/fsa/exporter/FSAGraphExporter.js","webpack:///./src/app/icons/flat/XMLIcon.js","webpack:///./src/app/modules/fsa/exporter/JFLAPGraphExporter.js","webpack:///./src/app/modules/fsa/FSAModule.js","webpack:///./src/app/content/HotKeys.js","webpack:///./src/app/system/localsave/LocalSave.js","webpack:///./src/app/system/localsave/LocalSaveManager.js","webpack:///./src/app/content/toolbar/UploadButton.js","webpack:///./src/app/content/toolbar/HelpButton.js","webpack:///./src/app/content/toolbar/MachineName.js","webpack:///./src/app/icons/PageNewIcon.js","webpack:///./src/app/icons/HelpIcon.js","webpack:///./src/app/icons/LanguageIcon.js","webpack:///./src/app/icons/OfflineIcon.js","webpack:///./src/app/icons/BugReportIcon.js","webpack:///./src/app/content/drawer/DrawerExpander.js","webpack:///./src/app/content/drawer/panels/exporting/ExportingPanel.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/system/styleopt/StyleOptionRegistry.js","webpack:///./src/app/system/styleopt/components/StyleInput.js","webpack:///./src/app/content/drawer/panels/options/OptionGroup.js","webpack:///./src/app/content/drawer/panels/options/OptionHotkey.js","webpack:///./src/app/content/drawer/panels/options/OptionsPanel.js","webpack:///./src/app/content/drawer/Drawer.js","webpack:///./src/app/content/toolbar/Toolbar.js","webpack:///./src/app/content/workspace/Subtitle.js","webpack:///./src/app/content/workspace/Workspace.js","webpack:///./src/app/tutorial/Tutorial.js","webpack:///./src/app/system/inputadapter/InputPointer.js","webpack:///./src/app/system/inputadapter/ViewportAdapter.js","webpack:///./src/app/system/inputadapter/InputAdapter.js","webpack:///./src/app/system/notification/components/NotificationMessage.js","webpack:///./src/app/system/notification/components/NotificationView.js","webpack:///./src/app/system/undomanager/UndoManager.js","webpack:///./src/app/content/App.js","webpack:///./src/app/landing/components/Logo.js","webpack:///./src/app/landing/components/Quote.js","webpack:///./src/app/landing/components/LandingPage.js","webpack:///./src/app/index.js"],"names":["ROUTER","_current","routeTo","component","this","getCurrentPage","LOCAL_STORAGE_ID","cfg","setValue","key","value","hasOwnProperty","Error","_userDefined","_dirty","bind","saveConfig","arguments","length","undefined","console","log","jsonString","JSON","stringify","localStorage","setItem","e","clearConfig","removeItem","MACHINE_ERRORS_MESSAGE_TAG","MACHINE_CONVERSION_MESSAGE_TAG","ERROR_CHECK_INTERVAL","GRAPH_IMMEDIATE_INTERVAL","SMOOTH_OFFSET_DAMPING","SCROLL_SENSITIVITY","MIN_SCALE","MAX_SCALE","INIT_WAITTIME","STR_TRANSITION_DEFAULT_LABEL","STR_STATE_LABEL","PARALLEL_EDGE_HEIGHT","SELF_LOOP_HEIGHT","SUBMIT_KEY","CLEAR_KEY","TAB_KEY","UP_KEY","DOWN_KEY","DELETE_KEY","DELETE_FORWARD_KEY","DEFAULT_GRAPH_SIZE","NODE_RADIUS","NODE_RADIUS_SQU","NODE_DIAMETER","NODE_RADIUS_INNER","INITIAL_MARKER_OFFSET_X","EDGE_RADIUS","EDGE_RADIUS_SQU","ARROW_WIDTH","PLACEHOLDER_LENGTH","ENDPOINT_RADIUS","ENDPOINT_RADIUS_SQU","HOVER_RADIUS_OFFSET","CURSOR_RADIUS","CURSOR_RADIUS_SQU","DOUBLE_TAP_TICKS","LONG_TAP_TICKS","SPAWN_RADIUS","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","DRAGGING_BUFFER","DRAGGING_BUFFER_SQU","PADDING_RADIUS_SQU","GraphImporter","module","_classCallCheck","_module","fileBlob","app","File","result","Promise","reject","fileName","name","exporters","getGraphExporters","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","exporter","canImport","doesSupportFile","endsWith","getFileType","catch","importFromFile","_iterator","Symbol","iterator","next","done","err","return","error","data","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop2","doesSupportData","importFromData","_iterator2","map","AbstractGraphExporter","AbstractGraphExporter_classCallCheck","filename","getLabel","toUpperCase","PNGIcon","props","PNGIcon_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","react_default","a","createElement","className","xmlns","viewBox","fill","d","points","cx","cy","r","JPGIcon","JPGIcon_classCallCheck","JPGIcon_possibleConstructorReturn","JPGIcon_getPrototypeOf","Downloader","downloadURL","getTextDataURI","filetype","svg","width","height","svgString","XMLSerializer","serializeToString","blob","Blob","type","url","URL","createObjectURL","canvas","document","ctx","getContext","pixelRatio","window","devicePixelRatio","style","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageURI","toDataURL","replace","src","element","headerIndex","indexOf","substring","setAttribute","display","body","appendChild","click","removeChild","encodeURIComponent","GraphImageExporter","_this","imageType","GraphImageExporter_classCallCheck","GraphImageExporter_possibleConstructorReturn","GraphImageExporter_getPrototypeOf","_imageType","workspace","workspaceDim","ref","baseVal","getSVGForExport","downloadSVG","I18N","toString","_get","prototype","DEFAULT_PANELS","DEFAULT_GRAPH_EXPORTERS","DEFAULT_IMAGE_EXPORTERS","AbstractModule","AbstractModule_classCallCheck","_importer","renderLayer","getModuleName","guid","s4","Math","floor","random","Message","handler","tags","componentClass","componentProps","NotificationManager_classCallCheck","_handler","_id","_type","messages","getMessages","index","splice","tag","INSTANCE","NotificationManager","_messageQueue","shouldReplaceRelated","clearMessages","unshift","addMessage","message","Array","isArray","i","hasTag","FormattedInput","FormattedInput_classCallCheck","FormattedInput_getPrototypeOf","ignoreSaveOnExit","defaultValue","state","prevValue","onChange","FormattedInput_assertThisInitialized","onBlur","onKeyUp","nextProps","hasFocus","setState","select","focus","blur","activeElement","filter","target","_this2","captureOnExit","formatValue","prev","resetValue","onSubmit","_this3","_this4","newValue","callback","separator","selectionStart","selectionEnd","formatter","_this5","id","IconToggle","IconToggle_classCallCheck","IconToggle_getPrototypeOf","open","onClick","IconToggle_assertThisInitialized","title","disabled","children","DropDownIcon","DropDownIcon_classCallCheck","DropDownIcon_possibleConstructorReturn","DropDownIcon_getPrototypeOf","InfoBlock","InfoBlock_classCallCheck","InfoBlock_possibleConstructorReturn","InfoBlock_getPrototypeOf","dropdown","createRef","app_icons_IconToggle","pointerEvents","icons_DropDownIcon","isOpen","IconButton","IconButton_classCallCheck","IconButton_possibleConstructorReturn","IconButton_getPrototypeOf","BoxAddIcon","BoxAddIcon_classCallCheck","BoxAddIcon_possibleConstructorReturn","BoxAddIcon_getPrototypeOf","TriangleIcon","TriangleIcon_classCallCheck","TriangleIcon_possibleConstructorReturn","TriangleIcon_getPrototypeOf","StateTag","StateTag_classCallCheck","StateTag_getPrototypeOf","onValueChange","StateTag_assertThisInitialized","onFocus","onKeyDown","label","graphController","newLabel","node","graph","getGraph","getNodesByLabel","renameNode","deleteTargetNode","keyCode","Config","preventDefault","trim","nodes","isCustom","getNodeCustom","accept","spellCheck","StatesList","StatesList_classCallCheck","StatesList_getPrototypeOf","onStateCreate","StatesList_assertThisInitialized","x","y","createNode","overview_infoblock_InfoBlock","icons_TriangleIcon","getNodes","overview_stateslist_StateTag","getGraphElementID","getNodeLabel","getNodeAccept","ev","focusOnNode","app_icons_IconButton","icons_BoxAddIcon","AlphabetTag","AlphabetTag_classCallCheck","AlphabetTag_getPrototypeOf","symbol","AlphabetTag_assertThisInitialized","machineController","newSymbol","oldSymbol","getAlphabet","includes","renameSymbol","createSymbol","deleteSymbol","maxLength","AlphabetList","AlphabetList_classCallCheck","AlphabetList_getPrototypeOf","editingTag","editing","onSymbolCreate","AlphabetList_assertThisInitialized","onStopEditing","alphabet","overview_alphabetlist_AlphabetTag","FSA","FSA_classCallCheck","_states","_transitions","_finalStates","_customAlphabet","fsa","push","transition","slice","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","final","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","oldState","newState","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","fromState","toState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","getStartState","isFinal","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","isUsedAlphabet","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","s","getUsedAlphabet","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","foundSymbols","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","transitions","getOutgoingTransitions","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","DFA","NFA","states","usedAlphabet","startState","finalStates","ARROW","NFA_classCallCheck","NFA_possibleConstructorReturn","NFA_getPrototypeOf","dst","doClosureTransition","ps","nfaStates","getStates","j","len","concat","SRC","SYMBOL","DST","SYMBOL_AXIS","getDestinationFromSourceAndSymbol","machine","isSet","doTransition","join","TransitionTable","TransitionTable_classCallCheck","TransitionTable_possibleConstructorReturn","TransitionTable_getPrototypeOf","rowAxis","machineBuilder","getMachine","rowAxisType","getTransitions","isNFAMachine","getMachineType","hasEmptyColumn","scope","startsWith","getSymbolFromSourceAndDestination","TransitionFunction","TransitionFunction_classCallCheck","TransitionFunction_possibleConstructorReturn","TransitionFunction_getPrototypeOf","sort","isNFA","emptrans","empclassName","trans","FormalDefinition","FormalDefinition_classCallCheck","FormalDefinition_possibleConstructorReturn","FormalDefinition_getPrototypeOf","getFinalStates","DELTA","OverviewPanel","OverviewPanel_classCallCheck","OverviewPanel_getPrototypeOf","container","viewFormal","onChangeMachineType","OverviewPanel_assertThisInitialized","onAutoLayout","onChangeAutoRename","onSubmitAutoStatePrefix","onAutoStateFormat","switchDefinition","applyAutoLayout","changeMachineTo","getMachineBuilder","setAutoRenameNodes","checked","labeler","getLabeler","prefix","sortDefaultNodeLabels","overview_formaldefinition_FormalDefinition","overview_stateslist_StatesList","overview_alphabetlist_AlphabetList","overview_transitionfunction_TransitionFunction","overview_transitiontable_TransitionTable","paddingBottom","marginBottom","flexDirection","formattedinput_FormattedInput","background","outline","border","padding","margin","appearance","color","shouldAutoRenameNodes","htmlFor","isEmpty","UNLOCALIZED_NAME","Viewport","Viewport_classCallCheck","Viewport_possibleConstructorReturn","Viewport_getPrototypeOf","labelEditor","prevMode","NORMAL","mode","screen","currentModule","getCurrentModule","inputController","getInputController","getGraphController","getMachineController","LabelEditor","getLabelEditor","ViewportRenderer","getRenderer","viewport","WAITING","TESTING","DANGEROUS","solveNFAbyStep","nfa","cachedStates","cachedSymbols","checkedStates","nextStates","nextIndex","cstate","doTerminalTransition","nextState","isFinalState","apply","DFA_classCallCheck","DFA_possibleConstructorReturn","DFA_getPrototypeOf","isValidDFA","TestMode","testingManager","TestMode_classCallCheck","targets","history","indexofString","running","started","skipToEnd","timer","onNodeDestroy","prepareForNewTest","hasNextStep","inputList","resetTests","setTimeout","step","onNextStep","onPause","hasPrevInput","previous","pop","prevInput","getCurrentInput","hasNextInput","testInput","setResult","nextInput","currentStep","getCurrentCache","nextChar","getFirstGraphNodeByLabel","skipFunc","curr_state","TestingInputList","TestingInputList_classCallCheck","addInput","inputIndex","input","currState","counter","solveNFA","file","reader","FileReader","event","testInputs","split","abort","readAsText","first","dirty","markDirty","TestingManager","TestingManager_classCallCheck","shouldCheckError","isImmediateErrorCheck","errorCheckMode","NO_ERROR_CHECK","stepByStepMode","testMode","initialize","setMachineType","DELAYED_ERROR_CHECK","IMMEDIATE_ERROR_CHECK","isStarted","onStop","onStart","AddIcon","AddIcon_classCallCheck","AddIcon_possibleConstructorReturn","AddIcon_getPrototypeOf","RemoveIcon","RemoveIcon_classCallCheck","RemoveIcon_possibleConstructorReturn","RemoveIcon_getPrototypeOf","SuccessIcon","SuccessIcon_classCallCheck","SuccessIcon_possibleConstructorReturn","SuccessIcon_getPrototypeOf","FailureIcon","FailureIcon_classCallCheck","FailureIcon_possibleConstructorReturn","FailureIcon_getPrototypeOf","RunningManIcon","RunningManIcon_classCallCheck","RunningManIcon_possibleConstructorReturn","RunningManIcon_getPrototypeOf","StatusButton","StatusButton_classCallCheck","StatusButton_possibleConstructorReturn","StatusButton_getPrototypeOf","active","icons_SuccessIcon","icons_FailureIcon","icons_RunningManIcon","TestingInput","TestingInput_classCallCheck","TestingInput_getPrototypeOf","onStatusClick","TestingInput_assertThisInitialized","onSubmitClick","testList","getInputByIndex","testByIndex","isInputFirst","getInput","newTest","removeInputByIndex","getTests","shouldTestOnly","shiftKey","getCurrentInputIndex","panels_testing_StatusButton","placeholder","icons_AddIcon","icons_RemoveIcon","UploadTestButton","UploadTestButton_classCallCheck","UploadTestButton_possibleConstructorReturn","UploadTestButton_getPrototypeOf","uploadInput","UploadIcon","UploadIcon_classCallCheck","UploadIcon_possibleConstructorReturn","UploadIcon_getPrototypeOf","PageNewContentIcon","PageNewContentIcon_classCallCheck","PageNewContentIcon_possibleConstructorReturn","PageNewContentIcon_getPrototypeOf","SaveIcon","SaveIcon_classCallCheck","SaveIcon_possibleConstructorReturn","SaveIcon_getPrototypeOf","CloseIcon","CloseIcon_classCallCheck","CloseIcon_possibleConstructorReturn","CloseIcon_getPrototypeOf","TestingPanel","TestingPanel_classCallCheck","TestingPanel_getPrototypeOf","getTestingManager","getErrorCheckMode","noTestMode","_savedGraphHash","_ticksSinceHash","stepByStepModeChecked","onChangeErrorCheckMode","TestingPanel_assertThisInitialized","onUploadFileChange","onGraphChange","onTestsRunAll","onTestsClear","onTestsSave","onTestsNew","onTestsUpload","getHashCode","g","files","importTests","getElementById","innerHTML","tester","setErrorCheckMode","machineErrorChecker","clear","setStepByStepMode","clearTests","clearTestName","hideTestInputList","downloadText","getTestsAsStrings","showTestInputList","isTestInvalid","isValidMachine","graphHash","icons_PageNewContentIcon","components_UploadTestButton","icons_UploadIcon","icons_SaveIcon","icons_CloseIcon","panels_testing_TestingInput","NFAToDFAConversionWarningMessage","NFAToDFAConversionWarningMessage_classCallCheck","NFAToDFAConversionWarningMessage_getPrototypeOf","NFAToDFAConversionWarningMessage_assertThisInitialized","convertMachineTo","close","stateCount","pow","AnalysisPanel","AnalysisPanel_classCallCheck","AnalysisPanel_getPrototypeOf","optimizeUnreachOption","optimizeRedundOption","onConvertToDFA","AnalysisPanel_assertThisInitialized","onConvertToNFA","onOptimizeMachine","unreachableArray","getUnreachableNodes","deleteTargetNodes","messageTag","Notifications","onDeleteAllUnreachable","canOptimize","AboutPanel","AboutPanel_classCallCheck","AboutPanel_possibleConstructorReturn","AboutPanel_getPrototypeOf","AbstractInputController","inputAdapter","AbstractInputController_classCallCheck","_inputAdapter","setController","pointer","onInputEvent","zoomValue","GraphPicker","GraphPicker_classCallCheck","selectionBox","fromX","fromY","toX","toY","visible","targetType","initialTarget","initialTargetType","getNodeByInitialMarkerAt","getEdgeByEndPointAt","getNodeAt","getEdgeAt","dx","dy","startNode","getStartNode","center","getEdges","edge","getCenterPoint","end","getEndPoint","box","mx","max","my","lx","min","ly","clearSelection","x1","y1","x2","y2","getNodesWithin","getSelection","GraphElement","GraphElement_classCallCheck","graphElementID","GraphNode","GraphNode_classCallCheck","GraphNode_possibleConstructorReturn","GraphNode_getPrototypeOf","_label","usePosition","GraphNode_get","FSANode","FSANode_classCallCheck","FSANode_possibleConstructorReturn","FSANode_getPrototypeOf","_accept","_custom","FSANode_get","GraphEdge","from","to","GraphEdge_classCallCheck","GraphEdge_possibleConstructorReturn","GraphEdge_getPrototypeOf","_from","_to","HALFPI","PI","isPlaceholder","atan2","halfPlaceholderLength","getPlaceholderLength","placeholderLength","getNodeSize","getHashString","GraphEdge_get","getDirectionalVector","dist","angleOffset","angle","cos","sin","getMidPoint","GraphCurvedEdge","QuadraticEdge_classCallCheck","QuadraticEdge_possibleConstructorReturn","QuadraticEdge_getPrototypeOf","_quad","radians","_coords","changeDestinationNode","fromx","fromy","midpointx","midpointy","sqrt","outrad","inrad","maxdr","abs","setQuadratic","getSelfLoopHeight","prevDest","QuadraticEdge_get","formatAsPlaceholder","isSelfLoop","formatAsSelfLoop","isQuadratic","coords","getQuadraticAsCoords","px","py","nodeSize","qcoords","qx","qy","FSAEdge","FSAEdge_classCallCheck","FSAEdge_possibleConstructorReturn","FSAEdge_getPrototypeOf","QuadraticEdge","FSAEdge_get","getEdgeLabel","InputController","InputController_classCallCheck","InputController_possibleConstructorReturn","InputController_getPrototypeOf","_picker","_graphController","prevPointerX","prevPointerY","isNewEdge","ghostInitialMarker","shouldDestroyPointlessEdges","_swapMouseScheme","_trashMode","InputController_get","picker","getPointerX","getPointerY","updateTarget","hasTarget","cursor","getPicker","setInitialTarget","hasSelection","isTargetInSelection","getStepByStepMode","isTrashMode","prevX","prevY","deleteSelectedNodes","deleteTargetEdge","toggleNode","openLabelEditor","emit","getInputAdapter","getViewport","isMoveMode","Node","Edge","targetQuad","getQuadratic","prevQuad","createEdge","setEdgeLabel","edgeQuad","beginSelection","prevEdgeTo","getDestinationNode","moveMultipleNodesTo","moveNodeTo","moveEdgeTo","moveEndpointTo","addOffset","isSelecting","updateSelection","formatEdge","deleteEdge","prevInitial","setStartNode","endSelection","clearTarget","enabled","shouldInputFirst","isAltInput","isDragging","isPointerActive","AbstractGraphController","AbstractGraphController_classCallCheck","_graph","Eventable","__eventListeners","mixin","targetClass","targetPrototype","Object","assign","registerEvent","eventName","Map","has","set","unregisterEvent","delete","addEventListener","listener","get","removeEventListener","listeners","flag","clearEventListeners","countEventListeners","getEventListeners","on","once","f","_len","args","_key","_len2","_key2","onEventProcessed","GraphLayout","reachableNode","reachable","getReachableState","unreachableNode","numOfReachable","numOfUnreachable","numOfNode","maxNum","radius","degree_re","degree_un","NodalGraph","NodalGraph_classCallCheck","_nodes","_edges","_nodeMapping","_edgeMapping","elementID","nullSourceEdges","getSourceNode","_i","setGraphElementID","clearEdges","clearNodes","getNodeCount","getEdgeCount","minX","minY","maxX","maxY","minNX","Number","MAX_VALUE","minNY","maxNX","MIN_VALUE","maxNY","maxNodeSize","size","minEX","minEY","maxEX","maxEY","startPoint","endPoint","centerPoint","getStartPoint","sx","sy","ex","ey","string","hash","imul","charCodeAt","stringHash","FSAGraph","FSAGraph_classCallCheck","FSAGraph_possibleConstructorReturn","FSAGraph_getPrototypeOf","addNode","addEdge","edgeSource","edgeDestination","edgeLabel","getEdgeSymbolsFromLabel","otherEdge","otherSymbols","parallelEdgeHeight","dist12sq","vertical","m","b","x0","y0","GraphController","GraphController_classCallCheck","GraphController_possibleConstructorReturn","GraphController_getPrototypeOf","viewportElement","applyLayout","isPrevCustom","setNodeLabel","setNodeCustom","newNodeLabel","getNextDefaultNodeLabel","setNodeAccept","selectedNode","selection","deleteNode","other","diameter","nextDX","nextDY","pos","getInputEventPosition","changeInputEventPosition","setQuadraticByCoords","sourceNode","prevLabel","openEditor","setOffset","ax","ay","expandPowersetStateToDFA","powerSetState","dfa","getStateFromSet","hasState","newDFAStateFromNFA","terminals","dfaState","newTransition","setFinalState","MachineController","MachineController_classCallCheck","machineName","getLabelFormatter","machineType","getMachineName","setMachineName","read","currentMachineType","powerSetStates","getPowerSet","trapState","newAlphabet","convertToDFA","setGraphToMachine","addCustomSymbol","removeCustomSymbol","prevSymbol","nextSymbol","renameCustomSymbol","_symbols","isCustomSymbol","NodeRenderer","NodeRenderer_classCallCheck","NodeRenderer_possibleConstructorReturn","NodeRenderer_getPrototypeOf","stroke","userSelect","fontSize","textAnchor","EdgeRenderer","EdgeRenderer_classCallCheck","EdgeRenderer_possibleConstructorReturn","EdgeRenderer_getPrototypeOf","SIXTH_PI","arrowAngle","start","quadCoords","edgeDir","getEdgeDirection","flipLabel","quadLine","labels","transform","str","yy","alignmentBaseline","InitialMarkerRenderer","InitialMarkerRenderer_classCallCheck","InitialMarkerRenderer_possibleConstructorReturn","InitialMarkerRenderer_getPrototypeOf","FSAGraphRenderer","FSAGraphRenderer_classCallCheck","FSAGraphRenderer_possibleConstructorReturn","FSAGraphRenderer_getPrototypeOf","renderer_NodeRenderer","renderer_EdgeRenderer","renderer_InitialMarkerRenderer","SelectionBoxRenderer","SelectionBoxRenderer_classCallCheck","SelectionBoxRenderer_possibleConstructorReturn","SelectionBoxRenderer_getPrototypeOf","HIGHLIGHT_LINE_ARRAY","HighlightRenderer","HighlightRenderer_classCallCheck","HighlightRenderer_possibleConstructorReturn","HighlightRenderer_getPrototypeOf","endpoint","strokeDashoffset","offset","strokeDasharray","strokeWidth","FSAGraphOverlayRenderer","FSAGraphOverlayRenderer_classCallCheck","FSAGraphOverlayRenderer_possibleConstructorReturn","FSAGraphOverlayRenderer_getPrototypeOf","getSelectionBox","renderer_HighlightRenderer","renderer_SelectionBoxRenderer","warningNodes","warningEdges","errorNodes","errorEdges","TrashCan","TrashCan_classCallCheck","TrashCan_possibleConstructorReturn","TrashCan_getPrototypeOf","staticTrash","setTrashMode","stopPropagation","isUsingTouch","onMouseEnter","onTrashEnter","onMouseLeave","onTrashLeave","onTrashClick","PlayIcon","PlayIcon_classCallCheck","PlayIcon_possibleConstructorReturn","PlayIcon_getPrototypeOf","PauseIcon","PauseIcon_classCallCheck","PauseIcon_possibleConstructorReturn","PauseIcon_getPrototypeOf","StopIcon","StopIcon_classCallCheck","StopIcon_possibleConstructorReturn","StopIcon_getPrototypeOf","UndoIcon","UndoIcon_classCallCheck","UndoIcon_possibleConstructorReturn","UndoIcon_getPrototypeOf","RedoIcon","RedoIcon_classCallCheck","RedoIcon_possibleConstructorReturn","RedoIcon_getPrototypeOf","TestTray","TestTray_classCallCheck","TestTray_possibleConstructorReturn","TestTray_getPrototypeOf","testIndex","getCurrentTestStringIndex","testOffset","MAX_ELLIPSIS_COUNT","onResume","isRunning","icons_PlayIcon","icons_PauseIcon","onPreviousStep","hasPrevStep","isSkipping","icons_UndoIcon","icons_RedoIcon","icons_StopIcon","CreateIcon","CreateIcon_classCallCheck","CreateIcon_possibleConstructorReturn","CreateIcon_getPrototypeOf","MoveIcon","MoveIcon_classCallCheck","MoveIcon_possibleConstructorReturn","MoveIcon_getPrototypeOf","CursorMode","CursorMode_classCallCheck","CursorMode_possibleConstructorReturn","CursorMode_getPrototypeOf","actionMode","isActionMode","setInputScheme","icons_CreateIcon","icons_MoveIcon","ViewportRenderer_classCallCheck","ViewportRenderer_possibleConstructorReturn","ViewportRenderer_getPrototypeOf","content_viewport_TestTray","content_viewport_CursorMode","content_viewport_TrashCan","MachineLabeler","MachineLabeler_classCallCheck","shouldAutoLabel","isDefaultInitial","defaultNodes","customLabels","defaultName","getDefaultNodeLabelByIndex","nodeIndex","isUniqueNodeLabel","MachineBuilder","MachineBuilder_classCallCheck","onGraphNodeLabelChange","targetNodes","enable","StateUnreachableWarningMessage","StateUnreachableWarningMessage_classCallCheck","StateUnreachableWarningMessage_getPrototypeOf","targetIndex","targetLabel","StateUnreachableWarningMessage_assertThisInitialized","buttonValue","StateMissingTransitionErrorMessage","StateMissingTransitionErrorMessage_classCallCheck","StateMissingTransitionErrorMessage_getPrototypeOf","StateMissingTransitionErrorMessage_assertThisInitialized","targetLength","TransitionErrorMessage","TransitionErrorMessage_classCallCheck","TransitionErrorMessage_getPrototypeOf","TransitionErrorMessage_assertThisInitialized","focusOnEdge","deleteTargetEdges","text","DFAErrorChecker","DFAErrorChecker_classCallCheck","shouldNotifyErrors","warnNodes","warnEdges","nodeTransitionMap","placeholderEdges","emptyEdges","dupeEdges","currentAlphabet","missingNodes","nodeTransitions","unReachedNodes","NFAErrorChecker","NFAErrorChecker_classCallCheck","unReachedNode","fillFSA","setStartState","FSABuilder","FSABuilder_classCallCheck","FSABuilder_getPrototypeOf","_machine","_machineType","_machineValidDFA","_alphabet","_timer","_errorTimer","FSABuilder_assertThisInitialized","onDelayedGraphChange","onDelayedErrorCheck","FSABuilder_get","clearTimeout","toNFA","checkErrors","allowNull","symbols","Set","symbolLength","subsymbol","add","EventHandler","eventLogger","controller","postEventName","EventHandler_classCallCheck","onEvent","applyUndo","applyRedo","eventData","captureEvent","postData","capturePostEvent","GraphEdgeDestinationEventHandler","GraphNodeInitialEventHandler_classCallCheck","GraphNodeInitialEventHandler_possibleConstructorReturn","GraphNodeInitialEventHandler_getPrototypeOf","nextInitial","nodeID","prevID","getNodeByElementID","GraphNodeMoveEventHandler","GraphNodeMoveEventHandler_classCallCheck","GraphNodeMoveEventHandler_possibleConstructorReturn","GraphNodeMoveEventHandler_getPrototypeOf","targetNode","nextX","nextY","GraphNodeMoveAllEventHandler","GraphNodeMoveAllEventHandler_classCallCheck","GraphNodeMoveAllEventHandler_possibleConstructorReturn","GraphNodeMoveAllEventHandler_getPrototypeOf","nodeIDs","GraphEdgeMoveEventHandler","GraphEdgeMoveEventHandler_classCallCheck","GraphEdgeMoveEventHandler_possibleConstructorReturn","GraphEdgeMoveEventHandler_getPrototypeOf","targetEdge","nextQuad","edgeID","getEdgeByElementID","GraphEdgeDestinationEventHandler_classCallCheck","GraphEdgeDestinationEventHandler_possibleConstructorReturn","GraphEdgeDestinationEventHandler_getPrototypeOf","nextDestination","prevDestination","GraphEdgeLabelEventHandler","GraphEdgeLabelEventHandler_classCallCheck","GraphEdgeLabelEventHandler_possibleConstructorReturn","GraphEdgeLabelEventHandler_getPrototypeOf","nextLabel","UserCreateNodeEventHandler","UserCreateNodeEventHandler_classCallCheck","UserCreateNodeEventHandler_possibleConstructorReturn","UserCreateNodeEventHandler_getPrototypeOf","custom","UserToggleNodeEventHandler","UserToggleNodeEventHandler_classCallCheck","UserToggleNodeEventHandler_possibleConstructorReturn","UserToggleNodeEventHandler_getPrototypeOf","prevAccept","nodeDatas","nodeCount","edgeDatas","edgeCount","initialIndex","nodeIndices","nodeData","initialNode","edgeData","destinationNode","quadData","graphNodes","graphEdges","graphInitial","quad","sourceIndex","destinationIndex","edges","initial","_version","XML","NULL","nodeElements","getElementsByTagName","edgeElements","nodeElementIDs","nodeElement","nodeElementID","getAttribute","xElements","xElement","hasChildNodes","xValue","childNodes","parseFloat","nodeValue","yElements","yElement","yValue","boundingRect","getBoundingRect","transitionMapping","edgeElement","sourceID","fromElements","fromElement","fromValue","destinationID","toElements","toElement","toValue","readElements","readElement","readValue","transitionID","keys","transitionKey","doc","DOMParser","parseFromString","structure","automaton","UserDeleteNodesEventHandler","UserDeleteNodesEventHandler_classCallCheck","UserDeleteNodesEventHandler_possibleConstructorReturn","UserDeleteNodesEventHandler_getPrototypeOf","graphData","FSAGraphParser","targetID","UserRenameNodeEventHandler","UserRenameNodeEventHandler_classCallCheck","UserRenameNodeEventHandler_possibleConstructorReturn","UserRenameNodeEventHandler_getPrototypeOf","prevCustom","UserCreateEdgeEventHandler","UserCreateEdgeEventHandler_classCallCheck","UserCreateEdgeEventHandler_possibleConstructorReturn","UserCreateEdgeEventHandler_getPrototypeOf","fromID","toID","setSourceNode","UserDeleteEdgeEventHandler","UserDeleteEdgeEventHandler_classCallCheck","UserDeleteEdgeEventHandler_possibleConstructorReturn","UserDeleteEdgeEventHandler_getPrototypeOf","prevTo","UserImportGraphEventHandler","UserImportGraphEventHandler_classCallCheck","UserImportGraphEventHandler_possibleConstructorReturn","UserImportGraphEventHandler_getPrototypeOf","graphName","SafeGraphEventHandler","SafeGraphEventHandler_classCallCheck","SafeGraphEventHandler_possibleConstructorReturn","SafeGraphEventHandler_getPrototypeOf","UserChangeMachineEventHandler","UserChangeMachineEventHandler_classCallCheck","UserChangeMachineEventHandler_possibleConstructorReturn","UserChangeMachineEventHandler_getPrototypeOf","nextMachineType","prevMachineType","prevType","nextType","UserConvertMachineEventHandler","UserConvertMachineEventHandler_classCallCheck","UserConvertMachineEventHandler_possibleConstructorReturn","UserConvertMachineEventHandler_getPrototypeOf","UserRenameMachineEventHandler","UserRenameMachineEventHandler_classCallCheck","UserRenameMachineEventHandler_possibleConstructorReturn","UserRenameMachineEventHandler_getPrototypeOf","nextMachineName","prevMachineName","prevName","nextName","UserRenameSymbolEventHandler","UserRenameSymbolEventHandler_classCallCheck","UserRenameSymbolEventHandler_possibleConstructorReturn","UserRenameSymbolEventHandler_getPrototypeOf","targetIDs","UserDeleteSymbolEventHandler","UserDeleteSymbolEventHandler_classCallCheck","UserDeleteSymbolEventHandler_possibleConstructorReturn","UserDeleteSymbolEventHandler_getPrototypeOf","EventManager","undoManager","EventManager_classCallCheck","eventHandlers","events","GraphNodeInitialEventHandler","destroy","RECOMMENDED_SYMBOLS","DEFAULT_SYMBOLS","LabelEditor_classCallCheck","LabelEditor_getPrototypeOf","parentElement","inputElement","_prevValue","onContextMenu","LabelEditor_assertThisInitialized","onFormat","defaultText","saveOnExit","appendValue","closeEditor","targetStyle","visibility","screenPos","ctm","getScreenCTM","transformViewToScreen","getOffsetX","getOffsetY","offsetX","offsetWidth","offsetY","offsetHeight","top","left","tabIndex","appendSymbol","JSONIcon","JSONIcon_classCallCheck","JSONIcon_possibleConstructorReturn","JSONIcon_getPrototypeOf","FSAGraphExporter","FSAGraphExporter_classCallCheck","FSAGraphExporter_possibleConstructorReturn","FSAGraphExporter_getPrototypeOf","newGraph","JSONGraphParser","machineData","customSymbols","statePrefix","version","process","getModuleVersion","timestamp","Date","getCustomSymbols","fromJSON","toJSON","resolve","jsonData","parse","onerror","code","XMLIcon","XMLIcon_classCallCheck","XMLIcon_possibleConstructorReturn","XMLIcon_getPrototypeOf","JFLAPGraphExporter","JFLAPGraphExporter_classCallCheck","JFLAPGraphExporter_possibleConstructorReturn","JFLAPGraphExporter_getPrototypeOf","xmlData","XMLGraphParser","xmlString","PANELS","EXPORTERS","FSAModule","FSAModule_classCallCheck","FSAModule_getPrototypeOf","_refreshRate","_ticks","_inputController","FSAModule_assertThisInitialized","_machineController","_machineBuilder","_eventManager","getUndoManager","_testingManager","FSAModule_get","update","formatAlphabetString","HotKeys","HotKeys_classCallCheck","toolbar","which","metaKey","ctrlKey","getDefaultGraphExporter","exportToFile","redo","undo","imageExporters","getImageExporters","imageExporter","LocalSaveManager","LocalSaveManager_classCallCheck","_handlers","_intervalID","_intervalMillis","_init","onIntervalUpdate","millis","doesSupportLocalStorage","setInterval","clearInterval","onAutoSave","saveKey","stringData","getItem","hidden","msHidden","webkitHidden","LocalSaveManager_typeof","Storage","UploadButton","UploadButton_classCallCheck","UploadButton_getPrototypeOf","UploadButton_assertThisInitialized","getGraphImporter","importFile","addErrorMessage","inputID","getImportFileTypes","HelpButton","HelpButton_classCallCheck","HelpButton_getPrototypeOf","HelpButton_assertThisInitialized","hasMessages","MachineName","MachineName_classCallCheck","MachineName_getPrototypeOf","MachineName_assertThisInitialized","PageNewIcon","PageNewIcon_classCallCheck","PageNewIcon_possibleConstructorReturn","PageNewIcon_getPrototypeOf","HelpIcon","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","LanguageIcon","LanguageIcon_classCallCheck","LanguageIcon_possibleConstructorReturn","LanguageIcon_getPrototypeOf","OfflineIcon","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","BugReportIcon","BugReportIcon_classCallCheck","BugReportIcon_possibleConstructorReturn","BugReportIcon_getPrototypeOf","DrawerExpander","DrawerExpander_classCallCheck","DrawerExpander_getPrototypeOf","DrawerExpander_assertThisInitialized","isFullscreen","closeDrawer","openDrawer","ExportingPanel","ExportingPanel_classCallCheck","ExportingPanel_possibleConstructorReturn","ExportingPanel_getPrototypeOf","getTitle","getIconComponentClass","graphExporters","renderExporterButton","ColorHelper","hex","red","green","blue","parseInt","h","v","p","q","t","StyleOption","elementSource","propName","inputType","groupName","StyleOptionRegistry_classCallCheck","prop","group","_callback","_value","_defaultValue","computedStyle","shouldPropagateChange","getComputedStyle","getPropertyValue","setStyle","val","setProperty","StyleOptionRegistry","_options","_groups","changeCallback","option","computedStyles","values","updateStyle","StyleInput","StyleInput_classCallCheck","StyleInput_getPrototypeOf","StyleInput_assertThisInitialized","getStyle","OptionGroup","OptionGroup_classCallCheck","OptionGroup_possibleConstructorReturn","OptionGroup_getPrototypeOf","OptionHotkey","OptionHotkey_classCallCheck","OptionHotkey_possibleConstructorReturn","OptionHotkey_getPrototypeOf","keyName","OptionsPanel","OptionsPanel_classCallCheck","OptionsPanel_getPrototypeOf","styleOpts","theme","customTheme","skipWelcome","LocalSave","getStringFromStorage","onChangeTheme","OptionsPanel_assertThisInitialized","onChangeModule","root","opts","invertFunc","opt","HEXtoRGB","RGBtoHSV","HSVtoRGB","RGBtoHEX","getOptionByProp","darkFunc","registerStyleOption","registerHandler","onLoadSave","registry","terminate","unregisterHandler","loadFromStorage","getOptions","isDefaultStyle","saveToStorage","prevTheme","resetStyle","panels_options_OptionGroup","panels_options_OptionHotkey","marginTop","setStringToStorage","getPropsByGroup","components_StyleInput","DEFAULT_TAB_INDEX","MAX_PANEL_THRESHOLD","MIN_PANEL_SIZE","Drawer","Drawer_classCallCheck","Drawer_getPrototypeOf","dragging","onTouchStart","Drawer_assertThisInitialized","onMouseDown","onScroll","_ontouchmove","_ontouchend","updatePanelSize","touch","changedTouches","onStartDraggingDrawerBorder","clientX","clientY","onStopDraggingDrawerBorder","onMouseMove","onMouseUp","InfoPanel","getDefaultModulePanel","onWheel","getModulePanels","PanelClass","panelID","content_drawer_DrawerExpander","setTab","matchMedia","matches","getBoundingClientRect","EXPORTING_PANEL_TAB_INDEX","OPTIONS_PANEL_TAB_INDEX","Toolbar","Toolbar_classCallCheck","Toolbar_getPrototypeOf","langOn","onMachineNameChange","Toolbar_assertThisInitialized","onMachineNameKeyDown","langOnClick","renameMachine","drawer","offline","navigator","onLine","toolbar_MachineName","serviceWorker","getRegistration","alert","icons_OfflineIcon","getLocalizedModuleName","confirm","icons_PageNewIcon","toolbar_UploadButton","canUndo","canRedo","icons_BugReportIcon","toolbar_HelpButton","icons_HelpIcon","icons_LanguageIcon","maxWidth","fetchLanguageFile","Subtitle","Subtitle_classCallCheck","Subtitle_possibleConstructorReturn","Subtitle_getPrototypeOf","messageTimer","Workspace","Workspace_classCallCheck","Workspace_possibleConstructorReturn","Workspace_getPrototypeOf","bounds","w","EXPORT_PADDING_X","EXPORT_PADDING_Y","clone","cloneNode","uiElements","getElementsByClassName","remove","GraphRenderer","getGraphRenderer","GraphOverlayRenderer","getScale","halfSize","content_workspace_Subtitle","Tutorial","Tutorial_classCallCheck","existsInStorage","InputPointer","adapter","InputPointer_classCallCheck","_adapter","_element","_viewport","_active","_x","_y","_inputpos","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","dscale","InputAdapter","InputAdapter_classCallCheck","_controller","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","SVGElement","setElement","onTouchMove","button","onInputDown","mouse","transformScreenToView","setPosition","onInputMove","onInputUp","deltaY","onZoomChange","setScale","onPreInputEvent","beginInput","onDragMove","getDistanceSquToInitial","onDragStart","cancelInputEvent","onDragStop","onAltInputEvent","dt","now","onDblInputEvent","endInput","onPostInputEvent","isActive","NotificationMessage","NotificationMessage_classCallCheck","NotificationMessage_getPrototypeOf","onExitMessage","NotificationMessage_assertThisInitialized","getType","NotificationView","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","notificationManager","getID","ComponentClass","getComponentClass","getComponentProps","notification_components_NotificationMessage","_extends","UndoManager","UndoManager_classCallCheck","offsetIndex","eventHandler","App","App_classCallCheck","App_getPrototypeOf","setMinScale","setMaxScale","setOffsetDamping","App_assertThisInitialized","hotKeys","tutorial","isDangerous","isWaitingForFile","onDragOver","onDragEnter","onDragLeave","onFileDrop","workspaceDOM","moduleName","exportToData","dataTransfer","items","kind","getAsFile","clearData","full","content_toolbar_Toolbar","notification_components_NotificationView","shouldHideContent","opacity","content_workspace_Workspace","content_viewport_Viewport","content_drawer_Drawer","hot","Logo","Logo_classCallCheck","Logo_possibleConstructorReturn","Logo_getPrototypeOf","Quote","Quote_classCallCheck","Quote_possibleConstructorReturn","Quote_getPrototypeOf","QUOTES","QUOTE_INDEX","CONTENT_QUOTE","CONTENT_SUBQUOTE","LandingPage","LandingPage_classCallCheck","LandingPage_getPrototypeOf","footer","returnHome","onLaunchButton","LandingPage_assertThisInitialized","onTutorialButton","onReturnHomeButton","onReportBugButton","onAboutButton","onHelpButton","onGithubButton","onscroll","scrollHeight","documentElement","clientHeight","innerHeight","scroll","pageYOffset","round","bottom","Router","scrollTo","behavior","launchText","components_Logo","landing_components_Quote","loadConfig","requestAnimationFrame","updateApplication","returnValue","isUpdateAvailable","then","hasUpdate","FRAMES_PER_SECOND","prevtime","time","page","ReactDOM","render"],"mappings":"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","file":"app.bundle.088b596b350ba04f50d3.js","sourcesContent":["const ROUTER = {\n  _current: null,\n  routeTo(component)\n  {\n    this._current = component;\n  },\n  getCurrentPage()\n  {\n    return this._current;\n  }\n};\n\nexport default ROUTER;\n","const LOCAL_STORAGE_ID = \"config\";\n\nconst cfg = {};\ncfg._resetOnLoad = false;\ncfg._userDefined = false;\ncfg._dirty = false;\ncfg.setValue = function(key, value) {\n  if (this.hasOwnProperty(key))\n  {\n    this._userDefined = true;\n    this._dirty = true;\n    this[key] = value;\n  }\n  else\n  {\n    throw new Error(\"Trying to assign value to non-existant key in config\");\n  }\n}.bind(cfg);\nexport default cfg;\n\n//Preferences\n\n//General\ncfg.MACHINE_ERRORS_MESSAGE_TAG = \"machineError\";\ncfg.MACHINE_CONVERSION_MESSAGE_TAG = \"machineConversion\";\n\ncfg.ERROR_CHECK_INTERVAL = 2000;\ncfg.GRAPH_IMMEDIATE_INTERVAL = 50;\n\n//Controller\ncfg.SMOOTH_OFFSET_DAMPING = 0.4;\ncfg.SCROLL_SENSITIVITY = 1.0 / 300.0;\ncfg.MIN_SCALE = 0.1;\ncfg.MAX_SCALE = 10;\n\n//Workspace\ncfg.INIT_WAITTIME = 1500;\n\n//NodalGraph\ncfg.STR_TRANSITION_DEFAULT_LABEL = \"\";\ncfg.STR_STATE_LABEL = \"q\";\ncfg.PARALLEL_EDGE_HEIGHT = 10;\ncfg.SELF_LOOP_HEIGHT = 40;\n\n//Input Fields\ncfg.SUBMIT_KEY = 13; //ENTER\ncfg.CLEAR_KEY = 27; //ESCAPE\ncfg.TAB_KEY = 9; //TAB\ncfg.UP_KEY = 38; //UP\ncfg.DOWN_KEY = 40; //DOWN\ncfg.DELETE_KEY = 8; //DELETE\n\n/** LEGACY CONFIG **/\n\n//Input\ncfg.DELETE_FORWARD_KEY = 46; //DELETE FORWARD\n\n//Geometry\ncfg.DEFAULT_GRAPH_SIZE = 300;\n\ncfg.NODE_RADIUS = 16;\ncfg.NODE_RADIUS_SQU = cfg.NODE_RADIUS * cfg.NODE_RADIUS;\ncfg.NODE_DIAMETER = cfg.NODE_RADIUS * 2;\ncfg.NODE_RADIUS_INNER = 12;\n\ncfg.INITIAL_MARKER_OFFSET_X = -(cfg.NODE_RADIUS + (cfg.NODE_RADIUS / 2));\n\ncfg.EDGE_RADIUS = 12;\ncfg.EDGE_RADIUS_SQU = cfg.EDGE_RADIUS * cfg.EDGE_RADIUS;\ncfg.ARROW_WIDTH = 10;\ncfg.PLACEHOLDER_LENGTH = cfg.NODE_RADIUS * 3;\ncfg.ENDPOINT_RADIUS = 6;\ncfg.ENDPOINT_RADIUS_SQU = cfg.ENDPOINT_RADIUS * cfg.ENDPOINT_RADIUS;\n\ncfg.HOVER_RADIUS_OFFSET = 4;\ncfg.CURSOR_RADIUS = 4;\ncfg.CURSOR_RADIUS_SQU = cfg.CURSOR_RADIUS * cfg.CURSOR_RADIUS;\n\n//Interface\ncfg.DOUBLE_TAP_TICKS = 600;\ncfg.LONG_TAP_TICKS = 600;\ncfg.SPAWN_RADIUS = 64;\ncfg.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\ncfg.DRAGGING_BUFFER = 18;\ncfg.DRAGGING_BUFFER_SQU = cfg.DRAGGING_BUFFER * cfg.DRAGGING_BUFFER;\n\n//Graph sorting\ncfg.PADDING_RADIUS_SQU = 2304;\n\n\n/** LOCAL STORAGE FUNCTIONS **/\n\n//check if browser support local storage\nexport function doesSupportLocalStorage()\n{\n  return typeof(Storage) !== 'undefined';\n}\n\nexport function loadConfig()\n{\n  const jsonString = localStorage.getItem(LOCAL_STORAGE_ID);\n  //If cannot find a config...\n  if (!jsonString)\n  {\n    //Just use the default one and don't save anything...\n    console.log(\"Using default config...\");\n    return;\n  }\n\n  try\n  {\n    console.log(\"Loading config...\");\n    const jsonData = JSON.parse(jsonString);\n    if (jsonData['_resetOnLoad'] == true)\n    {\n      //Reset the config\n      clearConfig();\n\n      //Save a new config\n      saveConfig();\n    }\n    else\n    {\n      Object.assign(cfg, jsonData);\n    }\n  }\n  catch (e)\n  {\n    //Reset the config\n    clearConfig();\n  }\n};\n\nexport function saveConfig(forceSave=false)\n{\n  if (forceSave || (cfg._userDefined && cfg._dirty))\n  {\n    try\n    {\n      console.log(\"Saving config...\");\n      const jsonString = JSON.stringify(cfg);\n      localStorage.setItem(LOCAL_STORAGE_ID, jsonString);\n\n      cfg._dirty = false;\n    }\n    catch (e)\n    {\n      //Reset the config\n      clearConfig();\n    }\n  }\n};\n\nexport function clearConfig()\n{\n  localStorage.removeItem(LOCAL_STORAGE_ID);\n\n  cfg._dirty = true;\n};\n","class GraphImporter\n{\n  constructor(module)\n  {\n    this._module = module;\n  }\n\n  importFile(fileBlob, app)\n  {\n    if (!fileBlob) throw new Error(\"Unable to import null file\");\n    if (!(fileBlob instanceof File)) throw new Error(\"Unable to import object as file\");\n\n    let result = Promise.reject();\n    const fileName = fileBlob.name;\n    const exporters = this._module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportFile() && fileName.endsWith(exporter.getFileType()))\n      {\n        result = result.catch(e => exporter.importFromFile(fileBlob, app));\n      }\n    }\n\n    return result.catch(e => {\n      console.error(e);\n      throw new Error(\"Cannot find valid exporter for file: \" + fileName);\n    });\n  }\n\n  importData(data, app)\n  {\n    if (!data) throw new Error(\"Unable to import null data\");\n\n    let result = Promise.reject();\n    const exporters = this._module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportData())\n      {\n        result = result.catch(e => exporter.importFromData(data, app));\n      }\n    }\n\n    return result.catch(e => {\n      throw new Error(\"Cannot find valid exporter for data: \" + JSON.stringify(data));\n    });\n  }\n\n  getImportFileTypes()\n  {\n    return this._module.getGraphExporters().map(e => {\n      if (!e.canImport() || !e.doesSupportFile()) return null;\n      return '.' + e.getFileType();\n    });\n  }\n}\n\nexport default GraphImporter;\n","class AbstractGraphExporter\n{\n  constructor() {}\n\n  importFromData(data, app)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToData(app)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportData()\n  {\n    return false;\n  }\n\n  importFromFile(fileBlob, app)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToFile(filename, app)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportFile()\n  {\n    return false;\n  }\n\n  canImport()\n  {\n    return false;\n  }\n\n  getTitle()\n  {\n    return this.getLabel();\n  }\n\n  getIconComponentClass()\n  {\n    return null;\n  }\n\n  getLabel()\n  {\n    return \"Export as \" + this.getFileType().toUpperCase();\n  }\n\n  getFileType()\n  {\n    throw new Error(\"Unknown file type for exporter\");\n  }\n}\n\nexport default AbstractGraphExporter;\n","//https://www.flaticon.com/free-icon/png_136523\nimport React from 'react';\n\nclass PNGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"png-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <path fill=\"#659C35\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z\"/>\n          <path fill=\"#FFFFFF\" d={\"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z\"}/>\n        </g>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#88C057\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default PNGIcon;\n","//https://www.flaticon.com/free-icon/jpg_136524\nimport React from 'react';\n\nclass JPGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"jpg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#26B99A\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n        <path fill=\"#14A085\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 \" +\n            \"c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 \" +\n            \"c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 \" +\n            \"c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 \" +\n            \"s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 \" +\n            \"c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 \" +\n            \"c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 \" +\n            \"s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 \" +\n            \"c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 \" +\n            \"c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 \" +\n            \"v-1.121H39.5z\"}/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JPGIcon;\n","class Downloader\n{\n  static downloadText(filename, data)\n  {\n    Downloader.downloadURL(filename, Downloader.getTextDataURI(data));\n  }\n\n  static downloadSVG(filename, filetype, svg, width, height)\n  {\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], {type:'image/svg+xml'});\n    const url = URL.createObjectURL(blob);\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext(\"2d\");\n    const pixelRatio = window.devicePixelRatio || 1;\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n    const image = new Image();\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0);\n      URL.revokeObjectURL(url);\n\n      const imageURI = canvas.toDataURL('image/' + filetype).replace('image/' + filetype, 'image/octet-stream');\n      Downloader.downloadURL(filename + '.' + filetype, imageURI);\n    };\n    image.src = url;\n  }\n\n  static downloadURL(filename, url)\n  {\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(\";\");\n    url = url.substring(0, headerIndex + 1) + \"headers=Content-Disposition%3A%20attachment%3B%20filename=\" + filename + \";\" + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  static getTextDataURI(data)\n  {\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n  }\n}\n\nexport default Downloader;\n","import AbstractGraphExporter from './AbstractGraphExporter.js';\n\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport Downloader from 'util/Downloader.js';\n\nclass GraphImageExporter extends AbstractGraphExporter\n{\n  constructor(imageType='png')\n  {\n    super();\n    this._imageType = imageType;\n  }\n\n  //Override\n  exportToFile(filename, app)\n  {\n    const workspace = app.workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    Downloader.downloadSVG(filename, this._imageType, svg, width, height);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return false;\n  }\n\n  //Override\n  getTitle()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png.hint\");\n      case 'jpg': return I18N.toString(\"file.export.jpg.hint\");\n      default: return super.getTitle();\n    }\n  }\n\n  //Override\n  getLabel()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return I18N.toString(\"file.export.png\");\n      case 'jpg': return I18N.toString(\"file.export.jpg\");\n      default: return super.getLabel();\n    }\n  }\n\n  //Override\n  getFileType()\n  {\n    return this._imageType;\n  }\n\n  //Override\n  getIconComponentClass()\n  {\n    switch(this._imageType)\n    {\n      case 'png': return PNGIcon;\n      case 'jpg': return JPGIcon;\n      default: return null;\n    }\n  }\n}\n\nexport default GraphImageExporter;\n","import GraphImporter from './exporter/GraphImporter.js';\nimport GraphImageExporter from './exporter/GraphImageExporter.js';\n\nconst DEFAULT_PANELS = [];\nconst DEFAULT_GRAPH_EXPORTERS = [];\nconst DEFAULT_IMAGE_EXPORTERS = [\n  new GraphImageExporter('png'),\n  new GraphImageExporter('jpg')\n];\n\nclass AbstractModule\n{\n  constructor(app)\n  {\n    this._importer = new GraphImporter(this);\n  }\n\n  initialize(app) {}\n\n  destroy(app) {}\n\n  update(app) {}\n\n  getRenderer(renderLayer)\n  {\n    return null;\n  }\n\n  getInputController()\n  {\n    throw new Error(\"Missing input controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getGraphController()\n  {\n    throw new Error(\"Missing graph controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getMachineController()\n  {\n    throw new Error(\"Missing machine controller for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getDefaultGraphExporter()\n  {\n    const exporters = this.getGraphExporters();\n    if (exporters.length > 0) return exporters[0];\n\n    throw new Error(\"Missing default graph exporter for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n\n  getImageExporters()\n  {\n    return DEFAULT_IMAGE_EXPORTERS;\n  }\n\n  getGraphExporters()\n  {\n    return DEFAULT_GRAPH_EXPORTERS;\n  }\n\n  getGraphImporter()\n  {\n    return this._importer;\n  }\n\n  getGraphRenderer()\n  {\n    return null;\n  }\n\n  getDefaultModulePanel()\n  {\n    return null;\n  }\n\n  getModulePanels()\n  {\n    return DEFAULT_PANELS;\n  }\n\n  getModuleVersion()\n  {\n    return '0.0.0';\n  }\n\n  getModuleName()\n  {\n    throw new Error(\"Missing module name\");\n  }\n\n  getLocalizedModuleName()\n  {\n    return \"Module\";\n  }\n}\n\nexport default AbstractModule;\n","export function guid()\n{\n  function s4()\n  {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexport function lerp(a, b, dt)\n{\n  return a * (1 - dt) + b * dt;\n};\n\nexport function stringHash(value=\"\")\n{\n  let hash = 0;\n  for(let i = 0, len = value.length; i < len; i++)\n  {\n    hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n  }\n  return hash;\n};\n","import { guid } from 'util/MathHelper.js';\n\nclass Message\n{\n  constructor(handler, value, type, tags, componentClass, componentProps)\n  {\n    this._handler = handler;\n    this._id = guid();\n    this._type = type;\n\n    this.value = value;\n    this.tags = tags;\n    this.componentClass = componentClass;\n    this.componentProps = componentProps;\n  }\n\n  close()\n  {\n    const messages = this._handler.getMessages();\n    const index = messages.indexOf(this);\n    if (index < 0) throw new Error(\"Trying to close an unopened notification message\");\n    messages.splice(index, 1);\n  }\n\n  getType()\n  {\n    return this._type;\n  }\n\n  getID()\n  {\n    return this._id;\n  }\n\n  getComponentClass()\n  {\n    return this.componentClass;\n  }\n\n  getComponentProps()\n  {\n    return this.componentProps;\n  }\n\n  hasTag(tag)\n  {\n    return this.tags.indexOf(tag) >= 0;\n  }\n}\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._messageQueue = [];\n  }\n\n  addMessage(value, type=null, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    if (tags && shouldReplaceRelated)\n    {\n      this.clearMessages(tags);\n    }\n\n    const result = new Message(this, value, type || \"default\", tags || [], componentClass, componentProps);\n    this._messageQueue.unshift(result);\n  }\n\n  addDefaultMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"default\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addErrorMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"error\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addWarningMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"warning\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  clearMessages(tags=null)\n  {\n    if (!tags)\n    {\n      this._messageQueue.length = 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      let message;\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            this._messageQueue.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  hasMessages(tags=null)\n  {\n    if (!tags)\n    {\n      return this._messageQueue.length >= 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }\n\n  getMessages()\n  {\n    return this._messageQueue;\n  }\n}\nexport default NotificationManager;\n","import NotificationManager from './NotificationManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new NotificationManager();\nexport default INSTANCE;\n","import React from 'react';\n\nclass FormattedInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.element = null;\n    this.ignoreSaveOnExit = false;\n\n    const defaultValue = props.defaultValue || \"\";\n    this.state = {\n      value: defaultValue,\n      prevValue: defaultValue\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    //props:\n    //  filter - a filter function\n    //  formatter - a format function\n    //  captureOnExit - what to capture on blur (none, save, reset)\n    //  defaultValue - the default value for input\n  }\n\n  //Override\n  componentWillReceiveProps(nextProps)\n  {\n    //Don't overwrite user input...\n    if (this.hasFocus()) return;\n\n    //TODO: This is a way to update the value if it is suppose to be the default value...\n    if (!this.state.value || this.state.value.length <= 0 || this.state.value === this.props.defaultValue)\n    {\n      this.setState({value: nextProps.defaultValue});\n    }\n  }\n\n  get value()\n  {\n    return this.state.value;\n  }\n\n  focus(replace=false)\n  {\n    if (replace)\n    {\n      this.element.select();\n    }\n    else\n    {\n      this.element.focus();\n    }\n  }\n\n  blur()\n  {\n    this.element.blur();\n  }\n\n  hasFocus()\n  {\n    return this.element === document.activeElement;\n  }\n\n  onChange(e)\n  {\n    if (this.props.filter)\n    {\n      const result = e.target.value.replace(this.props.filter, '');\n      this.setState({value: result});\n    }\n    else\n    {\n      this.setState({value: e.target.value});\n    }\n  }\n\n  onBlur(e)\n  {\n    if (this.ignoreSaveOnExit || this.props.captureOnExit == \"none\")\n    {\n      //For those you choose to handle exit, it's value should remain correct.\n      const result = this.formatValue(e.target.value);\n      this.setState({value: result});\n\n      //Don't ignore it for the future.\n      this.ignoreSaveOnExit = false;\n      return;\n    }\n\n    if (this.props.captureOnExit == \"save\")\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n      });\n    }\n    else if (this.props.captureOnExit == \"reset\")\n    {\n      this.resetValue(null);\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.key == \"Enter\")\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n        this.element.blur();\n      });\n      return false;\n    }\n    else if (e.key == \"Escape\")\n    {\n      const prev = this.state.prevValue;\n      this.resetValue(prev, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(prev || \"\", prev);\n        }\n        this.element.blur();\n      });\n      return false;\n    }\n  }\n\n  resetValue(newValue=null, callback)\n  {\n    if (newValue != null)\n    {\n      const result = this.formatValue(newValue);\n      this.setState({value: result, prevValue: result}, callback);\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        //NOTE: Although you CAN assume prev is valid, but what about when prev does not exist?\n        const result = this.formatValue(prev.prevValue);\n        return {value: result};\n      }, callback);\n    }\n  }\n\n  setValue(value, callback)\n  {\n    if (!value || value.length == 0)\n    {\n      value = this.props.defaultValue || \"\";\n    }\n    else\n    {\n      value = this.formatValue(value);\n    }\n\n    this.setState({value: value}, callback);\n  }\n\n  appendValue(value, separator=\",\")\n  {\n    let result = this.state.value;\n    //If the entire input is selected...\n    if (this.element.selectionStart == 0 &&\n      this.element.selectionEnd == value.length)\n    {\n      //Replace it!\n      result = value;\n    }\n    //Or just append to the end...\n    else\n    {\n      if (!result || result.length == 0)\n      {\n        result = value;\n      }\n      else\n      {\n        result = result + separator + value;\n      }\n    }\n\n    //If can filter input...\n    if (this.props.filter)\n    {\n      result = result.replace(this.props.filter, '');\n    }\n\n    this.setState({value: this.formatValue(result)});\n  }\n\n  formatValue(value)\n  {\n    const formatter = this.props.formatter;\n    const result = formatter(value);\n    return result || \"\";\n  }\n\n  //Override\n  render()\n  {\n    return <input\n      id={this.props.id} className={this.props.className} style={this.props.style}\n      ref={ref=>this.element=ref}\n      type=\"text\" value={this.state.value}\n      onChange={this.onChange}\n      onBlur={this.onBlur}\n      onKeyUp={this.onKeyUp}/>;\n  }\n}\n\nexport default FormattedInput;\n","import React from 'react';\nimport './IconToggle.css';\n\nclass IconToggle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: this.props.defaultValue || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    //Toggle state\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    });\n\n    //Call passed-in onClick listener\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button icon-toggle \" + (this.state.open ? \" open \" : \"\") + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconToggle;\n","import React from 'react';\n\nclass DropDownIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"dropdown-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M7 10l5 5 5-5z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default DropDownIcon;\n","import React from 'react';\nimport './InfoBlock.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\n//TODO: Should be deprecated to use OptionGroup (or something similar)\nclass InfoBlock extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"infoblock-container \" + this.props.className}>\n      <div className=\"infoblock-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"infoblock-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        {this.props.children}\n      </div>\n    </div>;\n  }\n}\n\nexport default InfoBlock;\n","import React from 'react';\nimport './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconButton;\n","import React from 'react';\n\nclass BoxAddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"boxadd-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default BoxAddIcon;\n","import React from 'react';\n\nclass TriangleIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"triangle-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    </svg>;\n  }\n}\n\nexport default TriangleIcon;\n","import React from 'react';\nimport './StateTag.css';\n\nimport Config from 'config.js';\n\nclass StateTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    //This is a prop, refer to StateList for the actual node.getNodeLabel()\n    this.setState({ value: this.props.label, error: false }, () => {\n      target.select()\n    });\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const graphController = this.props.graphController;\n    const newLabel = this.state.value;\n\n    //The value is already processed, abort\n    if (newLabel != null)\n    {\n      const node = this.props.src;\n      const graph = graphController.getGraph();\n      if (newLabel.length > 0)\n      {\n        const nodes = graph.getNodesByLabel(newLabel);\n        if (nodes.length <= 0)\n        {\n          //Valid! Rename it!\n          graphController.renameNode(node, newLabel);\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else\n      {\n        //Delete!\n        graphController.deleteTargetNode(this.props.src);\n      }\n\n      this.setState({ value: null, error: false });\n\n      //Call any listening blurs\n      if (this.props.onBlur) this.props.onBlur(e);\n    }\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ value: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const graph = this.props.graphController.getGraph();\n    const value = e.target.value.trim();\n    let error = false;\n    if (value.length > 0)\n    {\n      const nodes = graph.getNodesByLabel(value);\n      if (nodes.length > 0)\n      {\n        //If there are more than 1 that have the same name\n        //OR if it is NOT the one we have...\n        if (nodes.length > 1 || nodes[0] !== this.props.src)\n        {\n          error = true;\n        }\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const isCustom = this.props.src.getNodeCustom();\n    const value = this.state.value != null ? this.state.value : this.props.label;\n    return <div className={\"statetag-container\" +\n      (isCustom ? \" customtag\" : \"\") +\n      (value.length == 0 ? \" emptytag\" : \"\") +\n      (this.state.value && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" className={(this.props.accept ? \" accept\" : \"\")}\n        spellCheck=\"false\"\n        style={{width: value.length + \"ch\"}}\n        value={value}\n        onChange={this.onValueChange}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default StateTag;\n","import React from 'react';\nimport './StatesList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\nimport TriangleIcon from 'icons/TriangleIcon.js';\n\nimport StateTag from './StateTag.js';\n\nclass StatesList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onStateCreate = this.onStateCreate.bind(this);\n  }\n\n  onStateCreate(e)\n  {\n    const x = -100 + (Math.random() * 100 * 2);\n    const y = -100 + (Math.random() * 100 * 2);\n    this.props.graphController.createNode(x, y);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    return <InfoBlock title={I18N.toString(\"component.stateslist.title\")} defaultValue=\"true\">\n      <div className=\"statelist-container\">\n        <div className=\"statelist\">\n          <TriangleIcon/>\n          {\n            graph.getNodes().map((e, i) => {\n              return <StateTag key={e.getGraphElementID()} src={e} label={e.getNodeLabel()} accept={e.getNodeAccept()}\n                graphController={graphController}\n                onFocus={ev => graphController.focusOnNode(e)}/>\n            })\n          }\n        </div>\n        <IconButton onClick={this.onStateCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default StatesList;\n","import React from 'react';\n\nimport './AlphabetTag.css';\nimport Config from 'config.js';\n\nclass AlphabetTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      symbol: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    this.setState({\n      symbol: this.props.src,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const machineController = this.props.machineController;\n    const newSymbol = this.state.symbol;\n\n    if (newSymbol != null)\n    {\n      const oldSymbol = this.props.src;\n      if (newSymbol.length > 0)\n      {\n        const alphabet = machineController.getAlphabet();\n        if (!alphabet.includes(newSymbol))\n        {\n          if (oldSymbol)\n          {\n            //Valid! Rename it!\n            machineController.renameSymbol(oldSymbol, newSymbol);\n          }\n          else\n          {\n            //Valid! Add it to the list!\n            machineController.createSymbol(newSymbol);\n          }\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (oldSymbol)\n      {\n        //Delete!\n        machineController.deleteSymbol(oldSymbol);\n      }\n    }\n\n    this.setState({symbol: null, error: false});\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e);\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ symbol: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const machineController = this.props.machineController;\n    const symbol = e.target.value.trim();\n    let error = false;\n    if (symbol.length > 0)\n    {\n      const alphabet = machineController.getAlphabet();\n      if (alphabet.includes(symbol) && symbol != this.props.src)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      symbol: symbol,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const symbol = this.state.symbol != null ? this.state.symbol : this.props.src;\n    const isUsed = false;\n    //TODO: const isUsed = this.props.src && this.props.machineController.getMachineBuilder().getMachine().getUsedAlphabet().includes(symbol);\n    return <div className={\"alphatag-container\" +\n      (isUsed ? \" usedtag\" : \"\") +\n      (this.props.src && (!symbol || symbol.length == 0) ? \" emptytag\" : \"\") +\n      (this.state.symbol && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" ref={ref=>this.ref=ref} className=\"alphatag-input\"\n        spellCheck=\"false\"\n        maxLength=\"1\"\n        value={symbol}\n        onChange={this.onValueChange}\n        onFocus = {this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default AlphabetTag;\n","import React from 'react';\nimport './AlphabetList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\n\nimport AlphabetTag from './AlphabetTag.js';\n\nclass AlphabetList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    this.editingTag = null;\n\n    this.state = {\n      editing: false\n    };\n\n    this.onSymbolCreate = this.onSymbolCreate.bind(this);\n    this.onStopEditing = this.onStopEditing.bind(this);\n  }\n\n  onSymbolCreate(e)\n  {\n    this.setState({editing: true}, () => {\n      this.editingTag.ref.focus();\n    });\n  }\n\n  onStopEditing(e)\n  {\n    this.setState({editing: false});\n  }\n\n  render()\n  {\n    const machineController = this.props.machineController;\n    const alphabet = machineController.getAlphabet();\n\n    return <InfoBlock title={I18N.toString(\"component.alphabetlist.title\")}>\n      <div className=\"alphalist-container\">\n        <div className=\"alphalist\">\n          {\n            alphabet.map((e, i) => {\n              return <AlphabetTag key={e + \".\" + i} src={e} machineController={machineController}/>\n            })\n          }\n          {\n            this.state.editing &&\n            <AlphabetTag ref={ref=>this.editingTag=ref} src={\"\"} machineController={machineController}\n              onBlur={this.onStopEditing}/>\n          }\n        </div>\n\n        <IconButton onClick={this.onSymbolCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default AlphabetList;\n","const SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass FSA\n{\n  constructor()\n  {\n    this._states = [];\n    this._transitions = [];\n    this._finalStates = [];\n\n    this._customAlphabet = [];\n  }\n\n  clear()\n  {\n    this._states.length = 0;\n    this._transitions.length = 0;\n    this._finalStates.length = 0;\n\n    this._customAlphabet.length = 0;\n  }\n\n  copy(fsa)\n  {\n    this._states.length = 0;\n    for(let state of fsa._states)\n    {\n      this._states.push(state);\n    }\n    this._transitions.length = 0;\n    for(let transition of fsa._transitions)\n    {\n      this._transitions.push(transition.slice());\n    }\n    this._finalStates.length = 0;\n    for(let final of fsa._finalStates)\n    {\n      this._finalStates.push(final);\n    }\n    this._customAlphabet.length = 0;\n    for(let symbol of fsa._customAlphabet)\n    {\n      this._customAlphabet.push(symbol);\n    }\n  }\n\n  newState(state)\n  {\n    if (this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' already added to states.\");\n    }\n\n    this._states.push(state);\n    return state;\n  }\n\n  deleteState(state)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    this._states.splice(this._states.indexOf(state), 1);\n  }\n\n  renameState(oldState, newState)\n  {\n    if (!this._states.includes(oldState))\n    {\n      throw new Error(\"State \\'\" + oldState + \"\\' does not exist.\");\n    }\n    if (this._states.includes(newState))\n    {\n      throw new Error(\"State \\'\" + newState + \"\\' already exists.\");\n    }\n\n    for(let transition of this._transitions)\n    {\n      if (transition[SRC] == oldState)\n      {\n        transition[SRC] = newState;\n      }\n      if (transition[DST] == oldState)\n      {\n        transition[DST] = newState;\n      }\n    }\n\n    const index = this._states.indexOf(oldState);\n    this._states[index] = newState;\n  }\n\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    //Check if already exists...\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n\n  deleteTransition(fromState, toState, symbol=null)\n  {\n    for(let i = this._transitions.length - 1; i >= 0; --i)\n    {\n      const transition = this._transitions[i];\n      if (transition[SRC] == fromState && transition[DST] == toState)\n      {\n        //Delete if src, dst, and symbols match... or if deleting all symbols\n        if (symbol == null || transition[SYMBOL] == symbol)\n        {\n          this._transitions.splice(i, 1);\n        }\n      }\n    }\n  }\n\n  newSymbol(symbol)\n  {\n    if (this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Symbol \\'\" + symbol + \"\\' already added to alphabet.\");\n    }\n\n    this._customAlphabet.push(symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    if (!this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Unable to remove symbol \\'\" + symbol + \"\\'.\");\n    }\n\n    this._customAlphabet.splice(this._customAlphabet.indexOf(symbol), 1);\n  }\n\n  setStartState(state)\n  {\n    if (this._states.length <= 0)\n    {\n      throw new Error(\"Not enough states.\");\n    }\n\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (this.getStartState() == state) return;\n\n    this._states.splice(this._states.indexOf(state), 1);\n    this._states.unshift(state);\n  }\n\n  setFinalState(state, isFinal=true)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (isFinal)\n    {\n      if (this._finalStates.includes(state)) return;\n\n      this._finalStates.push(state);\n    }\n    else\n    {\n      if (!this._finalStates.includes(state)) return;\n      this._finalStates.splice(this._finalStates.indexOf(state), 1);\n    }\n  }\n\n  doTransition(state, symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        return transition[DST];\n      }\n    }\n    return null;\n  }\n\n  isFinalState(state)\n  {\n    return this._finalStates.includes(state);\n  }\n\n  hasState(state)\n  {\n    return this._states.includes(state);\n  }\n\n  getStates()\n  {\n    return this._states;\n  }\n\n  //Is the same as isAlphabet if the user did not add custom symbols\n  isUsedAlphabet(symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SYMBOL] == symbol)\n      {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  //Includes custom user-defined symbols (from newSymbol)\n  isAlphabet(symbol)\n  {\n    for(const s of this._customAlphabet)\n    {\n      if (s == symbol) return true;\n    }\n\n    return this.isUsedAlphabet(symbol);\n  }\n\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (symbol.length > 0 && !result.includes(symbol))\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  getAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const s of this._customAlphabet)\n    {\n      result.push(s);\n    }\n    return this.getUsedAlphabet(result);\n  }\n\n  getOutgoingTransitions(state=null, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state)\n      result.push(transition);\n    }\n    return result;\n  }\n\n  getTransitions()\n  {\n    return this._transitions;\n  }\n\n  getStartState()\n  {\n    return this._states.length <= 0 ? null : this._states[0];\n  }\n\n  getFinalStates()\n  {\n    return this._finalStates;\n  }\n\n  isValidDFA()\n  {\n    const alphabet = this.getAlphabet();\n    const foundSymbols = new Array(alphabet.length);\n    foundSymbols.fill(false);\n\n    for(const state of this._states)\n    {\n      //Get all outgoing transitions\n      const transitions = this.getOutgoingTransitions(state);\n      for(const transition of transitions)\n      {\n        const index = alphabet.indexOf(transition[1]);\n        if (foundSymbols[index] == false)\n        {\n          foundSymbols[index] = true;\n        }\n        else\n        {\n          //Found duplicate\n          return false;\n        }\n      }\n\n      //Reset foundSymbols for next state\n      const length = foundSymbols.length;\n      for(let i = 0; i < length; ++i)\n      {\n        if (foundSymbols[i] == false)\n        {\n          //Found missing symbol for state\n          return false;\n        }\n        foundSymbols[i] = false;\n      }\n    }\n\n    return true;\n  }\n\n  toJSON()\n  {\n    const result = {};\n    if (this instanceof DFA) result.type = \"DFA\";\n    else if (this instanceof NFA) result.type = \"NFA\";\n    else result.type = \"FSA\";\n    result.states = this._states.slice();\n    result.alphabet = this._customAlphabet.slice();\n    result.usedAlphabet = this.getUsedAlphabet();\n    result.transitions = this._transitions.slice();\n    result.startState = this.getStartState();\n    result.finalStates = this._finalStates.slice();\n\n    return result;\n  }\n}\n\nexport default FSA;\n","export const EMPTY = '\\u03B5';\nexport const ARROW = '\\u2192';\nexport const EMPTY_SET = '\\u2205';\n\n//'\\u03BB' = LAMBDA\n","import FSA from './FSA.js';\nimport { EMPTY } from './Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass NFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (!result.includes(symbol) && symbol != EMPTY)\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  //Override\n  doTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        result.push(transition[DST]);\n      }\n    }\n    return result;\n  }\n\n  doClosureTransition(state, dst=[])\n  {\n    const result = dst;\n    result.push(state);\n    for(let i = 0; i < result.length; ++i)\n    {\n      const transitions = this.getOutgoingTransitions(result[i]);\n      for(const transition of transitions)\n      {\n        if (transition[SYMBOL] == EMPTY)\n        {\n          const dst = transition[DST];\n          if (!result.includes(dst))\n          {\n            result.push(dst);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  doTerminalTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        //Get closure on destination states\n        const states = this.doClosureTransition(transition[DST]);\n        for(const s of states)\n        {\n          if (!result.includes(s))\n          {\n            result.push(s);\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n    getPowerSet() {\n        var ps = [[]];\n        var nfaStates = this.getStates();\n        for(var i=0; i < nfaStates.length; i++) {\n            for(var j=0, len = ps.length; j < len; j++) {\n                ps.push(ps[j].concat(nfaStates[i]));\n            }\n        }\n        return ps;\n    }\n}\n\nexport default NFA;\n","import React from 'react';\nimport './TransitionTable.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport NFA from 'machine/NFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nconst SYMBOL_AXIS = \"symbols\";\nconst STATE_AXIS = \"states\";\n\nclass TransitionTable extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      rowAxis: SYMBOL_AXIS\n    }\n  }\n\n  render()\n  {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet();\n    const transitions = machine.getTransitions();\n    const rowAxisType = this.state.rowAxis;\n    const isNFAMachine = machineBuilder.getMachineType() == \"NFA\";\n    const hasEmptyColumn = rowAxisType === SYMBOL_AXIS && isNFAMachine;\n\n    return <InfoBlock title={I18N.toString(\"component.transitiontable.title\")}>\n      <div className=\"transitiontable-container\">\n        <table className=\"transitiontable\">\n          <tbody>\n            <tr>\n              <th className=\"emptycell\">\n                <button className=\"panel-button\" onClick={()=>\n                  this.setState((prev, props)=>{\n                    return {\n                      rowAxis: prev.rowAxis == SYMBOL_AXIS ? STATE_AXIS : SYMBOL_AXIS\n                    };\n                  })}>\n                  {this.state.rowAxis == SYMBOL_AXIS ? \"Q/\\u03A3\" : \"Q/Q\"}\n                </button>\n              </th>\n              {\n                rowAxisType === SYMBOL_AXIS ?\n                  alphabet.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                rowAxisType === STATE_AXIS ?\n                  states.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                null\n              }\n              {\n                hasEmptyColumn &&\n                  <th scope=\"col\">{EMPTY}</th>\n              }\n            </tr>\n            {\n              states.map((e, i)=><tr key={e}>\n                <th scope=\"row\" className=\"row\">{e}</th>\n                {\n                  rowAxisType === SYMBOL_AXIS ?\n                    alphabet.map((symbol, i) => {\n                      let className = \"\";//TODO: machine.isFinalState(e) ? \"accept\" : \"\";\n                      const result = getDestinationFromSourceAndSymbol(machine, e, symbol, isNFAMachine);\n                      if (!isNFAMachine && (result.startsWith(\"{\") || result == \"-\"))\n                      {\n                        className += \" error\";\n                      }\n                      return <td key={e + \",\" + symbol} className={className}>\n                        {result}\n                      </td>;\n                    }) :\n                  rowAxisType === STATE_AXIS ?\n                    states.map((dst, i) => {\n                      const result = getSymbolFromSourceAndDestination(machine, e, dst);\n                      return <td key={e + \",\" + dst}>\n                        {result}\n                      </td>;\n                    }) :\n                  null\n                }\n                {\n                  hasEmptyColumn &&\n                    <td>{getDestinationFromSourceAndSymbol(machine, e, EMPTY)}</td>\n                }\n              </tr>)\n            }\n          </tbody>\n        </table>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nfunction getDestinationFromSourceAndSymbol(machine, src, symbol, isSet=true)\n{\n  const result = machine.doTransition(src, symbol);\n\n  //Assumes that the machine is always an NFA, therefore the result is an array\n  if (Array.isArray(result))\n  {\n    return !isSet && result.length == 1 ?\n      result[0] :\n      result.length > 0 ?\n      \"{\" + result.join(\", \") + \"}\" : \"-\";\n  }\n  else\n  {\n    return result || \"-\";\n  }\n}\n\nfunction getSymbolFromSourceAndDestination(machine, src, dst)\n{\n  const result = [];\n  const transitions = machine.getTransitions();\n  for(const transition of transitions)\n  {\n    if (transition[SRC] == src && transition[DST] == dst)\n    {\n      result.push(transition[SYMBOL]);\n    }\n  }\n\n  if (result.length === 1)\n  {\n    return result[0];\n  }\n  else if (result.length > 0)\n  {\n    return \"{\" + result.join(\", \") + \"}\";\n  }\n  else\n  {\n    return \"-\";\n  }\n}\n\nexport default TransitionTable;\n","import React from 'react';\nimport './TransitionFunction.css';\n\nimport InfoBlock from '../infoblock/InfoBlock';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass TransitionFunction extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return(\n        <InfoBlock title=\"Transition Chart\">\n          <div className=\"transitionfunction-container\">\n            <table className=\"transitionfunction-table\">\n              <tbody>\n                <tr>\n                  <th>Q{\"\\u00d7\"}&Sigma;</th>\n                  <th>{isNFA ? \"\\u2118(Q)\" : \"Q\"}</th>\n                </tr>\n                {\n                  states.map((state, i) => {\n                    let emptrans = machine.doTransition(state, EMPTY);\n                    let empclassName = \"\";\n\n                    let transitions = alphabet.map((symbol, j) => {\n                      let className = \"\";\n                      let trans = machine.doTransition(state, symbol);\n                      if(isNFA && !trans.length) return;\n                      if(!isNFA && !trans.length) {\n                        className = \"error\";\n                        trans = \"-\";\n                      }\n                      if(!isNFA && trans.length > 1) {\n                        className = \"error\";\n                        trans = \"{\" + trans + \"}\"\n                      }\n                      trans = isNFA ? \"{\" + trans + \"}\" : \"\" + trans;\n                      return <tr key={\"\"+state+symbol}>\n                          <td className=\"transitionfunction-key\">{\"(\" + state + \",\" + symbol + \")\"}</td>\n                          <td className={\"transitionfunction-value \" + className}>{trans}</td>\n                        </tr>\n                    });\n\n                    if(emptrans.length > 0) {\n                      if(!isNFA) {\n                        empclassName = \"error\";\n                      }\n                      const addBrac = isNFA || emptrans.length > 1;\n                      emptrans = addBrac ? \"{\" + emptrans + \"}\" : \"\" + emptrans;\n                      transitions.unshift(\n                          <tr key={\"\"+state+EMPTY}>\n                            <td className={\"transitionfunction-key \" + empclassName}>{\"(\" + state + \",\" + EMPTY + \")\"}</td>\n                            <td className=\"transitionfunction-value\">{emptrans}</td>\n                          </tr>\n                      );\n                    }\n                    return transitions;\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </InfoBlock>\n    );\n  }\n}\n\nexport default TransitionFunction;\n","import React from 'react';\nimport './FormalDefinition.css';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport { EMPTY_SET, ARROW } from 'machine/Symbols.js';\n\nconst EQUAL = \"=\";\nconst DELTA = \"\\u03b4\";\n\nclass FormalDefinition extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const finalStates = machine.getFinalStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return <div className=\"formaldef-container\">\n      <h2>{\"M = (Q, \\u03A3, \\u03b4, q0, F)\"}</h2>\n      <div>\n        <h3>Q =</h3>\n        <span className=\"formaldef-values\">\n          {states.length > 0 ? \"{ \" + states.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>&Sigma; =</h3>\n        <span className=\"formaldef-values\">\n          {alphabet.length > 0 ? \"{ \" + alphabet.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>{DELTA}</h3>\n        <div className=\"formaldef-values\">\n          {\n            states.map((state, i) => {\n              let emptrans = machine.doTransition(state, EMPTY);\n              let empclassName = \"\";\n\n              let transitions = alphabet.map((symbol, j) => {\n                let className = \"\";\n                let trans = machine.doTransition(state, symbol);\n                if(isNFA && !trans.length) return;\n                if(!isNFA && !trans.length) {\n                  className = \"error\";\n                  trans = \"-\";\n                }\n                if(!isNFA && trans.length > 1) {\n                  className = \"error\";\n                  trans = \"{ \" + trans + \" }\"\n                }\n                trans = isNFA ? \"{ \" + trans + \" }\" : \"\" + trans;\n                return <div key={\"\"+state+symbol} className={className}>\n                      {DELTA + \"( ( \" + state + \", \" + symbol + \" ) )\" + \" \" + EQUAL + \" \" + trans}\n                </div>\n              });\n\n              if(emptrans.length > 0) {\n                if(!isNFA) {\n                  empclassName = \"error\";\n                }\n                const addBrac = isNFA || emptrans.length > 1;\n                emptrans = addBrac ? \"{ \" + emptrans + \" }\" : \"\" + emptrans;\n                transitions.unshift(\n                    <div key={\"\" + state + EMPTY} className={empclassName}>\n                      {DELTA + \"( ( \" + state + \", \" + EMPTY + \" ) )\" + \" \" + EQUAL + \" \" + emptrans}\n                    </div>\n                );\n              }\n              return transitions;\n            })\n          }\n          {\n            isNFA && <div id=\"formaldef-otherinputs\">\n              <div>{\"For all other inputs (q, x),\"}</div>\n              <div>{DELTA + \"( (q, x) )\" + \" \" + EQUAL + \" \" + EMPTY_SET}</div>\n            </div>\n          }\n        </div>\n      </div>\n      <div>\n        <h3>q0 =</h3>\n        <span className=\"formaldef-values\">\n          {states[0]}\n        </span>\n      </div>\n      <div>\n        <h3>F =</h3>\n        <span className=\"formaldef-values\">\n          {finalStates.length > 0 ? \"{ \" + finalStates.join(\",\") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nexport default FormalDefinition;\n","import React from 'react';\nimport '../Panel.css';\nimport './OverviewPanel.css';\n\nimport Config from 'config.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\nimport StatesList from './stateslist/StatesList.js';\nimport AlphabetList from './alphabetlist/AlphabetList.js';\nimport TransitionTable from './transitiontable/TransitionTable.js';\nimport TransitionFunction from './transitionfunction/TransitionFunction.js';\nimport FormalDefinition from \"./formaldefinition/FormalDefinition\";\n\nclass OverviewPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n\n    this.state = {\n      viewFormal: false\n    };\n\n    this.onChangeMachineType = this.onChangeMachineType.bind(this);\n    this.onAutoLayout = this.onAutoLayout.bind(this);\n\n    this.onChangeAutoRename = this.onChangeAutoRename.bind(this);\n    this.onSubmitAutoStatePrefix = this.onSubmitAutoStatePrefix.bind(this);\n    this.onAutoStateFormat = this.onAutoStateFormat.bind(this);\n\n    this.switchDefinition = this.switchDefinition.bind(this);\n  }\n\n  onAutoLayout(e)\n  {\n    const graphController = this.props.graphController;\n    graphController.applyAutoLayout();\n  }\n\n  onChangeMachineType(e)\n  {\n    const value = e.target.value;\n    const machineController = this.props.machineController;\n    machineController.changeMachineTo(value);\n  }\n\n  onChangeAutoRename(e)\n  {\n    const machineBuilder = this.props.machineController.getMachineBuilder();\n    machineBuilder.setAutoRenameNodes(e.target.checked);\n  }\n\n  onSubmitAutoStatePrefix(next, prev)\n  {\n    const labeler = this.props.machineController.getMachineBuilder().getLabeler();\n    if (labeler.prefix != next)\n    {\n      labeler.prefix = next;\n      labeler.sortDefaultNodeLabels();\n    }\n  }\n\n  onAutoStateFormat(value)\n  {\n    return value && value.length > 0 ? value : Config.STR_STATE_LABEL;\n  }\n\n  switchDefinition()\n  {\n    this.setState((prev, props) => {\n      return { viewFormal: !prev.viewFormal };\n    });\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className=\"panel-container\" id=\"overview\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.overview.title\")}</h1>\n      </div>\n        <div className=\"panel-content\">\n          <select className=\"machine-type panel-select\"\n            value={machineBuilder.getMachineType()}\n            onChange={this.onChangeMachineType}>\n            <option value=\"DFA\">DFA</option>\n            <option value=\"NFA\">NFA</option>\n          </select>\n\n          {this.state.viewFormal &&\n            <FormalDefinition machineBuilder={machineBuilder}/>}\n\n          {\n            !this.state.viewFormal &&\n            <div>\n              <div>\n                <div className=\"graphinfo-important\">\n                  <StatesList graphController={graphController}/>\n                  <AlphabetList machineController={machineController}/>\n                </div>\n                <div className=\"graphinfo\">\n                  <TransitionFunction machineBuilder={machineBuilder}/>\n                  <TransitionTable machineBuilder={machineBuilder}/>\n                </div>\n              </div>\n              <hr/>\n\n              {/*State Labeling*/}\n              <div style={{paddingBottom: \"0.5em\"}}>\n                <h3 style={{marginBottom: \"0\"}}>State Labels</h3>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                  <div className=\"statetag-container\">\n                    <FormattedInput defaultValue={machineBuilder.getLabeler().prefix} style={{width: \"4em\"}} formatter={this.onAutoStateFormat} captureOnExit=\"save\" onSubmit={this.onSubmitAutoStatePrefix}/>\n                  </div>\n                  <select style={{\n                      background: \"none\",\n                      outline: \"none\",\n                      border: \"none\",\n                      padding: \"0\",\n                      margin: \"0\",\n                      appearance: \"none\",\n                      color: \"white\"\n                    }} disabled={true}>\n                    <option>{\"0-9\"}</option>\n                    <option>{\"a-z\"}</option>\n                    <option>{\"A-Z\"}</option>\n                  </select>\n                </div>\n                <div className=\"panel-checkbox\">\n\n                  <input type=\"checkbox\" id=\"auto-statename\"\n                    onChange={this.onChangeAutoRename}\n                    checked={machineBuilder.shouldAutoRenameNodes()}/>\n                  <label htmlFor=\"auto-statename\">{I18N.toString(\"options.autolabel\")}</label>\n                </div>\n              </div>\n\n              <hr/>\n\n              <button className=\"panel-button\" onClick={this.onAutoLayout} disabled={graph.isEmpty()}>\n                {I18N.toString(\"action.overview.autolayout\")}\n              </button>\n            </div>\n          }\n\n          <button className=\"panel-button\" onClick={this.switchDefinition}>\n            {this.state.viewFormal ? \"Back\" : \"View Definition\"}\n          </button>\n        </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nOverviewPanel.UNLOCALIZED_NAME = \"component.overview.title\";\n\nexport default OverviewPanel;\n","import React from 'react';\nimport './Viewport.css';\n\nconst VIEWPORT_RENDER_LAYER = \"viewport\";\n\nclass Viewport extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.labelEditor = null;\n\n    this.state = {\n      prevMode: Viewport.NORMAL,\n      mode: Viewport.NORMAL\n    };\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const screen = this.props.screen;\n    const currentModule = app.getCurrentModule();\n    const inputController = app.getInputController();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n\n    const LabelEditor = currentModule.getLabelEditor();\n    const ViewportRenderer = currentModule.getRenderer(VIEWPORT_RENDER_LAYER);\n\n    return <div className={\"viewport-container viewport-\" + this.state.mode} ref={ref=>this.ref=ref}>\n      { LabelEditor &&\n        <LabelEditor ref={ref=>this.labelEditor=ref}\n        inputController={inputController}\n        graphController={graphController}\n        machineController={machineController}\n        screen={screen}/> }\n      { ViewportRenderer &&\n        <ViewportRenderer\n        viewport={this}\n        app={app}/>}\n    </div>;\n  }\n}\nViewport.NORMAL = \"normal\";\nViewport.WAITING = \"waiting\";\nViewport.TESTING = \"testing\";\nViewport.DANGEROUS = \"dangerous\";\n\nexport default Viewport;\n","import { EMPTY } from 'machine/Symbols.js';\nimport NFA from 'machine/NFA.js'\n\n//This ASSUMES that the passed-in machine is an NFA! (and not a DFA)\nexport function solveNFA(nfa, input)\n{\n  if (typeof input === 'string') input = input[Symbol.iterator]();\n\n  let cachedStates = [];\n  let cachedSymbols = [];\n  cachedStates.push({state: nfa.getStartState(), index: 0});\n  for (let currState of nfa.doClosureTransition(nfa.getStartState()))\n  {\n    cachedStates.push({state: currState , index: 0});\n  }\n  let checkedStates = [];\n  let symbol = null;\n\n  let counter = 0;\n\n  while(cachedStates.length > 0)\n  {\n    symbol = input.next().value;\n    let res = solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates);\n    if (res) return true;\n\n    //HACK: This is to stop any infinite loops! This will be fixed in the future!\n    ++counter;\n    if (counter > 1000)\n    {\n      return false;\n    }\n  }\n\n  return false;\n}\n\n//TODO: When an empty transition occurs, it does a closure transition.\n//The closure chain will be stored as a group\n//Any future transitions must not re-enter the group\nexport function solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates)\n{\n  //initialize variables\n  let state = null;\n  let nextStates = [];\n  let nextIndex = 0;\n\n  if (symbol != null)\n  {\n    cachedSymbols.push(symbol);\n  }\n\n  for(let cstate of cachedStates)\n  {\n    state = cstate.state;\n    symbol = cstate.index < cachedSymbols.length ? cachedSymbols[cstate.index] : null;\n\n    if (symbol != null)\n    {\n      //Read to next state...\n      nextIndex = cstate.index + 1;\n      for(let nextState of nfa.doTerminalTransition(state, symbol))\n      {\n        nextStates.push({state: nextState, index: nextIndex});\n      }\n    }\n    else\n    {\n      if (nfa.isFinalState(state)) return true;\n      checkedStates.push(state);\n    }\n\n    //Read none to next state...\n    nextIndex = cstate.index;\n    /*for(let nextState of nfa.doTransition(state,EMPTY))\n    {\n      if (checkedStates.includes(nextState)) continue;\n      if (symbol == null && nfa.isFinalState(nextState)) return true;\n\n      nextStates.push({state: nextState, index: nextIndex});\n    }*/\n  }\n  cachedStates.length = 0\n  cachedStates.push(...nextStates);\n  return false;\n}\n","import FSA from './FSA.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass DFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  validate()\n  {\n    //TODO: Deprecate this\n    console.error(\"This is deprecated, please use FSA.isValidDFA()\");\n    return this.isValidDFA();\n  }\n\n  //Override default behavior\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    for(const transition of this._transitions)\n    {\n      //Check if already exists...\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n      //Check if valid deterministic transition...\n      else if (transition[SRC] == fromState && transition[SYMBOL] == symbol)\n      {\n        throw new Error(\"Unable to create illegal nondeterministic transition for DFA.\");\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n}\n\nexport default DFA;\n","import { solveDFA } from 'machine/util/solveDFA.js';\nimport { solveNFA, solveNFAbyStep } from 'machine/util/solveNFA.js';\n\nimport { DFA } from 'machine/DFA.js';\n\nconst STEPTIME = 500;\nconst SKIPTIME = 50;\n\nclass TestMode\n{\n  constructor(testingManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.testingManager = testingManager;\n\n    this.targets = [];\n\n    this.history = [];\n    this.indexofString = -1;\n    this.result = false;\n\n    //for nfa use\n    this.cachedStates = [];\n    this.cachedSymbols = [];\n    this.checkedStates = [];\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n\n    this.timer = null;\n\n    this.onNodeDestroy = this.onNodeDestroy.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    //NOTE: This is not necessary because you can edit once in stepbystep mode\n    //this.graphController.getGraph().on(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  destroy()\n  {\n    //this.graphController.getGraph().removeEventListener(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  onNodeDestroy(node)\n  {\n    //this.targets.splice(this.targets.indexOf(node), 1);\n  }\n\n  onStart()\n  {\n    //Check the machine, if DFA, then it must be a valid DFA\n    /*if (this.machineController.getMachineBuilder().getMachineType() == \"DFA\")\n    {\n      const dfa = this.machineController.getMachineBuilder().toDFA();\n      if (!dfa.validate()) return;\n    }*/\n    this.prepareForNewTest();\n    this.started = true;\n    this.skipToEnd = false;\n  }\n\n  onResume()\n  {\n    //If at the end, restart!\n    if (!this.hasNextStep())\n    {\n      this.testingManager.inputList.resetTests(false);\n    }\n\n    this.running = true;\n\n    const step = () => {\n      if (this.running)\n      {\n        if (this.hasNextStep())\n        {\n          this.onNextStep();\n          this.timer = setTimeout(step, STEPTIME);\n        }\n        else\n        {\n          this.onPause();\n        }\n      }\n    };\n    this.timer = setTimeout(step, STEPTIME);\n  }\n\n  onPause()\n  {\n    this.running = false;\n  }\n\n  onStop()\n  {\n    this.targets.length = 0;\n\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n  }\n\n  isRunning()\n  {\n    return this.running;\n  }\n\n  isStarted()\n  {\n    return this.started;\n  }\n\n  isSkipping()\n  {\n    return this.skipToEnd;\n  }\n\n  hasPrevStep()\n  {\n    return this.history.length > 0 ||\n      this.testingManager.inputList.hasPrevInput();\n  }\n\n  onPreviousStep()\n  {\n    if (this.history.length > 0)\n    {\n      const previous = this.history.pop();\n      this.targets.length = 0;\n      this.cachedStates.length = 0;\n      this.cachedSymbols.length = 0;\n      this.checkedStates.length = 0;\n\n      //Copy the old step\n      for(const target of previous.targets)\n      {\n        if (!target) throw new Error(\"Found null target\");\n\n        this.targets.push(target);\n      }\n      for(const state of previous.cachedStates)\n      {\n        this.cachedStates.push(state);\n      }\n      for(const symbol of previous.cachedSymbols)\n      {\n        this.cachedSymbols.push(symbol);\n      }\n      for(const state of previous.checkedStates)\n      {\n        this.checkedStates.push(state);\n      }\n\n      this.indexofString--;\n    }\n    else\n    {\n      this.indexofString = -1;\n      this.testingManager.inputList.prevInput();\n    }\n  }\n\n  hasNextStep()\n  {\n    return this.indexofString < this.testingManager.inputList.getCurrentInput().value.length ||\n      this.testingManager.inputList.hasNextInput();\n  }\n\n  onNextStep()\n  {\n    const testInput = this.testingManager.inputList.getCurrentInput();\n    const fsa = this.machineController.getMachineBuilder().getMachine();\n\n    //Get next character of current test string\n    this.indexofString += 1;\n\n    //If no more characters to get...\n    if(this.indexofString >= testInput.value.length)\n    {\n      //End of test string\n      //Run it one more time...\n      this.result = solveNFAbyStep(fsa, null, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      testInput.setResult(this.result);\n\n      //If this is the last test input...\n      if (!this.testingManager.inputList.hasNextInput())\n      {\n        //End of test!\n        this.onPause();\n        return false;\n      }\n      else\n      {\n        const result = this.testingManager.inputList.nextInput();\n\n        //Stop the resume at each string\n        //this.running = false;\n\n        this.prepareForNewTest();\n        return true;\n      }\n    }\n    else\n    {\n      //Update history\n      const currentStep = this.getCurrentCache();\n      this.history.push(currentStep);\n\n      //Run it\n      let nextChar = testInput.value[this.indexofString];\n\n      this.result = solveNFAbyStep(fsa, nextChar, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      //Update targets\n      this.targets.length = 0;\n\n      for(const state of this.cachedStates)\n      {\n        let node = this.machineController.getFirstGraphNodeByLabel(this.graphController.getGraph(), state.state);\n        if (!node) throw new Error(\"Found null target\");\n\n        if (!this.targets.includes(node)) this.targets.push(node);\n      }\n\n      if (this.targets.length <= 0 && !this.running)\n      {\n        this.skipToEnd = true;\n        const skipFunc = () => {\n          if (this.skipToEnd)\n          {\n            this.indexofString += 1;\n            if (this.indexofString >= testInput.value.length)\n            {\n              this.skipToEnd = false;\n            }\n            else\n            {\n              setTimeout(skipFunc, SKIPTIME);\n            }\n          }\n        };\n        setTimeout(skipFunc, SKIPTIME);\n      }\n\n      return true;\n    }\n  }\n\n  getCurrentCache()\n  {\n    return {\n      targets: this.targets.slice(),\n      cachedStates: this.cachedStates.slice(),\n      cachedSymbols: this.cachedSymbols.slice(),\n      checkedStates: this.checkedStates.slice()\n    };\n  }\n\n  getCurrentTestStringIndex()\n  {\n    return this.indexofString + 1;\n  }\n\n  prepareForNewTest()\n  {\n    this.cachedStates.length = 0;\n\n    const graph = this.graphController.getGraph();\n    if (graph.isEmpty()) return;\n\n    const machine = this.machineController.getMachineBuilder().getMachine();\n\n    this.targets.length = 0;\n\n    let startState = machine.getStartState();\n    for (let curr_state of machine.doClosureTransition(startState))\n    {\n      this.cachedStates.push({state: curr_state, index: 0});\n      const node = this.machineController.getFirstGraphNodeByLabel(graph, curr_state);\n      if (!node) throw new Error(\"Found null target\");\n      this.targets.push(node);\n    }\n\n    this.cachedSymbols.length = 0;\n    this.checkedStates.length = 0;\n    this.indexofString = -1;\n    this.history.length = 0;\n\n    this.skipToEnd = false;\n  }\n}\n\nexport default TestMode;\n","import { guid } from 'util/MathHelper.js';\n\nimport { solveNFA } from 'machine/util/solveNFA.js';\n\nconst SUCCESS = true;\nconst FAILURE = false;\nconst PENDING = null;\n\n//Only refer to input by index, NEVER by reference!\nclass TestingInputList\n{\n  constructor()\n  {\n    this.inputList = [];\n    this.addInput(\"\");\n\n    this.inputIndex = 0;\n  }\n\n  isEmpty()\n  {\n    for(const input of this.inputList)\n    {\n      if (input.value.length > 0)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  testByIndex(index, machine)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    const input = this.inputList[index];\n    input.setResult(null);\n    //TODO: make this a promise\n    const result = solveNFA(machine, input.value);\n    input.setResult(result);\n    return result;\n  }\n\n  importTests(file)\n  {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try\n      {\n        //The only time the first element is being removed (then replaced)\n        this.inputList.length = 0;\n        this.inputIndex = 0;\n\n        const testInputs = event.target.result.split(\"\\n\");\n        for(let testInput of testInputs)\n        {\n          testInput = testInput.trim();\n          if (testInput.length > 0)\n          {\n            this.addInput(testInput);\n          }\n        }\n\n        //Make sure a first element exists\n        if (this.inputList.length < 0)\n        {\n          this.addInput(\"\");\n        }\n      }\n      catch(e)\n      {\n        reader.abort();\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  getTestsAsStrings()\n  {\n    return this.inputList.map((e, i) => e.value);\n  }\n\n  clearTests()\n  {\n    //Reset first element\n    const first = this.inputList[0];\n    first.value = \"\";\n    first.result = null;\n    first.dirty = true;\n\n    //Reset list\n    this.inputList.length = 1;\n    this.inputIndex = 0;\n  }\n\n  resetTests(markDirty=true)\n  {\n    this.inputIndex = 0;\n\n    if (markDirty)\n    {\n      for(const input of this.inputList)\n      {\n        input.dirty = true;\n      }\n    }\n  }\n\n  getTests()\n  {\n    return this.inputList;\n  }\n\n  addInput(value)\n  {\n    const input = {\n      value: value,\n      result: null,\n      dirty: true,\n      id: guid(),\n      setResult(result)\n      {\n        this.dirty = false;\n        this.result = result;\n      }\n    };\n\n    this.inputList.push(input);\n    return input;\n  }\n\n  getInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    return this.inputList[index];\n  }\n\n  removeInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    if (index === 0)\n    {\n      //Cannot delete the first input element\n      throw new Error(\"Cannot delete the first test input\");\n    }\n\n    if (index <= this.inputIndex)\n    {\n      --this.inputIndex;\n    }\n\n    this.inputList.splice(index, 1);\n  }\n\n  nextInput()\n  {\n    ++this.inputIndex;\n    if (this.inputIndex >= this.inputList.length)\n    {\n      this.inputIndex = 0;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  prevInput()\n  {\n    --this.inputIndex;\n    if (this.inputIndex < 0)\n    {\n      this.inputIndex = this.inputList.length - 1;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  resetInput()\n  {\n    this.inputIndex = 0;\n  }\n\n  hasNextInput()\n  {\n    return this.inputIndex < this.inputList.length;\n  }\n\n  hasPrevInput()\n  {\n    return this.inputIndex > 0;\n  }\n\n  getCurrentInput()\n  {\n    return this.inputList[this.inputIndex];\n  }\n\n  getCurrentInputIndex()\n  {\n    return this.inputIndex;\n  }\n}\n\nexport default TestingInputList;\n","import Viewport from 'content/viewport/Viewport.js';\nimport TestMode from './TestMode.js';\nimport TestingInputList from './TestingInputList.js';\n\nclass TestingManager\n{\n  constructor()\n  {\n    this.machineController = null;\n    this.viewport = null;\n\n    this.inputList = new TestingInputList();\n\n    this.shouldCheckError = false;\n    this.isImmediateErrorCheck = false;\n    this.errorCheckMode = TestingManager.NO_ERROR_CHECK;\n    this.stepByStepMode = false;\n\n    this.testMode = new TestMode(this);\n  }\n\n  initialize(app)\n  {\n    this.machineController = app.getMachineController();\n    this.viewport = app.viewport;\n\n    this.testMode.initialize(app);\n  }\n\n  destroy()\n  {\n\n  }\n\n  setErrorCheckMode(mode)\n  {\n    const machineBuilder = this.machineController.getMachineBuilder();\n\n    //Update machine builder error checker\n    machineBuilder.setMachineType(machineBuilder.getMachineType());\n\n    if (mode == TestingManager.NO_ERROR_CHECK)\n    {\n      this.shouldCheckError = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.DELAYED_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.IMMEDIATE_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = true;\n      this.errorCheckMode = mode;\n    }\n    else\n    {\n      throw new Error(\"Unknown error check mode \\'\" + mode + \"\\'\");\n    }\n  }\n\n  getErrorCheckMode()\n  {\n    return this.errorCheckMode;\n  }\n\n  setStepByStepMode(mode)\n  {\n    this.stepByStepMode = mode ? true : false;\n    if (mode)\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.testMode.onStart();\n      this.viewport.setState((prev, props) => {\n        if (prev.mode != Viewport.TESTING)\n        {\n          return {\n            prevMode: prev.mode,\n            mode: Viewport.TESTING\n          };\n        }\n        else\n        {\n          //It's already the correct viewport mode\n        }\n      });\n    }\n    else\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.viewport.setState((prev, props) => {\n        return {mode: prev.prevMode};\n      });\n    }\n  }\n\n  getStepByStepMode()\n  {\n    return this.stepByStepMode;\n  }\n}\nTestingManager.NO_ERROR_CHECK = \"none\";\nTestingManager.DELAYED_ERROR_CHECK = \"delayed\";\nTestingManager.IMMEDIATE_ERROR_CHECK = \"immediate\";\n\nexport default TestingManager;\n","import React from 'react';\n\nclass AddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"add-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n    </svg>;\n  }\n}\n\nexport default AddIcon;\n","import React from 'react';\n\nclass RemoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"remove-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"/>\n    </svg>;\n  }\n}\n\nexport default RemoveIcon;\n","import React from 'react';\n\nclass SuccessIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"success-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/>\n      <path d=\"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default SuccessIcon;\n","import React from 'react';\n\nclass FailureIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"failure-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default FailureIcon;\n","import React from 'react';\n\nclass RunningManIcon extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n    render() {\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n                <path d=\"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"/>\n            </svg>;\n    }\n}\n\nexport default RunningManIcon;\n","import React from 'react';\nimport './StatusButton.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport SuccessIcon from 'icons/SuccessIcon.js';\nimport FailureIcon from 'icons/FailureIcon.js';\nimport WorkingIcon from 'icons/WorkingIcon.js';\nimport RunningManIcon from 'icons/RunningManIcon.js';\n\nclass StatusButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const active = this.props.active;\n    if (this.props.mode === true)\n    {\n      //Success icon\n      return <IconButton className={\"status-icon success\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <SuccessIcon/>\n      </IconButton>;\n    }\n    else if (this.props.mode === false)\n    {\n      //Failure icon\n      return <IconButton className={\"status-icon failure\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <FailureIcon/>\n      </IconButton>;\n    }\n    else\n    {\n      //Pending icon\n      return <IconButton className={\"status-icon\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <RunningManIcon/>\n      </IconButton>;\n    }\n  }\n}\n\nexport default StatusButton;\n","import React from 'react';\nimport './TestingInput.css';\n\nimport Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport AddIcon from 'icons/AddIcon.js';\nimport RemoveIcon from 'icons/RemoveIcon.js';\n\nimport StatusButton from './StatusButton.js';\n\nclass TestingInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = React.createRef();\n\n    this.onStatusClick = this.onStatusClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  getInput()\n  {\n    return this.props.testList.getInputByIndex(this.props.index);\n  }\n\n  isInputFirst()\n  {\n    return this.props.index === 0;\n  }\n\n  onStatusClick(e)\n  {\n    this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n  }\n\n  onSubmitClick(e)\n  {\n    if (this.isInputFirst())\n    {\n      const src = this.getInput();\n\n      //Add test input to list\n      const newTest = this.props.testList.addInput(src.value);\n      //Copy result to new test (should not be setResult)\n      newTest.result = src.result;\n      newTest.dirty = src.dirty;\n\n      //Delete already processed test\n      src.value = \"\";\n      src.result = null;\n      src.dirty = true;\n\n      //Reselect the target\n      this.ref.focus();\n    }\n    else\n    {\n      //Remove test input from list\n      this.props.testList.removeInputByIndex(this.props.index);\n    }\n  }\n\n  onValueChange(e)\n  {\n    const value = e.target.value.trim();\n    const src = this.getInput();\n    src.value = value;\n    src.dirty = true;\n  }\n\n  onKeyDown(e)\n  {\n    //If it is an 'enter', don't put in a new line...\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.preventDefault();\n    }\n    //Delete it if there is no value in it\n    else if (e.keyCode === Config.DELETE_KEY)\n    {\n      const src = this.getInput();\n      if (src.value.length <= 0)\n      {\n        const nextIndex = this.props.index + 1;\n        //Replace this input with the next one if there is one...\n        //Also, cannot delete first input, but this will never get there :)\n        if (this.props.testList.getTests().length > nextIndex)\n        {\n          const nextInput = this.props.testList.getInputByIndex(nextIndex);\n          src.value = nextInput.value;\n          src.result = nextInput.result;\n          src.dirty = nextInput.dirty;\n\n          this.props.testList.removeInputByIndex(nextIndex);\n        }\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      const shouldTestOnly = e.shiftKey;\n\n      //Should try to add and NOT run\n      if (this.isInputFirst() && !shouldTestOnly)\n      {\n        const src = this.getInput();\n\n        //Add test input to list\n        const newTest = this.props.testList.addInput(src.value);\n        //Copy result to new test (should not be setResult)\n        newTest.result = src.result;\n        newTest.dirty = src.dirty;\n\n        //Delete already processed test\n        src.value = \"\";\n        src.result = null;\n        src.dirty = true;\n\n        //Refocus the target\n        this.ref.focus();\n      }\n      //Should try to run ONLY\n      else\n      {\n        this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n\n        //Select everything again\n        this.ref.select();\n      }\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      e.target.blur();\n    }\n  }\n\n  render()\n  {\n    const src = this.getInput();\n    const first = this.isInputFirst();\n    return <div className={\"testinginput-container \" +\n      (this.props.testList.getCurrentInputIndex() === this.props.index ? \" active\" : \"\")}>\n\n      <StatusButton active={!src.dirty} mode={src.result} onClick={this.onStatusClick}/>\n\n      <input ref={ref=>this.ref=ref} className=\"testinginput-field\"\n        value={src.value}\n        placeholder={EMPTY}\n        onChange={this.onValueChange}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        onFocus={(e)=>e.target.select()}/>\n\n      <IconButton className=\"testinginput-submit\" onClick={this.onSubmitClick}>\n        {first ? <AddIcon/> : <RemoveIcon/>}\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default TestingInput;\n","import React from 'react';\n\nclass UploadTestButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input ref={ref=>this.uploadInput=ref}\n        id=\"test-upload-input\" type=\"file\" name=\"import\"\n        style={{display: \"none\"}}\n        onChange={this.props.onChange} accept=\".txt\"/>\n      <label htmlFor=\"test-upload-input\">\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadTestButton;\n","import React from 'react';\n\nclass UploadIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"upload-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n    </svg>;\n  }\n}\n\nexport default UploadIcon;\n","import React from 'react';\n\nclass PageNewContentIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenewcontent-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewContentIcon;\n","import React from 'react';\n\nclass SaveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"save-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n    </svg>;\n  }\n}\n\nexport default SaveIcon;\n","import React from 'react';\n\nclass CloseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CloseIcon;\n","import React from 'react';\nimport '../Panel.css';\nimport './TestingPanel.css';\n\nimport Viewport from 'content/viewport/Viewport.js';\n\nimport Downloader from 'util/Downloader.js';\n\nimport TestingManager from 'modules/fsa/testing/TestingManager.js';\nimport TestingInput from './TestingInput.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport UploadTestButton from './components/UploadTestButton.js';\n\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewContentIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\nimport CloseIcon from 'icons/CloseIcon.js';\n\nconst TEST_FILENAME = \"test.txt\";\n\n//TODO: This is faster, since it's pretty easy to tell latency here. But really it shouldn't.\nconst REFRESH_TEST_TICKS = 30;\n\nclass TestingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = React.createRef();\n    this.uploadInput = React.createRef();\n\n    this.state = {\n      errorCheckMode: this.props.app.getCurrentModule().getTestingManager().getErrorCheckMode(),\n      noTestMode: true\n    };\n\n    this._savedGraphHash = 0;\n    this._ticksSinceHash = 0;\n    this.stepByStepModeChecked = false;\n\n    this.onChangeErrorCheckMode = this.onChangeErrorCheckMode.bind(this);\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onTestsRunAll = this.onTestsRunAll.bind(this);\n    this.onTestsClear = this.onTestsClear.bind(this);\n    this.onTestsSave = this.onTestsSave.bind(this);\n    this.onTestsNew = this.onTestsNew.bind(this);\n    this.onTestsUpload = this.onTestsUpload.bind(this);\n  }\n\n  componentWillMount()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n\n    //HACK: this should be in FSABuilder and listen for machine changes instead\n    this._savedGraphHash = graph.getHashCode();\n    this._ticksSinceHash = 0;\n  }\n\n  componentWillUnmount()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    this._savedGraphHash = 0;\n  }\n\n  onGraphChange(g)\n  {\n    const app = this.props.app;\n    const tester = app.getCurrentModule().getTestingManager();\n    tester.inputList.resetTests();\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      const app = this.props.app;\n      const tester = app.getCurrentModule().getTestingManager();\n      tester.inputList.importTests(files[0]);\n      document.getElementById(\"test-name\").innerHTML = files[0].name;\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  onChangeErrorCheckMode(e)\n  {\n    const value = e.target.value;\n\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const app = this.props.app;\n    const tester = app.getCurrentModule().getTestingManager();\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n    tester.setErrorCheckMode(value);\n\n    //HACK: this should automatically be updated by testing manager on set error check mode\n    if (!tester.shouldCheckError)\n    {\n      machineBuilder.machineErrorChecker.clear();\n    }\n    else\n    {\n      machineBuilder.onGraphChange(graph);\n    }\n\n    this.setState({errorCheckMode: value});\n  }\n\n  onTestsRunAll(e)\n  {\n    const machine = this.props.machineController.getMachineBuilder().getMachine();\n    const app = this.props.app;\n    const tester = app.getCurrentModule().getTestingManager();\n    if (tester.testMode.isStarted())\n    {\n      tester.setStepByStepMode(false);\n    }\n    else\n    {\n      const testList = tester.inputList;\n      const length = testList.getTests().length;\n      tester.setStepByStepMode(this.stepByStepModeChecked);\n      for(let i = 0; i < length; ++i)\n      {\n        testList.testByIndex(i, machine);\n      }\n    }\n  }\n\n  onTestsClear(e)\n  {\n    const app = this.props.app;\n    const tester = app.getCurrentModule().getTestingManager();\n    tester.inputList.clearTests();\n    this.clearTestName();\n    this.hideTestInputList();\n    this.setState({noTestMode: true});\n  }\n\n  onTestsSave(e)\n  {\n    const app = this.props.app;\n    const tester = app.getCurrentModule().getTestingManager();\n    Downloader.downloadText(TEST_FILENAME, tester.inputList.getTestsAsStrings().join(\"\\n\"));\n  }\n\n  onTestsNew(e)\n  {\n      this.onTestsClear();\n      this.showTestInputList();\n      this.clearTestName();\n      this.setState({noTestMode: false});\n  }\n\n  onTestsUpload(e)\n  {\n      this.onTestsNew();\n      this.showTestInputList();\n  }\n\n  showTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"block\";\n  }\n\n  hideTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"none\";\n  }\n\n  clearTestName() {\n      document.getElementById(\"test-name\").innerHTML = \"\";\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const viewport = app.viewport;\n    const tester = app.getCurrentModule().getTestingManager();\n    const testList = tester.inputList;\n    const machineBuilder = this.props.machineController.getMachineBuilder();\n\n    const isTestInvalid = !machineBuilder.isValidMachine();\n\n    if (--this._ticksSinceHash <= 0)\n    {\n      this._ticksSinceHash = REFRESH_TEST_TICKS;\n      const graph = this.props.graphController.getGraph();\n      const graphHash = graph.getHashCode();\n      if (this._savedGraphHash !== graphHash)\n      {\n        this.onGraphChange(graph);\n        this._savedGraphHash = graphHash;\n      }\n    }\n\n    return <div className=\"panel-container\" id=\"testing\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.testing.title\")}</h1>\n      </div>\n\n      <div className=\"test-icon-row\">\n\n          <IconButton className=\"testicon\" id=\"testing-new\" title={I18N.toString(\"action.testing.new\")}\n            onClick={this.onTestsNew}>\n            <CreateIcon/>\n          </IconButton>\n\n          {/*Import Test Button*/}\n          <UploadTestButton className=\"testicon\" id=\"testing-upload\" title={I18N.toString(\"action.testing.import\")}\n            onClick={this.onTestsUpload} onChange={this.onUploadFileChange}>\n            <UploadIcon/>\n          </UploadTestButton>\n\n          {/*Save Test Button*/}\n          <IconButton className=\"testicon\" id=\"testing-save\" title={I18N.toString(\"action.testing.save\")}\n            onClick={this.onTestsSave} disabled={tester.inputList.isEmpty()}>\n            <SaveIcon/>\n          </IconButton>\n\n          <IconButton className=\"testicon\" id=\"testing-clear\" title={I18N.toString(\"action.testing.clear\")}\n            onClick={this.onTestsClear}\n            disabled={this.state.noTestMode}>\n            <CloseIcon/>\n          </IconButton>\n\n      </div>\n\n      <div className=\"panel-content\">\n\n        <div className=\"test-inputlist-container\" id=\"test-inputlist-container\" style={{\"display\": \"none\"}}>\n\n\n          <div className=\"scrollbar-container\">\n            <h3 id=\"test-name\">Test Name</h3>\n            <div className=\"test-inputlist-content\">\n              {\n                isTestInvalid &&\n                <label className=\"test-inputlist-content-warning\">Not a valid machine!</label>\n              }\n              {\n                testList.getTests().map((e, i) =>\n                  <TestingInput key={e.id} index={i}\n                    testList={testList}\n                    machineBuilder={machineBuilder}/>)\n              }\n              {\n                /*\n                <button className=\"panel-button\" onClick={() => testList.addInput(\"\")}>\n                  {I18N.toString(\"action.testing.add\")}\n                </button>\n                */\n              }\n            </div>\n          </div>\n\n          <button className=\"panel-button\" onClick={this.onTestsRunAll}>\n            {tester.testMode.isStarted() ? I18N.toString(\"action.testing.stoprun\") : I18N.toString(\"action.testing.runall\")}\n          </button>\n\n          <div className=\"panel-checkbox\">\n            <input id=\"test-step\" type=\"checkbox\"\n              checked={this.stepByStepModeChecked}\n              onChange={(e) => {\n                this.stepByStepModeChecked = e.target.checked;\n                if(!this.stepByStepModeChecked) tester.setStepByStepMode(false);\n              }}\n              disabled={tester.testMode.isStarted()}/>\n            <label htmlFor=\"test-step\">{I18N.toString(\"options.testing.stepmode\")}</label>\n          </div>\n\n        </div>\n\n        <hr />\n\n        <div id=\"test-errorcheck\">\n          <label>{I18N.toString(\"options.checkerrors\")}</label>\n          <select className=\"panel-select\"\n            value={this.state.errorCheckMode}\n            onChange={this.onChangeErrorCheckMode}>\n            <option value={TestingManager.NO_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.none\")}</option>\n            <option value={TestingManager.DELAYED_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.delayed\")}</option>\n            <option value={TestingManager.IMMEDIATE_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.immediate\")}</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nTestingPanel.UNLOCALIZED_NAME = \"component.testing.title\";\n\nexport default TestingPanel;\n","import React from 'react';\n\nclass NFAToDFAConversionWarningMessage extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const message = this.props.message;\n        const buttonValue = e.target.value;\n\n        switch(buttonValue)\n        {\n            case \"convert\":\n                {\n                    const machineController = this.props.machineController;\n                    machineController.convertMachineTo(\"DFA\");\n                    message.close();\n                }\n            break;\n            default:\n              throw new Error(\"Unknown button value for message\");\n        }\n    }\n\n    render()\n    {\n        const machineController = this.props.machineController;\n        const machine = machineController.getMachineBuilder().getMachine();\n        const stateCount = machine.getStates().length;\n\n        return <div>\n          <p>{I18N.toString(\"message.warning.convertNFAToDFA\")}</p>\n          <p>{`${stateCount} states -> ${Math.pow(2, stateCount)} states`}</p>\n          <button value=\"convert\" onClick={this.onClick}>{I18N.toString(\"message.action.convert\")}</button>\n        </div>;\n\n    }\n}\n\nexport default NFAToDFAConversionWarningMessage;\n","import React from 'react';\nimport Config from 'config.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport NFAToDFAConversionWarningMessage from 'modules/fsa/notifications/NFAToDFAConversionWarningMessage.js';\n\nclass AnalysisPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n    this.optimizeUnreachOption = null;\n    this.optimizeRedundOption = null;\n\n    this.onConvertToDFA = this.onConvertToDFA.bind(this);\n    this.onConvertToNFA = this.onConvertToNFA.bind(this);\n\n    this.onOptimizeMachine = this.onOptimizeMachine.bind(this);\n  }\n\n  onDeleteAllUnreachable(e)\n  {\n    const machineController = this.props.machineController;\n    const unreachableArray = machineController.getMachineBuilder().machineErrorChecker.getUnreachableNodes();\n    const graphController = machineController.graphController;\n    graphController.deleteTargetNodes(unreachableArray);\n  }\n\n  onConvertToDFA(e)\n  {\n    const machineController = this.props.machineController;\n    const graphController = this.props.graphController;\n    const props = {graphController: graphController, machineController: machineController};\n    const messageTag = Config.MACHINE_CONVERSION_MESSAGE_TAG;\n\n    //machineController.convertMachineTo(\"DFA\");\n    Notifications.addMessage(I18N.toString(\"message.warning.convertNFAToDFA\"),\n      \"warning\", messageTag, NFAToDFAConversionWarningMessage, props);\n  }\n\n  onConvertToNFA(e)\n  {\n    const machineController = this.props.machineController;\n    machineController.convertMachineTo(\"NFA\");\n  }\n\n  onOptimizeMachine(e)\n  {\n    if (this.optimizeUnreachOption.checked)\n    {\n      this.onDeleteAllUnreachable(e);\n    }\n  }\n\n  canOptimize()\n  {\n    return (this.optimizeRedundOption && this.optimizeRedundOption.checked) ||\n    (this.optimizeUnreachOption && this.optimizeUnreachOption.checked);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className=\"panel-container\" id=\"analysis\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\"><h1>{I18N.toString(\"component.analysis.title\")}</h1></div>\n      <div className=\"panel-content\">\n\n        {/*Optimize*/}\n        <div style={{paddingBottom: \"0.5em\"}}>\n          <h3 style={{marginBottom: \"0\"}}>Optimizations</h3>\n          <div style={{paddingBottom: \"0.5em\"}}>\n            <div>\n              <input ref={ref=>this.optimizeUnreachOption=ref} id=\"opt-unreach\" type=\"checkbox\"/>\n              <label htmlFor=\"opt-unreach\">Unreachables</label>\n            </div>\n            <div>\n              <input ref={ref=>this.optimizeRedundOption=ref} id=\"opt-redund\" type=\"checkbox\" disabled={true}/>\n              <label htmlFor=\"opt-redund\">Redundant States</label>\n            </div>\n          </div>\n          <button className=\"panel-button\" onClick={this.onOptimizeMachine} disabled={!this.canOptimize()}>Optimize</button>\n        </div>\n\n        <hr/>\n        {\n          machineBuilder.getMachineType() == \"DFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToNFA}>\n              {I18N.toString(\"action.overview.convertnfa\")}\n            </button>\n          : machineBuilder.getMachineType() == \"NFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToDFA}>\n              {I18N.toString(\"action.overview.convertdfa\")}\n            </button>\n          : null\n        }\n\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nAnalysisPanel.UNLOCALIZED_NAME = \"component.analysis.title\";\n\nexport default AnalysisPanel;\n","import React from 'react';\n\nclass AboutPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  //Override\n  render()\n  {\n    return <div className=\"panel-container\" id=\"about\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>Finite State Automata</h1>\n      </div>\n      <div className=\"panel-content\">\n        <p>{\"Brought to you with \\u2764 by the Flap.js team.\"}</p>\n        <p>{\"<- Tap on a tab to begin!\"}</p>\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\n\nexport default AboutPanel;\n","class AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    this._module = module;\n    this._inputAdapter = inputAdapter.setController(this);\n  }\n\n  initialize(app) {}\n  destroy(app) {}\n  update(app) {}\n\n  //Override\n  onPreInputEvent(pointer) { return false; }\n  //Override\n  onInputEvent(pointer) { return false; }\n  //Override\n  onAltInputEvent(pointer) { return this.onInputEvent(pointer); }\n  //Override\n  onDblInputEvent(pointer) { return false; }\n  //Override\n  onDragStart(pointer) { return false; }\n  //Override\n  onDragMove(pointer) { return false; }\n  //Override\n  onDragStop(pointer) { return false; }\n  //Override\n  onPostInputEvent(pointer) {}\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue) { return true; }\n\n  getInputAdapter()\n  {\n    return this._inputAdapter;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractInputController;\n","import Config from 'config.js';\n\nclass GraphPicker\n{\n  constructor()\n  {\n    this.selectionBox = {\n      fromX: 0, fromY: 0,\n      toX: 0, toY: 0,\n      visible: false\n    };\n    this.targets = [];\n\n    this.target = null;\n    this.targetType = \"\";\n\n    this.initialTarget = null;\n    this.initialTargetType = \"\";\n  }\n\n  setInitialTarget(target, type)\n  {\n    this.initialTarget = target;\n    this.initialTargetType = type;\n  }\n\n  updateTarget(graph, x, y)\n  {\n    if (this.target = this.getNodeByInitialMarkerAt(graph, x, y))\n    {\n      //Clicked on initial marker\n      this.targetType = \"initial\";\n    }\n    else if (this.target = this.getEdgeByEndPointAt(graph, x, y))\n    {\n      //Clicked on endpoint\n      this.targetType = \"endpoint\";\n    }\n    else if (this.target = this.getNodeAt(graph, x, y))\n    {\n      //Clicked on node\n      this.targetType = \"node\";\n    }\n    else if (this.target = this.getEdgeAt(graph, x, y))\n    {\n      //Clicked on edge\n      this.targetType = \"edge\";\n    }\n    else\n    {\n      //Clicked on graph\n      this.target = null;\n      this.targetType = \"none\";\n    }\n\n    return this.target;\n  }\n\n  clearTarget()\n  {\n    this.target = null;\n    this.targetType = \"none\";\n  }\n\n  hasTarget()\n  {\n    return this.target != null;\n  }\n\n  getNodeAt(graph, x, y)\n  {\n    //Search graph\n    for(const node of graph.getNodes())\n    {\n      const dx = x - node.x;\n      const dy = y - node.y;\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU)\n      {\n        return node;\n      }\n    }\n    return null;\n  }\n\n  getNodeByInitialMarkerAt(graph, x, y)\n  {\n    const startNode = graph.getStartNode();\n    if (!startNode) return null;\n\n    const dx = x - (startNode.x + Config.INITIAL_MARKER_OFFSET_X);\n    const dy = y - startNode.y;\n    if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n    {\n      return startNode;\n    }\n\n    return null;\n  }\n\n  getEdgeAt(graph, x, y)\n  {\n    const center = {x: 0, y: 0};\n\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getCenterPoint(center);\n      const dx = x - center.x;\n      const dy = y - center.y;\n      if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getEdgeByEndPointAt(graph, x, y)\n  {\n    const end = {x: 0, y: 0};\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getEndPoint(end);\n      const dx = x - end.x;\n      const dy = y - end.y;\n      if (dx * dx + dy * dy < Config.ENDPOINT_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getSelectionBox()\n  {\n    return this.selectionBox;\n  }\n\n  getSelection(graph, forceUpdate=false)\n  {\n    if (forceUpdate)\n    {\n      const box = this.selectionBox;\n      const mx = Math.max(box.toX, box.fromX);\n      const my = Math.max(box.toY, box.fromY);\n      const lx = Math.min(box.toX, box.fromX);\n      const ly = Math.min(box.toY, box.fromY);\n      this.clearSelection();\n      getNodesWithin(graph, lx, ly, mx, my, this.targets);\n    }\n\n    return this.targets;\n  }\n\n  hasSelection()\n  {\n    return this.targets.length > 0;\n  }\n\n  clearSelection()\n  {\n    this.targets.length = 0;\n  }\n\n  isTargetInSelection(target)\n  {\n    return this.targets.includes(target || this.target);\n  }\n\n  isTarget(target)\n  {\n    return this.target == target;\n  }\n\n  beginSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.fromX = box.toX = x;\n    box.fromY = box.toY = y;\n    this.clearSelection();\n\n    box.visible = true;\n  }\n\n  updateSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n  }\n\n  endSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n\n    box.visible = false;\n  }\n\n  isSelecting()\n  {\n    return this.selectionBox.visible;\n  }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n  const fromX = Math.min(x1, x2);\n  const fromY = Math.min(y1, y2);\n  const toX = Math.max(x1, x2);\n  const toY = Math.max(y1, y2);\n\n  for(const node of graph.getNodes())\n  {\n    if (node.x >= fromX && node.x < toX &&\n        node.y >= fromY && node.y < toY)\n    {\n      dst.push(node);\n    }\n  }\n  return dst;\n}\n\nexport default GraphPicker;\n","class GraphElement\n{\n  constructor(id)\n  {\n    this._id = id;\n  }\n\n  setGraphElementID(graphElementID)\n  {\n    this._id = graphElementID;\n    return this;\n  }\n\n  //A unique identifier for this graph element\n  getGraphElementID()\n  {\n    return this._id;\n  }\n\n  //Calls getHashString() to generate an integer hash generally unqiue to the instance.\n  //Should only be used to distinguish between other objects with the same\n  //hash function. In other words, every instance should only be compared to\n  //other instances of the same class.\n  //usePosition can be used to tell the hash function whether or not to consider\n  //aesthetic, or position, attributes of the element.\n  getHashString(usePosition=true)\n  {\n    return this._id;\n  }\n}\nexport default GraphElement;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphNode extends GraphElement\n{\n  constructor(id, x, y)\n  {\n    super(id);\n\n    this.x = x;\n    this.y = y;\n\n    this._label = \"\";\n  }\n\n  setNodeLabel(label)\n  {\n    this._label = label;\n    return this;\n  }\n\n  getNodeLabel()\n  {\n    return this._label;\n  }\n\n  getNodeSize()\n  {\n    return 10;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + Math.floor(this.x) + \",\" + Math.floor(this.y) + \".\" + this._label;\n    }\n    else\n    {\n      return super.getHashString(usePosition) + \":\" + this._label;\n    }\n  }\n}\n\nexport default GraphNode;\n","import GraphNode from 'graph/GraphNode.js';\nimport Config from 'config.js';\n\nclass FSANode extends GraphNode\n{\n  constructor(id, x, y)\n  {\n    super(id, x, y);\n\n    this._accept = false;\n\n    //this is not saved to hash since it is an aesthetic option\n    this._custom = false;\n  }\n\n  setNodeAccept(value)\n  {\n    this._accept = value;\n  }\n\n  getNodeAccept()\n  {\n    return this._accept;\n  }\n\n  setNodeCustom(value)\n  {\n    this._custom = value;\n  }\n\n  getNodeCustom()\n  {\n    return this._custom;\n  }\n\n  //Override\n  getNodeSize()\n  {\n    return Config.NODE_RADIUS;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    return super.getHashString(usePosition) + \":\" + (this._accept ? \"1\" : \"0\");\n  }\n}\n\nexport default FSANode;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphEdge extends GraphElement\n{\n  constructor(id, from, to=null)\n  {\n    super(id);\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = from;\n    this._to = to;\n\n    this._label = \"\";\n  }\n\n  setSourceNode(node)\n  {\n    if (!node) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = node;\n    return this;\n  }\n\n  getSourceNode()\n  {\n    return this._from;\n  }\n\n  setDestinationNode(node)\n  {\n    this._to = node;\n    return this;\n  }\n\n  changeDestinationNode(node)\n  {\n    this._to = node;\n  }\n\n  getDestinationNode()\n  {\n    return this._to;\n  }\n\n  setEdgeLabel(label)\n  {\n    this._label = label;\n  }\n\n  getEdgeLabel()\n  {\n    return this._label;\n  }\n\n  getEdgeDirection()\n  {\n    const from = this._from;\n    const to = this._to;\n    const HALFPI = Math.PI / 2;\n    let result = 0;\n\n    if (this.isPlaceholder())\n    {\n      result = Math.PI / 4;\n    }\n    else\n    {\n      const dy = to.y - from.y;\n      const dx = to.x - from.x;\n      result = Math.atan2(dy, dx);\n    }\n\n    if (result > HALFPI || result < -HALFPI)\n    {\n      result += Math.PI;\n    }\n\n    return result;\n  }\n\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    dst.x = from.x;\n    dst.y = from.y;\n    return dst;\n  }\n\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n    if (this.isPlaceholder())\n    {\n      const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n      dst.x = from.x + halfPlaceholderLength;\n      dst.y = from.y + halfPlaceholderLength;\n    }\n    else\n    {\n      dst.x = from.x + (to.x - from.x) / 2;\n      dst.y = from.y + (to.y - from.y) / 2;\n    }\n    return dst;\n  }\n\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    if (this.isPlaceholder())\n    {\n      const from = this._from;\n      const placeholderLength = getPlaceholderLength();\n      dst.x = from.x + placeholderLength;\n      dst.y = from.y + placeholderLength;\n    }\n    else\n    {\n      const to = this._to;\n      dst.x = to.x;\n      dst.y = to.y;\n    }\n    return dst;\n  }\n\n  getPlaceholderLength()\n  {\n    return this._from.getNodeSize();\n  }\n\n  isPlaceholder()\n  {\n    return !this._to;\n  }\n\n  isSelfLoop()\n  {\n    return this._from === this._to;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    const src = this._from ? this._from.getHashString(usePosition) : \"\";\n    //HACK: to may be a pointer, which is not a node, so getHashString does not exist.\n    const dst = this._to ? this._to.getHashString ? this._to.getHashString(usePosition) : \"0\" : \"\";\n    return super.getHashString(usePosition) + \":\" + src + \",\" + dst + \".\" + this._label;\n  }\n}\n\nexport default GraphEdge;\n","import GraphEdge from 'graph/GraphEdge.js';\n\nclass GraphCurvedEdge extends GraphEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, null);\n\n    //radians = the angle in radians, where 0 is the normal of midpoint\n    //length = the distance from midpoint\n    this._quad = {\n      radians: 0,\n      length: 0,\n      _coords: {x: 0, y: 0}\n    };\n\n    //Make sure to format it correctly when creating...\n    this.changeDestinationNode(to);\n  }\n\n  setQuadratic(radians, length=undefined)\n  {\n    this._quad.radians = radians;\n    if (typeof length === 'number')\n    {\n      this._quad.length = length;\n    }\n    return this;\n  }\n\n  getQuadratic()\n  {\n    return this._quad;\n  }\n\n  isQuadratic()\n  {\n    return !this.isPlaceholder() && this._quad.length != 0;\n  }\n\n  setQuadraticByCoords(x, y)\n  {\n    const from = this._from;\n    const to = this._to;\n    const fromx = from.x;\n    const fromy = from.y;\n    const tox = to.x;\n    const toy = to.y;\n\n    let dx = tox - fromx;\n    let dy = toy - fromy;\n    const midpointx = fromx + dx / 2;\n    const midpointy = fromy + dy / 2;\n\n    //Remember: y-axis is flipped because canvas coord-space is -y => +y\n    //Therefore, dy needs to be flipped\n    const angleOffset = Math.atan2(-dy, dx);\n    dx = x - midpointx;\n    dy = y - midpointy;\n\n    const PI = Math.PI;\n    const PI2 = PI * 2;\n    const HALFPI = PI / 2;\n    //0 rad = to the right\n    //Also: angleOffset is the offset from midpoint angle, the orthogonal base vector\n    //This is because the from and to could be flipped, and\n    //therefore give a negative, or at least a reversed angle.\n    let radians = Math.atan2(dy, dx) + angleOffset;\n    let length = Math.sqrt(dx * dx + dy * dy);\n    if (length < 0) length = 0;\n\n    const outrad = radians - (-HALFPI);//-PI / 2 is outward\n    const inrad = radians - (HALFPI);//PI / 2 is inward\n    //TODO: Should be dependent on length\n    const maxdr = PI / 20;\n\n    if (Math.abs(length) < 8)\n    {\n      radians = 0;\n      length = 0;\n    }\n    else if (outrad < maxdr && outrad > -maxdr)\n    {\n      radians = -HALFPI;//-PI / 2 is outward\n    }\n    else if (-inrad < maxdr && -inrad > -maxdr)\n    {\n      radians = HALFPI;//PI / 2 is inward\n    }\n\n    this._quad.radians = radians;\n    this._quad.length = length;\n  }\n\n  getQuadraticAsCoords()\n  {\n    const from = this._from;\n    const to = this._to;\n    const dst = this._quad._coords;\n    if (from == null || to == null)\n    {\n      dst.x = 0;\n      dst.y = 0;\n    }\n    else\n    {\n      /*\n      //To mark dirty...\n      _capture: {\n        fx: 0, fy: 0,\n        tx: 0, ty: 0,\n        ql: 0, qr: 0\n      }\n      */\n      getDirectionalVector(from.x, from.y, to.x, to.y, this._quad.length, this._quad.radians, dst);\n    }\n    return dst;\n  }\n\n  getSelfLoopHeight()\n  {\n    return this._from.getNodeSize();\n  }\n\n  formatAsSelfLoop()\n  {\n    this.setQuadratic(-Math.PI / 2, this._from.getNodeSize() + this.getSelfLoopHeight());\n  }\n\n  formatAsPlaceholder(prevDest)\n  {\n    //Quad is re-used to determine edge angle for placeholder\n    //This can be used specifically for quad since regular quad is\n    //dependent on this._to != null, which placeholder assumes this._to == null.\n    //Also, quad.length is ignored, because the length should always be\n    //getPlaceholderLength(). This is resolved by getStartPoint(), etc.\n    if (prevDest)\n    {\n      const dx = this._from.x - prevDest.x;\n      const dy = this._from.y - prevDest.y;\n      const angle = -Math.atan2(dx, dy) - (Math.PI / 2);\n      this._quad.radians = angle;\n    }\n    else\n    {\n      this._quad.radians = 0;\n    }\n  }\n\n  //Override\n  changeDestinationNode(node)\n  {\n    const prevDest = this._to;\n\n    //Just to optimize this a little :)\n    if (prevDest === node) return;\n\n    super.changeDestinationNode(node);\n\n    if (this.isPlaceholder())\n    {\n      this.formatAsPlaceholder(prevDest);\n    }\n    else if (this.isSelfLoop())\n    {\n      this.formatAsSelfLoop();\n    }\n  }\n\n  //Override\n  getEdgeDirection()\n  {\n    let result = 0;\n    if (this.isQuadratic())\n    {\n      const coords = this.getQuadraticAsCoords();\n      result = Math.atan2(coords.y, coords.x) + Math.PI / 2;\n    }\n    else\n    {\n      result = super.getEdgeDirection();\n    }\n\n    return result;\n  }\n\n  //Override\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const nodeSize = from.getNodeSize();\n      dst.x = from.x + px * nodeSize;\n      dst.y = from.y + py * nodeSize;\n      return dst;\n    }\n\n    //Check if edge is following something other than a node...then remain flat\n    if (!to.getNodeSize || !this.isQuadratic())\n    {\n      getDirectionalVector(from.x, from.y, to.x, to.y, from.getNodeSize(), 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(from.x, from.y, qx, qy, from.getNodeSize(), this.isSelfLoop() ? (Math.PI / 4) : 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quadCoords for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength();\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    //Get end point for non-nodes...\n    if (!to.getNodeSize)\n    {\n      return to;\n    }\n    //Get end point for straight edges...\n    else if (!this.isQuadratic())\n    {\n      getDirectionalVector(to.x, to.y, from.x, from.y, to.getNodeSize(), 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n    //Get end point for quadratics...\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(to.x, to.y, qx, qy, to.getNodeSize(), this.isSelfLoop() ? -(Math.PI / 4.0) : 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength() / 2;\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    getMidPoint(from.x, from.y, to.x, to.y, dst);\n\n    if (this.isQuadratic())\n    {\n      const qcoords = this.getQuadraticAsCoords();\n      dst.x += qcoords.x;\n      dst.y += qcoords.y;\n    }\n\n    return dst;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + this._quad.radians + \",\" + this._quad.length;\n    }\n    else\n    {\n      return super.getHashString(usePosition);\n    }\n  }\n}\n\nfunction getDirectionalVector(x1, y1, x2, y2, dist, angleOffset=0, dst={x: 0, y: 0})\n{\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const angle = Math.atan2(dy, dx) + angleOffset;\n  dst.x = Math.cos(angle) * dist;\n  dst.y = Math.sin(angle) * dist;\n  return dst;\n}\n\nfunction getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n  dst.x = x1 + (x2 - x1) / 2;\n  dst.y = y1 + (y2 - y1) / 2;\n  return dst;\n}\n\nexport default GraphCurvedEdge;\n","import QuadraticEdge from 'graph/QuadraticEdge.js';\n\nexport const SYMBOL_SEPARATOR = ' ';\nexport const EMPTY_CHAR = '\\u03B5';\n\nclass FSAEdge extends QuadraticEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, to);\n  }\n\n  //Override\n  setEdgeLabel(label)\n  {\n    if (typeof label === 'string')\n    {\n      super.setEdgeLabel(label);\n    }\n    else\n    {\n      super.setEdgeLabel(EMPTY_CHAR);\n    }\n  }\n\n  getEdgeSymbolsFromLabel()\n  {\n    return this.getEdgeLabel().split(SYMBOL_SEPARATOR);\n  }\n}\n\nexport default FSAEdge;\n","import AbstractInputController from 'modules/base/AbstractInputController.js';\nimport Config from 'config.js';\n\nimport GraphPicker from './GraphPicker.js';\nimport Node from 'modules/fsa/graph/FSANode.js';\nimport Edge from 'modules/fsa/graph/FSAEdge.js';\n\nclass InputController extends AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    super(module, inputAdapter);\n\n    this._picker = new GraphPicker();\n\n    this._graphController = null;\n\n    //Used to check if target needs to be updated for the hover effect\n    this.prevPointerX = 0;\n    this.prevPointerY = 0;\n\n    //Make sure this is always false when moving endpoints\n    this.isNewEdge = false;\n\n    //Used to change render to follow pointer when moving initial marker\n    this.ghostInitialMarker = null;\n\n    //Whether to destroy pointless edges\n    this.shouldDestroyPointlessEdges = Config.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE;\n\n    //Swap left to right clicks and vice versa on anything else but Macs\n    this._swapMouseScheme = true;//!navigator.platform.startsWith(\"Mac\");\n\n    //Used to determine whether the target should be destroyed because of trash mode\n    this._trashMode = false;\n  }\n\n  //Override\n  initialize(app)\n  {\n    super.initialize(app);\n\n    this._graphController = app.getGraphController();\n  }\n\n  //Override\n  destroy(app)\n  {\n    super.destroy(app);\n  }\n\n  //Override\n  update(app)\n  {\n    const graph = this._graphController.getGraph();\n    const picker = this._picker;\n    const x = this._inputAdapter.getPointerX();\n    const y = this._inputAdapter.getPointerY();\n\n    if (x != this.prevPointerX || y != this.prevPointerY)\n    {\n      this.prevPointerX = x;\n      this.prevPointerY = y;\n\n      //Update target\n      picker.updateTarget(graph, x, y);\n\n      //HACK: to make the cursor look like a pointer when targeting\n      if (picker.hasTarget())\n      {\n        document.body.style.cursor = \"pointer\";\n      }\n      else\n      {\n        document.body.style.cursor = \"auto\";\n      }\n    }\n  }\n\n  //Override\n  onPreInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n    picker.setInitialTarget(picker.target, picker.targetType);\n\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n    \n    if (picker.hasSelection())\n    {\n      //Unselect everything is clicked on something other than nodes...\n      if (targetType != \"node\" || !picker.isTargetInSelection(target))\n      {\n        picker.clearSelection();\n      }\n    }\n\n    //Disable all graph input when in step-by-step mode\n    if (graphController.tester.getStepByStepMode())\n    {\n      //Consume event!\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const x = pointer.x;\n    const y = pointer.y;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in trash mode... capture all events!\n    if (inputController.isTrashMode())\n    {\n      //Click to delete node\n      if (targetType === 'node')\n      {\n        //So that the emitted 'delete' events can use this\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n\n        //If there exists selected states, delete them all!\n        if (picker.hasSelection())\n        {\n          //Delete all selected nodes\n          graphController.deleteSelectedNodes(target);\n        }\n        else\n        {\n          //Delete a single node\n          graphController.deleteTargetNode(target);\n        }\n\n        return true;\n      }\n      else if (targetType === 'edge' || targetType === 'endpoint')\n      {\n        //Delete a single edge\n        graphController.deleteTargetEdge(target);\n        return true;\n      }\n\n      //Clicked on something you cannot delete\n      //return true;\n      return false;\n    }\n\n    //If not in Trash Mode, then events should pass through to here...\n    //Otherwise, ALL events are captured to prevent ALL default behavior.\n\n    //Makes sure that user cannot toggle state while in trash mode\n    if (targetType === 'node')\n    {\n      graphController.toggleNode(target);\n      return true;\n    }\n    //Edit label for selected edge\n    else if (targetType === 'edge')\n    {\n      graphController.openLabelEditor(target, x, y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onAltInputEvent(pointer)\n  {\n    return this.onInputEvent(pointer);\n  }\n\n  //Override\n  onDblInputEvent(pointer)\n  {\n    const graphController = this._graphController;\n    const x = pointer.x;\n    const y = pointer.y;\n\n    if (!this.isTrashMode())\n    {\n      //Create state at position\n      graphController.createNode(x, y);\n      return true;\n    }\n    else\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Make sure it is not in trash mode\n      if (inputController.isTrashMode())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        graphController.emit(\"tryCreateWhileTrash\");\n        return false;\n      }\n\n      //Make sure it is not in new edge mode\n      inputController.isNewEdge = false;\n\n      //Makes sure that placeholders are not quadratics!\n      if (targetType === 'edge' && target.isPlaceholder())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        //Ignore drag event...\n        return false;\n      }\n      //Moving node (and selected nodes)\n      else if (targetType === 'node')\n      {\n        //target MUST be an instance of Node...\n        if (!(target instanceof Node))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Node.\");\n\n        //Ready to move node(s)...\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n        return true;\n      }\n      //Moving edge center point\n      else if (targetType === 'edge')\n      {\n        //target MUST be an instance of Edge...\n        if (!(target instanceof Edge))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n        //Makes sure that placeholders are not quadratics!\n        if (target.isPlaceholder())\n        {\n          //inputController.setMoveMode(false, true);//Set to false\n          return false;\n        }\n\n        //Save previous quadratics\n        const targetQuad = target.getQuadratic();\n        graphController.prevQuad.radians = targetQuad.radians;\n        graphController.prevQuad.length = targetQuad.length;\n\n        //Ready to move the edge vertex to pointer...\n        return true;\n      }\n      //Moving initial marker\n      else if (targetType === 'initial')\n      {\n        inputController.ghostInitialMarker = pointer;\n\n        //Ready to move the initial marker to another state...\n        return true;\n      }\n      //Moving nothing\n      else if (targetType === 'none')\n      {\n        //Reuse nodal prev pos for graph prev pos\n        graphController.prevX = x;\n        graphController.prevY = y;\n\n        //Ready to move the graph to pointer...\n        return true;\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If input dragged a node...\n      if (targetType === 'node')\n      {\n        if (!inputController.isTrashMode())\n        {\n          const edge = graph.createEdge(target, pointer);\n          edge.setEdgeLabel(Config.STR_TRANSITION_DEFAULT_LABEL);\n\n          //Redirect pointer to refer to the edge as the new target\n          picker.setInitialTarget(edge, \"endpoint\");\n          inputController.isNewEdge = true;\n\n          //Reset previous quad values for new proxy edge\n          const edgeQuad = edge.getQuadratic();\n          graphController.prevQuad.radians = edgeQuad.radians;\n          graphController.prevQuad.length = edgeQuad.length;\n\n          //Ready to move proxy edge to pointer...\n          //inputController.setMoveMode(true, true);\n          return true;\n        }\n        else\n        {\n          graphController.emit(\"tryCreateWhileTrash\");\n          return false;\n        }\n      }\n      else if (targetType == 'edge')\n      {\n        //Do nothing.\n        return false;\n      }\n      //If input dragged nothing...\n      else if (targetType === 'none')\n      {\n        //Begin selection box...\n        picker.beginSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    //In either moving or not... moving endpoints\n    if (targetType === 'endpoint')\n    {\n      //target MUST be an instance of Edge...\n      if (!(target instanceof Edge))\n        throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n      const targetQuad = target.getQuadratic();\n      graphController.prevQuad.radians = targetQuad.radians;\n      graphController.prevQuad.length = targetQuad.length;\n\n      graphController.prevEdgeTo = target.getDestinationNode();\n      inputController.isNewEdge = inputController.isMoveMode() ? false : true;\n\n      //Ready to move the edge endpoint to pointer...\n      return true;\n    }\n\n    //All input should be handled\n    //throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n\n    return false;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Continue to move node(s)\n      if (targetType === 'node')\n      {\n        if (picker.hasSelection())\n        {\n          graphController.moveMultipleNodesTo(pointer, picker.getSelection(graph), x, y);\n        }\n        else\n        {\n          graphController.moveNodeTo(pointer, target, x, y);\n        }\n        return true;\n      }\n      //Continue to move edge vertex\n      else if (targetType === 'edge')\n      {\n        graphController.moveEdgeTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move edge endpoint\n      else if (targetType === 'endpoint')\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move initial\n      else if (targetType === 'initial')\n      {\n        //Move initial marker to node or pointer\n        const dst = picker.getNodeAt(graph, x, y) || pointer;\n        inputController.ghostInitialMarker = dst;\n        return true;\n      }\n      //Continue to move graph\n      else if (targetType === 'none')\n      {\n        //Move graph\n        const dx = x - graphController.prevX;\n        const dy = y - graphController.prevY;\n        inputController.getInputAdapter().getViewport().addOffset(dx, dy, true);\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      if (inputController.isNewEdge)\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n\n      //If the selection box is active...\n      if (picker.isSelecting())\n      {\n        //Update the selection box\n        picker.updateSelection(graph, x, y);\n        return true;\n      }\n\n      //Otherwise, don't do anything. Cause even input drags will become move drags.\n    }\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode() || inputController.isNewEdge)\n    {\n      //If stopped dragging a node...\n      if (targetType === 'node')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          //If there exists selected states, delete them all!\n          if (picker.hasSelection())\n          {\n            graphController.deleteSelectedNodes(target);\n          }\n          else\n          {\n            //Delete a single node\n            graphController.deleteTargetNode(target);\n          }\n\n          return true;\n        }\n        //If dragged to an empty space (not trash)\n        else\n        {\n          //Do nothing, since should have moved to position\n          if (picker.hasSelection())\n          {\n            const dx = x - graphController.prevX;\n            const dy = y - graphController.prevY;\n            graphController.emit(\"nodeMoveAll\", graph, picker.getSelection(graph), dx, dy);\n          }\n          else\n          {\n            graphController.emit(\"nodeMove\", graph, target, x, y, graphController.prevX, graphController.prevY);\n          }\n          return true;\n        }\n      }\n      //If stopped dragging a edge...\n      else if (targetType === 'edge')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n        }\n        else\n        {\n          //Do nothing, since should have moved to position\n          graphController.emit(\"edgeMove\", graph, target, target.getQuadratic(), graphController.prevQuad);\n        }\n        return true;\n      }\n      //If stopped dragging a endpoint...\n      else if (inputController.isNewEdge || targetType === 'endpoint')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n          return true;\n        }\n        //If hovering over a node...\n        else if (target.getDestinationNode() instanceof Node)\n        {\n          const result = graph.formatEdge(target);\n\n          //If a different edge is the result of the target...\n          if (result !== target)\n          {\n            //Allow the user to edit the merged labels\n            graphController.openLabelEditor(result, x, y, result.getEdgeLabel(), false);\n\n            //Delete the merged label\n            graph.deleteEdge(target);\n            return true;\n          }\n          //Open label editor if a new edge...\n          else\n          {\n            if (inputController.isNewEdge)\n            {\n              graphController.openLabelEditor(target, x, y, null, true, () => {\n                graphController.emit(\"userPostCreateEdge\", graph, target);\n              });\n            }\n            else\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n          }\n\n          if (inputController.isNewEdge)\n          {\n            //Must be after openLabelEditor() to allow the function to check it...\n            inputController.isNewEdge = false;\n\n            //Emit event\n            graphController.emit(\"userCreateEdge\", graph, target);\n          }\n          else if (graphController.prevEdgeTo !== null)\n          {\n            //Emit event\n            graphController.emit(\"edgeDestination\", graph, target, target.getDestinationNode(), graphController.prevEdgeTo, graphController.prevQuad);\n          }\n\n          return true;\n        }\n        //If hovering over anything else...\n        else\n        {\n          //Destroy any edge that no longer have a destination\n          if (inputController.shouldDestroyPointlessEdges)\n          {\n            if (!inputController.isNewEdge)\n            {\n              graphController.deleteTargetEdge(target);\n            }\n            else\n            {\n              graph.deleteEdge(target);\n            }\n            return true;\n          }\n          //Keep edges as placeholders (used in DFA's)\n          else\n          {\n            target.changeDestinationNode(null);\n\n            //Open label editor if default edge...\n            if (target.getEdgeLabel().length <= 0)\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n            return true;\n          }\n        }\n      }\n      else if (targetType === 'initial')\n      {\n        //If valid initial object to mark...\n        if (inputController.ghostInitialMarker instanceof Node)\n        {\n          const prevInitial = graph.getStartNode();\n\n          //Set the new object as the initial node\n          graph.setStartNode(inputController.ghostInitialMarker);\n\n          //Emit event\n          graphController.emit(\"nodeInitial\", graph, inputController.ghostInitialMarker, prevInitial);\n        }\n\n        //Reset ghost initial marker\n        inputController.ghostInitialMarker = null;\n        return true;\n      }\n      else if (targetType === 'none')\n      {\n        //Do nothing. It should already be moved.\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If was trying to select...\n      if (picker.isSelecting())\n      {\n        //Stop selecting stuff, fool.\n        picker.endSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  //Override\n  onPostInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n\n    picker.clearTarget();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n  }\n\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return true;\n  }\n\n  setTrashMode(enabled)\n  {\n    this._trashMode = enabled;\n  }\n\n  isTrashMode()\n  {\n    return this._trashMode;\n  }\n\n  setInputScheme(shouldInputFirst)\n  {\n    this._swapMouseScheme = !shouldInputFirst;\n  }\n\n  getInputScheme()\n  {\n    return this._swapMouseScheme;\n  }\n\n  isMoveMode()\n  {\n    const result = this._inputAdapter.isAltInput();\n    return this._swapMouseScheme ? !result : result;\n  }\n\n  isDragging()\n  {\n    return this._inputAdapter.isDragging();\n  }\n\n  isActionMode(graphController)\n  {\n    return this._inputAdapter.isPointerActive() ?\n      //Is considered an input when NOT moving or when creating a new edge...\n      graphController.isNewEdge || !this.isMoveMode() :\n      //If not active, just show default input...\n      !this._swapMouseScheme;\n  }\n\n  getPicker()\n  {\n    return this._picker;\n  }\n}\n\nexport default InputController;\n","class AbstractGraphController\n{\n  constructor(module, graph)\n  {\n    this._module = module;\n    this._graph = graph;\n\n    //throw new Error(\"Missing implementation for graph controller \\'\" + this.getModule().getModuleName() + \"\\'\");\n  }\n\n  initialize(app) {}\n  destroy(app) {}\n  update(app) {}\n\n  getGraph()\n  {\n    return this._graph;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractGraphController;\n","const ALLOW_AUTOMATIC_REGISTER = false;\n\nconst Eventable = {\n  __eventListeners: null,\n  mixin(targetClass)\n  {\n    const targetPrototype = targetClass.prototype;\n    Object.assign(targetPrototype, Eventable);\n    delete targetPrototype.mixin;\n  },\n\n  registerEvent(eventName)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    if (!this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.set(eventName, []);\n    }\n    else\n    {\n      throw new Error(\"Already registered event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  unregisterEvent(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.delete(eventName);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  addEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    let listeners;\n    if (this.__eventListeners.has(eventName))\n    {\n      listeners = this.__eventListeners.get(eventName);\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n\n    listeners.push(listener);\n  },\n\n  removeEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      let flag = false;\n      let i = listeners.length;\n      while(i--)\n      {\n        if (listeners[i] === listener)\n        {\n          listeners.splice(i, 1);\n          flag = true;\n        }\n      }\n\n      if (!flag)\n      {\n        throw new Error(\"Unable to find listener for event \\'\" + eventName + \"\\'\");\n      }\n    }\n    else\n    {\n      throw new Error(\"Unknown event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  clearEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      listeners.length = 0;\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  countEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return 0;\n    return this.__eventListeners.has(eventName) ? this.__eventListeners.get(eventName).length : 0;\n  },\n\n  getEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return null;\n    return this.__eventListeners.get(eventName);\n  },\n\n  on(eventName, listener)\n  {\n    this.addEventListener(eventName, listener);\n  },\n\n  once(eventName, listener)\n  {\n    const f = (...args) => {\n      try\n      {\n        listener.apply(null, args);\n      }\n      finally\n      {\n        this.removeEventListener(eventName, f);\n      }\n    };\n\n    this.addEventListener(eventName, f);\n  },\n\n  emit(eventName, ...args)\n  {\n    try\n    {\n      if (!this.__eventListeners) return;\n\n      let listeners;\n      if (!this.__eventListeners.has(eventName))\n      {\n        if (ALLOW_AUTOMATIC_REGISTER)\n        {\n          listeners = [];\n          this.__eventListeners.set(eventName, listeners);\n        }\n        else\n        {\n          throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n        }\n      }\n      else\n      {\n        listeners = this.__eventListeners.get(eventName);\n\n        let result = null;\n        let i = listeners.length;\n        while(i--)\n        {\n          try\n          {\n            result = listeners[i].apply(null, args);\n          }\n          catch(e)\n          {\n            console.error(e);\n          }\n\n          if (result === true) break;\n        }\n      }\n    }\n    finally\n    {\n      this.onEventProcessed(eventName, ...args);\n    }\n  },\n\n  onEventProcessed(eventName, ...args)\n  {\n    //Do nothing.\n  }\n};\n\nexport default Eventable;\n","\nfunction getReachableState(graph)\n{\n  let reachable = [];\n  let startNode = graph.getStartNode();\n  reachable.push(startNode);\n  for(let i = 0; i < reachable.length; i++)\n  {\n    for (const edge of graph.getEdges())\n    {\n      if(edge.from == reachable[i])\n      {\n        if(!reachable.includes(edge.to))\n        {\n          reachable.push(edge.to);\n        }\n      }\n    }\n  }\n  return reachable;\n}\n\nclass GraphLayout\n{\n  static applyLayout(graph, type=\"circle\")\n  {\n    if (type != \"circle\") throw new Error(\"Invalid layout type\");\n    //seperate node to reachable and unreachable\n    const reachableNode= getReachableState(graph);\n    function unreachable(node)\n    {\n      return !reachableNode.includes(node)\n    }\n    const unreachableNode = graph.getNodes().filter(unreachable)\n\n    //get num of nodes\n    const numOfReachable = reachableNode.length;\n    const numOfUnreachable = unreachableNode.length;\n    const numOfNode = graph.getNodes().length;\n    const maxNum = Math.max(numOfReachable, numOfUnreachable)\n    if(numOfNode == 0)\n    {\n      return;\n    }\n    //set radius\n    var radius;\n    if(numOfReachable < 10 && numOfUnreachable < 10){\n      radius = maxNum/4 * 50 + 10;\n    }\n    else{\n      radius = (maxNum/5) * 40 + 10;\n    }\n    /*var radius;\n    if(numOfNode < 10){\n      radius = numOfNode/4 * 50 + 10;\n    }\n    else{\n      radius = (numOfNode/5) * 40 + 10;\n    }*/\n\n    //set degree\n    const degree_re = 2* Math.PI/numOfReachable;\n    const degree_un = 2* Math.PI/numOfUnreachable;\n\n    let currentStep = 0\n    for(const node of reachableNode)\n    {\n      node.y = Math.sin(degree_re*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree_re*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }\n    currentStep = 0\n    for(const node of unreachableNode)\n    {\n      node.y = Math.sin(degree_un*currentStep + Math.PI)*(radius + 100);\n      node.x = Math.cos(degree_un*currentStep + Math.PI)*(radius + 100);\n      currentStep += 1\n    }\n    /*for(const node of graph.getNodes())\n    {\n      node.y = Math.sin(degree*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }*/\n  }\n\n\n}\n\nexport default GraphLayout;\n","import GraphNode from './GraphNode.js';\nimport GraphEdge from './GraphEdge.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\nclass NodalGraph\n{\n  constructor()\n  {\n    this._nodes = [];\n    this._edges = [];\n    this._nodeMapping = new Map();\n    this._edgeMapping = new Map();\n  }\n\n  /** NODES **/\n\n  createNode(x=0, y=0, id=null)\n  {\n    const result = new GraphNode(id || guid(), x, y);\n    const i = this._nodes.length;\n    this._nodes.push(result);\n    this._nodeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteNode(node)\n  {\n    const elementID = node.getGraphElementID();\n    const i = this._nodeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._nodes.splice(i, 1);\n      this._nodeMapping.delete(elementID);\n\n      //HACK: This is inefficient, you should convert everything to use only\n      //the map so the indicies would not need to be fixed in the array.\n      //Basically, get rid of this._nodes (you will have to change how setStartNode works)\n      for(let j = i, len = this._nodes.length; j < len; ++j)\n      {\n        this._nodeMapping.set(this._nodes[j].getGraphElementID(), j);\n      }\n\n      const nullSourceEdges = [];\n\n      //Remove connected edges\n      for(const edge of this._edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          nullSourceEdges.push(edge);\n        }\n        else if (edge.getDestinationNode() === node)\n        {\n          edge.changeDestinationNode(null);\n        }\n      }\n      for(const edge of nullSourceEdges)\n      {\n        this.deleteEdge(edge);\n      }\n    }\n  }\n  addNode(node)\n  {\n    if (!node.getGraphElementID()) node.setGraphElementID(guid());\n\n    const i = this._nodes.length;\n    this._nodes.push(node);\n    this._nodeMapping.set(node.getGraphElementID(), i);\n    return node;\n  }\n  clearNodes() { this._nodes.length = 0; this._nodeMapping.clear(); }\n  getNodeByElementID(elementID)\n  {\n    const index = this._nodeMapping.get(elementID);\n    return index >= 0 ? this._nodes[index] : null;\n  }\n  getNodesByLabel(label, dst=[])\n  {\n    for(const node of this._nodes)\n    {\n      if (node.getNodeLabel() == label) dst.push(node);\n    }\n    return dst;\n  }\n  getNodes() { return this._nodes; }\n  getNodeCount() { return this._nodes.length; }\n\n  /** EDGES **/\n\n  createEdge(from, to=null, id=null)\n  {\n    const result = new GraphEdge(id || guid(), from, to);\n    const i = this._edges.length;\n    this._edges.push(result);\n    this._edgeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteEdge(edge)\n  {\n    const elementID = edge.getGraphElementID();\n    const i = this._edgeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._edges.splice(i, 1);\n      this._edgeMapping.delete(elementID);\n\n      //HACK: This is inefficient, refer to deleteNode().\n      for(let j = i, len = this._edges.length; j < len; ++j)\n      {\n        this._edgeMapping.set(this._edges[j].getGraphElementID(), j);\n      }\n    }\n  }\n  addEdge(edge)\n  {\n    if (!edge.getGraphElementID()) edge.setGraphElementID(guid());\n\n    const i = this._edges.length;\n    this._edges.push(edge);\n    this._edgeMapping.set(edge.getGraphElementID(), i);\n    return edge;\n  }\n  clearEdges() { this._edges.length = 0; this._edgeMapping.clear(); }\n  getEdgeByElementID(elementID)\n  {\n    const index = this._edgeMapping.get(elementID);\n    return index >= 0 ? this._edges[index] : null;\n  }\n  getEdges() { return this._edges; }\n  getEdgeCount() { return this._edges.length; }\n\n  /** HELPER **/\n\n  clear()\n  {\n    this.clearEdges();\n    this.clearNodes();\n  }\n\n  isEmpty()\n  {\n    return this.getNodeCount() <= 0 && this.getEdgeCount() <= 0;\n  }\n\n  getBoundingRect()\n  {\n    if (this._nodes.length <= 0) return {\n      minX: 0,\n      minY: 0,\n      maxX: 1,\n      maxY: 1,\n      width: 1,\n      height: 1\n    };\n\n    var minNX = Number.MAX_VALUE;\n    var minNY = Number.MAX_VALUE;\n    var maxNX = Number.MIN_VALUE;\n    var maxNY = Number.MIN_VALUE;\n\n    var maxNodeSize = 0;\n    for(const node of this._nodes)\n    {\n      const x = node.x;\n      const y = node.y;\n      const size = node.getNodeSize();\n      if (size > maxNodeSize) maxNodeSize = size;\n\n      minNX = Math.min(minNX, x);\n      maxNX = Math.max(maxNX, x);\n\n      minNY = Math.min(minNY, y);\n      maxNY = Math.max(maxNY, y);\n    }\n\n    minNX -= maxNodeSize;\n    minNY -= maxNodeSize;\n    maxNX += maxNodeSize;\n    maxNY += maxNodeSize;\n\n    var minEX = Number.MAX_VALUE;\n    var minEY = Number.MAX_VALUE;\n    var maxEX = Number.MIN_VALUE;\n    var maxEY = Number.MIN_VALUE;\n\n    const startPoint = {x: 0, y: 0};\n    const endPoint = {x: 0, y: 0};\n    const centerPoint = {x: 0, y: 0};\n    for(const edge of this._edges)\n    {\n      //Will store into point objects...\n      edge.getStartPoint(startPoint);\n      edge.getEndPoint(endPoint);\n      edge.getCenterPoint(centerPoint);\n\n      const sx = startPoint.x;\n      const sy = startPoint.y;\n      const ex = endPoint.x;\n      const ey = endPoint.y;\n      const cx = centerPoint.x;\n      const cy = centerPoint.y;\n\n      minEX = Math.min(minEX, sx, ex, cx);\n      maxEX = Math.max(maxEX, sx, ex, cx);\n\n      minEY = Math.min(minEY, sy, ey, cy);\n      maxEY = Math.max(maxEY, sy, ey, cy);\n    }\n\n    const result = {\n      minX: Math.min(minNX, minEX),\n      minY: Math.min(minNY, minEY),\n      maxX: Math.max(maxNX, maxEX),\n      maxY: Math.max(maxNY, maxEY),\n      width: 0,\n      height: 0\n    };\n    result.width = result.maxX - result.minX;\n    result.height = result.maxY - result.minY;\n    return result;\n  }\n\n  //Gets a hash of the graph's current state. Can generally assume the hash will\n  //change if the graph's content has changed (including nodes and edges).\n  getHashCode(usePosition=true)\n  {\n    let string = \"\";\n    for(const node of this._nodes)\n    {\n      string += node.getHashString(usePosition) + \",\";\n    }\n    string += \"|\";\n    for(const edge of this._edges)\n    {\n      string += edge.getHashString(usePosition) + \",\";\n    }\n    return stringHash(string);\n  }\n}\n\nexport default NodalGraph;\n","import NodalGraph from 'graph/NodalGraph.js';\nimport FSANode from './FSANode.js';\nimport FSAEdge, { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst PARALLEL_EDGE_HEIGHT = 10;\n\nclass FSAGraph extends NodalGraph\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  createNode(x=0, y=0, id=null)\n  {\n    return this.addNode(new FSANode(id, x, y));\n  }\n\n  //Override\n  createEdge(from, to=null, id=null)\n  {\n    return this.addEdge(new FSAEdge(id, from, to));\n  }\n\n  setStartNode(node)\n  {\n    if (this._nodes.length <= 0) throw new Error(\"Cannot set start node to empty graph\");\n\n    //There is only one node, and that is already the start node\n    if (this._nodes.length === 1) return;\n\n    const i = this._nodes.indexOf(node);\n    if (i > 0)\n    {\n      //This does a swap; we could do a prepend but that's more costly...\n      const prev = this._nodes[0];\n      this._nodes[0] = node;\n      this._nodes[i] = prev;\n    }\n    else if (i < 0)\n    {\n      throw new Error(\"Cannot set start node for unknown node\");\n    }\n  }\n\n  getStartNode()\n  {\n    return this._nodes.length > 0 ? this._nodes[0] : null;\n  }\n\n  //This is more like addEdge() without adding it to the graph and just returns the result\n  //This should only be called once when completing an edge\n  formatEdge(edge)\n  {\n    const edgeSource = edge.getSourceNode();\n    const edgeDestination = edge.getDestinationNode();\n    const edgeLabel = edge.getEdgeSymbolsFromLabel();\n\n    //Look for an existing edge with similar from and to\n    for(const otherEdge of this._edges)\n    {\n      if (otherEdge === edge) continue;\n      if (otherEdge.getSourceNode() === edgeSource && otherEdge.getDestinationNode() === edgeDestination)\n      {\n        const otherSymbols = otherEdge.getEdgeSymbolsFromLabel();\n        if (edgeLabel.length > 0)\n        {\n          const result = otherSymbols.concat(edgeLabel);\n          otherEdge.setEdgeLabel(result.join(SYMBOL_SEPARATOR));\n        }\n\n        //Merged with newfound edge...\n        return otherEdge;\n      }\n    }\n\n    //Otherwise, format the current edge\n\n    if (!edge.isSelfLoop())\n    {\n      let flag = false;\n\n      //Bend away if there is another edge not bent with the same src/dst\n      const parallelEdgeHeight = PARALLEL_EDGE_HEIGHT;\n      const HALFPI = Math.PI / 2;\n      for(const otherEdge of this._edges)\n      {\n        if (otherEdge.isQuadratic() && Math.abs(otherEdge.getQuadratic().length) >= parallelEdgeHeight * 2) continue;\n        if ((otherEdge.getDestinationNode() === edgeSource && otherEdge.getSourceNode() === edgeDestination))\n        {\n          edge.setQuadratic(HALFPI, parallelEdgeHeight);\n          otherEdge.setQuadratic(HALFPI, parallelEdgeHeight);\n          flag = true;\n\n          //ASSUMES that there will only ever be 2 edges that are parallel...\n          break;\n        }\n      }\n\n      //Try to move the edge away from intersecting nodes...\n      if (!flag)\n      {\n        const maxNodeSize = Math.max(edgeSource.getNodeSize(), edgeDestination.getNodeSize());\n        const x1 = edgeSource.x;\n        const y1 = edgeSource.y;\n        const x2 = edgeDestination.x;\n        const y2 = edgeDestination.y;\n        const dist12sq = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n        let vertical = false;\n        let m = 0;\n        let b = 0;\n\n        if(x1 > x2)\n        {\n          m = (y1-y2) / (x1-x2);\n          b = y2-m*x2;\n        }\n        else if (x1 < x2)\n        {\n          m = (y2-y1) / (x2-x1);\n          b = y1-m*x1;\n        }\n        else\n        {\n          vertical = true;\n        }\n\n        for(const node of this._nodes)\n        {\n          if(node === edgeSource || node === edgeDestination) continue;\n\n          const x0 = node.x;\n          const y0 = node.y;\n\n          const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n          const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n          if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n          let dist = 0;\n          if(vertical) {\n            dist = Math.abs(x1-x0);\n          } else {\n            dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n          }\n\n          if(dist < node.getNodeSize())\n          {\n            flag = true;\n            break;\n          }\n        }\n\n        if (flag)\n        {\n          edge.setQuadratic(-Math.PI / 2, maxNodeSize + 10);\n        }\n      }\n    }\n\n    return edge;\n  }\n}\n\nexport default FSAGraph;\n","import AbstractGraphController from 'modules/base/AbstractGraphController.js';\n\nimport Config from 'config.js';\nimport Eventable from 'util/Eventable.js';\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport FSAGraph from 'modules/fsa/graph/FSAGraph.js';\n\nclass GraphController extends AbstractGraphController\n{\n  constructor(module)\n  {\n    super(module, new FSAGraph());\n\n    this.inputController = null;\n    this.machineController = null;\n\n    this.viewportElement = null;\n    this.tester = null;\n\n    this.prevQuad = {\n      radians: 0, length: 0,\n      x: 0, y: 0\n    };\n    this.prevEdgeTo = null;\n    this.prevX = 0;\n    this.prevY = 0;\n\n    //The difference between controller events vs graph events is: controller has user-intent\n\n    //userCreateNode(graph, node) - When user creates a node\n    this.registerEvent(\"userCreateNode\");\n    this.registerEvent(\"userPreCreateNode\");//(graph, nextNodeID, x, y)\n    this.registerEvent(\"userPostCreateNode\");//(graph, node)\n\n    //userToggleNode(graph, node, prevAccept) - When user toggles the accept state\n    this.registerEvent(\"userToggleNode\");\n\n    //userDeleteNodes(graph, node, targetNodes, prevX, prevY) - When user deletes one or more nodes\n    this.registerEvent(\"userDeleteNodes\");\n    this.registerEvent(\"userPreDeleteNodes\");\n    this.registerEvent(\"userPostDeleteNodes\");\n\n    //userDeleteEdge(graph, edge, prevTo, prevQuad) - When user deletes an edge\n    this.registerEvent(\"userDeleteEdge\");\n    this.registerEvent(\"userPreDeleteEdge\");\n    this.registerEvent(\"userPostDeleteEdge\");\n\n    //userCreateEdge(graph, edge) - When user creates an edge, after naming it\n    this.registerEvent(\"userCreateEdge\");\n    //this.registerEvent(\"userPreCreateEdge\");\n    this.registerEvent(\"userPostCreateEdge\");\n\n    /*\n    //userMoveNodes(graph, nodes, dx, dy) - When user moves one or more nodes\n    this.registerEvent(\"userMoveNodes\");\n    //userMoveInitial(graph, node, prevNode) - When user moves the initial marker to another\n    this.registerEvent(\"userMoveInitial\");\n    //userPreCreateEdge(graph, edge) - When user is about to create an edge, before src\n    this.registerEvent(\"userPreCreateEdge\");\n    //userBeginEdge(graph, edge, src) - When user begins to create an edge, after src and before naming it\n    this.registerEvent(\"userBeginEdge\");\n    //userEndEdge(graph, edge, src, dst) - When user finishes creating an edge, after dst and before naming it (dst could be null for deletion)\n    this.registerEvent(\"userEndEdge\");\n    //userPostCreateEdge(graph, edge) - When user is finished creating an edge, after dst and after quad changes\n    this.registerEvent(\"userPostCreateEdge\");\n    //userMoveEdge(graph, edge, prevDest) - When user changes the dst of edge\n    this.registerEvent(\"userChangeEdge\");\n    //userBendEdge(graph, edge, prevQuad) - When user bends the edge\n    this.registerEvent(\"userBendEdge\");\n    //userLabelEdge(graph, edge, prevLabel) - When user re-labels the edge\n    this.registerEvent(\"userLabelEdge\");\n    */\n\n    //userRenameNode(graph, node, nextLabel, prevLabel, isPrevCustom) - When user sets the label of node\n    this.registerEvent(\"userRenameNode\");\n\n    //userChangeLayout(graph, prevLayout) - When user re-layouts the graph\n    this.registerEvent(\"userChangeLayout\");\n    this.registerEvent(\"userPreChangeLayout\");//before any changes\n    this.registerEvent(\"userPostChangeLayout\");//after all changes\n\n    //userImportGraph(graph) - When user imports a graph\n    this.registerEvent(\"userImportGraph\");\n    this.registerEvent(\"userPreImportGraph\");//before any changes\n    this.registerEvent(\"userPostImportGraph\");//after all changes\n\n    //nodeMove(targetNode, nextX, nextY, prevX, prevY)\n    this.registerEvent(\"nodeMove\");\n    //nodeMoveAll(targetNodes, dx, dy)\n    this.registerEvent(\"nodeMoveAll\");\n    //nodeInitial(nextInitial, prevInitial)\n    this.registerEvent(\"nodeInitial\");\n    //edgeDestination(targetEdge, nextDestination, prevDestination, prevQuad)\n    this.registerEvent(\"edgeDestination\");\n    //edgeMove(targetEdge, nextQuad, prevQuad)\n    this.registerEvent(\"edgeMove\");\n    //edgeLabel(targetEdge, nextLabel, prevLabel)\n    this.registerEvent(\"edgeLabel\");\n    //tryCreateWhileTrash()\n    this.registerEvent(\"tryCreateWhileTrash\");\n  }\n\n  initialize(app)\n  {\n    this.viewportElement = app.viewport;\n    this.tester = app.getCurrentModule().getTestingManager();\n\n    this.inputController = app.getInputController();\n    this.machineController = app.getMachineController();\n  }\n\n  destroy()\n  {\n  }\n\n  applyAutoLayout()\n  {\n    this.emit(\"userPreChangeLayout\", this.getGraph());\n    GraphLayout.applyLayout(this.getGraph());\n\n    this.emit(\"userChangeLayout\", this.getGraph());\n    this.emit(\"userPostChangeLayout\", this.getGraph());\n  }\n\n  renameNode(node, name)\n  {\n    const prev = node.getNodeLabel();\n    const isPrevCustom = node.getNodeCustom();\n\n    node.setNodeLabel(name);\n    node.setNodeCustom(true);\n\n    this.emit(\"userRenameNode\", this.getGraph(), node, name, prev, isPrevCustom);\n  }\n\n  createNode(x, y)\n  {\n    const newNodeLabel = this.machineController.getMachineBuilder().getLabeler().getNextDefaultNodeLabel();\n\n    if (typeof x === 'undefined') x = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n    if (typeof y === 'undefined') y = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n\n    this.emit(\"userPreCreateNode\", this.getGraph(), newNodeLabel, x, y);\n\n    const node = this.getGraph().createNode(x, y);\n    node.setNodeLabel(newNodeLabel);\n\n    this.emit(\"userCreateNode\", this.getGraph(), node);\n\n    this.emit(\"userPostCreateNode\", this.getGraph(), node);\n    return node;\n  }\n\n  toggleNode(node)\n  {\n    const prev = node.getNodeAccept();\n    const result = !prev;\n    //Toggle accept for selected node\n    node.setNodeAccept(result);\n\n    //Emit event\n    this.emit(\"userToggleNode\", this.getGraph(), node, prev);\n  }\n\n  deleteSelectedNodes(selectedNode)\n  {\n    const picker = this.inputController.getPicker();\n    const selection = picker.getSelection(this.getGraph()).slice();\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n\n    //Remove from graph\n    for(const node of selection)\n    {\n      this.getGraph().deleteNode(node);\n    }\n\n    //Remove from selection\n    picker.clearSelection();\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n  }\n\n  deleteTargetNode(target)\n  {\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n\n    this.getGraph().deleteNode(target);\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n  }\n\n  deleteTargetNodes(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n\n    const graph = this.getGraph();\n    for(const node of targets)\n    {\n      graph.deleteNode(node);\n    }\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n  }\n\n  deleteTargetEdge(target)\n  {\n    this.emit(\"userPreDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.getGraph().deleteEdge(target);\n\n    //Emit event\n    this.emit(\"userDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.emit(\"userPostDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n  }\n\n  deleteTargetEdges(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    for(const target of targets)\n    {\n      this.deleteTargetEdge(target);\n    }\n  }\n\n  moveNodeTo(pointer, node, x, y)\n  {\n    for(const other of this.getGraph().getNodes())\n    {\n      //Update node collision\n      if (node === other) continue;\n\n      const dx = x - other.x;\n      const dy = y - other.y;\n      const angle = Math.atan2(dy, dx);\n\n      const diameter = (Config.NODE_RADIUS * 2);\n      const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n      const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU * 4)\n      {\n        x += nextDX;\n        y += nextDY;\n      }\n    }\n\n    node.x = x;\n    node.y = y;\n  }\n\n  moveMultipleNodesTo(pointer, nodes, x, y)\n  {\n    //Moves all nodes by difference between initial position with passed-in x and y\n    const pos = pointer.getInputEventPosition();\n    const dx = x - pos.x;\n    const dy = y - pos.y;\n    for(const node of nodes)\n    {\n      node.x += dx;\n      node.y += dy;\n    }\n\n    //Updates initial position to passed-in x and y to maintain relative position\n    pointer.changeInputEventPosition(x, y);\n  }\n\n  moveEdgeTo(pointer, edge, x, y)\n  {\n    edge.setQuadraticByCoords(x, y);\n  }\n\n  moveEndpointTo(pointer, edge, x, y)\n  {\n    //Get ONLY node at x and y (cannot use hover target, since it is not ONLY nodes)\n    const picker = this.inputController.getPicker();\n    const dst = picker.getNodeAt(this.getGraph(), x, y) || pointer;\n\n    edge.changeDestinationNode(dst);\n\n    //If the cursor returns to the state after leaving it...\n    if (edge.isSelfLoop())\n    {\n      //Make it a self loop\n      const sourceNode = edge.getSourceNode();\n      const dx = sourceNode.x - x;\n      const dy = sourceNode.y - y;\n      const radians = Math.atan2(dy, dx) + Math.PI;\n      edge.setQuadratic(radians);\n    }\n    //Otherwise, maintain original curve\n    else\n    {\n      //TODO: This also causes self-loops to act weird when no longer a self loop\n      edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n    }\n  }\n\n  openLabelEditor(target, x, y, placeholder=null, replace=true, callback=null)\n  {\n    const prevLabel = placeholder || target.getEdgeLabel();\n    this.viewportElement.labelEditor.openEditor(target, placeholder, replace, () => {\n      const label = target.getEdgeLabel();\n      if (prevLabel.length > 0 && label != prevLabel)\n      {\n        this.emit(\"edgeLabel\", this.getGraph(), target, label, prevLabel);\n      }\n\n      if (callback)\n      {\n        callback();\n      }\n    });\n  }\n\n  focusOnNode(node)\n  {\n    //Center workspace at focused node; inverted due to graph-to-screen space\n    this.inputController.getInputAdapter().getViewport().setOffset(-node.x, -node.y);\n  }\n\n  focusOnEdge(edge)\n  {\n    //Center workspace at focused edge; inverted due to graph-to-screen space\n    const center = edge.getCenterPoint();\n    this.inputController.getInputAdapter().getViewport().setOffset(-center.x, -center.y);\n  }\n\n  focusOnNodes(nodes)\n  {\n    //Center workspace at the average of focused nodes; inverted due to graph-to-screen space\n    const length = nodes.length;\n    let ax = 0;\n    let ay = 0;\n    for(const node of nodes)\n    {\n      ax += node.x;\n      ay += node.y;\n    }\n    this.inputController.getInputAdapter().getViewport().setOffset(-ax / length, -ay / length);\n  }\n}\n//Mixin Eventable\nEventable.mixin(GraphController);\n\nfunction moveNodesOutOfEdges(target, graph)\n{\n\n  const x1 = target.getSourceNode().x;\n  const y1 = target.getSourceNode().y;\n  const x2 = target.getDestinationNode().x;\n  const y2 = target.getDestinationNode().y;\n  const dist12sq = (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n  let vertical = false;\n  let m = 0;\n  let b = 0;\n  if(x1 > x2) {\n    m = (y1-y2) / (x1-x2);\n    b = y2-m*x2;\n  } else if (x1 < x2) {\n    m = (y2-y1) / (x2-x1);\n    b = y1-m*x1;\n  } else {\n    vertical = true;\n  }\n\n  for(const node of graph.getNodes())\n  {\n    if(node === target.getSourceNode() || node === target.getDestinationNode()) continue;\n\n    const x0 = node.x;\n    const y0 = node.y;\n\n    const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n    const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n    if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n\n    let dist = 0;\n    let xint = 0;\n    let yint = 0;\n    let m0 = 0;\n    let horizontal = false;\n    if(vertical) {\n      dist = Math.abs(x1-x0);\n      xint = x1;\n      yint = y0;\n      m0 = 0;\n    } else {\n      dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n      xint = (x0 + m*y0 - m*b) / (m*m + 1);\n      yint = m * xint + b;\n      if(m !== 0) {\n        m0 = 1 / m;\n      } else {\n        horizontal = true;\n      }\n    }\n\n    if(dist < Config.NODE_RADIUS) {\n      const toMove = Config.NODE_RADIUS - dist + 10;\n      const distx = x0 - xint;\n      const disty = y0 - yint;\n      let signx = -1;\n      let signy = -1;\n      if(distx > 0) signx = 1;\n      if(disty > 0) signy = 1;\n\n      if(horizontal) {\n        node.y = y0 + signy * toMove;\n      } else {\n        let toMovex = toMove / Math.sqrt(m0*m0 + 1);\n        let toMovey = Math.abs(m0) * toMovex;\n        node.x = x0 + signx * toMovex;\n        node.y = y0 + signy * toMovey;\n      }\n    }\n  }\n}\n\nexport default GraphController;\n","import DFA from 'machine/DFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nexport function convertToDFA(nfa, dst=null)\n{\n  const result = dst || new DFA();\n\n  const alphabet = nfa.getAlphabet();\n  const startState = nfa.getStartState();\n\n  //Make new DFA start state\n  let nextStates = nfa.doClosureTransition(startState);\n  const newStartState = newDFAStateFromNFA(result, nfa, nextStates);\n\n  //For every state from the NFA's powerset, add it to DFA with correct transitions\n  const powerSetStates = nfa.getPowerSet();\n  for(const powerSetState of powerSetStates) {\n      console.log(\"Adding to DFA: \" + getStateFromSet(powerSetState));\n      if(powerSetState.length != 0)\n        expandPowersetStateToDFA(powerSetState, nfa, result);\n  }\n\n  //Create trap state\n  const trapState = result.newState(\"{}\");\n  let flag = false;\n\n  //Check for the new alphabet...\n  const newAlphabet = result.getAlphabet();\n  for(const state of result.getStates())\n  {\n    for(const symbol of newAlphabet)\n    {\n      //If transition for this symbol does not exist...\n      if (!result.doTransition(state, symbol))\n      {\n        //Create it\n        result.newTransition(state, trapState, symbol);\n\n        if (state !== trapState) flag = true;\n      }\n    }\n  }\n\n  return result;\n}\n\n/* Inspired by expandNFAStateToDFA, it takes a powerSetState, which is a set\n * of NFA states from the powerset (e.g. [q1, q1]) and adds it to the DFA as a\n * single state (e.g. {q1, q2}) and adds its transitions\n */\nfunction expandPowersetStateToDFA(powerSetState, nfa, dfa) {\n    const result = [];\n    const alphabet = nfa.getAlphabet();\n    const state = getStateFromSet(powerSetState);\n\n    if(!dfa.hasState(state)) {\n        result.push(newDFAStateFromNFA(dfa, nfa, powerSetState));\n    }\n\n    let terminals = [];\n    let dfaState = null;\n\n    for(const symbol of alphabet)\n    {\n      //Get all closed reachable states...\n      for(const s of powerSetState)\n      {\n        nfa.doTerminalTransition(s, symbol, terminals);\n      }\n\n      //If has reachable states...\n      if (terminals.length > 0)\n      {\n        dfaState = getStateFromSet(terminals);\n\n        //Create state if it does not exist...\n        if (!dfa.hasState(dfaState))\n        {\n          dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n          result.push(dfaState);\n        }\n\n        //Create transition for reachable state\n        dfa.newTransition(state, dfaState, symbol);\n      }\n\n      //Reset list\n      terminals.length = 0;\n    }\n\n    return result;\n}\n\nfunction expandNFAStateToDFA(state, nfa, dfa)\n{\n  const result = [];\n  const alphabet = nfa.getAlphabet();\n\n  let terminals = [];\n  let nfaStates = null;\n  let dfaState = null;\n\n  for(const symbol of alphabet)\n  {\n    //Get all closed reachable states...\n    nfaStates = getSetFromState(state);\n    for(const s of nfaStates)\n    {\n      nfa.doTerminalTransition(s, symbol, terminals);\n    }\n\n    //If has reachable states...\n    if (terminals.length > 0)\n    {\n      dfaState = getStateFromSet(terminals);\n\n      //Create state if it does not exist...\n      if (!dfa.hasState(dfaState))\n      {\n        dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n        result.push(dfaState);\n      }\n\n      //Create transition for reachable state\n      dfa.newTransition(state, dfaState, symbol);\n    }\n\n    //Reset list\n    terminals.length = 0;\n  }\n\n  return result;\n}\n\nfunction newDFAStateFromNFA(dfa, nfa, nfaStates)\n{\n  const result = dfa.newState(getStateFromSet(nfaStates));\n\n  //If the NFA states contain a final, then DFA state should be final\n  for(const s of nfaStates)\n  {\n    if (nfa.isFinalState(s))\n    {\n      dfa.setFinalState(result);\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction getStateFromSet(nfaStates)\n{\n  nfaStates.sort();\n  return \"{\" + nfaStates.join(\",\") + \"}\";\n}\n\nfunction getSetFromState(dfaState)\n{\n  return dfaState.substring(1, dfaState.length - 1).split(\",\");\n}\n","import Eventable from 'util/Eventable.js';\n\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport { convertToDFA } from 'machine/util/convertNFA.js';\nimport DFA from 'machine/DFA.js';\n\nclass MachineController\n{\n  constructor(module)\n  {\n    this._module = module;\n\n    this.machineName = null;\n\n    this.graphController = null;\n\n    //userChangeMachine(machineBuilder, nextMachineType, prevMachineType) - when user changes machine type\n    this.registerEvent(\"userChangeMachine\");\n    //userConvertMachine(machineBuilder, nextMachineType, prevMachineType) - when user converts machine type\n    this.registerEvent(\"userConvertMachine\");\n    this.registerEvent(\"userPreConvertMachine\");//Before changes\n    this.registerEvent(\"userPostConvertMachine\");//After all changes\n    //userRenameMachine(machineBuilder, nextMachineName, prevMachineName) - when machine name is changed\n    this.registerEvent(\"userRenameMachine\");\n    //userCreateSymbol(machineBuilder, symbol) - When user adds a custom symbol\n    this.registerEvent(\"userCreateSymbol\");\n    //userDeleteSymbol(machineBuilder, symbol, prevEdges) - When user delets a symbol (and affects the edges)\n    this.registerEvent(\"userDeleteSymbol\");\n    this.registerEvent(\"userPreDeleteSymbol\");//userPreDeleteSymbol(machineBuilder, symbol)\n    this.registerEvent(\"userPostDeleteSymbol\");\n    //userRenameSymbol(machineBuilder, symbol, prevSymbol, targetEdges) - When user renames a used symbol (and affects the edges)\n    this.registerEvent(\"userRenameSymbol\");\n    this.registerEvent(\"userPreRenameSymbol\");//userPreDeleteSymbol(machineBuilder, symbol, prevSymbol)\n    this.registerEvent(\"userPostRenameSymbol\");\n  }\n\n  setModule(module)\n  {\n    this._module = module;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.getGraphController();\n  }\n\n  destroy()\n  {\n\n  }\n\n  getLabelFormatter()\n  {\n    return this._module.getLabelFormatter();\n  }\n\n  getMachineBuilder()\n  {\n    return this._module.getMachineBuilder();\n  }\n\n  getMachineType()\n  {\n    return this.getMachineBuilder().getMachineType();\n  }\n\n  setMachineType(machineType)\n  {\n    this.getMachineBuilder().setMachineType(machineType);\n  }\n\n  getMachineName()\n  {\n    return this.machineName || I18N.toString(\"file.untitled\");\n  }\n\n  setMachineName(machineName)\n  {\n    if (!machineName || machineName.length <= 0)\n    {\n      this.machineName = null;\n    }\n    else\n    {\n      this.machineName = machineName;\n    }\n\n    const value = this.getMachineName();\n    const element = document.getElementById('window-title');\n    const string = element.innerHTML;\n    const separator = string.indexOf('-');\n    if (separator !== -1)\n    {\n      element.innerHTML = value + \" - \" + string.substring(separator + 1).trim();\n    }\n    else\n    {\n      element.innerHTML = value + \" - \" + string;\n    }\n  }\n\n  renameMachine(machineName)\n  {\n    const prev = this.machineName;\n    this.setMachineName(machineName);\n\n    //Emit a user rename machine event\n    this.emit(\"userRenameMachine\", this.getMachineBuilder(), machineName, prev);\n  }\n\n  changeMachineTo(machineType)\n  {\n    const prev = this.getMachineBuilder().getMachineType();\n    if (prev != machineType)\n    {\n      this.setMachineType(machineType);\n\n      //Emit event\n      this.emit(\"userChangeMachine\", this.getMachineBuilder(), machineType, prev);\n    }\n  }\n\n  getFirstGraphNodeByLabel(graph, label)\n  {\n    for(const node of graph.getNodes())\n    {\n      if (node.getNodeLabel() == label)\n      {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  setGraphToMachine(graph, machine)\n  {\n    graph.clear();\n\n    //Add all states\n    let node;\n    for(const state of machine.getStates())\n    {\n      node = graph.createNode(0, 0);\n      node.setNodeLabel(state);\n      if (machine.isFinalState(state))\n      {\n        node.setNodeAccept(true);\n      }\n    }\n\n    //Add all transitions\n    let edge, from, to, read, labels, flag;\n    for(let transition of machine.getTransitions())\n    {\n      from = this.getFirstGraphNodeByLabel(graph, transition[0]);\n      read = transition[1];\n      to = this.getFirstGraphNodeByLabel(graph, transition[2]);\n      edge = graph.createEdge(from, to);\n      edge.setEdgeLabel(read);\n      const formattedEdge = graph.formatEdge(edge);\n      if (edge != formattedEdge) graph.deleteEdge(edge);\n    }\n\n    //Set start state\n    const startState = machine.getStartState();\n    graph.setStartNode(this.getFirstGraphNodeByLabel(graph, startState));\n\n    //Auto layout graph\n    GraphLayout.applyLayout(graph);\n  }\n\n  convertMachineTo(machineType)\n  {\n    const currentMachineType = this.getMachineType();\n\n    //Already converted machine...\n    if (currentMachineType === machineType) return;\n\n    if (machineType == \"DFA\" && currentMachineType == \"NFA\")\n    {\n      this.emit(\"userPreConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n\n      const result = convertToDFA(this.getMachineBuilder().getMachine(), new DFA());\n      this.setGraphToMachine(this.graphController.getGraph(), result);\n      this.setMachineType(machineType);\n\n      this.emit(\"userConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n      this.emit(\"userPostConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n    }\n    else if (machineType == \"NFA\" && currentMachineType == \"DFA\")\n    {\n      this.changeMachineTo(machineType);\n    }\n    else\n    {\n      throw new Error(\"Conversion scheme between \\'\" + currentMachineType + \"\\' to \\'\" + machineType + \"\\' is not supported\");\n    }\n  }\n\n  getAlphabet()\n  {\n    return this.getMachineBuilder().getAlphabet();\n  }\n\n  createSymbol(symbol)\n  {\n    this.getMachineBuilder().addCustomSymbol(symbol);\n\n    this.emit(\"userCreateSymbol\", this.getMachineBuilder(), symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    let edge = null;\n    let index = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreDeleteSymbol\", this.getMachineBuilder(), symbol);\n\n    const graph = this.graphController.getGraph();\n    for(let i = graph.getEdges().length - 1; i >= 0; --i)\n    {\n      edge = graph.getEdges()[i];\n      index = edge.getEdgeLabel().indexOf(symbol);\n      if (index >= 0)\n      {\n        result = edge.getEdgeLabel().substring(0, index) + edge.getEdgeLabel().substring(index + 1);\n        if (result.length > 0)\n        {\n          edge.setEdgeLabel(result);\n        }\n        else\n        {\n          edge.setEdgeLabel(\"\");\n          graph.deleteEdge(edge);\n        }\n        targets.push(edge);\n      }\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().removeCustomSymbol(symbol);\n    }\n\n    this.emit(\"userDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n    this.emit(\"userPostDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n  }\n\n  renameSymbol(prevSymbol, nextSymbol)\n  {\n    let edge = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol);\n\n    const graph = this.graphController.getGraph();\n    const length = graph.getEdges().length;\n    for(let i = 0; i < length; ++i)\n    {\n      edge = graph.getEdges()[i];\n      let result = edge.getEdgeLabel().replace(prevSymbol, nextSymbol);\n      if (result != edge.getEdgeLabel())\n      {\n        targets.push(edge);\n      }\n      edge.setEdgeLabel(result);\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().renameCustomSymbol(prevSymbol, nextSymbol);\n    }\n\n    this.emit(\"userRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n    this.emit(\"userPostRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n  }\n\n  getCustomSymbols()\n  {\n    return this.getMachineBuilder()._symbols;\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this.getMachineBuilder().isCustomSymbol(symbol);\n  }\n}\nEventable.mixin(MachineController);\n\nexport default MachineController;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass NodeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    //TODO: Refer to app.css for comparable colors\n    const node = this.props.node;\n    return <g className=\"graph-node-container\">\n      {/*Outer circle*/}\n      <circle className=\"graph-node\"\n        cx={node.x}\n        cy={node.y}\n        r={Config.NODE_RADIUS}\n\n        fill=\"#FEE781\"\n        stroke=\"#000000\"/>\n\n      {/*Inner circle*/}\n      {node.getNodeAccept() &&\n        <circle className=\"graph-node-inner\"\n          cx={node.x}\n          cy={node.y}\n          r={Config.NODE_RADIUS_INNER}\n          fill=\"none\"\n\n          stroke=\"#000000\"/>}\n\n      //Label\n      <text className=\"graph-node-label\"\n        x={node.x} y={node.y + 4}\n        pointerEvents=\"none\"\n        style={{\n          userSelect: \"none\",\n          fontSize: (1 - Math.min(Math.max(node.getNodeLabel().length - 2, 0) / 6, 0.5)) + \"em\"\n        }}\n        textAnchor=\"middle\">\n        {node.getNodeLabel()}\n      </text>\n    </g>;\n  }\n}\n\nexport default NodeRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass EdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const SIXTH_PI = Math.PI / 6;\n\n    let arrowAngle = 0;\n    const edge = this.props.edge;\n    const start = edge.getStartPoint();\n    const end = edge.getEndPoint();\n    const center = edge.getCenterPoint();\n    const label = edge.getEdgeLabel();\n    const quad = edge.getQuadratic();\n    const quadCoords = edge.getQuadraticAsCoords();\n    const edgeDir = edge.getEdgeDirection();\n    const flipLabel = quadCoords.y > 0;\n\n    //Calculate curved lines...\n    let quadLine = null;\n    if (!edge.isQuadratic())\n    {\n      //Straight line\n      arrowAngle = Math.atan2(start.x - end.x, start.y - end.y) + Math.PI;\n      quadLine = \"L \" + end.x + \" \" + end.y;\n    }\n    else\n    {\n      //Quadratic curve\n      //center = (midpoint + the quadratic offset) + the quadratic offset\n      const cx = center.x + quadCoords.x;\n      const cy = center.y + quadCoords.y;\n      arrowAngle = Math.atan2(cx - end.x, cy - end.y) + Math.PI;\n      quadLine = \"Q \" + cx + \" \" + cy + \" \" + end.x + \" \" + end.y;\n    }\n\n    //Draw multiple labels\n    const labels = edge.getEdgeSymbolsFromLabel();\n    let dy = 0;\n\n    const cx = (center && center.x || 0);\n    const cy = (center && center.y || 0);\n\n    return <g className=\"graph-edge-container\">\n      //Draw lines\n      <path className=\"graph-edge\" id={\"edge:\" + edge.getGraphElementID()}\n        d={\n          \"M \" + start.x + \" \" + start.y + \" \" +\n          quadLine + \" \" +\n          \"M \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle - SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle - SIXTH_PI))) + \" \" +\n          \"L \" + end.x + \" \" + end.y + \" \" +\n          \"L \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle + SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle + SIXTH_PI)))}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n\n      {/*Draw labels*/}\n      <g transform={\"translate(\" + (cx) + \",\" + (cy) + \") rotate(\" + (edgeDir * 180 / Math.PI) + \")\"}>\n      { labels.length > 0 && labels.map((str, i) => {\n          const yy = (i + 1) * -15;\n\n          //TODO: ctx.clearRect(xx - cx - 2, yy - 5, (cx * 2) + 4, 10);\n          return <text\n            key={str + \".\" + i}\n            className=\"graph-edge-label\"\n            transform={\"translate(0, \" + yy + \")\" + (flipLabel ? \" scale(-1, -1)\" : \"\")}\n            alignmentBaseline=\"central\"\n            pointerEvents=\"none\"\n            style={{userSelect: \"none\"}}\n            textAnchor=\"middle\">\n            {str}\n          </text>;\n      })}\n      </g>\n    </g>;\n  }\n}\n\nexport default EdgeRenderer;\n","import React from 'react';\n\nimport Node from 'modules/fsa/graph/FSANode.js';\n\nimport Config from 'config.js';\n\nclass InitialMarkerRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const node = this.props.node;\n    //node.x + offset marker back to center if not a node (or is a pointer)\n    const x = node.x + (!(node instanceof Node) ? -Config.INITIAL_MARKER_OFFSET_X : 0);\n    const y = node.y;\n    const r = Config.NODE_RADIUS;\n    const d = r * 2;\n    return <g className=\"graph-initial-container\">\n      <path className=\"graph-initial\" d={\n        \"M\" + (x - r) + \" \" + (y) +\n        \" L\" + (x - d) + \" \" + (y - r) +\n        \" L\" + (x - d) + \" \" + (y + r) +\n        \" Z\"}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n    </g>;\n  }\n}\n\nexport default InitialMarkerRenderer;\n","import React from 'react';\n\nimport NodeRenderer from './NodeRenderer.js';\nimport EdgeRenderer from './EdgeRenderer.js';\nimport InitialMarkerRenderer from './InitialMarkerRenderer.js';\n\nclass FSAGraphRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const graph = this.props.graph;\n    const inputController = this.props.inputController;\n    return <g>\n      {/* Nodes */}\n      {graph.getNodes().map((e, i) => <NodeRenderer key={e.getGraphElementID() || i} node={e}/>)}\n\n      {/* Edges */}\n      {graph.getEdges().map((e, i) => <EdgeRenderer key={e.getGraphElementID() || i} edge={e}/>)}\n\n      {/* Initial marker and ghost */}\n      { graph.getStartNode() && (inputController.ghostInitialMarker == null ?\n        <InitialMarkerRenderer node={graph.getStartNode()}/> :\n        <InitialMarkerRenderer node={inputController.ghostInitialMarker}/>) }\n    </g>;\n  }\n}\n\nexport default FSAGraphRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass SelectionBoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const visible = this.props.visible;\n    const fromX = this.props.fromX || 0;\n    const fromY = this.props.fromY || 0;\n    const toX = this.props.toX || fromX + 1;\n    const toY = this.props.toY || fromY + 1;\n\n    const dx = toX - fromX;\n    const dy = toY - fromY;\n\n    return <g className=\"graph-selection-container\">\n    { visible &&\n      <rect className=\"graph-selection\"\n        x={dx < 0 ? toX : fromX}\n        y={dy < 0 ? toY : fromY}\n        width={dx < 0 ? -dx : dx}\n        height={dy < 0 ? -dy : dy}/> }\n    </g>;\n  }\n}\n\nexport default SelectionBoxRenderer;\n","import React from 'react';\nimport Config from 'config.js';\n\nconst HIGHLIGHT_RADIUS_OFFSET = 4;\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\n\nclass HighlightRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const target = this.props.target;\n    const type = this.props.type;\n\n    let x = 0;\n    let y = 0;\n    let r = Config.CURSOR_RADIUS;\n    switch(type)\n    {\n      case \"node\":\n        x = target.x || 0;\n        y = target.y || 0;\n        r = Config.NODE_RADIUS;\n        break;\n      case \"edge\":\n        const center = target.getCenterPoint();\n        x = center.x || 0;\n        y = center.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n      case \"endpoint\":\n        const endpoint = target.getEndPoint();\n        x = endpoint.x || 0;\n        y = endpoint.y || 0;\n        r = Config.ENDPOINT_RADIUS;\n        break;\n      case \"initial\":\n        x = target.x + Config.INITIAL_MARKER_OFFSET_X || 0;\n        y = target.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n    }\n\n    return <g className=\"graph-highlight-container\">\n      <circle className={\"graph-highlight \" + this.props.className}\n        cx={x} cy={y}\n        r={r + HIGHLIGHT_RADIUS_OFFSET}\n        strokeDashoffset={this.props.offset || 0}\n        strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n        strokeWidth={HIGHLIGHT_LINE_WIDTH}\n        fill=\"none\"/>\n    </g>;\n  }\n}\n\nexport default HighlightRenderer;\n","import React from 'react';\n\nimport SelectionBoxRenderer from 'content/workspace/renderer/SelectionBoxRenderer.js';\nimport HighlightRenderer from 'content/workspace/renderer/HighlightRenderer.js';\n\nclass FSAGraphOverlayRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n\n    const currentModule = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const inputController = app.getInputController();\n    const machineController = app.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n    const machineBuilder = machineController.getMachineBuilder();\n    const picker = inputController.getPicker();\n    const selectionBox = picker.getSelectionBox();\n\n    return <g>\n      {/* Selected elements */}\n      { picker.hasSelection() &&\n        picker.getSelection(graph).map((e, i) =>\n          <HighlightRenderer key={e.getGraphElementID()} className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={e} type=\"node\"/>) }\n\n      {/* Selection box */}\n      <SelectionBoxRenderer visible={selectionBox.visible}\n        fromX={selectionBox.fromX} fromY={selectionBox.fromY}\n        toX={selectionBox.toX} toY={selectionBox.toY}/>\n\n      {/* Node warning targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.warningNodes.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n      {/* Edge warning targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.warningEdges.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n      {/* Node error targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.errorNodes.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n      {/* Edge error targets */}\n      { machineController.getMachineBuilder().machineErrorChecker.errorEdges.map((e, i) =>\n        <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n      {/* Node test targets */}\n      { tester.testMode.targets.map((e, i) => {\n          return <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-test graph-gui\" target={e} type=\"node\" offset=\"6\"/>;\n        }) }\n\n      {/* Hover markers */}\n      { picker.hasTarget() &&\n        !picker.isTargetInSelection() &&\n        <HighlightRenderer className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={picker.target} type={picker.targetType}/> }\n    </g>;\n  }\n}\n\nexport default FSAGraphOverlayRenderer;\n","import React from 'react';\nimport './TrashCan.css';\n\nimport Viewport from './Viewport.js';\n\nclass TrashCan extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      staticTrash: false\n    };\n  }\n\n  onTrashEnter(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(true);\n\n    //Enable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.DANGEROUS};\n    });\n  }\n\n  onTrashLeave(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(false);\n\n    //Disable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.NORMAL};\n    });\n  }\n\n  onTrashClick(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.setState((prev, props) => {\n      const result = !prev.staticTrash;\n      this.props.inputController.setTrashMode(result);\n\n      //Enable mode: dangerous\n      this.props.viewport.setState((prev, props) => {\n        return {mode: result ? Viewport.DANGEROUS : Viewport.NORMAL};\n      })\n\n      return {\n        staticTrash: result\n      };\n    });\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const inputAdapter = inputController.getInputAdapter();\n\n    return <svg id=\"trash-btn\"\n      className={(inputController.isTrashMode() ? \"danger \" : \"\") +\n        (inputAdapter.isUsingTouch() && inputAdapter.isDragging() ? \"hidden\" : \"\")}\n      width=\"24\" height=\"24\"\n      viewBox=\"0 0 24 24\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      onMouseEnter={this.onTrashEnter.bind(this)}\n      onMouseLeave={this.onTrashLeave.bind(this)}\n      onClick={this.onTrashClick.bind(this)}>\n      <path d={\"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 \" +\n      \"1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z\"}/>\n    </svg>;\n  }\n}\n\nexport default TrashCan;\n","import React from 'react';\n\nclass PlayIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M8 5v14l11-7z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PlayIcon;\n","import React from 'react';\n\nclass PauseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pause-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PauseIcon;\n","import React from 'react';\n\nclass StopIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"stop-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M6 6h12v12H6z\"/>\n    </svg>;\n  }\n}\n\nexport default StopIcon;\n","import React from 'react';\n\nclass UndoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"undo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n    </svg>;\n  }\n}\n\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"redo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n    </svg>;\n  }\n}\n\nexport default RedoIcon;\n","import React from 'react';\nimport './TestTray.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport PlayIcon from 'icons/PlayIcon.js';\nimport PauseIcon from 'icons/PauseIcon.js';\nimport StopIcon from 'icons/StopIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\n\nconst MAX_STRING_PREV_LENGTH = 2;\nconst MAX_ELLIPSIS_COUNT = 3;\n\nclass TestTray extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const tester = this.props.tester;\n    const testList = this.props.tester.inputList;\n    const testMode = this.props.tester.testMode;\n    const testInput = testList.getCurrentInput();\n    const testIndex = testMode.getCurrentTestStringIndex();\n\n    return <div className=\"test-tray-container\">\n      <div className=\"test-tray-input-string-container\">\n      {\n        testInput && testIndex >= 0 &&\n        testInput.value.split('').map((e, i) => {\n          const testOffset = testIndex - i;\n          if (testOffset > MAX_ELLIPSIS_COUNT + MAX_STRING_PREV_LENGTH) return;\n          if (testOffset > MAX_STRING_PREV_LENGTH)\n          {\n            return <span key={e + \".\" + i} className=\"test-tray-input-placeholder\">.</span>;\n          }\n          return <span key={e + \".\" + i}\n            className={\"test-tray-input-char\" +\n            (testIndex == i ? \" active\" : \"\")}>\n            {e}\n            </span>;\n        })\n      }\n      </div>\n      <div className=\"test-tray-control\">\n\n        <IconButton onClick={(e)=>{\n          testMode.onResume();\n        }} disabled={testMode.isRunning()}>\n          <PlayIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPause();\n        }} disabled={!testMode.isRunning()}>\n          <PauseIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPreviousStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!testMode.hasPrevStep() || testMode.isSkipping()}>\n          <UndoIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onNextStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!tester.testMode.hasNextStep() || testMode.isSkipping()}>\n          <RedoIcon/>\n        </IconButton>\n\n        <IconButton onClick={(e)=>{\n          tester.setStepByStepMode(false);\n        }}>\n          <StopIcon/>\n        </IconButton>\n\n        <div className=\"trash-placeholder\">{/*PLACEHOLDER for TRASH*/}</div>\n      </div>\n    </div>;\n  }\n}\n\nexport default TestTray;\n","import React from 'react';\n\nclass CreateIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"create-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CreateIcon;\n","import React from 'react';\n\nclass MoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"move-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\" />\n    </svg>;\n  }\n}\n\nexport default MoveIcon;\n","import React from 'react';\nimport './CursorMode.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport CreateIcon from 'icons/CreateIcon.js';\nimport MoveIcon from 'icons/MoveIcon.js';\n\nclass CursorMode extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const actionMode = inputController.isActionMode(graphController);\n\n    return <div id=\"cursor-btn\">\n      <IconButton id=\"action-mode\" className={actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(true)}\n        title={I18N.toString(\"cursor.actionmode\")}>\n        <CreateIcon/>\n      </IconButton>\n      <IconButton id=\"move-mode\" className={!actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(false)}\n        title={I18N.toString(\"cursor.movemode\")}>\n        <MoveIcon/>\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default CursorMode;\n","import React from 'react';\n\nimport TrashCan from 'content/viewport/TrashCan.js';\nimport TestTray from 'content/viewport/TestTray.js';\nimport CursorMode from 'content/viewport/CursorMode.js';\n\nclass ViewportRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const viewport = this.props.viewport;\n    const app = this.props.app;\n    const inputController = app.getInputController();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const tester = app.getCurrentModule().getTestingManager();\n\n    return <span>\n    {\n      tester.getStepByStepMode() ?\n      <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n        <TestTray tester={tester} graphController={graphController}/>\n      </div>\n      :\n      <span>\n        <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n          <CursorMode inputController={inputController} graphController={graphController}/>\n        </div>\n        <div className=\"anchor-bottom-right\">\n          <TrashCan inputController={inputController} viewport={viewport}/>\n        </div>\n      </span>\n    }\n    </span>;\n  }\n}\nexport default ViewportRenderer;\n","import Config from 'config.js';\n\nclass MachineLabeler\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.prefix = Config.STR_STATE_LABEL;\n\n    //TODO: this is hooked into the controller in App.js\n    this.shouldAutoLabel = false;\n  }\n\n  sortDefaultNodeLabels()\n  {\n    const startNode = this.graph.getStartNode();\n    if (!startNode) return;\n    const isDefaultInitial = !startNode.getNodeCustom();\n\n    const defaultNodes = [];\n    const customLabels = [];\n    for(const node of this.graph.getNodes())\n    {\n      if (node.getNodeCustom())\n      {\n        customLabels.push(node.getNodeLabel());\n      }\n      else\n      {\n        defaultNodes.push(node);\n      }\n    }\n\n    let index = isDefaultInitial ? 0 : 1;\n    for(const node of defaultNodes)\n    {\n      let defaultName = null;\n      while(customLabels.includes(\n        defaultName = this.getDefaultNodeLabelByIndex(index++))) {}\n\n      node.setNodeLabel(defaultName);\n    }\n  }\n\n  getNextDefaultNodeLabel()\n  {\n    //if (!this.shouldAutoLabel) return this.prefix;\n\n    let nodeIndex = 0;\n    let result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    while(!this.isUniqueNodeLabel(result))\n    {\n      ++nodeIndex;\n      result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    }\n    return result;\n  }\n\n  getDefaultNodeLabelByIndex(index)\n  {\n    return this.prefix + (index);\n  }\n\n  isUniqueNodeLabel(newLabel)\n  {\n    for(const node of this.graph.getNodes())\n    {\n      if (node.getNodeLabel() == newLabel)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n\nexport default MachineLabeler;\n","import Config from 'config.js';\nimport MachineLabeler from './MachineLabeler.js';\n\nconst DEFAULT_AUTO_RENAME = true;\n\nclass MachineBuilder\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.graphController = null;\n\n    this.labeler = new MachineLabeler(graph);\n\n    this.onGraphNodeLabelChange = this.onGraphNodeLabelChange.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.getGraphController();\n\n    this.setAutoRenameNodes(DEFAULT_AUTO_RENAME);\n  }\n\n  destroy()\n  {\n\n  }\n\n  onGraphNodeLabelChange(graph, node, targetNodes, prevX, prevY)\n  {\n    this.labeler.sortDefaultNodeLabels();\n  }\n\n  setAutoRenameNodes(enable)\n  {\n    const prev = this.labeler.shouldAutoLabel;\n    this.labeler.shouldAutoLabel = enable;\n    if (prev != enable && enable)\n    {\n      this.graphController.on(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n    else\n    {\n      this.graphController.removeEventListener(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n  }\n\n  shouldAutoRenameNodes()\n  {\n    return this.labeler.shouldAutoLabel;\n  }\n\n  getLabeler()\n  {\n    return this.labeler;\n  }\n}\n\nexport default MachineBuilder;\n","import React from 'react';\n\nclass StateUnreachableWarningMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        //Locate the target node\n        const target = message.value[this.targetIndex++];\n        if (this.targetIndex >= message.value.length)\n        {\n          this.targetIndex = 0;\n        }\n\n        //Move pointer to target\n        graphController.focusOnNode(target);\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value;\n        //Delete all target nodes\n        graphController.deleteTargetNodes(targets);\n\n        //Sort the nodes after deleting if enabled...\n        machineController.getMachineBuilder().labeler.sortDefaultNodeLabels();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.warning.unreachable\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateUnreachableWarningMessage;\n","import React from 'react';\n\nclass StateMissingTransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.error.missing\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n    </div>;\n  }\n}\n\nexport default StateMissingTransitionErrorMessage;\n","import React from 'react';\n\nimport { ARROW } from 'machine/Symbols.js';\n\nclass TransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += \"(\" + target.getSourceNode().getNodeLabel() + \", \" + (target.getDestinationNode() ? target.getDestinationNode().getNodeLabel() : \"null\") + \") \" + ARROW + \" \" + target.getEdgeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnEdge(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target edges\n        graphController.deleteTargetEdges(targets);\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{this.props.message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default TransitionErrorMessage;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport StateMissingTransitionErrorMessage from 'modules/fsa/notifications/StateMissingTransitionErrorMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\nimport StateErrorMessage from 'modules/fsa/notifications/StateErrorMessage.js';\n\nclass DFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    //This should only run for \"DFA\" machine types...\n    if (this.machineBuilder.getMachineType() != \"DFA\")\n    {\n      throw new Error(\"Invalid machine type to check for DFA errors\");\n    }\n\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let startNode = graph.getStartNode();\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.getEdges())\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeSymbolsFromLabel();\n\n        for(const label of labels)\n        {\n          //check for empty transitions\n          if(label == EMPTY)\n          {\n            //Update cached error targets\n            emptyEdges.push(edge);\n            if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n          }\n          else\n          {\n            if(!nodeTransitionMap.has(from))\n            {\n              nodeTransitionMap.set(from, [label]);\n            }\n            else\n            {\n              //check for duplicate transitions\n              const currentAlphabet = nodeTransitionMap.get(from);\n              if(currentAlphabet.includes(label))\n              {\n                //Update cached error targets\n                dupeEdges.push(edge);\n                if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n              }\n              else\n              {\n                currentAlphabet.push(label);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const missingNodes = [];\n    //Check for missing transitions\n    for(const node of graph.getNodes())\n    {\n      const nodeTransitions = nodeTransitionMap.get(node);\n      if (!nodeTransitions && alphabet.length != 0 ||\n        nodeTransitions && nodeTransitions.length < alphabet.length)\n      {\n        //Get the required missing symbols\n        /*\n        let array;\n        if (nodeTransitions)\n        {\n          array = [];\n          for(const symbol of alphabet)\n          {\n            if (!nodeTransitions.includes(symbol))\n            {\n              array.push(symbol);\n            }\n          }\n        }\n        else\n        {\n          array = alphabet.slice();\n        }\n        */\n\n        //Update cached error targets\n        missingNodes.push(node);\n        if (errorNodes.indexOf(node) == -1) errorNodes.push(node);\n      }\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    if (shouldNotifyErrors)\n    {\n      const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n      //Clear the existing messages\n      Notifications.clearMessages(messageTag);\n\n      //No errors!\n      if (!result)\n      {\n        Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n      }\n      //There are some errors/warnings...\n      else\n      {\n        const props = {graphController: graphController, machineController: machineController};\n        //Add new warning messages\n        const unReachedNodes = this.getUnreachableNodes();\n        if (unReachedNodes.length > 0)\n        {\n          Notifications.addMessage(unReachedNodes,\n            \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n        }\n\n        //Add new error messages\n        if (placeholderEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (emptyEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.empty\"), targets: emptyEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (dupeEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.dupe\"), targets: dupeEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (missingNodes.length > 0)\n        {\n          Notifications.addMessage({targets: missingNodes},\n            \"error\", messageTag, StateMissingTransitionErrorMessage, props, false);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n    const graph = this.graph;\n    const machine = this.machineBuilder.getMachine();\n\n    const states = graph.getNodes().slice();\n    const nextStates = [];\n    nextStates.push(states[0]);\n    states.splice(0, 1);\n\n    while(nextStates.length > 0)\n    {\n      const state = nextStates.pop();\n      const i = states.indexOf(state);\n      if (i >= 0)\n      {\n        states.splice(i, 1);\n        const result = machine.getOutgoingTransitions(state);\n        for(const state of result)\n        {\n          nextStates.push(state);\n        }\n      }\n    }\n\n    return states;\n  }\n}\n\nexport default DFAErrorChecker;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\n\nclass NFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let unReachedNode = graph.getNodes().slice();\n    let startNode = graph.getStartNode();\n    unReachedNode.splice(unReachedNode.indexOf(startNode),1);\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.getEdges())\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeSymbolsFromLabel();\n\n        for(const label of labels)\n        {\n          //remove to from unReachedNode list\n          if (unReachedNode.includes(to)) unReachedNode.splice(unReachedNode.indexOf(to),1);\n        }\n      }\n    }\n\n    //check disconnect states\n    for (const node of unReachedNode)\n    {\n      if (warnNodes.indexOf(node) == -1) warnNodes.push(node);\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n    //Clear the existing messages\n    Notifications.clearMessages(messageTag);\n\n    //No errors!\n    if (!result)\n    {\n      Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n    }\n    //There are some errors/warnings...\n    else\n    {\n      const props = {graphController: graphController, machineController: machineController};\n\n      //Add new warning messages\n      if (unReachedNode.length > 0)\n      {\n        Notifications.addMessage(unReachedNode,\n          \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n      }\n\n      //Add new error messages\n      if (placeholderEdges.length > 0)\n      {\n        Notifications.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n          \"error\", messageTag, TransitionErrorMessage, props, false);\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n\n    const graph = this.graph;\n\n    let unReachedNodes = graph.getNodes().slice();\n\n    //keep start state\n    //unReachedNodes.splice(unReachedNodes.indexOf(unReachedNode.getStartNode()), 1);\n    for(const edge of graph.getEdges()) {\n      const labels = edge.label.split(\",\");\n      for(const label of labels) {\n\n        const from = edge.from;\n        const to = edge.to;\n        //remove to from unReachedNode list\n        if(unReachedNodes.includes(to)) unReachedNodes.splice(unReachedNodes.indexOf(to),1);\n      }\n    }\n    return unReachedNodes;\n  }\n}\n\nexport default NFAErrorChecker;\n","import Config from 'config.js';\n\nimport MachineBuilder from './MachineBuilder.js';\nimport DFAErrorChecker from './DFAErrorChecker.js';\nimport NFAErrorChecker from './NFAErrorChecker.js';\nimport DFA from 'machine/DFA.js';\nimport NFA from 'machine/NFA.js';\nimport Node from 'modules/fsa/graph/FSANode.js';\nimport { SYMBOL_SEPARATOR } from 'modules/fsa/graph/FSAEdge.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass FSABuilder extends MachineBuilder\n{\n  constructor(graph)\n  {\n    super(graph);\n\n    this._machine = new NFA();\n    this._machineType = \"DFA\";\n    this._machineValidDFA = false;\n    this._alphabet = [];\n    this._symbols = [];\n\n    this._savedGraphHash = 0;\n\n    this._timer = null;\n    this._errorTimer = null;\n\n    this.machineErrorChecker = new DFAErrorChecker(this, graph);\n    this.tester = null;\n\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onDelayedGraphChange = this.onDelayedGraphChange.bind(this);\n    this.onDelayedErrorCheck = this.onDelayedErrorCheck.bind(this);\n  }\n\n  initialize(app)\n  {\n    super.initialize(app);\n\n    this.tester = app.getCurrentModule().getTestingManager();\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    this._savedGraphHash = this.graph.getHashCode(false);\n    this.onGraphChange();\n  }\n\n  destroy()\n  {\n    this._savedGraphHash = this.graph.getHashCode(false);\n    this.onGraphChange();\n\n    super.destroy();\n  }\n\n  update()\n  {\n    const graphHash = this.graph.getHashCode(false);\n    if (graphHash !== this._savedGraphHash)\n    {\n      this._savedGraphHash = graphHash;\n      this.onGraphChange(this.graph);\n    }\n  }\n\n  onGraphChange(graph)\n  {\n    if (!this.tester) return;\n\n    if (this._timer)\n    {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n\n    if (this._errorTimer)\n    {\n      clearTimeout(this._errorTimer);\n      this._errorTimer = null;\n    }\n\n    this._timer = setTimeout(this.onDelayedGraphChange, Config.GRAPH_IMMEDIATE_INTERVAL);\n    this._errorTimer = setTimeout(this.onDelayedErrorCheck,\n      this.tester.isImmediateErrorCheck ? (Config.GRAPH_IMMEDIATE_INTERVAL * 2) : Config.ERROR_CHECK_INTERVAL);\n  }\n\n  onDelayedGraphChange()\n  {\n    this._machine.clear();\n    const result = this.toNFA(this._machine);\n    for(const s of this._symbols)\n    {\n      this._machine.newSymbol(s);\n    }\n    this._machineValidDFA = this._machine.isValidDFA();\n  }\n\n  onDelayedErrorCheck()\n  {\n    if (!this.tester.shouldCheckError) return;\n\n    this.machineErrorChecker.checkErrors(true, this.graphController, this.machineController);\n  }\n\n  formatAlphabetString(string, allowNull=false)\n  {\n    const symbols = string.split(SYMBOL_SEPARATOR);\n    const result = new Set();\n\n    let symbol = \"\";\n    let symbolLength = 0;\n    const length = symbols.length;\n    for(let i = 0; i < length; ++i)\n    {\n      symbol = symbols[i].trim();\n      symbolLength = symbol.length;\n      //If the symbol has none or more than 1 char\n      if (symbolLength !== 1)\n      {\n        //Remove symbol (by not adding to result)\n\n        //Divide multi-char symbol into smaller single char symbols\n        if (symbolLength > 1)\n        {\n          for(let subsymbol of symbol.split(\"\"))\n          {\n            subsymbol = subsymbol.trim();\n            if (!result.has(subsymbol))\n            {\n              result.add(subsymbol);\n            }\n          }\n        }\n      }\n      else\n      {\n        result.add(symbol);\n      }\n    }\n\n    //If it is an empty string...\n    if (result.size === 0) return allowNull ? null : EMPTY;\n    return Array.from(result).join(SYMBOL_SEPARATOR);\n  }\n\n  setMachineType(machineType)\n  {\n    if (this._machineType == machineType) return;\n\n    this._machineType = machineType;\n    if (machineType == \"DFA\")\n    {\n      this.machineErrorChecker = new DFAErrorChecker(this, this.graph);\n    }\n    else if (machineType == \"NFA\")\n    {\n      this.machineErrorChecker = new NFAErrorChecker(this, this.graph);\n    }\n    else\n    {\n      throw new Error(\"Cannot find error checker for machine type \\'\" + machineType + \"\\'\");\n    }\n\n    this.onGraphChange();\n  }\n\n  getMachineType()\n  {\n    return this._machineType;\n  }\n\n  addCustomSymbol(symbol)\n  {\n    this._symbols.push(symbol);\n\n    this.onGraphChange();\n  }\n\n  removeCustomSymbol(symbol)\n  {\n    this._symbols.splice(this._symbols.indexOf(symbol), 1);\n\n    this.onGraphChange();\n  }\n\n  renameCustomSymbol(prevSymbol, nextSymbol)\n  {\n    const i = this._symbols.indexOf(prevSymbol);\n    if (i <= 0) throw new Error(\"Trying to rename unknown symbol \\'\" + prevSymbol + \"\\'\");\n    this._symbols[i] = nextSymbol;\n\n    this.onGraphChange();\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._symbols.includes(symbol);\n  }\n\n  getAlphabet()\n  {\n    const machine = this.getMachine();\n    this._alphabet.length = 0;\n    machine.getAlphabet(this._alphabet);\n    return this._alphabet;\n  }\n\n  isValidMachine()\n  {\n    if (this._machineType == \"DFA\")\n    {\n      return this._machineValidDFA;\n    }\n    else\n    {\n      return true;\n    }\n  }\n\n  toDFA(dst = null)\n  {\n    const result = dst || new DFA();\n    if (!(result instanceof DFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  toNFA(dst=null)\n  {\n    const result = dst || new NFA();\n    if (!(result instanceof NFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  getMachine()\n  {\n    return this._machine;\n  }\n}\n\nfunction fillFSA(graph, fsa)\n{\n  if (graph.getNodes().length <= 0) return fsa;\n  //Create all the nodes\n  for(const node of graph.getNodes())\n  {\n    try\n    {\n      let state = node.getNodeLabel();\n      fsa.newState(state);\n\n      //Set final state\n      if (node.getNodeAccept())\n      {\n        fsa.setFinalState(state, true);\n      }\n    }\n    catch(e)\n    {\n      throw e;\n    }\n  }\n\n  //Create all the edges\n  for(const edge of graph.getEdges())\n  {\n    //Ignore any incomplete edges\n    if (edge.isPlaceholder()) continue;\n    const from = edge.getSourceNode();\n    const to = edge.getDestinationNode();\n    if (from instanceof Node && to instanceof Node)\n    {\n      const labels = edge.getEdgeSymbolsFromLabel();\n      for(const label of labels)\n      {\n        try\n        {\n          fsa.newTransition(from.getNodeLabel(), to.getNodeLabel(), label);\n        }\n        catch(e)\n        {\n          throw e;\n        }\n      }\n    }\n  }\n\n  //Set start state\n  let startState = graph.getStartNode().getNodeLabel();\n  fsa.setStartState(startState);\n\n  return fsa;\n}\n\nexport default FSABuilder;\n","class EventHandler\n{\n  constructor(eventLogger, controller, eventName, postEventName)\n  {\n    this.eventLogger = eventLogger;\n    this.controller = controller;\n    this.eventName = eventName;\n    this.postEventName = postEventName || null;\n\n    this.onEvent = this.onEvent.bind(this);\n\n    this.controller.on(this.eventName, this.onEvent);\n  }\n\n  destroy()\n  {\n    this.controller.removeEventListener(this.eventName, this.onEvent);\n  }\n\n  onEvent(...args)\n  {\n    const result = {};\n    result.applyUndo = this.applyUndo.bind(this, result);\n    result.applyRedo = this.applyRedo.bind(this, result);\n\n    result.eventData = this.captureEvent(...args);\n\n    if (this.postEventName)\n    {\n      //Wait for post event to finalize event\n      this.controller.once(this.postEventName, (...args) => {\n        result.postData = this.capturePostEvent(...args);\n\n        this.eventLogger.captureEvent(result);\n      });\n    }\n    else\n    {\n      result.postData = result.eventData;\n\n      //Finalize event right now\n      this.eventLogger.captureEvent(result);\n    }\n  }\n\n  captureEvent(...args)\n  {\n    return {};\n  }\n\n  capturePostEvent(...args)\n  {\n    return {};\n  }\n\n  applyUndo(e)\n  {\n\n  }\n\n  applyRedo(e)\n  {\n\n  }\n}\n\nexport default EventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeInitial\");\n  }\n\n  //Override\n  captureEvent(graph, nextInitial, prevInitial)\n  {\n    return {\n      graph: graph,\n      nodeID: nextInitial.getGraphElementID(),\n      prevID: prevInitial.getGraphElementID()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.prevID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetNode, nextX, nextY, prevX, prevY)\n  {\n    return {\n      graph: graph,\n      nodeID: targetNode.getGraphElementID(),\n      nextX: nextX,\n      nextY: nextY,\n      prevX: prevX,\n      prevY: prevY\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.x = e.eventData.prevX;\n    node.y = e.eventData.prevY;\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n    \n    node.x = e.eventData.nextX;\n    node.y = e.eventData.nextY;\n  }\n}\nexport default GraphNodeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveAllEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMoveAll\");\n  }\n\n  //Override\n  captureEvent(graph, nodes, dx, dy)\n  {\n    return {\n      graph: graph,\n      nodeIDs: nodes.map(e => e.getGraphElementID()),\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x += e.eventData.dx;\n      node.y += e.eventData.dy;\n    }\n  }\n}\nexport default GraphNodeMoveAllEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextQuad, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextQuad: Object.assign({}, nextQuad),\n      prevQuad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.prevQuad.radians, e.eventData.prevQuad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.nextQuad.radians, e.eventData.nextQuad.length);\n  }\n}\nexport default GraphEdgeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeDestination\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextDestination, prevDestination, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextDestination: nextDestination,\n      prevDestination: prevDestination,\n      nextQuad: Object.assign({}, targetEdge.getQuadratic()),\n      prevQuad: Object.assign({}, prevQuad),\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.prevQuad.radians;\n    const length = e.eventData.prevQuad.length;\n\n    edge.changeDestinationNode(e.eventData.prevDestination);\n    //Flip them, since self loops are upside down\n    if (edge.isSelfLoop()) radians = -radians;\n    edge.setQuadratic(radians, length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.nextQuad.radians;\n    const length = e.eventData.nextQuad.length;\n\n    edge.changeDestinationNode(e.eventData.nextDestination);\n    edge.setQuadratic(radians, length);\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeLabelEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeLabel\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextLabel, prevLabel)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.prevLabel);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.nextLabel);\n  }\n}\nexport default GraphEdgeLabelEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateNode\");\n  }\n\n  //Override\n  captureEvent(graph, node)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      x: node.x,\n      y: node.y,\n      accept: node.getNodeAccept(),\n      label: node.getNodeLabel(),\n      custom: node.getNodeCustom()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteNode(node);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node)\n    {\n      node = graph.createNode(e.postData.x, e.postData.y, e.postData.nodeID);\n    }\n    else\n    {\n      node.x = e.postData.x;\n      node.y = e.postData.y;\n    }\n    node.setNodeLabel(e.postData.label);\n    node.setNodeAccept(e.postData.accept);\n    node.setNodeCustom(e.postData.custom);\n  }\n}\nexport default UserCreateNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserToggleNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userToggleNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, prevAccept)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      prevAccept: prevAccept\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(e.eventData.prevAccept);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(!e.eventData.prevAccept);\n  }\n}\nexport default UserToggleNodeEventHandler;\n","import FSAGraph from './FSAGraph.js';\nimport { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst GRAPH_PARSER_VERSION = \"1.0.0\";\n\nexport const JSON = {\n  parse(data, dst=null)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeDatas = data['nodes'] || [];\n    const nodeCount = Math.min(nodeDatas.length || 0, data['nodeCount'] || 0);\n    const edgeDatas = data['edges'] || [];\n    const edgeCount = Math.min(edgeDatas.length || 0, data['edgeCount'] || 0);\n    const initialIndex = data['initial'] || 0;\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeData = nodeDatas[i];\n      if (!nodeData) continue;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(nodeData['x'] || 0, nodeData['y'] || 0, nodeData['id']);\n      node.setNodeLabel(nodeData['label'] || \"\");\n      node.setNodeAccept(nodeData['accept'] || false);\n      node.setNodeCustom(nodeData['custom'] || false);\n\n      nodeIndices.set(i, node);\n    }\n\n    const initialNode = nodeIndices.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeData = edgeDatas[i];\n      if (!edgeData) continue;\n      const sourceNode = nodeIndices.get(edgeData['from']) || null;\n      //Cannot create source-less edges\n      if (!sourceNode) continue;\n      const destinationNode = nodeIndices.get(edgeData['to']) || null;\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode, edgeData['id']);\n      const quadData = edgeData['quad'] || {};\n      edge.setEdgeLabel(edgeData['label'] || \"\");\n      edge.setQuadratic(quadData['radians'] || 0, quadData['length'] || 0);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const nodeDatas = new Array(nodeCount);\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      if (node)\n      {\n        //NOTE: Assumes node must have an id\n        const elementID = node.getGraphElementID();\n\n        nodeIndices.set(node, i);\n        nodeDatas[i] = {\n          id: elementID,\n          x: node.x || 0, y: node.y || 0,\n          label: node.getNodeLabel() || \"\",\n          accept: node.getNodeAccept() || false,\n          custom: node.getNodeCustom() || false\n        };\n      }\n    }\n\n    const edgeDatas = new Array(edgeCount);\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edge = graphEdges[i];\n      if (edge)\n      {\n        //NOTE: Assumes edge must have an id\n        const elementID = edge.getGraphElementID();\n\n        const quad = edge.getQuadratic() || {};\n        const edgeSource = edge.getSourceNode();\n        const edgeDestination = edge.getDestinationNode();\n        const sourceIndex = nodeIndices.has(edgeSource) ? nodeIndices.get(edgeSource) : -1;\n        const destinationIndex = nodeIndices.has(edgeDestination) ? nodeIndices.get(edgeDestination) : -1;\n        edgeDatas[i] = {\n          id: elementID,\n          from: sourceIndex,\n          to: destinationIndex,\n          quad: { radians: quad['radians'] || 0, length: quad['length'] || 0 },\n          label: edge.getEdgeLabel() || \"\"\n        };\n      }\n    }\n\n    const initialIndex = nodeIndices.get(graphInitial) || 0;\n\n    return {\n      nodeCount: nodeCount,\n      nodes: nodeDatas,\n      edgeCount: edgeCount,\n      edges: edgeDatas,\n      initial: initialIndex,\n      _version: GRAPH_PARSER_VERSION\n    };\n  }\n};\n\nexport const XML = {\n  parse(data, dst=NULL)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeElements = data.getElementsByTagName('state') || [];\n    const nodeCount = nodeElements.length;\n    const edgeElements = data.getElementsByTagName('transition') || [];\n    const edgeCount = edgeElements.length;\n    let initialIndex = \"0\";\n\n    //Get the nodes...\n    const nodeElementIDs = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeElement = nodeElements[i];\n      if (!nodeElement) continue;\n      const nodeElementID = nodeElement.getAttribute('id');\n      if (!nodeElementID) continue;\n\n      //Get x value\n      let x = 0;\n      const xElements = nodeElement.getElementsByTagName('x');\n      //If no elements exists, we are guaranteed an empty list...\n      if (xElements.length > 0)\n      {\n        const xElement = xElements[0];\n        if (xElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const xValue = xElement.childNodes[0];\n          if (xValue)\n          {\n            try\n            {\n              x = parseFloat(xValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              x = 0;\n            }\n          }\n        }\n      }\n\n      //Get y value\n      let y = 0;\n      const yElements = nodeElement.getElementsByTagName('y');\n      //If no elements exists, we are guaranteed an empty list...\n      if (yElements.length > 0)\n      {\n        const yElement = yElements[0];\n        if (yElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const yValue = yElement.childNodes[0];\n          if (yValue)\n          {\n            try\n            {\n              y = parseFloat(yValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              y = 0;\n            }\n          }\n        }\n      }\n\n      //Get initial flag\n      const initialElements = nodeElement.getElementsByTagName('initial');\n      //If no elements exists, we are guaranteed an empty list...\n      const initial = initialElements.length > 0;\n\n      //Get final flag\n      const finalElements = nodeElement.getElementsByTagName('final');\n      //If no elements exists, we are guaranteed an empty list...\n      const final = finalElements.length > 0;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(x, y);\n      node.setNodeLabel(nodeElement.getAttribute('name') || \"\");\n      node.setNodeAccept(final);\n\n      if (initial) initialIndex = nodeElementID;\n      nodeElementIDs.set(nodeElementID, node);\n    }\n\n    //Set the initial node...\n    const initialNode = nodeElementIDs.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    //Readjust the center of graph...\n    const boundingRect = dst.getBoundingRect();\n    const minX = boundingRect.minX;\n    const minY = boundingRect.minY;\n    const width = boundingRect.width;\n    const height = boundingRect.height;\n    const graphNodes = dst.getNodes();\n    for(let i = 0, len = graphNodes.length; i < len; ++i)\n    {\n      graphNodes[i].x -= minX + width / 2;\n      graphNodes[i].y -= minY + height / 2;\n    }\n\n    //Get the transitions...\n    const transitionMapping = new Map();\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeElement = edgeElements[i];\n      if (!edgeElement) continue;\n\n      //Get from value\n      let sourceID = null;\n      const fromElements = edgeElement.getElementsByTagName('from');\n      //If no elements exists, we are guaranteed an empty list...\n      if (fromElements.length > 0)\n      {\n        const fromElement = fromElements[0];\n        if (fromElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const fromValue = fromElement.childNodes[0];\n          if (fromValue)\n          {\n            sourceID = fromValue.nodeValue;\n          }\n        }\n      }\n\n      //Cannot create source-less edges\n      if (!nodeElementIDs.has(sourceID)) continue;\n\n      //Get to value\n      let destinationID = \"\";\n      const toElements = edgeElement.getElementsByTagName('to');\n      //If no elements exists, we are guaranteed an empty list...\n      if (toElements.length > 0)\n      {\n        const toElement = toElements[0];\n        if (toElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const toValue = toElement.childNodes[0];\n          if (toValue)\n          {\n            destinationID = toValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      //Get read value\n      let symbol = \"\";\n      const readElements = edgeElement.getElementsByTagName('read');\n      //If no elements exists, we are guaranteed an empty list...\n      if (readElements.length > 0)\n      {\n        const readElement = readElements[0];\n        if (readElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const readValue = readElement.childNodes[0];\n          if (readValue)\n          {\n            symbol = readValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      const transitionID = sourceID + \"\\n\" + destinationID;\n      let symbols;\n      if (transitionMapping.has(transitionID))\n      {\n        symbols = transitionMapping.get(transitionID);\n      }\n      else\n      {\n        symbols = [];\n        transitionMapping.set(transitionID, symbols);\n      }\n      symbols.push(symbol);\n    }\n\n    for(const transitionKey of transitionMapping.keys())\n    {\n      const key = transitionKey.split(\"\\n\");\n      if (key.length !== 2) continue;\n\n      const symbols = transitionMapping.get(transitionKey);\n      const label = symbols.join(SYMBOL_SEPARATOR);\n      //Should never be null, since it was checked before...\n      const sourceNode = nodeElementIDs.get(key[0]);\n      const destinationNode = nodeElementIDs.get(key[1]);\n\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode);\n      edge.setEdgeLabel(label);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const header = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\" +\n      \"<!--Created with flap.js \" + GRAPH_PARSER_VERSION + \"-->\" +\n      \"<structure></structure>\";\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(header, \"application/xml\");\n    const structure = doc.getElementsByTagName(\"structure\")[0];\n\n    const type = doc.createElement(\"type\");\n    type.innerHTML = \"fa\"; //finite automata\n    structure.appendChild(type);\n\n    const automaton = doc.createElement(\"automaton\");\n    structure.appendChild(automaton);\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      nodeIndices.set(node, i);\n\n      //state tag\n      const state = doc.createElement(\"state\");\n      state.id = \"\" + i;\n      state.setAttribute(\"name\", node.getNodeLabel());\n      automaton.appendChild(state);\n\n      //x tag\n      const x = doc.createElement(\"x\");\n      x.innerHTML = \"\" + (node.x || 0);\n      state.appendChild(x);\n\n      //y tag\n      const y = doc.createElement(\"y\");\n      y.innerHTML = \"\" + (node.y || 0);\n      state.appendChild(y);\n\n      //initial tag\n      if (graphInitial === node)\n      {\n        state.appendChild(doc.createElement(\"initial\"));\n      }\n\n      //final tag\n      if (node.getNodeAccept())\n      {\n        state.appendChild(doc.createElement(\"final\"));\n      }\n    }\n\n    for(let edge of graphEdges)\n    {\n      const symbols = edge.getEdgeSymbolsFromLabel();\n      for(let symbol of symbols)\n      {\n        //transition tag\n        const transition = doc.createElement(\"transition\");\n        automaton.appendChild(transition);\n\n        //from tag\n        const from = doc.createElement(\"from\");\n        from.innerHTML = \"\" + (nodeIndices.get(edge.getSourceNode()) || 0);\n        transition.appendChild(from);\n\n        //to tag\n        const to = doc.createElement(\"to\");\n        to.innerHTML = \"\" + (nodeIndices.get(edge.getDestinationNode()) || 0);\n        transition.appendChild(to);\n\n        //read tag\n        const read = doc.createElement(\"read\");\n        read.innerHTML = \"\" + (symbol || \"\");\n        transition.appendChild(read);\n      }\n    }\n\n    return doc;\n  }\n};\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteNodesEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteNodes\", \"userPostDeleteNodes\");\n  }\n\n  //Override\n  captureEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    const targets = [];\n    for(const target of targetNodes)\n    {\n      targets.push(target.getGraphElementID());\n    }\n    const dx = node.x - prevX;\n    const dy = node.y - prevY;\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      targets: targets,\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override\n  capturePostEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n    for(const targetID of e.eventData.targets)\n    {\n      const node = graph.getNodeByElementID(targetID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default UserDeleteNodesEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userRenameNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, nextLabel, prevLabel, isPrevCustom)\n  {\n    return {\n      node: node,\n      nodeID: node.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel,\n      prevCustom: isPrevCustom\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.prevLabel);\n    node.setNodeCustom(e.eventData.prevCustom);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.nextLabel);\n    node.setNodeCustom(true);\n  }\n}\nexport default UserRenameNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge)\n  {\n    const edgeQuad = edge.getQuadratic();\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: edge.getDestinationNode() ? edge.getDestinationNode().getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: { radians: edgeQuad.radians, length: edgeQuad.length }\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: when formatting edges change an edge different than this one, it does not revert them.\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.postData.edgeID);\n\n    const from = graph.getNodeByElementID(e.postData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.postData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.postData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.postData.label);\n    edge.setQuadratic(e.postData.quad.radians, e.postData.quad.length);\n  }\n}\nexport default UserCreateEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserDeleteEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge, prevTo, prevQuad)\n  {\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: prevTo ? prevTo.getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.eventData.edgeID);\n\n    const from = graph.getNodeByElementID(e.eventData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.eventData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.eventData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.eventData.label);\n    edge.setQuadratic(e.eventData.quad.radians, e.eventData.quad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n}\nexport default UserDeleteEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserImportGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, machineController)\n  {\n    super(eventLogger, graphController, \"userPreImportGraph\", \"userPostImportGraph\");\n\n    this.machineController = machineController;\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.eventData.graphName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.postData.graphName);\n  }\n}\nexport default UserImportGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass SafeGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, eventName, postEventName)\n  {\n    super(eventLogger, graphController, eventName, postEventName);\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default SafeGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserChangeMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userChangeMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    return {\n      prevType: prevMachineType,\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserChangeMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserConvertMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreConvertMachine\", \"userPostConvertMachine\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      prevType: prevMachineType\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserConvertMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userRenameMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineName, prevMachineName)\n  {\n    return {\n      prevName: prevMachineName,\n      nextName: nextMachineName\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineName(e.eventData.prevName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineName(e.postData.nextName);\n  }\n}\nexport default UserRenameMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserRenameSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreRenameSymbol\", \"userPostRenameSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol, prevSymbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, prevSymbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserRenameSymbolEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreDeleteSymbol\", \"userPostDeleteSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserDeleteSymbolEventHandler;\n","import GraphNodeInitialEventHandler from './controller/events/GraphNodeInitialEventHandler.js';\nimport GraphNodeMoveEventHandler from './controller/events/GraphNodeMoveEventHandler.js';\nimport GraphNodeMoveAllEventHandler from './controller/events/GraphNodeMoveAllEventHandler.js';\nimport GraphEdgeMoveEventHandler from './controller/events/GraphEdgeMoveEventHandler.js';\nimport GraphEdgeDestinationEventHandler from './controller/events/GraphEdgeDestinationEventHandler.js';\nimport GraphEdgeLabelEventHandler from './controller/events/GraphEdgeLabelEventHandler.js';\n\nimport UserCreateNodeEventHandler from './controller/events/UserCreateNodeEventHandler.js';\nimport UserToggleNodeEventHandler from './controller/events/UserToggleNodeEventHandler.js';\nimport UserDeleteNodesEventHandler from './controller/events/UserDeleteNodesEventHandler.js';\nimport UserRenameNodeEventHandler from './controller/events/UserRenameNodeEventHandler.js';\n\nimport UserCreateEdgeEventHandler from './controller/events/UserCreateEdgeEventHandler.js';\nimport UserDeleteEdgeEventHandler from './controller/events/UserDeleteEdgeEventHandler.js';\nimport UserImportGraphEventHandler from './controller/events/UserImportGraphEventHandler.js';\nimport SafeGraphEventHandler from './controller/events/SafeGraphEventHandler.js';\n\nimport UserChangeMachineEventHandler from './controller/events/UserChangeMachineEventHandler.js';\nimport UserConvertMachineEventHandler from './controller/events/UserConvertMachineEventHandler.js';\nimport UserRenameMachineEventHandler from './controller/events/UserRenameMachineEventHandler.js';\nimport UserRenameSymbolEventHandler from './controller/events/UserRenameSymbolEventHandler.js';\nimport UserDeleteSymbolEventHandler from './controller/events/UserDeleteSymbolEventHandler.js';\n\nclass EventManager\n{\n  constructor(undoManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.eventHandlers = [];\n\n    this.undoManager = undoManager;\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    const graph = this.graphController.getGraph();\n    const events = this.undoManager;\n\n    this.eventHandlers.push(new GraphNodeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeMoveAllEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeDestinationEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeInitialEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeLabelEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserRenameNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserToggleNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteNodesEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateEdgeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteEdgeEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserImportGraphEventHandler(events, this.graphController, this.machineController));\n    this.eventHandlers.push(new SafeGraphEventHandler(events, this.graphController, \"userPreChangeLayout\", \"userPostChangeLayout\"));\n\n    this.eventHandlers.push(new UserChangeMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserConvertMachineEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserRenameMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserRenameSymbolEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserDeleteSymbolEventHandler(events, this.machineController, this.graphController));\n  }\n\n  destroy()\n  {\n    for(const handler of this.eventHandlers)\n    {\n      handler.destroy();\n    }\n\n    //TODO: Remove all event listeners...\n    this.graphController.clearEventListeners();\n  }\n}\n\nexport default EventManager;\n","import React from 'react';\nimport './LabelEditor.css';\n\nimport Config from 'config.js';\nimport { SYMBOL_SEPARATOR, EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\n//TODO: This is equivalent to 4em for toolbar height\nconst LABEL_OFFSET_Y = -64;\nconst EDITOR_OFFSET_Y = -36;\nconst DELETE_KEY = 8;\nconst DELETE_FORWARD_KEY = 46;\n\nconst RECOMMENDED_SYMBOLS = [\"0\", \"1\"];\nconst DEFAULT_SYMBOLS = [EMPTY_CHAR];\nconst DELETE_ON_EMPTY = true;\n\nclass LabelEditor extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.parentElement = null;\n    this.inputElement = null;\n\n    //HACK: this is so if the click is focused back to the label editor, then it will NOT close\n    this._timer = null;\n    this._prevValue = \"\";\n\n    this.state = {\n      target: null,\n      callback: null\n    };\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFormat = this.onFormat.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  openEditor(targetEdge, defaultText=null, replace=true, callback=null)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    this.setState((prev, props) => {\n      return {\n        target: targetEdge,\n        callback: callback\n      };\n    });\n\n    this.inputElement.resetValue(targetEdge.getEdgeLabel(), () => {\n      if (defaultText) this.inputElement.setValue(defaultText);\n\n      this._prevValue = targetEdge.getEdgeLabel();\n      this.parentElement.focus();\n      this.inputElement.focus(replace);\n    });\n  }\n\n  closeEditor(saveOnExit=false)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    //Save data\n    if (this.state.target !== null)\n    {\n      if (saveOnExit)\n      {\n        let value = this.inputElement.value;\n        this.state.target.setEdgeLabel(value);\n      }\n      else\n      {\n        if (!this.state.target.getEdgeLabel())\n        {\n          //Make sure its empty (and let edge handle default labels)\n          this.state.target.setEdgeLabel(null);\n\n          //Delete it since it is not a valid edge\n          if (DELETE_ON_EMPTY)\n          {\n            this.props.graphController.getGraph().deleteEdge(this.state.target);\n          }\n        }\n      }\n\n      this.setState({target: null});\n\n      if (this.state.callback) this.state.callback();\n    }\n\n    //Reset label editor\n    this.inputElement.blur();\n  }\n\n  hasFocus()\n  {\n    return this.inputElement.hasFocus();\n  }\n\n  isEditorOpen()\n  {\n    return this.state.target !== null;\n  }\n\n  onContextMenu(e)\n  {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  appendSymbol(symbol)\n  {\n    this.inputElement.appendValue(symbol, SYMBOL_SEPARATOR);\n    this.inputElement.focus(false);\n  }\n\n  onSubmit(newValue, prevValue)\n  {\n    //this._prevValue = newValue;\n    //If the value has changed or the value remained empty...\n    if (newValue != prevValue)\n    {\n      //this.closeEditor(true);\n    }\n    else\n    {\n      //TODO: This was commented out for some reason...\n      //Will close due to timer...\n      this.closeEditor(false);\n    }\n  }\n\n  onFormat(value)\n  {\n    //return this.props.machineController.getMachineBuilder().formatAlphabetString(value, true);\n    return this.props.machineController.getLabelFormatter().call(null, value, true);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const viewport = inputController.getInputAdapter().getViewport();\n    const graphController = this.props.graphController;//This is used in closeEditor()\n    const machineController = this.props.machineController;//This is also used in callbacks\n    const screen = this.props.screen;\n\n    const targetStyle = {\n      visibility: \"hidden\"\n    };\n\n    const target = this.state.target;\n\n    if (target)\n    {\n      targetStyle.visibility = \"visible\";\n\n      //Assumes target is an instance of Edge\n      const center = target.getCenterPoint();\n      const screenPos = transformViewToScreen(screen,\n        center.x + viewport.getOffsetX(),\n        center.y + viewport.getOffsetY());\n      const x = screenPos.x;\n      const y = screenPos.y + LABEL_OFFSET_Y + EDITOR_OFFSET_Y;\n      const offsetX = -(this.parentElement.offsetWidth / 2);\n      const offsetY = -(this.parentElement.offsetHeight / 2);\n\n      targetStyle.top = (y + offsetY) + \"px\";\n      targetStyle.left = (x + offsetX) + \"px\";\n    }\n\n    const usedAlphabet = machineController.getMachineBuilder().getMachine().getAlphabet();\n\n    return <div className=\"bubble\" id=\"label-editor\" ref={ref=>this.parentElement=ref}\n      tabIndex={\"0\"/*This is to allow div's to focus/blur*/}\n      style={targetStyle}\n      onContextMenu={this.onContextMenu}\n      onFocus={(e)=>{\n        //HACK: delete the timer that will exit labelEditor\n        clearTimeout(this._timer);\n      }}\n      onBlur={(e)=>{\n        //HACK: start the timer that will exit labelEditor if not return focus\n        this._timer = setTimeout(() => this.closeEditor(true), 10);\n      }}>\n      <FormattedInput className=\"label-editor-input\" ref={ref=>this.inputElement=ref}\n        formatter={this.onFormat}\n        onSubmit={this.onSubmit}\n        captureOnExit={\"none\"}/>\n      <div className=\"label-editor-tray\">\n        {\n          usedAlphabet &&\n          <span className=\"label-editor-tray-used\">\n            {\n              usedAlphabet.map((e, i) => {\n                if (e.length < 1) return null;\n                return <button key={i} onClick={ev=>this.appendSymbol(e)}>{e}</button>\n              })\n            }\n          </span>\n        }\n        <span className=\"label-editor-tray-default\">\n          {\n            usedAlphabet &&\n            usedAlphabet.length <= 1 &&\n            RECOMMENDED_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n          {\n            DEFAULT_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n  const ctm = svg.getScreenCTM();\n  return {\n    x: (x * ctm.a) + ctm.e,\n    y: (y * ctm.d) + ctm.f\n  };\n}\n\nexport default LabelEditor;\n","//https://www.flaticon.com/free-icon/json-file_136525\nimport React from 'react';\n\nclass JSONIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"json-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 \" +\n            \"s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 \" +\n            \"s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 \" +\n            \"s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 \" +\n            \"s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 \" +\n            \"s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 \" +\n            \"s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 \" +\n            \"s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 \" +\n            \"c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 \" +\n            \"c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 \" +\n            \"s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 \" +\n            \"s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 \" +\n            \"s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 \" +\n            \"s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 \" +\n            \"s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 \" +\n            \"s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 \" +\n            \"s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 \" +\n            \"s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 \" +\n            \"s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 \" +\n            \"s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 \" +\n            \"s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n          <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        </g>\n        <g>\n          <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n          <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n          <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n          <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JSONIcon;\n","import AbstractGraphExporter from 'modules/base/exporter/AbstractGraphExporter.js';\n\nimport JSONIcon from 'icons/flat/JSONIcon.js';\nimport { JSON as JSONGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport Downloader from 'util/Downloader.js';\n\nclass FSAGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  fromJSON(data, app)\n  {\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const machineBuilder = machineController.getMachineBuilder();\n    const graph = graphController.getGraph();\n\n    const metadata = '_metadata' in data ? data['_metadata'] : {};\n    const newGraph = JSONGraphParser.parse(data.graphData, graph);\n\n    //HACK: this should be calculated elsewhere\n    const machineData = data.machineData;\n    const machineName = machineData.name;\n    if (machineName) machineController.setMachineName(machineName);\n    const machineType = machineData.type;\n    if (machineType) machineController.setMachineType(machineType);\n    const customSymbols = machineData.symbols;\n    if (customSymbols)\n    {\n      machineBuilder._symbols.length = 0;\n      for(const symbol of customSymbols)\n      {\n        machineBuilder._symbols.push(symbol);\n      }\n    }\n    const statePrefix = machineData.statePrefix;\n    if (statePrefix) machineBuilder.getLabeler().prefix = statePrefix;\n\n    return newGraph;\n  }\n\n  toJSON(graphData, app)\n  {\n    const module = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    const dst = {};\n    dst[\"_metadata\"] = {\n      module: module.getModuleName(),\n      version: process.env.VERSION + \":\" + module.getModuleVersion(),\n      timestamp: new Date().toString()\n    };\n    dst[\"graphData\"] = graphData;\n    dst[\"machineData\"] = {\n      name: machineController.getMachineName(),\n      type: machineController.getMachineType(),\n      symbols: machineController.getCustomSymbols(),\n      statePrefix: machineBuilder.getLabeler().prefix\n    };\n    return dst;\n  }\n\n  //Override\n  importFromData(data, app)\n  {\n    this.fromJSON(data, app);\n  }\n\n  //Override\n  exportToData(app)\n  {\n    const graph = app.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const result = this.toJSON(graphData, app);\n    return result;\n  }\n\n  //Override\n  doesSupportData()\n  {\n    return true;\n  }\n\n  //Override\n  importFromFile(fileBlob, app)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = app.getGraphController();\n        const machineController = app.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const jsonData = JSON.parse(data);\n\n          this.fromJSON(jsonData, app);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, app)\n  {\n    const graph = app.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const dst = this.toJSON(graphData, app);\n    const jsonString = JSON.stringify(dst);\n    Downloader.downloadText(filename + '.fsa.' + this.getFileType(), jsonString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.machine.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.machine\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"json\";\n  }\n\n  //Override\n  getIconComponentClass()\n  {\n    return JSONIcon;\n  }\n}\n\nexport default FSAGraphExporter;\n","//https://www.flaticon.com/free-icon/xml_136526\nimport React from 'react';\n\nclass XMLIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"xml-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#F29C1F\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z\"/>\n          <path fill=\"#FFFFFF\" d=\"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z\"/>\n        </g>\n        <path fill=\"#F29C1F\" d=\"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default XMLIcon;\n","import AbstractGraphExporter from 'modules/base/exporter/AbstractGraphExporter.js';\n\nimport XMLIcon from 'icons/flat/XMLIcon.js';\nimport { XML as XMLGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport Downloader from 'util/Downloader.js';\n\nclass JFLAPGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  //Override\n  importFromFile(fileBlob, app)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = app.getGraphController();\n        const machineController = app.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const xmlData = new DOMParser().parseFromString(data, \"text/xml\");\n          XMLGraphParser.parse(xmlData, graph);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, app)\n  {\n    const graph = app.getGraphController().getGraph();\n    const graphData = XMLGraphParser.objectify(graph);\n    const xmlString = new XMLSerializer().serializeToString(graphData);\n    Downloader.downloadText(filename + '.' + this.getFileType(), xmlString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.jff.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.jff\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"jff\";\n  }\n\n  //Override\n  getIconComponentClass()\n  {\n    return XMLIcon;\n  }\n}\n\nexport default JFLAPGraphExporter;\n","import AbstractModule from 'modules/base/AbstractModule.js';\n\nimport Notifications from 'system/notification/Notifications.js';\n\nimport OverviewPanel from './panels/overview/OverviewPanel.js';\nimport TestingPanel from './panels/testing/TestingPanel.js';\nimport AnalysisPanel from './panels/analysis/AnalysisPanel.js';\nimport AboutPanel from './panels/about/AboutPanel.js';\n\nimport InputController from './controller/InputController.js';\nimport GraphController from './controller/GraphController.js';\nimport MachineController from './controller/MachineController.js';\n\nimport FSAGraphRenderer from './graph/renderer/FSAGraphRenderer.js';\nimport FSAGraphOverlayRenderer from './graph/renderer/FSAGraphOverlayRenderer.js';\nimport ViewportRenderer from './renderer/ViewportRenderer.js';\n\nimport FSABuilder from './builder/FSABuilder.js';\nimport GraphLayout from './graph/GraphLayout.js';\nimport EventManager from './EventManager.js';\nimport LabelEditor from './editor/LabelEditor.js';\nimport TestingManager from './testing/TestingManager.js';\n\nimport FSAGraphExporter from './exporter/FSAGraphExporter.js';\nimport JFLAPGraphExporter from './exporter/JFLAPGraphExporter.js';\n\nconst VERSION = \"0.0.1\";\nconst PANELS = [TestingPanel, OverviewPanel, AnalysisPanel];\nconst EXPORTERS = [\n  new FSAGraphExporter(),\n  new JFLAPGraphExporter()\n];\n\nclass FSAModule extends AbstractModule\n{\n  constructor(app)\n  {\n    super(app);\n\n    this._refreshRate = 60;\n    this._ticks = 0;\n\n    this._inputController = new InputController(this, app.getInputAdapter());\n    this._graphController = new GraphController(this);\n    this._machineController = new MachineController(this);\n\n    this._machineBuilder = new FSABuilder(this._graphController.getGraph());\n\n    this._eventManager = new EventManager(app.getUndoManager());\n    this._testingManager = new TestingManager();\n  }\n\n  //Override\n  initialize(app)\n  {\n    super.initialize(app);\n\n    this._inputController.initialize(app);\n    this._graphController.initialize(app);\n    this._machineController.initialize(app);\n\n    this._machineBuilder.initialize(app);\n\n    this._eventManager.initialize(app);\n\n    this._testingManager.initialize(app);\n\n    //Notify on create in delete mode\n    const tryCreateWhileTrash = () => {\n      if (this._inputController.isTrashMode())\n      {\n        Notifications.addMessage(I18N.toString(\"message.warning.cannotmodify\"), \"warning\", \"tryCreateWhileTrash\");\n      }\n    };\n    this._graphController.on(\"tryCreateWhileTrash\", tryCreateWhileTrash);\n  }\n\n  //Override\n  destroy(app)\n  {\n    this._testingManager.destroy();\n\n    this._eventManager.destroy();\n\n    this._machineBuilder.destroy();\n\n    this._machineController.destroy();\n    this._graphController.destroy();\n    this._inputController.destroy();\n\n    super.destroy(app);\n  }\n\n  //Override\n  update(app)\n  {\n    this._inputController.update();\n\n    if (--this._ticks <= 0)\n    {\n      this._machineBuilder.update();\n      this._ticks = this._refreshRate;\n    }\n  }\n\n  getGraph()\n  {\n    return this._graphController.getGraph();\n  }\n\n  getTestingManager()\n  {\n    return this._testingManager;\n  }\n\n  getDefaultGraphLayout()\n  {\n    return GraphLayout;\n  }\n\n  getMachineBuilder()\n  {\n    return this._machineBuilder;\n  }\n\n  getLabelFormatter()\n  {\n    return this._machineBuilder.formatAlphabetString.bind(this._machineBuilder);\n  }\n\n  getLabelEditor()\n  {\n    return LabelEditor;\n  }\n\n  //Override\n  getRenderer(renderLayer)\n  {\n    switch(renderLayer)\n    {\n      case \"graphoverlay\":\n        return FSAGraphOverlayRenderer;\n      case \"viewport\":\n        return ViewportRenderer;\n    }\n    return null;\n  }\n\n  //Override\n  getGraphRenderer() { return FSAGraphRenderer; }\n  //Override\n  getInputController() { return this._inputController; }\n  //Override\n  getGraphController() { return this._graphController; }\n  //Override\n  getMachineController() { return this._machineController; }\n  //Override\n  getDefaultGraphExporter() { return EXPORTERS[0]; }\n  //Override\n  getGraphExporters() { return EXPORTERS; }\n  //Override\n  getModuleVersion() { return VERSION; }\n  //Override\n  getDefaultModulePanel() { return AboutPanel; }\n  //Override\n  getModulePanels() { return PANELS; }\n  //Override\n  getModuleName() { return \"fsa\"; }\n  //Override\n  getLocalizedModuleName() { return this._machineBuilder.getMachineType(); }\n}\nexport default FSAModule;\n","class HotKeys\n{\n  constructor()\n  {\n    this.app = null;\n    this.workspace = null;\n    this.toolbar = null;\n    this.undoManager = null;\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.app = app;\n    this.workspace = app.workspace;\n    this.toolbar = app.toolbar;\n    this.undoManager = app.getUndoManager();\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    window.addEventListener('keydown', this.onKeyDown);\n  }\n\n  destroy()\n  {\n    window.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e)\n  {\n    //Ctrl-S\n    if (event.which == 83 && (event.metaKey || event.ctrlKey))\n    {\n      //Save as machine file\n      const exporter = this.app.getCurrentModule().getDefaultGraphExporter();\n      const machineName = this.machineController.getMachineName();\n      exporter.exportToFile(machineName, this.app);\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-Z\n    else if (event.which == 90 && (event.metaKey || event.ctrlKey))\n    {\n      if (event.shiftKey)\n      {\n        //Redo\n        this.undoManager.redo();\n      }\n      else\n      {\n        //Undo\n        this.undoManager.undo();\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-P\n    else if (event.which == 80 && (event.metaKey || event.ctrlKey))\n    {\n      //Export to PNG\n      const imageExporters = this.app.getCurrentModule().getImageExporters();\n      if (imageExporter.length >= 1)\n      {\n        const exporter = imageExporters[0];\n        const machineName = this.machineController.getMachineName();\n        exporter.exportToFile(machineName, this.app);\n      }\n      else\n      {\n        throw new Error(\"Unable to find valid image exporter for module \\'\" + this.app.getCurrentModule().getModuleName() + \"\\'\");\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nexport default HotKeys;\n","import LocalSaveManager from './LocalSaveManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new LocalSaveManager();\nexport default INSTANCE;\n","class LocalSaveManager\n{\n  constructor()\n  {\n    this._handlers = new Set();\n    this._intervalID = null;\n    this._intervalMillis = 1000;\n\n    this._init = false;\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n  }\n\n  setAutoSaveInterval(millis)\n  {\n    if (!millis || millis <= 0) throw new Error(\"AutoSave interval must be greater than 0\");\n    this._intervalMillis = millis;\n  }\n\n  registerHandler(handler)\n  {\n    if (this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot register handler, since it is already registered\");\n    }\n    this._handlers.add(handler);\n  }\n\n  unregisterHandler(handler)\n  {\n    if (!this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot remove handler, since it is not yet registered\");\n    }\n    this._handlers.delete(handler);\n  }\n\n  initialize()\n  {\n    if (this._init) throw new Error(\"Cannot initialize LocalSave, since it is already initialized\");\n\n    if (this.doesSupportLocalStorage())\n    {\n      //Prepare autosave\n      this._intervalID = setInterval(this.onIntervalUpdate, this._intervalMillis);\n      this._init = true;\n    }\n    else\n    {\n      //Does not support local storage, so ignore everything...\n    }\n  }\n\n  terminate()\n  {\n    if (!this._init) throw new Error(\"Cannot terminate LocalSave, since it is not yet initialized\");\n\n    clearInterval(this._intervalID);\n\n    this._handlers.clear();\n    this._init = false;\n  }\n\n  onIntervalUpdate()\n  {\n    //Save most recent save for all registered handlers\n    for(let handler of this._handlers)\n    {\n      try\n      {\n        handler.onAutoSave();\n      }\n      catch(e)\n      {\n        console.error(e);\n      }\n    }\n  }\n\n  setStringToStorage(saveKey, stringData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n    if (stringData.length > 0)\n    {\n      localStorage.setItem(saveKey, stringData);\n    }\n    else\n    {\n      localStorage.removeItem(saveKey);\n    }\n  }\n\n  getStringFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return \"\";\n    return localStorage.getItem(saveKey) || \"\";\n  }\n\n  loadFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return null;\n    try\n    {\n      const value = localStorage.getItem(saveKey);\n      if (value && value.length > 0)\n      {\n        return JSON.parse(value);\n      }\n      else\n      {\n        return null;\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n      return {};\n    }\n  }\n\n  saveToStorage(saveKey, jsonData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    let hidden, visibilityChange;\n\n    // Opera 12.10 and Firefox 18 and later support\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    if (document[hidden])\n    {\n      //Don't save anything...\n      return;\n    }\n\n    try\n    {\n      if (typeof jsonData == 'object')\n      {\n        let flag = jsonData;\n        if (flag)\n        {\n          flag = false;\n\n          //Don't save empty objects, cause that is wasteful.\n          for(let key in jsonData)\n          {\n            if (jsonData.hasOwnProperty(key))\n            {\n              flag = true;\n              break;\n            }\n          }\n        }\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, JSON.stringify(jsonData));\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n      else if (typeof jsonData == 'string')\n      {\n        const flag = jsonData.length <= 0;\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, jsonData);\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n    }\n  }\n\n  existsInStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return false;\n    return localStorage.getItem(saveKey) != null;\n  }\n\n  clearStorage()\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    localStorage.clear();\n  }\n\n  doesSupportLocalStorage()\n  {\n    //check if browser support local storage\n    return typeof Storage !== 'undefined';\n  }\n}\nexport default LocalSaveManager;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass UploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(files[0], this.props.app)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n          console.error(e);\n        });\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  render()\n  {\n    const inputID = this.props.id + \"-input\";\n    return <button\n      className={\"icon-button button-upload \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input id={inputID} type=\"file\" name=\"import\"\n        style={{display:\"none\"}}\n        onChange={this.onUploadFileChange}\n        accept={this.props.app.getCurrentModule().getGraphImporter().getImportFileTypes().join(\",\")}/>\n      <label htmlFor={inputID}>\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadButton;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass HelpButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    if (Notifications.hasMessages())\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.3\"));\n      Notifications.addMessage(I18N.toString(\"message.help.1\"));\n    }\n    else\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.2\"));\n    }\n\n    //The tutorial\n    const LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/HELP.md\";\n    const newTab = window.open(LINK, '_blank');\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button button-help \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default HelpButton;\n","import React from 'react';\n\nclass MachineName extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  onChange(e)\n  {\n    this.setState({value: e.target.value});\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === 'Escape')\n    {\n      const target = e.target;\n      this.setState({value: null}, () => target.blur());\n      return false;\n    }\n    else if (e.key === 'Enter')\n    {\n      e.target.blur();\n      return false;\n    }\n  }\n\n  onFocus(e)\n  {\n    this.setState({value: this.props.value});\n  }\n\n  onBlur(e)\n  {\n    if (this.state.value)\n    {\n      if (this.props.onSubmit) this.props.onSubmit({value: this.state.value});\n    }\n\n    this.setState({value: null});\n  }\n\n  render()\n  {\n    return <input type=\"text\"\n      className={this.props.className}\n      id={this.props.id}\n      value={this.state.value != null ? this.state.value : this.props.value}\n      onChange={this.onChange}\n      onKeyDown={this.onKeyDown}\n      onFocus={this.onFocus}\n      onBlur={this.onBlur}>\n    </input>;\n  }\n}\n\nexport default MachineName;\n","import React from 'react';\n\nclass PageNewIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenew-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"help-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n    </svg>;\n  }\n}\n\nexport default HelpIcon;\n","import React from 'react';\n\nclass LanguageIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"language-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 \" +\n        \"22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 \" +\n        \"3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 \" +\n        \"1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 \" +\n        \"1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 \" +\n        \"1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 \" +\n        \"4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 \" +\n        \"1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 \" +\n        \"0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 \" +\n        \"5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 \" +\n        \"14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 \" +\n        \"1.36-.26 2h-3.38z\"}/>\n    </svg>;\n  }\n}\n\nexport default LanguageIcon;\n","import React from 'react';\n\nclass OfflineIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"offline-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n      <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n    </svg>;\n  }\n}\n\nexport default OfflineIcon;\n","import React from 'react';\n\nclass BugReportIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"bugreport-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d={\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 \" +\n      \"3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 \" +\n      \"4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 \" +\n      \"1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 \" +\n      \"3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.\"\n      + \"34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 \" +\n      \"1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 \" +\n      \"15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 \" +\n      \"1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 \" +\n      \".63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07\" +\n      \".47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"}/>\n    </svg>;\n  }\n}\n\nexport default BugReportIcon;\n","import React from 'react';\nimport './DrawerExpander.css';\n\nclass DrawerExpander extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const app = this.props.app;\n    if (app.state.isFullscreen)\n    {\n      app.setState({isFullscreen: false});\n    }\n    else if (app.state.isOpen)\n    {\n      app.closeDrawer();\n    }\n    else\n    {\n      app.openDrawer();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const open = app.state.isOpen;\n\n    return <div className={\"drawer-expand\" + (open ? \" open\" : \"\")}\n      onClick={this.onClick}>\n      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M5 3.737l12.395 8.263-12.395 8.263v-16.526zm-2-3.737v24l18-12-18-12z\"/>\n      </svg>\n    </div>;\n  }\n}\n\nexport default DrawerExpander;\n","import React from 'react';\nimport '../Panel.css';\nimport './ExportingPanel.css';\n\nimport IconButton from 'icons/IconButton.js';\n\nclass ExportingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  renderExporterButton(exporter)\n  {\n    if (!exporter.doesSupportFile()) return null;\n    return <IconButton key={exporter.getFileType()}\n      className=\"export-button\"\n      id={\"export-\" + exporter.getFileType()}\n      title={exporter.getTitle()}\n      onClick={() => {\n        const filename = this.props.machineController.getMachineName();\n        exporter.exportToFile(filename, this.props.app);\n      }}>\n      { React.createElement(exporter.getIconComponentClass()) }\n      <label>{ exporter.getLabel() }</label>\n    </IconButton>;\n  }\n\n  //Override\n  render()\n  {\n    const module = this.props.app.getCurrentModule();\n    const graphExporters = module.getGraphExporters();\n    const imageExporters = module.getImageExporters();\n\n    return <div className=\"panel-container\" id=\"exporting\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n      {\n        graphExporters.map(e => this.renderExporterButton(e))\n      }\n      {\n        imageExporters.map(e => this.renderExporterButton(e))\n      }\n        <hr/>\n        {/*Save to E-mail*/}\n        <div className=\"export-email\">\n        </div>\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nExportingPanel.UNLOCALIZED_NAME = \"component.exporting.title\";\n\nexport default ExportingPanel;\n","/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nclass ColorHelper\n{\n  static HEXtoRGB(hex, dst=[])\n  {\n    if (hex.startsWith('#')) hex = hex.slice(1);\n    const red = hex.substring(0, 2);\n    const green = hex.substring(2, 4);\n    const blue = hex.substring(4, 6);\n    dst[0] = parseInt(red, 16);\n    dst[1] = parseInt(green, 16);\n    dst[2] = parseInt(blue, 16);\n    return dst;\n  }\n\n  static RGBtoHEX(r, g, b)\n  {\n    return '#' + (b | (g << 8) | (r << 16) | (1 << 24)).toString(16).slice(1);\n  }\n\n  static RGBtoHSV(r, g, b, dst=[])\n  {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n\n    const d = max - min;\n\n    let h = 0;\n    const s = max == 0 ? 0 : d / max;\n    const v = max;\n\n    if (max == min)\n    {\n      h = 0;\n    }\n    else\n    {\n      switch(max)\n      {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n      }\n\n      h /= 6;\n    }\n\n    dst[0] = h;\n    dst[1] = s;\n    dst[2] = v;\n    return dst;\n  }\n\n  static HSVtoRGB(h, s, v, dst=[])\n  {\n    let r = 0;\n    let g = 0;\n    let b = 0;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch(i % 6)\n    {\n      case 0: r = v, g = t, b = p; break;\n      case 1: r = q, g = v, b = p; break;\n      case 2: r = p, g = v, b = t; break;\n      case 3: r = p, g = q, b = v; break;\n      case 4: r = t, g = p, b = v; break;\n      case 5: r = v, g = p, b = q; break;\n    }\n\n    dst[0] = r * 255;\n    dst[1] = g * 255;\n    dst[2] = b * 255;\n    return dst;\n  }\n}\n\nexport default ColorHelper;\n","class StyleOption\n{\n  constructor(elementSource, propName, inputType, groupName, callback)\n  {\n    //the html element that this css variable reflects\n    this.element = elementSource;\n    //the name of the css variable\n    this.prop = propName;\n    //the css variable type\n    this.type = inputType;\n    //the group that the variable belongs to (\"default\" if not specified)\n    this.group = groupName;\n\n    this._callback = callback;\n    this._value = null;\n    this._defaultValue = null;\n  }\n\n  /**\n   * Update the current value to reflect the computed style's value.\n   */\n  updateStyle(computedStyle=null, shouldPropagateChange=true)\n  {\n    if (!computedStyle)\n    {\n      computedStyle = window.getComputedStyle(this.element);\n    }\n    const newValue = computedStyle.getPropertyValue(this.prop);\n    if (!newValue)\n    {\n      throw new Error(\"Cannot find style option with prop name \\'\" + this.prop + \"\\' for element\");\n    }\n\n    this._value = newValue.trim();\n    this._defaultValue = this._value;\n    if (shouldPropagateChange && this._callback) this._callback(this, newValue);\n  }\n\n  /**\n   * Reset the current value to reflect the computed style's value.\n   */\n  resetStyle()\n  {\n    this.setStyle(this._defaultValue);\n  }\n\n  /**\n   * Changes the variable's value for prop name.\n   * These changes are reflected to the css source.\n   */\n  setStyle(val, shouldPropagateChange=true)\n  {\n    this._value = val;\n    this.element.style.setProperty(this.prop, val);\n\n    if (shouldPropagateChange && this._callback) this._callback.call(null, this, val);\n  }\n\n  /** Returns the variable's current value. Null if not yet initialized. */\n  getStyle()\n  {\n    return this._value;\n  }\n\n  isDefaultStyle()\n  {\n    return this._value == this._defaultValue;\n  }\n}\n\nclass StyleOptionRegistry\n{\n  constructor()\n  {\n    this._options = new Map();\n    this._groups = new Map();\n\n    this._init = false;\n  }\n\n  registerStyleOption(elementSource, propName, inputType=\"text\", groupName=\"default\", changeCallback=null)\n  {\n    if (this._options.has(propName))\n    {\n      throw new Error(\"Style option with prop name \\'\" + propName + \"\\' already registered\");\n    }\n\n    const result = new StyleOption(elementSource, propName, inputType, groupName, changeCallback);\n    this._options.set(propName, result);\n\n    let group;\n    if (!this._groups.has(groupName))\n    {\n      group = [];\n      this._groups.set(groupName, group);\n    }\n    else\n    {\n      group = this._groups.get(groupName);\n\n      if (group.indexOf(propName) != -1)\n      {\n        //Ignore it, it's already in here\n        return;\n      }\n    }\n    group.push(propName);\n  }\n\n  unregisterStyleOption(propName)\n  {\n    if (this._options.has(propName))\n    {\n      const option = this._options.get(propName);\n      this._options.delete(propName);\n      const groupName = option.group;\n      if (this._groups.has(groupName))\n      {\n        const group = this._groups.get(groupName);\n        const index = group.indexOf(propName);\n        if (index >= 0)\n        {\n          group.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  initialize()\n  {\n    if (this._init)\n    {\n      throw new Error(\"Already initialized\");\n    }\n\n    //Compute the styles\n    const computedStyles = {};\n    let computedStyle;\n    for(let option of this._options.values())\n    {\n      const element = option.element;\n      computedStyle = computedStyles[element];\n      if (!computedStyle)\n      {\n        computedStyle = window.getComputedStyle(element);\n        computedStyles[element] = computedStyle;\n      }\n      option.updateStyle(computedStyle, false);\n    }\n\n    this._init = true;\n  }\n\n  terminate()\n  {\n    if (!this._init)\n    {\n      throw new Error(\"Not yet initialized\");\n    }\n\n    this._options.clear();\n    this._groups.clear();\n\n    this._init = false;\n  }\n\n  getOptionByProp(propName)\n  {\n    return this._options.get(propName);\n  }\n\n  getPropsByGroup(groupName)\n  {\n    return this._groups.get(groupName) || [];\n  }\n\n  getOptions()\n  {\n    return this._options.values();\n  }\n\n  isEmpty()\n  {\n    return this._options.size <= 0;\n  }\n}\n\nexport default StyleOptionRegistry;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e)\n  {\n    const newValue = e.target.value;\n    const value = this.props.value;\n    const onChange = this.props.onChange;\n\n    value.setStyle(newValue);\n    if (onChange) onChange(value);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const value = this.props.value;\n    const propName = value.prop;\n    const inputType = value.type;\n    const inputID = \"styleopt-\" + propName;\n\n    return <span id={this.props.id} className={this.props.className} style={this.props.style}>\n      <input id={inputID} type={inputType} value={value.getStyle()} onChange={this.onChange} disabled={this.props.disabled}/>\n      <label htmlFor={inputID}>{title}</label>\n    </span>;\n  }\n}\nexport default StyleInput;\n","import React from 'react';\nimport './OptionGroup.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\nclass OptionGroup extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"option-group \" + this.props.className}>\n      <div className=\"option-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <label>({this.props.label})</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"option-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        { this.props.children }\n      </div>\n    </div>;\n  }\n}\n\nexport default OptionGroup;\n","import React from 'react';\nimport './OptionHotkey.css';\n\nclass OptionHotkey extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className={\"option-container option-hotkey \" + this.props.className}>\n      <label>{this.props.label}</label>\n      <span>{this.props.keyName}</span>\n    </div>;\n  }\n}\n\nexport default OptionHotkey;\n","import React from 'react';\nimport '../Panel.css';\nimport './OptionsPanel.css';\n\nimport Config from 'config.js';\nimport { saveConfig } from 'config.js';\n\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport ColorHelper from 'util/ColorHelper.js';\nimport StyleOptionRegistry from 'system/styleopt/StyleOptionRegistry.js';\nimport StyleInput from 'system/styleopt/components/StyleInput.js';\n\nimport OptionGroup from './OptionGroup.js';\nimport OptionHotkey from './OptionHotkey.js';\n\n//This should be the same as the one referred to by index.js\nconst LOCAL_STORAGE_ID = \"skipWelcome\";\n\nclass OptionsPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n\n    this.container = React.createRef();\n    this.styleOpts = new StyleOptionRegistry();\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalSave.getStringFromStorage(LOCAL_STORAGE_ID) == \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n    this.onChangeModule = this.onChangeModule.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    const invertFunc = function(opt, value) {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      //INVERT HUE: color[0] = (color[0] + 0.5) % 1;\n      //INVERT BRIGHTNESS:\n      color[2] = 1 - color[2];\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-invert\").setStyle(result);\n    };\n\n    const darkFunc = function(opt, value) {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.8;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    };\n\n    const subtleFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.61;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-subtle\").setStyle(result);\n    };\n\n    const ghostFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.74;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-ghost\").setStyle(result);\n    };\n\n    const backFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.87;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-back\").setStyle(result);\n    };\n\n    //Toolbar\n    opts.registerStyleOption(root, \"--color-toolbar-main\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-accent\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-accent-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-text\", \"color\", \"toolbar\", invertFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-text-invert\", \"color\", \"hidden\");\n\n    //Drawer\n    opts.registerStyleOption(root, \"--color-drawer-main\", \"color\", \"drawer\", darkFunc);\n    opts.registerStyleOption(root, \"--color-drawer-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-accent\", \"color\", \"drawer\");\n    opts.registerStyleOption(root, \"--color-drawer-text\", \"color\", \"drawer\", (...args) => {\n      subtleFunc(...args);\n      ghostFunc(...args);\n      invertFunc(...args);\n      backFunc(...args);\n    });\n    opts.registerStyleOption(root, \"--color-drawer-text-subtle\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-ghost\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-invert\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-back\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-error\", \"color\", \"drawer\");\n\n    //Testing\n    opts.registerStyleOption(root, \"--color-testing-success\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-failure\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-working\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-text\", \"color\", \"testing\");\n\n    //Notification\n    opts.registerStyleOption(root, \"--color-notification-text\", \"color\", \"notification\");\n    opts.registerStyleOption(root, \"--color-notification-info\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-info-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-error\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-warning\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-warning-dark\", \"color\", \"hidden\");\n\n    //Workspace\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-text\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-main\", \"color\", \"workspace\");\n\n    //Label editor\n    opts.registerStyleOption(root, \"--color-labeleditor-text\", \"color\", \"labeleditor\");\n    opts.registerStyleOption(root, \"--color-labeleditor-main\", \"color\", \"labeleditor\");\n\n    //Viewport\n    opts.registerStyleOption(root, \"--color-viewport-error\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-testing\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-warning\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-highlight-select\", \"color\", \"viewport\");\n\n    opts.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    registry.terminate();\n\n    LocalSave.unregisterHandler(this);\n  }\n\n  onLoadSave()\n  {\n    const opts = this.styleOpts;\n    const data = LocalSave.loadFromStorage(\"prefs-color\");\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  onAutoSave()\n  {\n    const opts = this.styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    LocalSave.saveToStorage(\"prefs-color\", data);\n  }\n\n  onChangeTheme(e)\n  {\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of this.styleOpts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  onChangeModule(e)\n  {\n    //Nothing yet...\n  }\n\n  //Override\n  render()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    return <div className=\"panel-container\" id=\"option\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.options.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n\n        <OptionGroup title={I18N.toString(\"component.workspace.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.savemachine\")} keyName=\"Ctrl + S\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.undo.label\")} keyName=\"Ctrl + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.redo.label\")} keyName=\"Ctrl + Shift + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.saveimage\")} keyName=\"Ctrl + P\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={\"Add test input\"} keyName=\"Enter\"/>\n          <OptionHotkey label={\"Run test input\"} keyName=\"Shift + Enter\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.workspace.submit.label\")} keyName=\"Enter\"/>\n          <OptionHotkey label={I18N.toString(\"action.workspace.cancel.label\")} keyName=\"Escape\"/>\n        </OptionGroup>\n\n        <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n          <input id=\"option-skipwelcome\" type=\"checkbox\" checked={this.state.skipWelcome}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: e.target.checked});\n            LocalSave.setStringToStorage(LOCAL_STORAGE_ID, \"\" + result);\n          }}/>\n          <label htmlFor=\"option-skipwelcome\">{I18N.toString(\"options.skipwelcome\")}</label>\n        </div>\n\n        <hr/>\n\n        <div>\n          <div id=\"options-theme-select-container\">\n            <label htmlFor=\"options-theme-select\">Theme</label>\n            <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n              <option value=\"default\">Default</option>\n              <option value=\"ucsd\" disabled={true}>UC San Diego (Coming Soon)</option>\n              <option value=\"duke\" disabled={true}>Duke University (Coming Soon)</option>\n            </select>\n            {\n              !this.state.customTheme &&\n              <button className=\"panel-button\" onClick={() => this.setState({customTheme: true})}>\n                {I18N.toString(\"action.options.changetheme\")}\n              </button>\n            }\n          </div>\n          {\n            this.state.customTheme && <div>\n              <OptionGroup title={I18N.toString(\"component.toolbar.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"toolbar\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.drawer.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"drawer\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"testing\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.notification.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"notification\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.graph.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"workspace\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"labeleditor\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"options.category.general\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"viewport\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <button className=\"panel-button\" onClick={(e) => {\n                for(let option of this.styleOpts.getOptions())\n                {\n                  option.resetStyle();\n                }\n                this.setState({customTheme: false});\n              }}>{I18N.toString(\"action.options.reset\")}</button>\n            </div>\n          }\n        </div>\n\n        <hr/>\n\n        <div>\n          <h2>Experimental</h2>\n          <label htmlFor=\"options-experimental-modules\">Module</label>\n          <select id=\"options-experimental-modules\" className=\"panel-select\" value={this.props.app.getCurrentModule().getModuleName()} onChange={this.onChangeModule}>\n            <option value=\"fsa\">Finite State Automata</option>\n            <option value=\"pda\" disabled={true}>Pushdown Automata (Coming Soon)</option>\n            <option value=\"cfg\" disabled={true}>Context-Free Grammar (Future)</option>\n            <option value=\"tm\" disabled={true}>Turing Machine (Future)</option>\n            <option value=\"rdt\" disabled={true}>Red-Black Tree (Future)</option>\n            <option value=\"hlsm\" disabled={true}>High Level State Machine (Future)</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nOptionsPanel.UNLOCALIZED_NAME = \"component.options.title\";\n\nexport default OptionsPanel;\n","import React from 'react';\nimport './Drawer.css';\n\nimport DrawerExpander from './DrawerExpander.js';\n\nimport ExportingPanel from './panels/exporting/ExportingPanel.js';\nimport OptionsPanel from './panels/options/OptionsPanel.js';\n\nconst DEFAULT_PANELS = [ExportingPanel, OptionsPanel];\nconst DEFAULT_TAB_INDEX = 0;\n\nconst MAX_PANEL_THRESHOLD = 50;\nconst MIN_PANEL_SIZE = 300;//180\n\nclass Drawer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      tabIndex: DEFAULT_TAB_INDEX,\n      dragging: false\n    };\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    this._ontouchmove = null;\n    this._ontouchend = null;\n  }\n\n  setTab(index)\n  {\n    const app = this.props.app;\n\n    //Open drawer if it is closed\n    if (!app.state.isOpen)\n    {\n      app.openDrawer();\n    }\n    //Full drawer if clicked on same one\n    else\n    {\n      if (this.state.tabIndex === index)\n      {\n        app.openDrawer(!app.state.isFullscreen);\n      }\n    }\n\n    this.setState((prev, props) => {\n      return { tabIndex: index };\n    });\n  }\n\n  onStartDraggingDrawerBorder(x, y)\n  {\n    const app = this.props.app;\n    this.setState({dragging: true});\n\n    //Disable fullscreen if dragging off of it\n    if (app.state.isFullscreen)\n    {\n      app.openDrawer(false);\n    }\n\n    //Update panel to current click position\n    updatePanelSize(app, x, y);\n  }\n\n  onStopDraggingDrawerBorder()\n  {\n    this.setState({dragging: false});\n  }\n\n  onTouchStart(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._ontouchmove)\n    {\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n      this._ontouchmove = null;\n    }\n\n    if (this._ontouchend)\n    {\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      this._ontouchend = null;\n    }\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      this.setState({dragging: false});\n      return;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onStartDraggingDrawerBorder(touch.clientX, touch.clientY);\n\n    this._ontouchmove = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n    };\n\n    document.addEventListener(this._ontouchmove);\n\n    this._ontouchend = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"touchend\", this._ontouchend);\n    document.addEventListener(\"touchmove\", this._ontouchmove);\n  }\n\n  onMouseDown(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      return;\n    }\n\n    this.onStartDraggingDrawerBorder(e.clientX, e.clientY);\n\n    const onMouseMove = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n    };\n\n    const onMouseUp = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousemove\", onMouseMove);\n  }\n\n  onScroll(e)\n  {\n    //if (this.panel)\n    {\n      //TODO: this.panel.container.scrollBy(0, e.deltaY);\n      //TODO: return false;\n    }\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n\n    const tabIndex = this.state.tabIndex;\n    const InfoPanel = currentModule ? currentModule.getDefaultModulePanel() : null;\n\n    return <div className={\"drawer-container\"} onWheel={this.onScroll}>\n      <div className=\"drawer-content\">\n      {\n        currentModule &&\n        currentModule.getModulePanels().map((PanelClass, i) => {\n          const panelID = i + 1;\n          return <PanelClass key={currentModule.getModuleName() + \":\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      {\n        tabIndex == 0 && InfoPanel != null &&\n        <InfoPanel app={app}/>\n      }\n      {\n        DEFAULT_PANELS.map((PanelClass, i) => {\n          const panelID = -(i + 1);\n          return <PanelClass key={\"default:\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      </div>\n      <div className=\"tab-list\">\n        <DrawerExpander app={app}/>\n        {\n          currentModule &&\n          currentModule.getModulePanels().map((PanelClass, i) => {\n            const panelID = i + 1;\n            return <button key={currentModule.getModuleName() + \":\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        {\n          DEFAULT_PANELS.map((PanelClass, i) => {\n            const panelID = -(i + 1);\n            return <button key={\"default:\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        <div className=\"tab-right\"></div>\n      </div>\n\n      <div className={\"drawer-border\" + (this.state.dragging ? \" dragging\" : \"\")}\n        onTouchStart={this.onTouchStart}\n        onMouseDown={this.onMouseDown}>\n      </div>\n    </div>;\n  }\n}\n\nfunction updatePanelSize(app, x, y)\n{\n  const container = app.container;\n  let fullscreen = false;\n  let size = 0;\n  //This is the same criteria as in App.css\n  if (window.matchMedia(\"(max-width: 420px)\").matches)\n  {\n    //Vertical slide\n    const viewportOffsetY = app.viewport.ref.getBoundingClientRect().y;\n    if (y - viewportOffsetY < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetHeight - y;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n  else\n  {\n    //Horizontal slide\n    if (x < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetWidth - x;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n\n  //Make sure is greater than minimum size and vice versa\n  if (size < MIN_PANEL_SIZE) size = MIN_PANEL_SIZE;\n\n  //Set panel size\n  container.style.setProperty(\"--panel-size\", size + \"px\");\n}\nDrawer.EXPORTING_PANEL_TAB_INDEX = -1;\nDrawer.OPTIONS_PANEL_TAB_INDEX = -2;\n\nexport default Drawer;\n","import React from 'react';\nimport './Toolbar.css';\n\nimport Config from 'config.js';\n\nimport UploadButton from \"./UploadButton.js\";\nimport HelpButton from \"./HelpButton.js\";\nimport MachineName from './MachineName.js';\n\nimport IconButton from 'icons/IconButton.js';\n\nimport MoreIcon from 'icons/MoreIcon.js';\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewIcon.js';\n//import CreateIcon from 'icons/CreateIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\n//import SaveIcon from 'icons/DiskSaveIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\nimport HelpIcon from 'icons/HelpIcon.js';\nimport LanguageIcon from 'icons/LanguageIcon.js';\nimport OfflineIcon from 'icons/OfflineIcon.js';\nimport OfflinePinIcon from 'icons/OfflinePinIcon.js';\nimport BugReportIcon from 'icons/BugReportIcon.js';\n\nimport Drawer from 'content/drawer/Drawer.js';\n\nclass Toolbar extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      langOn: false\n    };\n\n    this.onMachineNameChange = this.onMachineNameChange.bind(this);\n    this.onMachineNameKeyDown = this.onMachineNameKeyDown.bind(this);\n    this.langOnClick = this.langOnClick.bind(this);\n  }\n\n  onMachineNameChange(e)\n  {\n    this.props.machineController.renameMachine(e.value);\n  }\n\n  onMachineNameKeyDown()\n  {\n\n  }\n\n  onMachineNameBlur()\n  {\n\n  }\n\n  langOnClick()\n  {\n    this.setState({langOn: !this.state.langOn});\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const drawer = this.props.drawer;\n    const graphController = app.getGraphController();\n    const machineController = app.getMachineController();\n    const undoManager = app.getUndoManager();\n\n    const graph = graphController.getGraph();\n\n    const offline = navigator && navigator.onLine;\n\n    return <div className=\"toolbar-container\">\n      <div className=\"toolbar-title\">\n        <div className=\"toolbar-title-name\">\n          {/*Machine Name*/}\n          <MachineName id=\"machine-name\" value={machineController.getMachineName()} onSubmit={this.onMachineNameChange}/>\n          {/*Toolbar Alt. Title*/}\n          <div className=\"toolbar-title-alt\">\n            {/*Offline Button*/}\n            <IconButton id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n              onClick={() => {\n                if ('serviceWorker' in navigator)\n                {\n                  if (navigator.serviceWorker.getRegistration(\"./app.html\"))\n                  {\n                    alert(I18N.toString(\"message.offline.ready\"));\n                  }\n                  else\n                  {\n                    alert(I18N.toString(\"message.offline.failed\"));\n                  }\n                }\n                else\n                {\n                  alert(I18N.toString(\"message.offline.nosupport\"));\n                }\n              }} disabled={offline}>\n              <OfflineIcon/>\n            </IconButton>\n            {/*Upload Button\n            <div id=\"toolbar-upload-alt\"\n              title={I18N.toString(\"action.toolbar.uploadmachine\")}>\n              <MoreIcon/>\n            </div>\n            */}\n          </div>\n        </div>\n        {/*Machine Type*/}\n        <label id=\"machine-type\"\n          onClick={()=>drawer.setTab(0)}>\n          {currentModule.getLocalizedModuleName()}\n        </label>\n      </div>\n\n      <div className=\"toolbar-tray\">\n        {/*New Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-new\" title={I18N.toString(\"action.toolbar.newmachine\")}\n          onClick={() => {\n            if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n            {\n              graph.clear();\n              undoManager.clear();\n              machineController.setMachineName(null);\n            }\n          }}>\n          <CreateIcon/>\n        </IconButton>\n        {/*Upload Button*/}\n        <UploadButton className=\"navicon\" id=\"toolbar-upload\" title={I18N.toString(\"action.toolbar.uploadmachine\")}\n          app={app}\n          graphController={graphController}>\n          <UploadIcon/>\n        </UploadButton>\n        {/*Undo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-undo\" title={I18N.toString(\"action.toolbar.undo\")}\n          disabled={!undoManager.canUndo()}\n          onClick={()=>undoManager.undo()}>\n          <UndoIcon/>\n        </IconButton>\n        {/*Redo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-redo\" title={I18N.toString(\"action.toolbar.redo\")}\n          disabled={!undoManager.canRedo()}\n          onClick={()=>undoManager.redo()}>\n          <RedoIcon/>\n        </IconButton>\n        {/*Save Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-save\" title={I18N.toString(\"action.toolbar.save\")}\n          onClick={()=>drawer.setTab(Drawer.EXPORTING_PANEL_TAB_INDEX)} disabled={graph.isEmpty()}>\n          <SaveIcon/>\n        </IconButton>\n\n        {/*Right Alt. Toolbar*/}\n        <div className=\"toolbar-tray-alt\">\n          {/*Report a Bug Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-bug\" title={I18N.toString(\"action.toolbar.bug\")}>\n            <BugReportIcon/>\n          </IconButton>\n          {/*Help Button*/}\n          <HelpButton className=\"navicon\" id=\"toolbar-help\" title={I18N.toString(\"action.toolbar.help\")}>\n            <HelpIcon/>\n          </HelpButton>\n          {/*Language Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n            onClick={(e) => {document.activeElement.blur(); this.langOnClick();}} >\n            <LanguageIcon/>\n          </IconButton>\n          {/*Language Select*/}\n          <select id=\"toolbar-lang-select\" style={{maxWidth: (this.state.langOn ? \"10em\" : \"0\")}} onChange={(e) => {I18N.fetchLanguageFile(e.target.value);}}>\n            <option value=\"en_us\">English</option>\n            <option value=\"xx_pirate\">Pirate Speak</option>\n          </select>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport './Subtitle.css';\n\nimport Config from 'config.js';\n\nclass Subtitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { active: false };\n\n    this.messageTimer = null;\n  }\n\n  componentDidMount()\n  {\n    this.messageTimer = setTimeout(() => {\n      this.setState({ active: true });\n    }, Config.INIT_WAITTIME);\n  }\n\n  render()\n  {\n    const visible = this.state.active ? this.props.visible : false;\n    return <text y=\"-1em\" className={\"graph-ui subtitle\" + (visible ? \" visible\" : \"\")}\n      textAnchor=\"middle\">{I18N.toString(\"message.workspace.empty\")}</text>;\n  }\n}\n\nexport default Subtitle;\n","import React from 'react';\nimport './Workspace.css';\n\nimport Config from 'config.js';\n\nimport Subtitle from './Subtitle.js';\n\nconst WORKSPACE_OFFSET_X = 0;\nconst WORKSPACE_OFFSET_Y = 0;\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nconst GRAPH_OVERLAY_RENDER_LAYER = \"graphoverlay\";\n\nclass Workspace extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n  }\n\n  getSVGForExport(width, height)\n  {\n    const svg = this.ref;\n    if (!svg) return null;\n\n    const app = this.props.app;\n    const inputController = app.getInputController();\n    const graphController = app.getGraphController();\n\n    const viewport = inputController.getInputAdapter().getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = svg.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    for(const e of uiElements)\n    {\n      e.remove();\n    }\n\n    return clone;\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const graphController = app.getGraphController();\n    const inputController = app.getInputController();\n    const machineController = app.getMachineController();\n\n    const GraphRenderer = currentModule.getGraphRenderer();\n    const GraphOverlayRenderer = currentModule.getRenderer(GRAPH_OVERLAY_RENDER_LAYER);\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    let size = Config.DEFAULT_GRAPH_SIZE * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfSize = size / 2;\n\n    //Must not be a block content (must inline)\n    return <svg id=\"workspace-content\" ref={ref=>this.ref=ref}\n      viewBox={(-halfSize + WORKSPACE_OFFSET_X) + \" \" + (-halfSize + WORKSPACE_OFFSET_Y) + \" \" + size + \" \" + size}\n      xmlns=\"http://www.w3.org/2000/svg\">\n\n      {/* Graph subtitle */}\n      <Subtitle visible={graph.isEmpty()}/>\n\n      {/* Graph elements */}\n      <g id=\"workspace-content-elements\" transform={\n        \"translate(\" +\n        viewport.getOffsetX() + \" \" +\n        viewport.getOffsetY() + \")\"}>\n\n        {/* Graph origin crosshair */}\n        <line className=\"graph-ui\" x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"rgba(0,0,0,0.04)\"/>\n        <line className=\"graph-ui\" x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"rgba(0,0,0,0.04)\"/>\n\n        {/* Graph objects */}\n        { GraphRenderer &&\n          <GraphRenderer graph={graph} inputController={inputController}/> }\n\n        {/* Graph overlays */}\n        { GraphOverlayRenderer &&\n          <GraphOverlayRenderer workspace={this} app={app}/> }\n      </g>\n    </svg>;\n  }\n}\n\nexport default Workspace;\n","import Notifications from 'system/notification/Notifications.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport Config from 'config.js';\n\nclass Tutorial\n{\n  constructor()\n  {\n    this.app = null;\n  }\n\n  start(app)\n  {\n    if (!LocalSave.existsInStorage(\"graph\"))\n    {\n      Notifications.addMessage(I18N.toString(\"message.tutorial.1\"));\n      Notifications.addMessage(I18N.toString(\"message.intro.2\"));\n    }\n  }\n}\n\nexport default Tutorial;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor(adapter, element, viewport)\n  {\n    this._adapter = adapter;\n    this._element = element;\n    this._viewport = viewport;\n\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n    return this;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is mutable.\n   */\n  getInputEventPosition()\n  {\n    return this._inputpos;\n  }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput()\n  {\n    this._active = false;\n  }\n\n  isActive()\n  {\n    return this._active;\n  }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * The DOM element for which this pointer provides context for; this should be\n   * the same element as in the input adapter.\n   */\n  getElement()\n  {\n    return this._element;\n  }\n\n  /**\n   * The viewport for this pointer operates within; this should be the same\n   * viewport as in the input adapter.\n   */\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  /**\n   * The input adapter that controls this pointer's properties\n   */\n  getAdapter()\n  {\n    return this._adapter;\n  }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale)\n  {\n    this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale));\n  }\n\n  addScale(dscale)\n  {\n    this._scaleFactor += dscale;\n\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    else if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n  }\n\n  getOffsetX()\n  {\n    return this._offsetX;\n  }\n\n  getOffsetY()\n  {\n    return this._offsetY;\n  }\n\n  getOffsetDamping()\n  {\n    return this._offsetDamping;\n  }\n\n  getScale()\n  {\n    return this._scaleFactor;\n  }\n\n  getMinScale()\n  {\n    return this._minScale;\n  }\n\n  getMaxScale()\n  {\n    return this._maxScale;\n  }\n\n  getElement()\n  {\n    return this._element;\n  }\n}\n\nexport default ViewportAdapter;\n","import Config from 'config.js';\n\nimport InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\n/**\n * Provides an interface for InputController to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._controller = null;\n    this._element = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n    this._pointer = null;\n\n    this._viewport = new ViewportAdapter();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = Config.LONG_TAP_TICKS;\n    this._dblInputDelay = Config.DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = Config.SCROLL_SENSITIVITY;\n    this._minTapRadius = Config.CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = Config.CURSOR_RADIUS_SQU + Config.DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  setController(controller)\n  {\n    this._controller = controller;\n    return this;\n  }\n\n  initialize(element)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Missing SVG element for input adapter's viewport\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._viewport.setElement(this._element = element);\n    this._pointer = new InputPointer(this, this._element, this._viewport);\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  update()\n  {\n    //Smooth transition offset\n    this._viewport.update();\n  }\n\n  onMouseDown(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this._controller) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    this._pointer.setPosition(mouse.x, mouse.y);\n\n    //Can update target here for hover effects...\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this._controller) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    if (controller.onZoomChange(pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    if (!controller.onPreInputEvent(pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n        if (!controller.onDragStart(pointer))\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      controller.onDragMove(pointer);\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      controller.onDragStop(pointer);\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        controller.onAltInputEvent(pointer);\n      }\n      else\n      {\n        //Tap!\n        const result = controller.onInputEvent(pointer);\n\n        //If the input was not consumed...\n        if (!result)\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            controller.onDblInputEvent(pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  getActiveElement()\n  {\n    return this._element;\n  }\n\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  getPointerX()\n  {\n    return this._pointer ? this._pointer.x : 0;\n  }\n\n  getPointerY()\n  {\n    return this._pointer ? this._pointer.y : 0;\n  }\n\n  isPointerActive()\n  {\n    return this._pointer ? this._pointer.isActive() : false;\n  }\n\n  isUsingTouch()\n  {\n    return this._cursor._touchmove || this._cursor._touchend;\n  }\n\n  isAltInput()\n  {\n    return this._altinput;\n  }\n\n  isDragging()\n  {\n    return this._dragging;\n  }\n}\n\nexport default InputAdapter;\n","import React from 'react';\nimport './NotificationMessage.css';\n\nclass NotificationMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onExitMessage = this.onExitMessage.bind(this);\n  }\n\n  onExitMessage(e)\n  {\n    const message = this.props.value;\n    message.close();\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.value;\n    return <div className={\"notification-message-container notification-message-type-\" + message.getType() + \" \" + this.props.className}\n      id={this.props.id} style={this.props.style}>\n      { this.props.children || message.value.split(\"\\\\n\").map(e => <p key={e}>{e}</p>) || message }\n      <button onClick={this.onExitMessage}>{I18N.toString(\"message.action.close\")}</button>\n    </div>;\n  }\n}\nexport default NotificationMessage;\n","import React from 'react';\nimport './NotificationView.css';\n\nimport NotificationMessage from './NotificationMessage.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return <div className={\"notification-container \" + this.props.className} id={this.props.id} style={this.props.style}>\n    {\n      notificationManager.getMessages().map(e => {\n        const id = e.getID();\n        const ComponentClass = e.getComponentClass();\n        const componentProps = e.getComponentProps() || {};\n\n        return <NotificationMessage key={id} value={e}>\n        { ComponentClass && <ComponentClass message={e} {...componentProps}/> }\n        </NotificationMessage>;\n      })\n    }\n    </div>;\n  }\n}\nexport default NotificationView;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n\n  captureEvent(eventHandler)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(eventHandler);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldest recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo();\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo();\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n}\n\nexport default UndoManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './App.css';\n\nimport Config from 'config.js';\n\n//import Modules from './Modules.js';\n//import DefaultModule from 'modules/default/DefaultModule.js';\nimport FSAModule from 'modules/fsa/FSAModule.js';\n\nimport HotKeys from './HotKeys.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nimport Toolbar from './toolbar/Toolbar.js';\nimport Workspace from './workspace/Workspace.js';\nimport Drawer from './drawer/Drawer.js';\nimport Viewport from './viewport/Viewport.js';\nimport Tutorial from 'tutorial/Tutorial.js';\n\nimport InputAdapter from 'system/inputadapter/InputAdapter.js';\nimport Notifications from 'system/notification/Notifications.js';\nimport NotificationView from 'system/notification/components/NotificationView.js';\nimport UndoManager from 'system/undomanager/UndoManager.js';\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //Create references\n    this.container = null;\n    this.workspace = null;\n    this.viewport = null;\n    this.drawer = null;\n    this.toolbar = null;\n\n    //These need to be initialized before module\n    this.inputAdapter = new InputAdapter();\n    this.inputAdapter.getViewport()\n      .setMinScale(Config.MIN_SCALE)\n      .setMaxScale(Config.MAX_SCALE)\n      .setOffsetDamping(Config.SMOOTH_OFFSET_DAMPING);\n\n    this.undoManager = new UndoManager();\n\n    this._module = new FSAModule(this);\n    /*\n    Modules['fsa'].fetch((Module) => {\n      const prevModule = this._module;\n      if (prevModule && this._init)\n      {\n        prevModule.destroy(this);\n      }\n\n      this._module = new Module(this);\n\n      if (this._init)\n      {\n        this._module.initialize(this);\n      }\n    });\n    */\n\n    this.hotKeys = new HotKeys();\n    this.tutorial = new Tutorial();\n\n    this.state = {\n      isOpen: true,\n      isDangerous: false,\n      isFullscreen: false,\n      isWaitingForFile: false\n    };\n\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n\n    this._init = false;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //Initialize input adapter\n    const workspaceDOM = this.workspace.ref;\n    this.inputAdapter.initialize(workspaceDOM);\n\n    //Initialize the module...\n    const module = this.getCurrentModule();\n    module.initialize(this);\n\n    this.hotKeys.initialize(this);\n\n    //Upload drop zone\n    workspaceDOM.addEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.addEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.addEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.addEventListener(\"dragleave\", this.onDragLeave);\n\n    //Begin tutorial\n    this.tutorial.start(this);\n\n    LocalSave.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n\n    this._init = true;\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    LocalSave.unregisterHandler(this);\n\n    LocalSave.terminate();\n\n    this.hotKeys.destroy();\n\n    this._module.destroy(this);\n\n    this.inputAdapter.destroy();\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.removeEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.removeEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.removeEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.removeEventListener(\"dragleave\", this.onDragLeave);\n\n    this._init = false;\n  }\n\n  onLoadSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const data = LocalSave.loadFromStorage(\"graph-\" + moduleName);\n    if (data)\n    {\n      const exporter = this._module.getDefaultGraphExporter();\n      exporter.importFromData(data, this);\n    }\n  }\n\n  onAutoSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const exporter = this._module.getDefaultGraphExporter();\n    const data = exporter.exportToData(this);\n    LocalSave.saveToStorage(\"graph-\" + moduleName, data);\n  }\n\n  //Called to prevent default file open\n  onDragOver(ev)\n  {\n    ev.preventDefault();\n  }\n\n  onDragEnter(ev)\n  {\n    ev.preventDefault();\n\n    //Change state\n    this.setState({ isWaitingForFile: true });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: Viewport.DANGEROUS\n      };\n    });\n  }\n\n  onDragLeave(ev)\n  {\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n  }\n\n  onFileDrop(ev)\n  {\n    //Prevent file from being opened\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n\n    let fileBlob = null;\n    if (ev.dataTransfer.items)\n    {\n      const length = ev.dataTransfer.items.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = ev.dataTransfer.items[0];\n        if (file.kind === 'file')\n        {\n          fileBlob = file.getAsFile();\n        }\n      }\n    }\n    else\n    {\n      const length = ev.dataTransfer.files.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        fileBlob = ev.dataTransfer.files[0];\n      }\n    }\n\n    if (fileBlob)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(fileBlob, this)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n        });\n    }\n\n    if (ev.dataTransfer.items)\n    {\n      ev.dataTransfer.items.clear();\n    }\n    else\n    {\n      ev.dataTransfer.clearData();\n    }\n  }\n\n  openDrawer(full=null)\n  {\n    if (typeof full === 'boolean')\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true, isFullscreen: full };\n      });\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true };\n      });\n    }\n  }\n\n  closeDrawer()\n  {\n    this.setState((prev, props) => {\n      return { isOpen: false };\n    });\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.isOpen;\n  }\n\n  shouldHideContent()\n  {\n    return this.state.isFullscreen && this.state.isOpen;\n  }\n\n  getCurrentModule()\n  {\n    return this._module;\n  }\n\n  getInputController()\n  {\n    return this._module.getInputController();\n  }\n\n  getGraphController()\n  {\n    return this._module.getGraphController();\n  }\n\n  getMachineController()\n  {\n    return this._module.getMachineController();\n  }\n\n  getInputAdapter()\n  {\n    return this.inputAdapter;\n  }\n\n  getUndoManager()\n  {\n    return this.undoManager;\n  }\n\n  render()\n  {\n    const currentModule = this._module;\n    const screen = this.workspace ? this.workspace.ref : null;\n\n    if (this._init)\n    {\n      this.inputAdapter.update();\n      currentModule.update(this);\n    }\n\n    return <div className=\"app-container\" ref={ref=>this.container=ref}>\n      <Toolbar ref={ref=>this.toolbar=ref}\n        app={this}\n        currentModule={currentModule}\n        drawer={this.drawer}/>\n\n      <NotificationView notificationManager={Notifications}/>\n\n      <div className=\"workspace-container\">\n        <div className={\"workspace-main\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\",\n            opacity: this.state.isWaitingForFile ? \"0.1\" : \"1\"\n          }}>\n\n          <Workspace ref={ref=>this.workspace=ref}\n            app={this}\n            currentModule={currentModule}/>\n        </div>\n\n        <div className={\"workspace-viewport\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\"\n          }}>\n\n          <Viewport ref={ref=>this.viewport=ref}\n            app={this}\n            currentModule={currentModule}\n            screen={screen}/>\n        </div>\n\n        <div className={\"workspace-drawer\" +\n          (this.state.isOpen ? \" open\" : \"\") +\n          (this.state.isFullscreen ? \" fullscreen\" : \"\")}>\n\n          <Drawer ref={ref=>this.drawer=ref}\n            app={this}\n            currentModule={currentModule}\n            toolbar={this.toolbar}/>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n","import React from 'react';\n\nclass Logo extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg version=\"1.1\" id={this.props.id} xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n    \t viewBox=\"0 0 300 100\">\n      <style type=\"text/css\">\n      {\n      \t`.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}\n      \t.st1{fill:#FFC82C;stroke:#7E55F3;stroke-width:2;stroke-miterlimit:10;}\n      \t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n      \t.st3{font-family:'PTSans-Regular';}\n      \t.st4{font-size:90px;}\n      \t.st5{fill:none;}`\n      }\n      </style>\n      <path className=\"st0\" d=\"M43.7,20.1c0-9.4-8.5-17.1-19.1-17.1\"/>\n      <circle className=\"st1\" cx=\"44.1\" cy=\"45.3\" r=\"29.6\"/>\n      <polygon className=\"st2\" points=\"44.1,42.1 20.2,83.5 68,83.5 \"/>\n      <text transform=\"matrix(1 0 0 1 74.1533 77.1901)\" className=\"st3 st4\">flap.js</text>\n      <path className=\"st5\" d=\"M40.9,89c0,2.9,73.6,5.2,164.6,5.2\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M42.4,83.9c0,7,73,12.6,163.1,12.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st0\" d=\"M227.6,72.1c0,13.7-22.7,24.8-50.7,24.8\"/>\n      <path className=\"st0\" d=\"M6,20.1C6,10.7,14.5,3.1,25,3.1\"/>\n      <line className=\"st0\" x1=\"6\" y1=\"20.1\" x2=\"6\" y2=\"77.2\"/>\n      <path className=\"st0\" d=\"M6,77.2C6,88.1,27,96.9,53,96.9\"/>\n      <line className=\"st0\" x1=\"57.3\" y1=\"96.9\" x2=\"177.4\" y2=\"96.9\"/>\n      <line className=\"st0\" x1=\"53\" y1=\"96.9\" x2=\"64.5\" y2=\"96.9\"/>\n    </svg>;\n  }\n}\n\nexport default Logo;\n","import React from 'react';\nimport './Quote.css';\n\nclass Quote extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className=\"quote-container\">\n      <div className=\"quote\">\n        {this.props.value}\n      </div>\n      <div className=\"subquote\">\n        {this.props.label}\n      </div>\n    </div>;\n  }\n}\n\nexport default Quote;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './LandingPage.css';\n\nimport Router from 'router.js';\n\nimport Logo from './Logo.js';\nimport Quote from './Quote.js';\n\nimport App from 'content/App.js';\n\nconst LAUNCH_BUTTON_TEXT = \"Launch Workspace\";\nconst SMALL_LAUNCH_BUTTON_TEXT = \"Get Started!\";\nconst SMALLER_LAUNCH_BUTTON_TEXT = \"Proceed.\";\nconst TUTORIAL_BUTTON_TEXT = \"= Want to try our awesome tutorial? =\";\n\nconst QUOTES = [\n  [\"Explore what it means to be \\'computable\\'.\", \"- Prof. Mia Minnes\"],\n  [\"Lush has an interactive background in Mozilla\", \"- David\"],\n  [\"Good almost afternoon (I totally didnt just wake up).\", \"- Noah\"],\n  [\"RONALDO IS MY GOD\", \"- David\"],\n  [\"If you dream it, you can do it.\", \"- Walt Disney\"],\n  [\"Never, never, never give up.\", \"- Winston Churchill\"],\n  [\"Don't wait. The time will never be just right.\", \"- Napolean Hill\"],\n  [\"I can, therefore I am.\", \"- Simone Wei\"],\n  [\"Turn your wounds into wisdom.\", \"- Oprah Winfrey\"],\n  [\"Believe you can and you're halfway there.\", \"- Theodore Roosevelt\"],\n  [\"80% of success is showing up.\", \"- Woody Allen\"],\n  [\"A jug fills drop by drop.\", \"- Buddha\"],\n  [\"If you have never failed you have never lived.\", \"- Human\"],\n  [\"Dream big and dare to fail.\", \"- Norman Vaughan\"],\n  [\"Have faith in yourself and in the future.\", \"- Ted Kennedy\"],\n  [\"It's kind of fun to do the impossible.\", \"- Walt Disney\"],\n  [\"Find out who you are and do it on purpose.\", \"- Dolly Parton\"],\n  [\"The only journey is the one within.\", \"- Rainer Maria Rilke\"],\n  [\"Every moment is a fresh beginning.\", \"- T.S. Eliot\"],\n  [\"Be willing to be a beginner every single morning.\", \"- Meister Eckhart\"]\n];\nconst QUOTE_INDEX = Math.floor(Math.random() * QUOTES.length);\nconst [CONTENT_QUOTE, CONTENT_SUBQUOTE] = QUOTES[QUOTE_INDEX];\n\nconst TUTORIAL_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst HELP_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst ABOUT_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/README.md\";\nconst REPORT_BUG_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/issues\";\nconst GITHUB_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/\";\n\nconst PROFMINNES_LINK = \"http://cseweb.ucsd.edu/~minnes/\";\nconst MAYA_LINK = \"https://www.linkedin.com/in/maya-bello-6b8637a7/\";\nconst NOAH_LINK = \"https://www.linkedin.com/in/noah-solomon-9a8526129/\";\nconst DAVID_LINK = \"https://www.linkedin.com/in/osunadavid/\";\nconst ERIK_LINK = \"https://www.linkedin.com/in/xuanqiang-zhao-364225153/\";\nconst LIXUAN_LINK = \"https://www.linkedin.com/in/lixuan-lang-3ba206143/\";\nconst ANDREW_LINK = \"https://www.linkedin.com/in/andrew-kuo-790243132/\";\nconst SETH_LINK = \"\";\nconst RAVNEET_LINK = \"\";\n\nclass LandingPage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.footer = null;\n    this.returnHome = null;\n\n    this.onLaunchButton = this.onLaunchButton.bind(this);\n    this.onTutorialButton = this.onTutorialButton.bind(this);\n    this.onReturnHomeButton = this.onReturnHomeButton.bind(this);\n    this.onReportBugButton = this.onReportBugButton.bind(this);\n    this.onAboutButton = this.onAboutButton.bind(this);\n    this.onHelpButton = this.onHelpButton.bind(this);\n    this.onGithubButton = this.onGithubButton.bind(this);\n  }\n\n  componentDidMount()\n  {\n    //Parallax effect for footer\n    window.onscroll = (e) => {\n      let height = Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight\n      ) - window.innerHeight;\n      let scroll = window.pageYOffset;\n      const value = Math.round(height - scroll) / 5;\n\n      if (this.footer && this.returnHome)\n      {\n        this.footer.style.bottom = value + \"px\";\n        this.returnHome.style.opacity = (scroll / height);\n      }\n    };\n  }\n\n  onLaunchButton(e)\n  {\n    //import(/* webpackChunkName: \"content\" */ 'content/App.js').then(({ default: _ }) => { Router.routeTo( _ ); });\n    Router.routeTo(App);\n  }\n\n  onTutorialButton(e)\n  {\n    const newTab = window.open(TUTORIAL_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onReturnHomeButton(e)\n  {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  onReportBugButton(e)\n  {\n    const newTab = window.open(REPORT_BUG_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onAboutButton(e)\n  {\n    const newTab = window.open(ABOUT_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onHelpButton(e)\n  {\n    const newTab = window.open(HELP_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onGithubButton(e)\n  {\n    const newTab = window.open(GITHUB_LINK, '_blank');\n    newTab.focus();\n  }\n\n  render()\n  {\n    let launchText;\n\n    //Smallest\n    if (window.matchMedia(\"(max-width: 400px)\").matches)\n    {\n      launchText = \"\";\n    }\n    //Smaller\n    else if (window.matchMedia(\"(max-width: 760px)\").matches)\n    {\n      launchText = SMALLER_LAUNCH_BUTTON_TEXT;\n    }\n    //Small\n    else if (window.matchMedia(\"(max-width: 68em)\").matches)\n    {\n      launchText = SMALL_LAUNCH_BUTTON_TEXT;\n    }\n    //Default\n    else\n    {\n      launchText = LAUNCH_BUTTON_TEXT;\n    }\n\n    return <div className=\"landing-container\">\n\n      <div className=\"content-container\">\n\n        {/* HEADER*/}\n        <header>\n          <Logo id=\"logo\"/>\n        </header>\n\n        {/* CONTENT */}\n        <div className=\"content\">\n          <div className=\"content-quote-container\">\n            <Quote value={CONTENT_QUOTE} label={CONTENT_SUBQUOTE} />\n          </div>\n          <div className=\"launch-container\">\n            <div className=\"set-container\">\n              <span className=\"openset\">{\"{\"}</span>\n              <button id=\"launch-button\" onClick={this.onLaunchButton}>\n                {launchText}\n              </button>\n              <span className=\"closeset\">{\"}\"}</span>\n            </div>\n            <div id=\"tutorial-button-container\">\n              <button id=\"tutorial-button\" onClick={this.onTutorialButton}>\n                {TUTORIAL_BUTTON_TEXT}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div ref={ref=>this.returnHome=ref} id=\"return-home\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n            onClick={this.onReturnHomeButton}>\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* FOOTER */}\n      <footer ref={ref=>this.footer=ref}>\n        <div className=\"utility\">\n          <div><a className=\"info\" onClick={this.onReportBugButton}>Report a Bug</a></div>\n          <div><a className=\"info\" onClick={this.onAboutButton}>About</a></div>\n          <div><a className=\"info\" onClick={this.onHelpButton}>Help</a></div>\n        </div>\n        <div className=\"credits\">\n          <span className=\"space\"></span>\n          <span className=\"left\">\n            <div>Professor</div>\n            <a className=\"nobreak\" onClick={()=>window.open(PROFMINNES_LINK, '_blank').focus()}>Mia Minnes</a>\n          </span>\n          <span className=\"right\">\n            <div>Developers</div>\n            <a onClick={()=>window.open(ANDREW_LINK, '_blank').focus()}>Andrew</a>\n            <a onClick={()=>window.open(LIXUAN_LINK, '_blank').focus()}>Lixuan</a>\n            <a onClick={()=>window.open(RAVNEET_LINK, '_blank').focus()}>Ravneet</a>\n            <a onClick={()=>window.open(SETH_LINK, '_blank').focus()}>Seth</a>\n            <div>+</div>\n            <a onClick={()=>window.open(MAYA_LINK, '_blank').focus()}>Maya</a>\n            <a onClick={()=>window.open(NOAH_LINK, '_blank').focus()}>Noah</a>\n            <a onClick={()=>window.open(DAVID_LINK, '_blank').focus()}>David</a>\n            <a onClick={()=>window.open(ERIK_LINK, '_blank').focus()}>Erik</a>\n          </span>\n          <span className=\"space\"></span>\n        </div>\n\n        <div>\n          <a className=\"info\" onClick={this.onGithubButton}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n            </svg>\n            Find it on <b>GitHub</b>\n          </a>\n        </div>\n\n        <div className=\"subtitle-container\">\n          <div className=\"subtitle\">\n            {\"\\u00A9 2018 University of California, San Diego. All rights reserved.\"}\n          </div>\n          <div className=\"subtitle\">\n            <label>{\"Thank you for reading me! Stay amazing!\"}</label>\n          </div>\n        </div>\n      </footer>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(LandingPage);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//Router: imports\nimport Router from 'router.js';\nimport App from 'content/App.js';\nimport LandingPage from 'landing/components/LandingPage.js';\n//Config: imports\nimport Config from 'config.js';\nimport { loadConfig, saveConfig } from 'config.js';\nconst AUTOSAVE_CONFIG = true;\n//LocalSave: imports\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = true;\n\n//Setup viewport\nwindow.addEventListener('load', (event) => {\n  console.log(\"Preparing for \\'\" + process.env.NODE_ENV + \"\\' environment...\");\n  loadApplication();\n  window.requestAnimationFrame(updateApplication);\n});\n\n//Warn user before exit\nwindow.addEventListener('beforeunload', (event) => {\n  //Config: Only save if changes were made\n  if (AUTOSAVE_CONFIG) saveConfig();\n\n  if (SHOULD_WARN_USERS_ON_EXIT)\n  {\n    const message = I18N.toString(\"alert.window.exit\");\n    event = event || window.event;\n    // For IE and Firefox\n    if (event) event.returnValue = message;\n\n    //For Safari\n    return message;\n  }\n});\n\n//Tell the client that an update is available\nwindow.isUpdateAvailable.then(hasUpdate => {\n  if (hasUpdate)\n  {\n    console.log(\"[App] Found update for version \" + process.env.VERSION + \"...\");\n    window.alert(\"*** New update available! *** \\n Please restart the browser.\");\n  }\n});\n\n//Setup application\nconst FRAMES_PER_SECOND = 60;\nvar prevtime = 0;\nvar root;\nvar dt;\n\n//Load application\nfunction loadApplication()\n{\n  loadConfig();\n  root = document.getElementById(\"root\");\n  //import(/* webpackChunkName: \"landing\" */ 'landing/components/LandingPage.js').then(({ default: _ }) => Router.routeTo( _ ));\n\n  //This should be the same as the one referred to by OptionsPanel\n  if (LocalSave.getStringFromStorage(\"skipWelcome\") == \"true\")\n  {\n    Router.routeTo(App);\n  }\n  else\n  {\n    Router.routeTo(LandingPage);\n  }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n  dt = (time - prevtime) / FRAMES_PER_SECOND;\n  {\n    const page = Router.getCurrentPage();\n    if (page)\n    {\n      ReactDOM.render(React.createElement(page), root);\n    }\n  }\n  prevtime = time;\n  window.requestAnimationFrame(updateApplication);\n}\n"],"sourceRoot":""}